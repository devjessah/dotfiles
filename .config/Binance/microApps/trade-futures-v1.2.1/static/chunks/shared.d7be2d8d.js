(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[3712],{F4Cb:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetsContent:()=>q,Label:()=>D,default:()=>W});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("O94r"),s=r.n(l),c=r("Zl10"),u=r.n(c),d=r("XVzo"),m=r("w7Tp"),p=r("wGPX"),f=r("ka4r"),g=r("/yzf"),y=r("0RPJ"),b=r("RkbI"),h=r("xt2t"),v=r("cPln"),x=r("9JzQ"),k=r("klBV"),S=r("8uyB"),P=r("VM/Z"),T=r("LcTY"),C=r("S24M"),M=r("FOuV"),Z=r("8Eqx"),w=r("SJeZ"),I=r("rdEq"),E=r("hfnl"),N=r("z4Ks"),A=r("UIpo");const R={position:"absolute",zIndex:999,top:`-${A.Jy}px`,display:"inline-flex",alignItems:"center",justifyContent:"flex-end",height:`${A.Jy}px`,mr:"24px",cursor:"pointer",right:"-10px"},O={position:"absolute",zIndex:999,top:`-${A.Jy}px`,right:"16px",display:"flex",alignItems:"center",justifyContent:"flex-end",height:`${A.Jy}px`,cursor:"pointer"},L={".asset-label":{display:"flex",alignItems:"center",color:"t.primary"}},V={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",overflowY:"auto",maxHeight:"193px",".asset-option":{padding:"4px 16px",color:"t.primary","&:hover":{bg:"line"},"&.active":{color:"t.yellow"},fontSize:"12px"}};var F=o().createElement;const D=(0,i.forwardRef)(((e,t)=>{let{children:r}=e,i=(0,a.Z)(e,["children"]);return F(d.Z,Object.assign({variant:"default",colorStyle:"secondary",sz:"tiny",sx:{flex:1,mr:"8px",fontWeight:"normal",":last-of-type":{mr:"0"}},ref:t},i),r)})),_=({balance:e,onChange:t,curAsset:r})=>{const a=Object.values(e);return F(m.Z,{sx:L},F(p.ZP,{trigger:"hover",enablePortal:!0,overlay:F(m.Z,{sx:V},a.map((e=>{const{asset:a}=e||{};return F("div",{className:s()({"asset-option":!0,active:a===r}),key:a,onClick:()=>{t(a)}},a)})))},F("div",{className:"asset-label"},r,F(b.Z,{ml:"4px",color:"t.third",size:16}))))},B=o().memo((({curAsset:e,balance:t,setCurAsset:r,showSelector:a})=>{const i=(0,w.C3)()===P.UW,{isIPad:o}=(0,k.Fs)();return F(m.Z,{sx:o?O:R},a&&F(_,{curAsset:e,balance:t,onChange:r}),i&&F(h.Z,{sx:{color:"t.yellow200",border:"1px solid",borderColor:"t.yellow200",cursor:"pointer",borderRadius:"2px",fontSize:"16px",ml:"16px"},onClick:()=>{T.T.emit(T.F.OPEN_TRANSFER_MODAL,e)}}))}),(function(e,t){const{curAsset:r,balance:a,setCurAsset:i}=e,{curAsset:o,balance:n,setCurAsset:l}=t,s=Object.keys(a).join(),c=Object.keys(n).join();return r===o&&i===l&&s===c})),z=o().memo((({getFutI18n:e,futUrlConfig:t,locale:r,disabled:a,curAsset:i})=>F(f.Z,{sx:{justifyContent:"space-between",pt:"6px"}},F(D,{onClick:()=>{let e=(0,S.CN)(t.BUYING_URL,{locale:r,crypto:i});e=(0,S.CN)(t.BUYING_URL_ELECTRON,{crypto:i}),window.open(e)},disabled:a},e("buy-crypto",{defaultValue:"Buy Crypto"})),F(D,{onClick:()=>T.T.emit(T.F.OPEN_CONVERT_MODAL),disabled:a,"data-testid":"orderform-convert-button"},e("convert",{defaultValue:"Convert"})),F(D,{onClick:()=>T.T.emit(T.F.OPEN_TRANSFER_MODAL,i),disabled:a,"data-testid":"orderform-transfer-button"},e("transfer",{defaultValue:"Transfer"}))))),K=o().memo((({marginPrecision:e,marginAsset:t})=>{const r=(0,w.Gb)(t);return F(g.Z,{color:"t.primary"},(0,y.GW)(r||0,e,!0)," ",t)})),q=o().memo((({isEmptyBalance:e,loading:t,getFutI18n:r,walletBalance:a,marginPrecision:n,quoteAsset:l})=>{const s=(0,i.useMemo)((()=>F(f.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},F(I.m,{tip:r("tradeHistory-positions-walletBalanceTip",{defaultValue:""})},r("tradeHistory-positions-walletBalanceLabel",{defaultValue:"Wallet Balance"})),F(g.Z,{color:"t.primary"},(0,y.GW)(a||0,n,!0)," ",l))),[r,l,n,a]);return F(o().Fragment,null,!e&&!t&&F(m.Z,{mt:"16px"},s,F(f.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},F(I.m,{tip:r("tradeHistory-positions-unrealizedPnlTip",{defaultValue:""})},r("tradeHistory-positions-unrealizedPNLLabel",{defaultValue:"Unrealized PNL"})),F(K,{marginPrecision:n,marginAsset:l}))),e&&!t&&F(v.Z,{showIcon:!0,mt:"12px",flexDirection:"row",variant:"warning"},r("TransferAssetToTrading",{defaultValue:"Please transfer assets into futures account to start trading."})))})),U=({noButtons:e})=>{var t,r;const{getI18n:a,i18n:{language:o}}=(0,w.yk)(),l=(0,k._n)(),{assetMode:s=!1}=(0,w.F7)(),{isExistFutureAccount:c}=(0,k.Pc)(),d=(0,n.useDispatch)(),p=(0,k.Oh)(),f=(0,w.KQ)(),g=(0,w.Kc)("loading"),[,[y,b]]=(0,k.z4)(),{0:h,1:v}=(0,i.useState)(b),{isMobile:S}=(0,k.Fs)(),I=Object.values(f),A=I.every((({walletBalance:e})=>!e)),R=!s&&I.some((({walletBalance:e})=>e<0)),[O,L]=u()(I,(({asset:e})=>"BUSD"===e||"USDT"===e)),V=s&&O.some((({walletBalance:e})=>e<0))&&I.every((({walletBalance:e})=>e<=0));return(0,i.useEffect)((()=>{v(b),d.transferAssets.updateState({transferAsset:b})}),[b,d]),S?null:F(m.Z,{fontSize:"12px",px:"16px",sx:{position:"relative"}},F(B,{getFutI18n:a,curAsset:h,balance:f,setCurAsset:v,showSelector:l}),F(Z.U,null),e||!P.Jg&&F(z,{getFutI18n:a,futUrlConfig:M.x,locale:o,base:y,curAsset:h,disabled:!l||!c}),!P.Jg&&(R||V)&&F(N.Z,null),F(x.Z,{isJoinMargin:s,walletBalanceList:I,autoAssetExchangeInfo:p,onTransfer:()=>T.T.emit(T.F.OPEN_TRANSFER_MODAL,h),onConvert:()=>T.T.emit(T.F.OPEN_CONVERT_MODAL),pageName:"um_trading",sensorsTrack:C.j}),F(q,{isEmptyBalance:A,loading:g,getFutI18n:a,walletBalance:null===(t=f[h])||void 0===t?void 0:t.walletBalance,marginPrecision:4,quoteAsset:h,bnbWalletBalance:null===(r=f.BNB)||void 0===r?void 0:r.walletBalance,locale:o}),l&&!A&&!g&&F(E.Z,null))},W=o().memo(U)},"wkn/":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r("/SIk"),i=r.n(a),o=r("klBV"),n=r("0hOy"),l=r("cPln"),s=r("U0yl"),c=r("SJeZ"),u=i().createElement;const d=()=>{const{0:e,1:t}=(0,a.useState)(!1),[,[r,i]]=(0,o.z4)(),d={root:{borderRadius:0,marginTop:"1px",padding:"8px 16px"},link:{color:(0,o.Fg)().isLight?"t.yellow300":"t.yellow200",marginLeft:2}};const{getI18n:m}=(0,s.ZK)("futures-battle","futures-ui"),p=`/${(0,o.tZ)()}/futures-activity/battle/um/${r}_${i}`;(0,c.d2)();const f=(0,c.E5)();(0,a.useEffect)((()=>{t(f.inBattle)}),[f.inBattle]);const g=(0,a.useCallback)((()=>{t(!1)}),[]);return e&&u(l.Z,{variant:"warning",closable:!0,onClose:g,sx:d.root},m("You-Are-In-A-Battle"),u(n.Z,{sx:d.link,href:p},m("View-Battle-Page")))}},BkSH:(e,t,r)=>{"use strict";r.d(t,{oF:()=>a,DD:()=>i,uf:()=>o,Yl:()=>n,Tw:()=>l,nU:()=>s});const a={baseAsset:"BTC",quoteAsset:"USDT",pricePrecision:2,quantityPrecision:2,tickSizePrecision:2},i={LONG:"LONG",SHORT:"SHORT"},o="-",n={ISOLATED:"ISOLATED",CROSS:"CROSS"},l={ONEWAY:"ONEWAY",HEDGE:"HEDGE"},s=1e10},dDuV:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var a=r("klBV"),i=r("w7Tp"),o=r("hLV7"),n=r("/SIk"),l=r.n(n);const s=Math.round(window.devicePixelRatio||1),c=240*s,u=140*s,d=5*s,m=5*s,p=5*s,f=25*s,g=230*s,y=110*s;function b({ref:e,name:t,fg:r,bg:a,min:i,value:o,max:l,limit:b}){const h=(0,n.useRef)();(0,n.useEffect)((()=>{if(!e.current)return;e.current.width=c,e.current.height=u;const t=e.current.getContext("2d");t&&(t.font=`bold ${16*s}px Helvetica,Arial,sans-serif`,t.textBaseline="top",t.fillStyle=a,t.fillRect(0,0,c,u),t.fillStyle=r,t.fillText("FPS",d,m),t.fillRect(p,f,g,y),t.fillStyle=a,t.globalAlpha=.9,t.fillRect(p,f,g,y),h.current=t)}),[e,r,a]),(0,n.useEffect)((()=>{if(!h.current||!e.current)return;const n=h.current;n.fillStyle=a,n.globalAlpha=1,n.fillRect(0,0,c,f),n.fillStyle=r,n.fillText(`${o||"--"} ${t} (${Math.round(i||0)}-${Math.round(l||0)})`,d,m),n.drawImage(e.current,p+s,f,g-s,y,p,f,g-s,y),n.fillRect(p+g-s,f,s,y),n.fillStyle=a,n.globalAlpha=.9,n.fillRect(p+g-s,f,s,Math.round((1-(o||0)/b)*y))}),[e,t,r,a,i,o,l,b])}const h={min:void 0,value:void 0,max:void 0},v=()=>(window.performance||Date).now(),x=v();function k(){const{0:e,1:t}=(0,n.useState)(h),{0:r,1:a}=(0,n.useState)(h),i=(0,n.useRef)(x),o=(0,n.useRef)(x),l=(0,n.useRef)(0);return(0,n.useEffect)((()=>{let e;const r=()=>{i.current=v(),(()=>{l.current++;const e=v();if(e>=o.current+1e3){const r=Math.round(1e3*l.current/(e-o.current));if(a((e=>({min:e.min?Math.min(e.min,r):r,max:e.max?Math.max(e.max,r):r,value:r}))),o.current=e,l.current=0,window.performance&&window.performance.memory){const{memory:e}=window.performance,r=Math.round(e.usedJSHeapSize/1048576);t((e=>({min:e.min?Math.min(e.min,r):r,max:e.max?Math.max(e.max,r):r,value:r})))}}})(),e=requestAnimationFrame(r)};return e=requestAnimationFrame(r),()=>{e&&cancelAnimationFrame(e)}}),[]),{memory:e,fps:r}}var S=l().createElement;const P=1048576;const T=function(){const e=(0,n.useRef)(null),t=(0,n.useRef)(null),{fps:r,memory:a}=k();return b({ref:e,name:"FPS",fg:"#0ff",bg:"#002",min:r.min,value:r.value,max:r.max,limit:100}),b({ref:t,name:"MB",fg:"#f08",bg:"#201",min:a.min,value:a.value,max:a.max,limit:window.performance&&window.performance.memory?window.performance.memory.jsHeapSizeLimit/P:4294967296}),S(i.Z,{pt:"md"},S(o.Z,{columns:[1,3],gap:24},S("canvas",{ref:e,id:"fpsCanvas",style:{width:"240px",height:"140px"}}),S("canvas",{ref:t,id:"memoryCanvas",style:{width:"240px",height:"140px"}})))};var C=r("ka4r"),M=r("mE7Z"),Z=l().createElement;function w(){const{isLight:e}=(0,a.Fg)(),{0:t,1:r}=(0,n.useState)(!1);return Z(C.Z,{sx:{width:"fit-content",minHeight:"40px",position:"fixed",bottom:"140px",right:"24px",zIndex:9999}},Z(i.Z,{sx:{display:"grid",placeItems:"center",width:"40px",height:"40px",borderRadius:"50%",color:"primary",backgroundColor:"button.downloadBg",cursor:"pointer",overflow:"hidden",boxShadow:e?"0px 0px 3px rgba(0, 0, 0, 0.05), 0px 1px 10px rgba(0, 0, 0, 0.08)":"0px 0px 1px rgba(20, 21, 26, 0.1), 0px 3px 6px rgba(71, 77, 87, 0.04), 0px 1px 2px rgba(20, 21, 26, 0.04)"},onClick:()=>r((e=>!e))},Z(M.Z,{sx:{width:"100%",height:"100%"}})),t&&Z(i.Z,{sx:{position:"absolute",right:"24px",bottom:"-120px"}},Z(T,null)))}},OhiR:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var a=r("5vwO"),i=r("GpFh"),o=r("w7Tp"),n=r("ka4r"),l=r("8L7i"),s=r("5Jk8"),c=r("LL18"),u=r("CE5Z"),d=r("Y+MU"),m=r("/SIk"),p=r.n(m),f=r("XtDi"),g=r("klBV"),y=r("2rU8"),b=r("1U9V"),h=r("SJeZ");function v(e,t,r,a){const i=e/a-1;return Math.round(r*(i**3+1)+t)}const x=[];function k(e,t,r,a,i){let o=x.filter((({el:t})=>t===e))[0];if(o||(o={el:e,done:!0},x.push(o)),o.t=1,o.d=Math.ceil(a/1e3*60),o.originX=e===window?window.scrollX:e.scrollLeft,o.offsetX=t,o.originY=e===window?window.scrollY:e.scrollTop,o.offsetY=r,!o.done)return;const n=()=>{const{t:e,d:t,originX:r,originY:a,offsetX:l,offsetY:s,el:c}=o;if(e<t){const i=v(e,r,l,t),u=v(e,a,s,t);o.t+=1,c===window?window.scrollTo(i,u):(c.scrollLeft=i,c.scrollTop=u),window&&window.requestAnimationFrame(n)}else o.done=!0,c===window?window.scrollTo(r+l,a+s):(c.scrollLeft=r+l,c.scrollTop=a+s),i&&window&&window.requestAnimationFrame(i)};o.done=!1,n()}var S=r("W4bq"),P=r("Dvpw"),T=r("EZ8p"),C=p().createElement;const M=({height:e,width:t,children:r})=>C(o.Z,{__css:{position:"relative",height:`${e}px`,width:t?`${t}px`:"100%","> div::-webkit-scrollbar":{width:"0",height:"0"}}},r),Z=(0,m.memo)((function({symbol:e,change:t,delivery:r=!1,symbolText:a,deliveryDateFormat:i}){const o=(0,h.G3)(),n=(0,h.d0)(),l=(0,m.useCallback)((()=>{n({isBlank:o!==r,stateSymbol:e,isDeliveryColumn:r})}),[n,r,o,e]);return C("div",{className:"favorite-item",onClick:l},C("div",{className:"favorite-item-symbol"},C("span",null,a,!!i&&C("span",{className:"favorite-item-date"},i))),C(y.PH,{className:"favorite-item-change "+(Number(t>0)?"buy":"sell")},`${t}%`))})),w=(0,m.memo)((()=>C(n.Z,{className:"draggableHandle",sx:{pl:"16px",pr:"16px",color:"primary"}},C(l.Z,{size:16,color:"primary"})))),I=({onRemove:e,sx:t})=>{const{nextTickers:r}=(0,S.Pj)(),l=(0,b.FB)(r,"symbol"),p=(0,h.s4)(),{getI18n:y}=(0,h.yk)(),v=p.map((e=>{const{symbol:t}=e,r=l[t]||{},o=(0,a.Z)((0,a.Z)({},e),r),{difference:n=0}=o,s=(0,i.Z)(o,["difference"]);return(0,a.Z)({symbol:t,change:n},s)})),{ref:x,setScroll:I,scrollLeft:E,scrollRight:N}=(()=>{const e=(0,m.useRef)(null),{0:t,1:r}=(0,m.useState)(!1),{0:a,1:i}=(0,m.useState)(!1),o=(0,m.useCallback)((()=>{var t,a;e.current&&(r(!(null===(t=e.current)||void 0===t||!t.scrollLeft)),i(e.current.scrollWidth>e.current.clientWidth+(null===(a=e.current)||void 0===a?void 0:a.scrollLeft)))}),[e]);return(0,m.useMemo)((()=>({ref:e,setScroll:o,scrollLeft:t,scrollRight:a})),[t,a,o])})();(0,m.useEffect)((()=>{I()}),[v,I]);const A="rtl"===(0,g.gm)(),R=(0,m.useCallback)((()=>k(x.current,-300,0,300,I)),[x,I]),O=(0,m.useCallback)((()=>k(x.current,300,0,300,I)),[x,I]),[L,V]=(0,f.Z)(!1),F=(0,m.useCallback)((()=>{V(!0)}),[V]),D=(0,m.useCallback)((()=>{V(!1)}),[V]);return C(n.Z,{sx:(0,a.Z)({pr:3,alignItems:"center",justifyContent:"center",mb:"4px",bg:"moduleBg",height:"100%","& .favorite-item":{display:"flex",cursor:"pointer",position:"relative",minWidth:"unset",px:"8px",py:"10px",flexShrink:0,height:"100%",whiteSpace:"nowrap",color:"t.secondary",justifyContent:"space-around",alignItems:"center","&:hover":{bg:"bg3",color:"t.primary"},"& .favorite-item-symbol":{fontSize:"14px",lineHeight:"16px"},"& .favorite-item-date":{ml:"4px"},"& .favorite-item-change":{marginLeft:"4px",fontSize:"12px","&.buy":{color:"t.buy"},"&.sell":{color:"t.sell"}}}},t)},C(w,null),C(M,null,!A&&E&&C(n.Z,{sx:{position:"absolute",left:"-8px",cursor:"pointer",width:"58px",height:"100%",background:e=>`linear-gradient(to right, ${e.colors.moduleBg} 42.24%,  transparent 95.69%)`,zIndex:"999",alignItems:"center",justifyContent:"flex-start"},onClick:R},C(s.Z,{color:"icons.close",size:20,sx:{"&:hover":{color:"t.third"}}})),C(n.Z,{ref:x,__css:{overflowX:"auto"}},v.map((e=>{const{symbol:t,change:r,isDelivery:a}=e,{symbol:i,deliveryDateFormat:o}=(0,d.H)(e,y);return C(Z,{key:t,symbol:t,change:r,delivery:a,symbolText:i,deliveryDateFormat:o})}))),!A&&N&&C(n.Z,{sx:{position:"absolute",top:"0px",right:"-1px",cursor:"pointer",width:"58px",height:"100%",alignItems:"center",justifyContent:"flex-end",pr:"1px",background:e=>`linear-gradient(to left, ${e.colors.moduleBg} 42.24%,  transparent 95.69%)`},onClick:O},C(c.Z,{color:"icons.close",size:20,sx:{"&:hover":{color:"t.third"}}}))),C(o.Z,{sx:{display:"flex",alignItems:"center",height:"100%",ml:"16px"}},C(u.Z,{size:20,onClick:F,sx:{cursor:"pointer",flexShrink:0,alignItem:"flex-end",color:"icons.close",zIndex:1,"&:hover":{color:"t.third"}}})),e&&C(P.Z,{onRemove:e}),C(T.default,{visible:L,onClose:D}))},E=p().memo(I)},EZ8p:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var a=r("/SIk"),i=r.n(a),o=r("/yzf"),n=r("ka4r"),l=r("w7Tp"),s=r("XVzo"),c=r("xfzF"),u=r("Y+MU"),d=r("eIfy"),m=r.n(d),p=r("SJeZ"),f=r("NcRm"),g=r("aK2L"),y=r("SCfj"),b=i().createElement;const h=(0,f.W6)((()=>b(g.Z,{color:"t.third",sx:{":hover":{color:"t.primary"},":active":{cursor:"grabbing"},cursor:"grab"}}))),v=(0,f.W8)((({symbol:e,contractTypeI18n:t,deliveryDateFormat:r,onPlaceToTop:a})=>b(n.Z,{key:`${e}-${t}`,sx:{gap:1,zIndex:1300},alignItems:"center"},b(l.Z,{flex:1},b(o.Z,{as:"span"},e)," ",b(o.Z,{as:"span",color:"t.third"},t," ",r)),b(l.Z,{flexBasis:"40px",textAlign:"center"},b(y.Z,{onClick:a,color:"t.third",sx:{cursor:"pointer",":hover":{color:"t.primary"}}})),b(l.Z,{flexBasis:"40px",textAlign:"center"},b(h,null))))),x=(0,f.JN)((({children:e})=>b(n.Z,{sx:{gap:3},flexDirection:"column"},e)));var k=r("UGwn"),S=i().createElement;const P=e=>{const{onClose:t,visible:r}=e,{getI18n:i}=(0,p.yk)(),d=(0,a.useRef)(),f=(0,a.useCallback)((()=>d.current),[]),g=(0,p.s4)(),{0:y,1:b}=(0,a.useState)(),h=(0,k.X)(),P=(0,a.useCallback)((({newIndex:e,oldIndex:t})=>{y&&b(m()(y,t,e))}),[y]),T=e=>()=>{y&&b(m()(y,e,0))},C=(0,a.useCallback)((()=>{y&&(h(y),null===t||void 0===t||t())}),[t,h,y]),M=(0,a.useCallback)((()=>{b(g),null===t||void 0===t||t()}),[g,t]);(0,a.useEffect)((()=>(r&&!y&&b(g),()=>{r||b(void 0)})),[g,y,r]);const Z=(0,a.useMemo)((()=>null===y||void 0===y?void 0:y.map((e=>{const{symbol:t,contractTypeI18n:r,deliveryDateFormat:a}=(0,u.H)(e,i);return{symbol:t,contractTypeI18n:r,deliveryDateFormat:a}}))),[i,y]);return S(c.Z,{open:r,mask:!1,title:S(o.Z,{variant:"heading6",as:"h2"},i("favorite-dialog-edit-favorite")),showTitleBottomLine:!1,onCloseIconClick:M,sx:{width:["100%","384px","384px"]},contentSx:{pt:2,px:4,pb:"24px"}},S(n.Z,{flexDirection:"column",height:["auto","440px"],sx:{gap:3}},S(n.Z,{sx:{gap:1,pr:1}},S(o.Z,{color:"t.third",flex:1},i("favorite-dialog-symbol")),S(o.Z,{color:"t.third",flexBasis:"40px",textAlign:"center"},i("favorite-dialog-top")),S(o.Z,{color:"t.third",flexBasis:"40px",textAlign:"center"},i("favorite-dialog-sort"))),S(l.Z,{flex:1,sx:{overflowY:"auto"},ref:d},S(x,{helperContainer:f,onSortEnd:P,useDragHandle:!0},null===Z||void 0===Z?void 0:Z.map(((e,t)=>S(v,Object.assign({index:t,key:`${e.symbol}-${e.contractTypeI18n}`},e,{onPlaceToTop:T(t)})))))),S(n.Z,{sx:{gap:2}},S(l.Z,{flex:1},S(s.Z,{sz:"l",sx:{width:"100%"},variant:"default",colorStyle:"secondary",onClick:M},i("favorite-dialog-cancel"))),S(l.Z,{flex:1},S(s.Z,{sz:"l",sx:{width:"100%"},variant:"default",colorStyle:"primary",onClick:C},i("favorite-dialog-confirm"))))))},T=i().memo(P)},iyIH:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r("/SIk"),i=r.n(a),o=r("ka4r"),n=r("ydHf"),l=r("vZcz"),s=i().createElement;const c=({onRemove:e})=>s(o.Z,{sx:l._3},s(n.Z,{className:"icon",size:8,onClick:e}))},WSil:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("ka4r"),l=r("5p/p"),s=r("klBV"),c=r("EPGa"),u=r("b2zI"),d=r("JPsv"),m=r("YkKT"),p=r("FOuV"),f=r("3pJj"),g=r("cBv1"),y=r("SJeZ"),b=r("iyIH"),h=r("aBAi"),v=r("IewQ"),x=o().createElement;const k=({onRemove:e})=>{const{0:t,1:r}=(0,i.useState)(""),[k]=(0,y.hN)(),{0:S,1:P}=(0,i.useState)(!1),{0:T,1:C}=(0,i.useState)(""),{0:M,1:Z}=(0,i.useState)(!1),w=(0,i.useRef)(null),{0:I,1:E}=(0,i.useState)(0),N=(0,s._n)(),{isExistFutureAccount:A}=(0,s.Pc)(),{placeOrderReducer:R}=(0,y.b9)(),[O,[L,V]]=(0,s.z4)(),F=(0,s.j2)(),{marginAsset:D}=F,{0:_,1:B}=(0,i.useReducer)(R,{isFetching:!1,tradeCont:0,buyCont:0,buyQty:0,sellCont:0,sellQty:0,side:1,positionSide:c.PR.LONG}),{precision:z}=(0,y.ql)({quantity:t}),K=(0,i.useCallback)((()=>{r(""),E(0),Z(!1),C("")}),[]),{side:q,tradeCont:U}=_,W=k?c.RS.OPEN:c.RS.BOTH,H=1===q?p.hp.BUY:p.hp.SELL,$=(0,i.useCallback)((()=>{e&&e()}),[e]),{setMessageInfo:j}=(0,s.YT)(),G=(0,y.h5)(),J=(0,m.F)({afterSubmit:K,overrides:{positionDirection:W,timeInForce:p.rb.GTC,orderType:c.Jm.MARKET,reduceOnly:!1}});return(0,i.useEffect)((()=>{if(S){const{valid:e,message:r}=G(+U);if(!e)return C(r),j({message:r,variant:"error"}),void P(!1);J((0,a.Z)((0,a.Z)({},u.U),{},{buyOrderAmount:+U,sellOrderAmount:+U,side:H,unitAmount:t})),P(!1)}}),[J,H,t,U,S]),(0,i.useEffect)((function(){K()}),[O,K]),(0,i.useEffect)((function(){C("")}),[t]),x(o().Fragment,null,x(n.Z,{sx:{flexDirection:"column"}},x(n.Z,{justifyContent:"center"},x(n.Z,{height:"40px",justifyContent:"stretch",bg:"popupBg",sx:{position:"relative"}},x(l.ZP,{isExistFutureAccount:A,isLoggedIn:N,sz:"small",bg:"popupBg"}),x(f.Z,{positionDirection:W,handleClick:()=>{B({type:v.z,payload:{tradeCont:(null===_||void 0===_?void 0:_.buyCont)||(null===_||void 0===_?void 0:_.buyQty)}}),P(!0)},type:"bid",dispatch:B}),x(g.Z,{quantity:t,setQuantity:e=>{M&&!~e.indexOf("%")&&E(0),r(e)},dispatch:B,onFocus:()=>Z(!0),submitError:T}),x(f.Z,{positionDirection:W,handleClick:()=>{B({type:v.z,payload:{tradeCont:(null===_||void 0===_?void 0:_.sellCont)||(null===_||void 0===_?void 0:_.sellQty)}}),P(!0)},type:"ask",dispatch:B})),x(b.Z,{onRemove:$})),M&&x(h.Z,{percent:I,setPercent:E,precision:z,onChange:e=>{r(`${e}%`)},onClose:()=>{Z(!1),E(0),r("")}})),x(d.Z,{symbol:O,base:L,quote:V,ticker:F,ref:w,marginAsset:D}))};function S({onRemove:e}){const t=(0,s.Pc)(),{isExistFutureAccount:r}=t,{isLoggedIn:a}=(0,s.f0)();return(0,i.useMemo)((()=>r&&a?x(k,{onRemove:e}):null),[e,r,a])}},cBv1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var a=r("/SIk"),i=r.n(a),o=r("ka4r"),n=r("4m5F"),l=r("GpFh"),s=r("lvqx"),c=r("klBV"),u=r("O94r"),d=r.n(u),m=r("BzR9"),p=r("8uyB"),f=i().createElement;const g=/^\d+\.?\d*|%$/,y=/^0+(?=\d)/,b=e=>{let{name:t,value:r,error:i,disabled:o=!1,precision:n,errorText:u,infoText:b,placeholder:h,onChange:v,maxLength:x,autoZero:k=!1,inputRef:S,onFocus:P,onBlur:T}=e,C=(0,l.Z)(e,["name","value","error","disabled","precision","errorText","infoText","placeholder","onChange","maxLength","autoZero","inputRef","onFocus","onBlur"]);const M="rtl"===(0,c.gm)()?d()(m.Z["alb-text-align"]):"",Z=(0,a.useCallback)((e=>{let t=e.target.value;if(!0===k&&"string"===typeof t&&0===t.indexOf(".")&&(t=`0${t}`),!g.test(t)&&""!==t||isNaN(t))return void e.stopPropagation();t=t.replace(y,"");(0,p.N3)(t)>n&&(t=t.replace(new RegExp(`^(\\d*\\.\\d{${n}})\\d*`),"$1")),x&&t.split(".")[0].length>x&&(t=r),0===n&&(t=t.replace(".","")),v&&(t=v(t)),e.target.value=t}),[v,x,n,r,k]),w=(0,a.useCallback)((e=>{const t=e.target.value;g.test(t)||(e.target.value=""),null===T||void 0===T||T(e)}),[T]),I=(0,a.useCallback)((e=>{e.target.value||(e.target.value="")}),[]);return f(s.Z,Object.assign({name:t,ref:S,variant:"inline",className:M,type:"text",value:r,placeholder:h,disabled:o,onClick:I,onChange:Z,onBlur:w,onFocus:P,error:i,infoText:b,errorText:u},C))},h=i().memo(b);var v=r("SJeZ"),x=r("IewQ"),k=r("k2tD"),S=r("vZcz"),P=i().createElement;const T=({inputRef:e,submitError:t,quantity:r="",setQuantity:i,dispatch:l,onFocus:s})=>{const{getI18n:c}=(0,v.yk)(),[u]=(0,v.eY)(),{cUnit:d,precision:m,helperText:p,ticker:f,minContQty:g,placeholder:y,buyCont:b,buyQty:T,sellCont:C,sellQty:M}=(0,v.ql)({quantity:r}),{minQty:Z}=f,w=`${c("quantity")} (${d})`,I=!Number.isNaN(Number(r));return(0,a.useEffect)((()=>{l({type:x.z,payload:{minContQty:g,buyQty:T,sellQty:M,buyCont:b,sellCont:C}})}),[r,g,u]),P(o.Z,{sx:S.TH},P("div",null,w),P("div",{className:"amount"},P(h,{id:"flashOrderQuantity",inputRef:e,type:I?"number":"text",step:(0,k.nH)(m),precision:m,value:r,placeholder:y,maxLength:n.ze,error:Boolean(t),errorText:t,infoText:p,autoZero:!0,onChange:i,onFocus:s})))}},aBAi:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r("/SIk"),i=r.n(a),o=r("ka4r"),n=r("/yzf"),l=r("0RPJ"),s=r("SJeZ"),c=r("vZcz"),u=i().createElement;const d=[25,50,75,100],m=({onClose:e,onChange:t,percent:r,setPercent:i,precision:m})=>{const{curMaxBuyAmount:p,curMaxSellAmount:f,cUnit:g,unitAmountPrecision:y}=(0,s._k)(),b=(0,a.useMemo)((()=>(0,l.Jp)((0,l.Jp)(r/100,p).toFixed(y,1),1).toFixed(m,1)),[y,r,m]),h=(0,a.useMemo)((()=>(0,l.Jp)((0,l.Jp)(r/100,f).toFixed(y,1),1).toFixed(m,1)),[y,r,m]),v=(0,a.useCallback)((a=>{var o;const n=+(null===(o=a.currentTarget.dataset)||void 0===o?void 0:o.stepper);n!==r?(i(n),null===t||void 0===t||t(n)):null===e||void 0===e||e()}),[t,e,r,i]);return u(o.Z,{sx:c.u8},u(o.Z,{className:"position-value",justifyContent:"flex-end"},r?u(n.Z,null,b,"\xa0",g):null),u(o.Z,{mx:"6px"},d.map((e=>u(o.Z,{key:e,"data-stepper":e,onClick:v,className:r>=e?"container active":"container"},u(o.Z,{className:"stepper"}),u(n.Z,{className:"value"},e,"%"))))),u(o.Z,{className:"position-value",justifyContent:"flex-start"},r?u(n.Z,null,h,"\xa0",g):null))},p=i().memo(m)},"3pJj":(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("/SIk"),i=r.n(a),o=r("ka4r"),n=r("EPGa"),l=r("SJeZ"),s=r("IewQ"),c=r("vZcz"),u=i().createElement;const d=({positionDirection:e,type:t="bid",handleClick:r=(()=>{}),dispatch:i=(()=>{})})=>{const{BuyText:d,SellText:m}=(0,l.x_)(e);let p,f,g,y,b=n.PR.BOTH;const{bidPrice:h,askPrice:v}=(0,l.he)(),{positionMode:x}=(0,l.F7)();"bid"===t?(f=d,g=v,p="buy-button",y=1,x&&(e===n.RS.OPEN?b=n.PR.LONG:e===n.RS.CLOSE&&(b=n.PR.SHORT))):(f=m,g=h,p="sell-button",y=-1,x&&(e===n.RS.OPEN?b=n.PR.SHORT:e===n.RS.CLOSE&&(b=n.PR.LONG)));const k=(0,a.useCallback)((e=>{e.preventDefault(),i({type:s.z,payload:{side:y,positionSide:b}}),r(!0)}),[b,i,y,r]);return(0,a.useMemo)((()=>u(o.Z,{onClick:k,sx:c.t7,className:p},u("div",{className:"title"},f),u("div",{className:"text"},g))),[k,p,f,g])}},IewQ:(e,t,r)=>{"use strict";r.d(t,{z:()=>a,w:()=>i});const a="PLACE_ORDER_TYPE",i="futures-flash-order-visible"},"7XkF":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("lt/A"),l=r("ka4r"),s=r("klBV"),c=r("EPGa"),u=r("b2zI"),d=r("5p/p"),m=r("JPsv"),p=r("YkKT"),f=r("FOuV"),g=r("3pJj"),y=r("cBv1"),b=r("SJeZ"),h=r("Uqe+"),v=r("FoWR"),x=r("7uiG"),k=r("VM/Z"),S=r("HQDa"),P=r("vZcz"),T=o().createElement;const C={l:15,t:65,b:k.sk?0:window.innerHeight-55,r:k.sk?0:window.innerWidth-340},M={l:15,t:15,b:k.sk?0:window.innerHeight-55,r:k.sk?0:window.innerWidth-340},Z={l:15,t:250},w=({children:e,visible:t,draggableRef:r})=>{const{isIPad:o}=(0,s.Fs)(),[n,c]=(0,h.Z)("flash-order-position",Z),u=M,d=(0,v.Z)(n),m=(0,i.useRef)(!0),p=(0,i.useRef)(!1),f=(0,x.xG)((e=>e.setDisableMouse)),g=(0,i.useRef)({x:0,y:0}),y=(0,i.useCallback)((e=>{p.current=!0,f(!0),g.current={x:e.screenX,y:e.screenY}}),[f]);(0,i.useEffect)((()=>{var e,t;return null===(e=r.current)||void 0===e||e.addEventListener("mousedown",y),null===(t=r.current)||void 0===t||t.addEventListener("touchstart",y),()=>{const{current:e}=r;null===e||void 0===e||e.removeEventListener("mousedown",y),null===e||void 0===e||e.removeEventListener("touchstart",y)}}),[r,y]);const b=(0,i.useCallback)((e=>{e.preventDefault(),p.current=!1,f(!1)}),[f]),k=(0,i.useCallback)((e=>{setTimeout((()=>{if(e.preventDefault(),!p.current)return;const t=g.current,r=e.screenX-t.x,a=e.screenY-t.y;if(o){const t=window.innerWidth-e.changedTouches[0].clientX,r=window.innerWidth-e.changedTouches[0].clientY;return c({l:Math.min(C.r,Math.max(t,C.l)),t:Math.min(C.b,Math.max(r,C.t))})}const i=d.current;if(!i)return;const{l:n,t:l}=i,s=n+r,m=l+a;c({l:Math.min(u.r,Math.max(s,u.l)),t:Math.min(u.b,Math.max(m,u.t))}),g.current={x:e.screenX,y:e.screenY}}),15)}),[c,o,d]);return(0,i.useEffect)((()=>{if(m.current)return window.addEventListener(o?"touchmove":"mousemove",k),window.addEventListener(o?"touchend":"mouseup",b),m.current=!1,()=>{window.removeEventListener(o?"touchmove":"mousemove",k),window.removeEventListener(o?"touchend":"mouseup",b)}}),[b,k,o]),T(l.Z,{sx:(0,a.Z)((0,a.Z)({},P.IF),{},{transform:`translate(${n?Math.max(n.l,C.l):Z.l}px, ${n?Math.max(n.t,C.t):Z.t}px)`,zIndex:p.current?S.Z.flashOrder:9}),className:""+(t?"":"drag-hide")},e)},I=({draggableRef:e})=>(0,i.useMemo)((()=>T(l.Z,{ref:e,sx:P.l0},T("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},T("rect",{width:"2",height:"2",fill:"currentColor"}),T("rect",{y:"5",width:"2",height:"2",fill:"currentColor"}),T("rect",{y:"10",width:"2",height:"2",fill:"currentColor"}),T("rect",{x:"4",width:"2",height:"2",fill:"currentColor"}),T("rect",{x:"4",y:"5",width:"2",height:"2",fill:"currentColor"}),T("rect",{x:"4",y:"10",width:"2",height:"2",fill:"currentColor"})))),[e]),E=o().memo(w);var N=r("iyIH"),A=r("aBAi"),R=r("IewQ"),O=o().createElement;const L=()=>{const{0:e,1:t}=(0,i.useState)(""),[r]=(0,b.hN)(),{0:o,1:h}=(0,i.useState)(!1),{0:v,1:x}=(0,i.useState)(""),{0:k,1:S}=(0,i.useState)(!1),P=(0,i.useRef)(null),T=(0,i.useRef)(null),C=(0,i.useRef)(null),M=(0,i.useRef)(null),{0:Z,1:w}=(0,i.useState)(0),L=(0,s._n)(),{isExistFutureAccount:V}=(0,s.Pc)(),{placeOrderReducer:F}=(0,b.b9)(),[D,[_,B]]=(0,s.z4)(),z=(0,s.j2)(),{marginAsset:K}=z,{0:q,1:U}=(0,i.useReducer)(F,{isFetching:!1,tradeCont:0,buyCont:0,buyQty:0,sellCont:0,sellQty:0,side:1,positionSide:c.PR.LONG}),{precision:W}=(0,b.ql)({quantity:e}),H=(0,i.useCallback)((()=>{t(""),w(0),S(!1),x("")}),[]),{side:$,tradeCont:j}=q,G=r?c.RS.OPEN:c.RS.BOTH,J=1===$?f.hp.BUY:f.hp.SELL,[,Y]=(0,b.e5)(),Q=(0,i.useCallback)((()=>{Y(!1)}),[Y]),X=(0,i.useCallback)((()=>{var e;null===M||void 0===M||null===(e=M.current)||void 0===e||e.focus()}),[]),ee=(0,i.useCallback)((()=>{S(!1),w(0),t("")}),[]),te=(0,i.useCallback)((()=>{e||ee()}),[e,ee]),{setMessageInfo:re}=(0,s.YT)(),ae=(0,b.h5)(),ie=(0,p.F)({afterSubmit:H,overrides:{positionDirection:G,timeInForce:f.rb.GTC,orderType:c.Jm.MARKET,reduceOnly:!1}});return(0,i.useEffect)((()=>{if(o){const{valid:t,message:r}=ae(+j);if(!t)return x(r),re({message:r,variant:"error"}),void h(!1);ie((0,a.Z)((0,a.Z)({},u.U),{},{buyOrderAmount:+j,sellOrderAmount:+j,side:J,unitAmount:e})),h(!1)}}),[ie,J,e,j,o]),(0,i.useEffect)((function(){H()}),[D,H]),(0,i.useEffect)((function(){x("")}),[e]),(0,n.Z)(C,te,["click"]),O(E,{visible:!0,draggableRef:P},O(l.Z,{ref:C,sx:{flexDirection:"column"}},O(l.Z,{justifyContent:"center"},O(I,{draggableRef:P}),O(l.Z,{height:"40px",justifyContent:"stretch",bg:"popupBg",sx:{position:"relative"}},O(d.ZP,{isExistFutureAccount:V,isLoggedIn:L,sz:"small",bg:"popupBg"}),O(g.Z,{positionDirection:G,handleClick:()=>{U({type:R.z,payload:{tradeCont:(null===q||void 0===q?void 0:q.buyCont)||(null===q||void 0===q?void 0:q.buyQty)}}),h(!0),X()},type:"bid",dispatch:U}),O(y.Z,{inputRef:M,quantity:e,setQuantity:e=>{k&&!~e.indexOf("%")&&w(0),t(e)},dispatch:U,onFocus:()=>S(!0),submitError:v}),O(g.Z,{positionDirection:G,handleClick:()=>{U({type:R.z,payload:{tradeCont:(null===q||void 0===q?void 0:q.sellCont)||(null===q||void 0===q?void 0:q.sellQty)}}),h(!0),X()},type:"ask",dispatch:U})),O(N.Z,{onRemove:Q})),k&&O(A.Z,{percent:Z,setPercent:w,precision:W,onChange:e=>{t(`${e}%`)},onClose:ee})),O(m.Z,{symbol:D,base:_,quote:B,ticker:z,ref:T,marginAsset:K}))};function V(){const e=(0,s.Pc)(),{isExistFutureAccount:t}=e,{isLoggedIn:r}=(0,s.f0)(),[a]=(0,b.e5)();return(0,i.useMemo)((()=>t&&r&&a?O(L,null):null),[a,t,r])}},vZcz:(e,t,r)=>{"use strict";r.d(t,{t7:()=>o,u8:()=>n,IF:()=>l,l0:()=>s,TH:()=>c,_3:()=>u});var a=r("0tOJ"),i=r("HQDa");const o={userSelect:"none",fontSize:"12px",height:"40px",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,minWidth:"100px",borderTop:"2px solid",cursor:"pointer",lineHeight:"16px","&.buy-button":{":hover":{bg:e=>(0,a.D)(e.colors.buy,.7)},bg:e=>(0,a.D)(e.colors.buy,.15),borderColor:"buy"},"&.sell-button":{":hover":{bg:e=>(0,a.D)(e.colors.sell,.7)},bg:e=>(0,a.D)(e.colors.sell,.15),borderColor:"sell"},padding:"2px 0 3px",".title":{color:"t.secondary"},".text":{color:"t.primary"}},n={bg:"bg1",pt:"xs",".container":{width:"25px",mx:"2px",flexDirection:"column",alignItems:"center",cursor:"pointer",color:"t.third","&.active":{"& > div:first-of-type":{bg:"t.secondary"},color:"t.secondary"}},".stepper":{height:"10px",mb:"2px",width:"23px",bg:"bg3"},".value":{fontSize:"12px",transform:"scale(calc(10/12))",color:"t.third"},".position-value":{flex:1,fontSize:"12px",color:"t.secondary"}},l={minWidth:"312px",width:"auto",position:"absolute",zIndex:i.Z.flashOrder,color:"white",minHeight:"40px",alignItems:"center",justifyContent:"space-between",bg:"popupBg","&.drag-hide":{display:"none"}},s={minWidth:"16px",width:"16px",justifyContent:"center",display:"flex",height:"40px",alignItems:"center",cursor:"grab",color:"icons.close",userSelect:"none",bg:"popupBg"},c={fontSize:"12px",flexDirection:"column",justifyContent:"center",minWidth:"100px",padding:"3px 4px 4px 4px",maxWidth:"150px",textAlign:"center",".amount":{"div.bn-input-tooltip":{bottom:"47px",width:"fit-content",left:"50%",transform:"translateX(-50%)","& .bn-input-tooltip-arrow":{left:"50%"},"& .bn-input-tooltip-content":{p:"7px 12px",width:"fit-content",whiteSpace:"nowrap"}},"div:not(.bn-input-tooltip):not(.bn-input-tooltip-arrow):not(.bn-input-tooltip-content)":{border:"none",margin:"0",height:"20px",input:{fontSize:"12px",textAlign:"center"}},".bn-input-prefix":{display:"none"}},"div:first-of-type":{color:"t.secondary"},input:{minWidth:"80px",maxWidth:"100px",width:"auto",bg:"popupBg",color:"t.primary"}},u={userSelect:"none",minWidth:"16px",width:"16px",height:"40px",justifyContent:"center",display:"flex",alignItems:"center",bg:"popupBg",".icon":{cursor:"pointer",flexShrink:0,color:"icons.close","&:hover":{color:"primary"}}}},"/Lmb":(e,t,r)=>{"use strict";var a=r("/SIk"),i=r.n(a),o=(r("szIg"),r("sZZk"),r("HkAn"),r("1U9V"));r("klBV"),r("VM/Z"),r("z+x3"),r("SJeZ"),r("uH0D"),i().createElement;(0,o._x)((()=>Promise.all([r.e(3712),r.e(3335)]).then(r.bind(r,"eVjR")))),(0,o._x)((()=>Promise.all([r.e(3712),r.e(7340)]).then(r.bind(r,"pV8G"))))},OjEc:(e,t,r)=>{"use strict";r.d(t,{mA:()=>u,JO:()=>d,ZP:()=>m,yK:()=>p});var a=r("VM/Z"),i=r("klBV"),o=r("w7Tp"),n=r("PKid"),l=r("/jDJ"),s=r("/SIk"),c=r.n(s)().createElement;const u="INDEX_SYMBOL",d=({isChina:e,cnDoc:t,enDoc:r})=>{const i=e?`${a.$g}${t}`:`${a.$g}${r}`;window.open(i)};function m({config:e={},sx:t={}}={}){const r=(0,i.hd)();return(0,s.useMemo)((()=>{const{underlyingType:a,cnDoc:i,enDoc:l}=e;return"INDEX"===a?c(o.Z,{className:u,sx:t,onClick:e=>{e.preventDefault(),d({isChina:r,cnDoc:i,enDoc:l})}},c(n.Z,{color:"t.yellow200",size:15,sx:{cursor:"pointer"}})):null}),[e,r,t])}const p=({url:e})=>(0,s.useMemo)((()=>e?c(o.Z,{onClick:t=>{t.preventDefault(),window.open(e,"_blank")},sx:{background:"rgba(240, 185, 11, 0.15)",borderRadius:"2px",ml:"2px"}},c(l.Z,{fontSize:"14px",color:"t.yellow"})):null),[e])},T50r:(e,t,r)=>{"use strict";r.d(t,{q1:()=>o,oH:()=>n,fb:()=>l});var a=r("5vwO"),i=r("/Kmz");const o=()=>(0,a.Z)((0,a.Z)({},i.O),{},{overflow:"hidden",display:"grid",width:"100vw",minHeight:"100vh",gridGap:"1px",gridTemplateColumns:"minmax(auto, auto) 1fr 280px 288px",gridTemplateRows:"minmax(64px, auto) 1.1fr auto 289px",gridTemplateAreas:'"header header header header"\n    "chart chart orderbook trades"\n    "chart chart orderform orderform"\n    "assets userinfo orderform orderform"\n    "tradefooter tradefooter tradefooter tradefooter"'}),n=(0,a.Z)((0,a.Z)({},i.O),{},{gridTemplateColumns:"100%",gridTemplateRows:"100%",gridTemplateAreas:'"chart"',overflow:"hidden"}),l=(0,a.Z)((0,a.Z)({},i.O),{},{gridTemplateColumns:"100vw",gridTemplateRows:"100vh",gridTemplateAreas:'"content"',overflow:"hidden"})},"7KZG":(e,t,r)=>{"use strict";r.d(t,{Lx:()=>u,DT:()=>m,Et:()=>f,Uv:()=>y});var a=r("/SIk"),i=r.n(a),o=r("RfYP"),n=r("8Y2u"),l=r("869M"),s=i().createElement;const c=i().memo((({active:e,i18nKey:t="trd-layout-tabPositions"})=>{const r=(0,n.kD)();return s(o.KP,{i18nKey:t,defaultValue:"Positions",active:e,testId:"Positions",suffix:`(${r})`})})),u=e=>s(c,{active:e}),d=i().memo((({active:e,i18nKey:t="trd-layout-tabTransactionHistory"})=>s(o.KP,{i18nKey:t,defaultValue:"Transaction History",active:e,testId:"transactionHistory"}))),m=e=>s(d,{active:e}),p=i().memo((({active:e,i18nKey:t="trd-layout-tabAssets"})=>s(o.KP,{i18nKey:t,defaultValue:"Assets",active:e,testId:"assetsTableTitle"}))),f=e=>s(p,{active:e}),g=i().memo((({active:e})=>{const{getI18n:t}=(0,l.yk)(),r=t("tradeHistory-APIKeyLabel",{defaultValue:"API Key"});return s(o.KP,{i18nKey:"futures-trade-tradeHistory-APIKeyLabel",defaultValue:r,active:e,testId:"apiTableTitle"})})),y=e=>s(g,{active:e})},PLw3:(e,t,r)=>{"use strict";r.d(t,{c:()=>k});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("w7Tp"),l=r("PMF4"),s=r("zZ5f"),c=r("RfYP"),u=r("HIvd"),d=r("VM/Z"),m=r("7KZG"),p=o().createElement;const f=({sx:e={},testId:t,children:r})=>p(n.Z,{"data-testid":t,sx:(0,a.Z)({width:"100%",height:"100%"},e)},r),g=o().lazy((()=>Promise.all([r.e(3712),r.e(8841)]).then(r.bind(r,"7cvD")))),y=o().lazy((()=>r.e(3870).then(r.bind(r,"pVqC")))),b=o().lazy((()=>Promise.all([r.e(6374),r.e(3806)]).then(r.bind(r,"HX21")))),h=o().lazy((()=>Promise.all([r.e(6374),r.e(3123)]).then(r.bind(r,"S2jG")))),v=o().lazy((()=>Promise.all([r.e(6374),r.e(3712),r.e(9847)]).then(r.bind(r,"r8hx")))),x=o().lazy((()=>r.e(6030).then(r.bind(r,"LDFa")))),k=[[m.Lx,p(f,{testId:"positionTableInfo",key:"futuresPosition"},p(l.u,null,p(u.Z,null)))],[c.rr,p(f,{testId:"openOrdersTableInfo",key:"futuresOpenOrder"},p(l.u,null,p(i.Suspense,{fallback:p(s.Z,null)},p(g,null))))],[c.S9,p(f,{testId:"orderHistoryTableInfo",key:"futuresOrderHistory"},p(l.u,null,p(i.Suspense,{fallback:p(s.Z,null)},p(y,null))))],[c.Tc,p(f,{testId:"tradeHistoryTableInfo",key:"futuresTradeHistory"},p(l.u,null,p(i.Suspense,{fallback:p(s.Z,null)},p(b,null))))],[m.DT,p(f,{testId:"transactionHistoryTableInfo",key:"futuresTransactionHistory"},p(l.u,null,p(i.Suspense,{fallback:p(s.Z,null)},p(h,null))))],[m.Et,p(f,{testId:"assetsTableInfo",key:"futuresAssets"},p(l.u,null,p(i.Suspense,{fallback:p(s.Z,null)},p(v,null))))]];d.Jg&&k.push([m.Uv,p(l.u,null,p(i.Suspense,{fallback:p(s.Z,null)},p(x,{key:"APIKeyPanel"})))])},oMBe:(e,t,r)=>{"use strict";r.d(t,{sN:()=>V,P_:()=>F,cE:()=>D,k3:()=>_,wK:()=>B,Eu:()=>z,kc:()=>K,sb:()=>U,tW:()=>W,MY:()=>H,SJ:()=>$});var a=r("cmuY"),i=r("/SIk"),o=r.n(i),n=r("5p/p"),l=r("w9Ve"),s=r("XtDi"),c=r("6u/I"),u=r("a9vC"),d=r("klBV"),m=r("Dvpw"),p=r("UIpo"),f=(r("z+x3"),r("JwA9")),g=(r("96Xb"),r("LxGj")),y=r("CWkv"),b=r("6Afj"),h=r("rt3y"),v=r("Q9ZO"),x=r("gDJg"),k=(r("gNzA"),r("zgli")),S=(r("Qkkg"),r("/Lmb"),r("PLw3")),P=r("lKaM"),T=o().createElement;(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(6034)]).then(r.bind(r,"OhiR"))));const C=(0,b.SA)((()=>Promise.resolve().then(r.bind(r,"lKaM")))),M=(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(9305)]).then(r.bind(r,"GnZy")))),Z=(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(3175)]).then(r.bind(r,"X2Id")))),w=(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(8682)]).then(r.bind(r,"EUwT")))),I=(0,b.SA)((()=>r.e(3712).then(r.bind(r,"x/DY")))),E=(0,b.SA)((()=>Promise.all([r.e(3712),r.e(6391)]).then(r.bind(r,"F4Cb")))),N=(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(7791)]).then(r.bind(r,"7XkF")))),A=(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(4726)]).then(r.bind(r,"uSdY")))),R=(0,b.ck)("afterLogin",(()=>Promise.all([r.e(3712),r.e(7285)]).then(r.bind(r,"tXWo")))),O=((0,b.ck)("afterLogin",(()=>Promise.all([r.e(3712),r.e(7285)]).then(r.bind(r,"LhSs")))),(0,b.ck)("afterLogin",(()=>Promise.all([r.e(3712),r.e(7285)]).then(r.bind(r,"wkn/")))),(0,b.ck)("afterLogin",(()=>Promise.all([r.e(3712),r.e(7285)]).then(r.bind(r,"c5N6"))))),L=(0,b.SA)((()=>Promise.resolve().then(r.bind(r,"EZ8p")))),V=(0,i.memo)((({isMarketChange:e,w:t})=>{const[r,a]=(0,s.Z)(!1),o=(0,i.useCallback)((()=>{a(!1)}),[a]),n=(0,i.useCallback)((()=>{a(!0)}),[a]);return T(f.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"market"},name:"market"},T(A,{isGridWidget:!0,isMarketChange:e,w:t,openEditFavoriteDialog:n}),T(L,{visible:r,onClose:o}))})),F=(0,i.memo)((({onRemove:e,isElectronPro:t=!1,isPro:r})=>{const[a]=(0,d.z4)();return T(y.Z,{type:"CHART_LOADED",condition:()=>!!document.querySelector('div[data-testid="kline-trace"]')},T(f.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"chart"},name:"chart"},T(C,{symbol:a,useMiniTicker:!1,namespace:c.sy,globalNamespace:c.A4,generateToolbar:(0,P.createMainToobar)({headerSlot:null,closeButton:T(m.Z,{onRemove:e}),isPro:r||t||!1,showFullscreenIcon:!0,showChartModeDropdown:!0,tabKeys:[l.k.Store.Tabs.Origin,l.k.Store.Tabs.TradingView,l.k.Store.Tabs.Depth]})})))})),D=(0,i.memo)((({type:e})=>{const t=()=>{const e=document.querySelector('div[name="orderForm"]')||document.querySelector('div[name="horizontalOrderForm"]');return!!e&&Boolean(e.querySelector("button#buy")||e.querySelector('div[data-testid="register-and-login-buttons"]'))},r=(0,d._n)(),{isExistFutureAccount:a}=(0,d.Pc)(),{isMobile:i}=(0,d.Fs)();return e===v.C.FullScreen||e===v.C.Horizontal?T(y.Z,{type:"FULL_SCREEN_ORDER_FORM_LOADED",condition:t},T(f.Z,{sx:{width:"100%",position:"relative",height:"100%",bg:"popupBg",gridArea:"orderform",overflowY:e===v.C.Horizontal?"scroll":"auto",overflowX:"hidden"},name:"horizontalOrderForm"},T(n.ZP,{isLoggedIn:r,isExistFutureAccount:a,bg:i?"popupBg":void 0,sz:i?"small":void 0}),T(g.a,{height:"auto"}),T(w,{type:e}),r&&!i&&T(O,null))):T(y.Z,{type:"ORDER_FORM_LOADED",condition:t},T(f.Z,{sx:{width:"100%",overflowY:["initial","scroll"],overflowX:["visible","hidden"],position:["fixed","relative"],bottom:["0"],height:["102px","100%","100%"],bg:"popupBg",gridArea:"orderform"},name:"orderForm"},T(n.ZP,{isLoggedIn:r,isExistFutureAccount:a,bg:i?"popupBg":void 0,sz:i?"small":void 0}),T(w,{type:e}),r&&!i&&T(O,null)))})),_=(0,i.memo)((({onRemove:e})=>{const{isMobile:t,isIPad:r}=(0,d.Fs)(),a=t||r?T(R,null):null;return T(y.Z,{type:"POSITION_LOADED",condition:()=>!!document.querySelector('div[data-testid="positionTableInfo"]')},T(x.G,null),T(p.oZ,{area:"userinfo",onRemove:e,panes:S.c,extra:a}))})),B=(0,i.memo)((()=>{const e=(0,d._n)(),{0:t,1:r}=(0,i.useState)(!1);return e?T(f.Z,{sx:{width:t?"260px":"24px",position:"relative",zIndex:2,height:"100%",bg:"moduleBg",gridArea:"assets"},name:"assets"},t?T("div",{style:{padding:"12px 16px",height:"100%",boxSizing:"border-box",overflow:"auto"}},T(h.Z,{handleShowAssets:()=>r(!1)})):T("div",{style:{height:"100%",width:"24px",paddingTop:"16px",paddingLeft:"2px"}},T(a.Z,{color:"t.grey500",size:20,onClick:()=>r(!0),sx:{cursor:"pointer"}}))):null})),z=(0,i.memo)((({withMb:e=!1})=>T(f.Z,{sx:{width:"100%",height:"100%",pb:e?16:0,bg:"moduleBg",gridArea:"trades"},name:"trades"},T(Z,null)))),K=(0,i.memo)((()=>T(f.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"orderbook",position:"relative"},py:"xs",name:"orderbook"},T(M,null)))),q=()=>T(f.Z,{sx:{width:"100%",height:"100%",gridArea:"subheader"},name:"subheader"},T(k.default,{type:"futures",sx:{height:"100%",bg:"moduleBg",pl:"16px"}},T(u.default,{showRightBorderLine:!0}))),U=(0,i.memo)((()=>T(N,null))),W=(0,i.memo)((()=>T(f.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"marginRatio"},name:"marginRatio"},T(I,null)))),H=(0,i.memo)((()=>T(f.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"assetsCard"},name:"assetsCard"},T(E,null)))),$=(0,i.memo)((()=>T(q,null)))},XN9V:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("ka4r"),l=r("w7Tp"),s=r("/yzf"),c=r("iCl3"),u=r("0RPJ"),d=r("SJeZ"),m=r("klBV"),p=r("rdEq"),f=r("8uyB"),g=r("5kFy"),y=o().createElement;const b=["zh-CN","zh-TW"],h={NORMAL:{riskLevelName:"Normal",riskLevelDefaultName:"Normal",riskDeg:-45},LOW:{riskLevelName:"Low",riskLevelDefaultName:"Low Risk",riskDeg:0},MEDIUM:{riskLevelName:"Medium",riskLevelDefaultName:"Medium Risk",riskDeg:90},HIGH:{riskLevelName:"High",riskLevelDefaultName:"High Risk",riskDeg:140},LIQUIDATED:{riskLevelName:"Liquidated",riskLevelDefaultName:"Liquidated",riskDeg:180},BANKRUPTED:{riskLevelName:"Bankrupted",riskLevelDefaultName:"Bankrupted",riskDeg:225}},v=({children:e,sx:t})=>y(n.Z,{sx:(0,a.Z)({marginTop:"6px",lineHeight:"16px",justifyContent:"space-between"},t)},e),x=({isRtl:e})=>{const{getI18n:t,i18n:{language:r}}=(0,d.yk)(),{uniMaintainRatio:a,uniMaintainUsd:i,uniEquityUsd:o}=(0,m.kC)();let x="NORMAL";a>1.5&&a<=2?x="LOW":a>1.2&&a<=1.5?x="MEDIUM":a>1.05&&a<=1.2?x="HIGH":a>1&&a<=1.05?x="LIQUIDATED":a<=1&&(x="BANKRUPTED");const{riskLevelName:k,riskLevelDefaultName:S,riskDeg:P}=h[x];return y(l.Z,null,y(v,{sx:{alignItems:"center"}},y(s.Z,{variant:"caption",color:"t.third"},b.includes(r)?t("uniMMR",{defaultValue:"UniMMR"}):"UniMMR"),y(n.Z,{alignItems:"center"},y(p.m,{tip:y(s.Z,{dangerouslySetInnerHTML:{__html:t("UniMMRRiskTip",{defaultValue:"UniMMR=Account Equity/Maintenance Margin <br />Normal: uniMMR > 200%, trade normally; <br />Low Risk: 150% < uniMMR <= 200%, trade normally, but need to pay attention to potential liquidation; <br />Medium Risk: 120% < uniMMR <= 150%,  trade normally, but need to add more funds to avoid liquidation; <br />High Risk: 110% < uniMMR <= 120%, trade restricted, unable to trade, withdraw and can only place reduce_only trade; 105% < uniMMR <= 110%, you can choose to trigger the liquidation through the backend; <br />Liquidated: 100% < uniMMR <= 105%, liquidation is triggered. <br />Bankrupted: uniMMR <= 100%, bankrupted."})}}),sx:{mr:"minor"}},t(`UniMMRRisk${k}Level`,{defaultValue:S}),y(c.Z,{size:16})),y(g.Z,{riskRatio:a,riskDeg:P}),y(s.Z,{fontSize:"18px",color:"buy",ml:"10px"},(0,f.JX)(Math.min(100*Number(a),999),2)||"0.00","%"))),y(v,null,y(s.Z,{variant:"caption",color:"t.third"},t("joinMargin-accountMaintenanceMarginLabel",{defaultValue:"Account Maintenance Margin"})),y(n.Z,{flexDirection:e?"row-reverse":"unset"},y(s.Z,{color:"t.primary"},(0,u.uf)(i,2)),"\xa0",y(s.Z,{color:"t.primary"},"USD"))),y(v,{sx:{paddingBottom:"11px"}},y(s.Z,{variant:"caption",color:"t.third"},t("joinMargin-accountEquityLabel",{defaultValue:"Account Equity"})),y(n.Z,{flexDirection:e?"row-reverse":"unset"},y(s.Z,{color:"t.primary"},(0,u.GW)(o,2,!0)),"\xa0",y(s.Z,{color:"t.primary"},"USD"))))},k=o().memo(x)},"x/DY":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Y});var a=r("5vwO"),i=r("szIg"),o=r("O94r"),n=r.n(o),l=r("w7Tp"),s=r("XVzo"),c=r("wGPX"),u=r("0hOy"),d=r("/yzf"),m=r("ka4r"),p=r("RkbI"),f=r("iCl3"),g=r("0RPJ"),y=r("/SIk"),b=r.n(y),h=r("fi7b"),v=r("EZOS"),x=r("Ygfp"),k=r.n(x),S=r("uH0D"),P=r("VM/Z"),T=r("SJeZ"),C=r("1U9V"),M=r("4wBm"),Z=r("rdEq"),w=b().createElement;const I=()=>{const{getI18n:e,i18n:{language:t}}=(0,T.yk)();return w(l.Z,{pb:"16px",pt:"6px"},w(s.Z,{variant:"default",colorStyle:"secondary",sz:"tiny",width:"100%",sx:{fontWeight:"normal",borderRadius:"2px",cursor:"default"}},w(m.Z,{alignItems:"center"},e("portfolioMargin",{defaultValue:"Portfolio Margin"}),w(Z.m,{tip:w(b().Fragment,null,w(d.Z,{variant:"caption"},e("portfolioMarginTip1",{defaultValue:"Under Portfolio Margin Mode,  the Margin Account, USD-M Futures Account and COIN-M Futures Account can be taken as an Unified Account and all the assets in the Unified Account can be used to trade in margin trading and futures trading."})),w(d.Z,{variant:"caption",my:"xs"},e("portfolioMarginTip2",{defaultValue:"If you want to learn more details about Portfolio Margin, please read our guideline."})),w(d.Z,{variant:"caption"},w(u.Z,{href:(0,S.b)(`/${t}/support/faq/5054378212d240cca17ecd6006c11f23`),target:"_blank",variant:"secondaryLink",color:"t.yellow"},e("portfolioMarginGuideline",{defaultValue:"Portfolio Margin Guideline"}))))},w(M.Z,{size:16,ml:"6px"})))))},E=b().memo(I);var N=r("XN9V"),A=r("xfzF"),R=r("klBV"),O=b().createElement;const L={flexDirection:"column","& .content":{mt:["sm","md"]},"& .grid":{display:"grid",gridTemplateColumns:"repeat(3, 33.33%)",gridTemplateRows:"repeat(3, 33.33%)"},"& .rateList":{mb:"sm",maxHeight:["60%","180px"],overflowY:"auto"},"& .row, & .cation":{pb:"xs"},"& .row:last-of-type":{pb:0},"& .cation":{color:"t.third"},"& .row":{color:"t.primary"},"& .updateTime":{pb:"sm",mb:"sm",borderBottom:"1px solid",borderColor:"t.secondary"},"& .info":{color:"t.third",fontSize:0,lineHeight:"16px","& > a":{color:"t.yellow"}},"& .link":{mt:"xs"}},V=({children:e})=>O(d.Z,{variant:"body2"},e),F=({visible:e,onClose:t})=>{const r=(0,R.tZ)(),{t:a}=(0,T.$G)(),{getI18n:i}=(0,T.yk)(),o=(()=>{const e=(0,T.G8)(),t=(0,T.KQ)();return(0,y.useMemo)((()=>Object.entries(e).filter((([e])=>{var r;return null===(r=t[e])||void 0===r?void 0:r.marginAvailable})).map((([,e])=>e))),[e,t])})();return O(A.Z,{open:e,onCloseIconClick:t,sx:{width:["100%","488px"]}},O(m.Z,{__css:L},O(d.Z,{variant:"title6",color:"t.primary"},i("joinMargin-MultiAssetsExchangeRate",{defaultValue:"Multi-Assets Exchange Rate"})),O("div",{className:"content"},O("div",{className:"grid cation"},O(V,null,i("joinMargin-Pair",{defaultValue:"Pair"})),O(V,null,i("joinMargin-AskRate",{defaultValue:"Ask Rate"})),O(V,null,i("joinMargin-BidRate",{defaultValue:"Bid Rate"}))),O("div",{className:"rateList"},o.map((({symbol:e="",askRate:t=0,bidRate:r=0})=>O("div",{key:e,className:"grid row"},O(V,null,e.slice(0,-3),"/",e.slice(-3)),O(V,null,(0,g.GW)(t,4)),O(V,null,(0,g.GW)(r,4)))))),O("div",{className:"info updateTime"},"\xb7"," ",i("joinMargin-UpdateTime",{defaultValue:"Update Time"}),": ",o[0]?(0,C.vs)(o[0].time||0):""," UTC"),O("div",{className:"info"},i("joinMargin-ExchangeRateTip",{defaultValue:"USD valuation of the Margin assets in the USD\u24c8-M Futures account are calculated according to the real-time exchange rate under Multi-Assets mode, including the available balance for orders and withdrawals."})),O("div",{className:"info link"},O(h.c,{t:a,i18nKey:(0,T.Gv)("joinMargin-MultiAssetsCalcDetails"),components:{jump:O("a",{href:(0,S.b)(`/${r}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`),target:"_blank",rel:"noreferrer"})},defaults:"For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump>.",values:{guideLink:i("joinMargin-guidLink")}})))))},D=b().memo(F);var _=r("8uyB"),B=r("5kFy");const z={display:"flex",alignItems:"center",justifyContent:"flex-end",cursor:"pointer",".margin-ratio-label":{display:"flex",alignItems:"center",color:"t.primary"}},K={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",".margin-ratio-option":{padding:"4px 16px",color:"t.primary",fontSize:"12px","&:hover":{bg:"line"},"&.active":{color:"t.yellow"}}};var q=b().createElement;const U=(0,P.nM)(),W=b().memo((({getFutI18n:e})=>{const{assetMode:t}=(0,T.F7)();return q(l.Z,{pb:"16px",pt:"6px"},q(s.Z,{variant:"default",colorStyle:"secondary",sz:"tiny",width:"100%",sx:{fontWeight:"normal",borderRadius:"2px"},onClick:()=>C.TB.emit(C.FP.SHOW_PREFERENCE_PANEL,"am")},t?e("joinMargin-multi-assets",{defaultValue:"Multi-Assets"}):e("joinMargin-single-asset",{defaultValue:"Single-Asset"})))})),H=b().memo((({selectedOption:e,marginRatioList:t,onChange:r,marginRatioLabel:i})=>{const{isIPad:o}=(0,R.Fs)();return q(l.Z,{sx:(0,a.Z)({},z)},q(c.ZP,{trigger:"hover",enablePortal:!0,overlay:q(l.Z,{sx:K},t.map((t=>q("div",{className:n()({"margin-ratio-option":!0,active:t.key===e}),key:t.key,onClick:()=>{r(t.key)}},t.marginRatioLabel))))},q("div",{className:"margin-ratio-label"},i,q(p.Z,{ml:"4px",color:"t.third",size:16}))))}),(function(e,t){const{marginRatioLabel:r,marginRatioList:a,setMarginRatioItem:i}=e,{marginRatioLabel:o,marginRatioList:n,setMarginRatioItem:l}=t,s=a.map((e=>e.marginRatioLabel)).join(),c=n.map((e=>e.marginRatioLabel)).join();return r===o&&i===l&&s===c})),$=b().memo((({isRtl:e,isJoinMargin:t,marginRatioSelector:r,hasOptions:a,getFutI18n:o,riskRatio:n,maintenanceMargin:s,marginBalance:c,marginAsset:p,marginPrecision:y})=>{const b=(0,R.tZ)(),{t:v}=(0,T.$G)(),{visible:x,onOpen:k,onClose:P}=(0,T.yV)(),C=q(u.Z,{href:(0,S.b)(`/${b}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`),target:"_blank",variant:"secondaryLink",color:"t.yellow"}),M=q(d.Z,{variant:"addressLink",as:"span",sx:{color:"t.yellow",cursor:"pointer",fontSize:"12px"},onClick:k}),w=t?o("joinMargin-accountMarginRatioTip",{defaultValue:"Account Margin Ratio = Account Maintenance Margin / Account Equity"}):o("tradeHistory-positions-marginRatioTip",{defaultValue:""}),I=t?o("joinMargin-accountMarginRatioLabel",{defaultValue:"Account Margin Ratio"}):o("tradeHistory-positions-marginRatioLabel",{defaultValue:"Margin Ratio"}),E=t?q(h.c,{t:v,i18nKey:(0,T.Gv)("joinMargin-accountMaintenanceMarginTipV2"),components:{jump:C,showRate:M},defaults:"The sum of USD value of all cross positions maintenance margin in the USD\u24c8-M Futures. For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump> and <showRate>{{exchangeRate}}</showRate>.",values:{guideLink:o("joinMargin-guidLink",{defaultValue:"Multi-Assets Mode guide"}),exchangeRate:o("joinMargin-ExchangeRate",{defaultValue:"Real-time Exchange Rate"})}}):o("tradeHistory-positions-maintenanceMarginTip",{defaultValue:"The minimum amount of margin balance required to keep your open positions."}),N=t?o("joinMargin-accountMaintenanceMarginLabel",{defaultValue:"Account Maintenance Margin"}):o("tradeHistory-positions-maintenanceMarginLabel",{defaultValue:"Maintenance Margin"}),A=t?q(h.c,{t:v,i18nKey:(0,T.Gv)("joinMargin-accountEquityTipV2"),components:{jump:C,showRate:M},defaults:"The sum of USD value of all margin balance in the USD\u24c8-M Futures. For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump> and <showRate>{{exchangeRate}}</showRate>.",values:{guideLink:o("joinMargin-guidLink",{defaultValue:"Multi-Assets Mode guide"}),exchangeRate:o("joinMargin-ExchangeRate",{defaultValue:"Real-time Exchange Rate"})}}):o("tradeHistory-positions-marginBalanceTip",{defaultValue:""}),O=t?o("joinMargin-accountEquityLabel",{defaultValue:"Account Equity"}):o("tradeHistory-positions-marginBalanceLabel",{defaultValue:"Margin Balance"}),L=(0,i.useSelector)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),V=(0,i.useSelector)((e=>e.loading.effects.preference.getAssetMode)),F=L||V;return q(l.Z,null,q(m.Z,{justifyContent:"space-between",alignItems:"center"},!t&&a?r:q(Z.m,{tip:w},I),q(m.Z,{alignItems:"center"},q(B.Z,{riskRatio:n}),q(d.Z,{fontSize:"18px",color:"buy",ml:"10px"},(0,_.JX)(F?0:n,2)||"0.00","%"))),q(m.Z,{sx:{marginTop:"6px",lineHeight:"16px"},justifyContent:"space-between"},q(Z.m,{tip:E},N),q(m.Z,{flexDirection:e?"row-reverse":""},q(d.Z,{color:"t.primary"},(0,g.uf)(F?0:s,y)),"\xa0",q(d.Z,{color:"t.primary"},p))),q(m.Z,{sx:{marginTop:"6px",lineHeight:"16px",paddingBottom:"11px"},justifyContent:"space-between"},q(m.Z,null,q(Z.m,{tip:A},O),t&&q(f.Z,{ml:1,size:2,onClick:k,sx:{cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}}})),q(m.Z,{flexDirection:e?"row-reverse":""},q(d.Z,{color:"t.primary"},(0,g.GW)(F?0:c,y,!0)),"\xa0",q(d.Z,{color:"t.primary"},p))),q(D,{visible:x,onClose:P}))})),j=()=>{var e;const{enable:t}=(0,R.kC)(),{marginAsset:r}=(0,R.j2)(),a=(0,R._n)(),i=(0,T.KQ)(),[o]=(0,R.z4)(),{getI18n:n}=(0,T.yk)(),s="rtl"===(0,R.gm)(),{0:c,1:u}=(0,y.useState)(""),{positionMode:d=!1}=(0,T.F7)(),m=(0,T.m)(n,d,U),p=(0,v.Z)(m),f=m.find((e=>e.key===c)),{riskRatio:g=0,marginBalance:h=(null===(e=i[r])||void 0===e?void 0:e.walletBalance)||0,maintenanceMargin:x,marginAsset:S=r,marginRatioLabel:P}=f||{},C=e=>{let t;m.length>0&&(t=m.find((e=>e.symbols.some((e=>e===o)))),e||t||(t=m[0]||{}),t&&u(t.key))};(0,y.useEffect)((()=>{f||C()}),[m.length]),(0,y.useEffect)((()=>{const e=k()(m,p,"key").find((e=>e.symbols.some((e=>e===o))));e&&u(e.key)}),[m.length]),(0,y.useEffect)((()=>{C(!0)}),[o]);const M=Boolean(null===m||void 0===m?void 0:m.length);return q(l.Z,{fontSize:"12px",display:["none","block"],px:"16px"},t?q(b().Fragment,null,q(E,null),q(N.Z,{isRtl:s})):q(b().Fragment,null,!U&&a?q(W,{getFutI18n:n}):null,q($,{marginRatioSelector:q(H,{selectedOption:c,marginRatioLabel:P,marginRatioList:m,onChange:u}),hasOptions:M,isRtl:s,isJoinMargin:!1,getFutI18n:n,riskRatio:g,maintenanceMargin:x,marginBalance:h,marginAsset:S,marginPrecision:4})))},G=()=>{const{getI18n:e}=(0,T.yk)(),t=(0,R._n)(),r="rtl"===(0,R.gm)(),{riskRatio:a=0,marginBalance:i,maintenanceMargin:o}=(0,T.Nx)(U),n=U?4:2;return q(l.Z,{px:"16px",fontSize:"12px",display:["none","block"]},!U&&t?q(W,{getFutI18n:e}):null,q($,{isRtl:r,isJoinMargin:!0,getFutI18n:e,riskRatio:a,maintenanceMargin:o,marginBalance:i,marginAsset:"USD",marginPrecision:n}))},J=()=>{const{assetMode:e}=(0,T.F7)();return q(e?G:j,null)},Y=b().memo(J)},"xHF/":(e,t,r)=>{"use strict";r.d(t,{O$:()=>i,QN:()=>o,I_:()=>n,Z4:()=>l,E6:()=>s,_V:()=>c,UD:()=>u,mW:()=>d,UC:()=>m,AE:()=>p,xz:()=>f,UW:()=>g,Ok:()=>y,Pi:()=>b,X3:()=>h,jQ:()=>v,wm:()=>x,wC:()=>k});var a=r("klBV");const i=40,o="All",n="FAVORITES",l="PERPETUAL",s="BUSD_PERPETUAL",c=[o,l,"DELIVERY"],u="USDT-MARIN",d="COIN-MARIN",m="HOT",p="NEW",f=[m,p],g=e=>e.stopPropagation(),y="STORAGE_MARKET_ACTIVE_TAB",b="STORAGE_MARKET_ACTIVE_SUB_TAB",h={first:{flex:"2 2 0",justifyContent:"flex-start",minWidth:"110px"},second:{flex:"1 1 0",minWidth:"63px",justifyContent:"flex-start"},secondHeader:{flex:"1 1 0",minWidth:"63px",justifyContent:"flex-start"},third:{flex:"1 1 0",minWidth:"63px",justifyContent:"flex-end"}},v={1e3:{key:"volume",des:"up"},2e3:{key:"volume",des:"down"},3e3:{key:"change",des:"down"},4e3:{key:"change",des:"up"}},x={volume:"quoteVolume",change:"difference",down:"descend",up:"ascend"},k=e=>(0,a.ZK)("trd-market",e)},W4bq:(e,t,r)=>{"use strict";r.d(t,{Pj:()=>C,Mp:()=>Z,A1:()=>w,TO:()=>O});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("PVSG"),l=r("Uqe+"),s=r("szIg"),c=r("yOio"),u=r("LaZo"),d=r("dMPp"),m=r("8lq6"),p=r("C7P9"),f=r("hXK1"),g=r("oQJ1"),y=r("VM/Z"),b=r("klBV"),h=r("1U9V"),v=r("/mDK"),x=r("KUZ0"),k=r("SJeZ"),S=r("xHF/"),P=o().createElement;const T=(0,y.nM)(),C=()=>{const e=(0,b.AM)(),t=(0,b.j2)(),r=(0,b.vK)(),i=(0,b.hP)(),{baseTicker:o,marketTabs:l}=(0,v.r)(e),{update:s,tickers:c}=(()=>{const{update:e,tickers:t}=(0,n.s)((0,y.BN)()),{tickers:r}=(0,n.s)((0,y.RU)());return{update:e,tickers:(0,a.Z)((0,a.Z)({},t),r)}})(),u=(0,v.A)(o,c),d=(0,k.M6)();return{loading:r,update:[i,s],marketTabs:l,nextTickers:Object.values(u).map((function(e){if(d.length){const t=d.find((t=>t.symbolName===e.symbol));if(t)return(0,a.Z)((0,a.Z)({},e),{},{activityUrl:null===t||void 0===t?void 0:t.activityUrl,rules:null===t||void 0===t?void 0:t.rules})}return e})),activeSymbol:t}},M=({activeTab:e,keyword:t,activeSubTab:r})=>{const{favorites:a}=(0,k.ux)(),o=(0,i.useMemo)((()=>{var i;const o=[h.cZ];if(t)return o.push((({symbol:e})=>new RegExp((0,h.hr)(t),"i").test(e))),o;const n=new Map([[S.QN,()=>!1],[S.I_,e=>a.includes(e.isDelivery?`${e.pair}-${e.contractType}`:e.symbol)],[S.UD,({isDelivery:e})=>!e],[S.mW,({isDelivery:e})=>e],[S.UC,({isDelivery:e})=>!e],[S.AE,({isDelivery:e})=>!e]]);return o.push((({contractType:e,marginAsset:t})=>(({activeSubTab:e="",contractType:t="",marginAsset:r=""})=>e===S.QN||(e===S.Z4?t===S.Z4&&"BUSD"!==r.toUpperCase():e===S.E6?t===S.Z4&&"BUSD"===r.toUpperCase():t!==S.Z4))({activeSubTab:r,contractType:e,marginAsset:t})),null!==(i=n.get(null!==e&&void 0!==e?e:""))&&void 0!==i?i:function({tags:t}){return Array.isArray(t)&&t.includes(null!==e&&void 0!==e?e:"")}),o}),[r,e,a,t]);return(0,i.useCallback)((e=>o.every((t=>t(e)))),[o])},Z=(e=S.UD,t=[])=>{const r=(0,s.useSelector)(x.zO),[a,o]=(0,l.Z)(`${S.Ok}_${T?"CM":"UM"}`,e),[n,c]=(0,l.Z)(`${S.Pi}_${T?"CM":"UM"}`,S.QN),{0:u,1:d}=(0,i.useState)("");(0,i.useEffect)((()=>{r&&(t.concat({sectionKey:S.I_}).filter((e=>e.sectionKey===a)).length||o(e))}),[a,e,r,o,t]);const m=M({activeSubTab:n,activeTab:a,keyword:u}),p=(0,i.useCallback)((e=>{c(String(e))}),[c]);return(0,i.useMemo)((()=>({tabState:{activeTab:null!==a&&void 0!==a?a:"",switchTab:null!==o&&void 0!==o?o:""},searchState:{keyword:u,search:d},subTabState:{activeSubTab:n,switchSubTab:p},filterFunc:m})),[n,a,m,u,p,o])},w=({isChange:e=!0,isGridWidget:t,marketStyle:r,openEditFavoriteDialog:o,activeTab:n})=>{const{getI18n:l}=(0,k.yk)();return(0,i.useMemo)((()=>{const i=[(0,a.Z)({label:l("lastPrice",{defaultValue:"Last Price"}),key:"lastPrice"},S.X3.secondHeader)];return[(0,a.Z)((0,a.Z)({label:l("Contract",{defaultValue:"Contracts"}),key:"symbol"},S.X3.first),{},{postRender:()=>n===S.I_?P(c.Z,{onClick:o,size:16,sx:{color:"tan.third",":hover":{color:"t.primary",cursor:"pointer"}}}):null}),...t?r?i:[]:i,e?(0,a.Z)({label:l("24h"),key:"difference"},S.X3.third):(0,a.Z)({label:l("vol"),key:"quoteVolume"},S.X3.third)]}),[n,l,e,t,r,o])},I=(e,t)=>e.localeCompare(t),E=(0,u.Z)(I),N=(e,t)=>+(e||0)-+(t||0),A=(0,u.Z)(N),R=(e,t)=>{const r=(0,d.Z)("marginAsset",e).toUpperCase(),a=(0,d.Z)("marginAsset",t).toUpperCase(),i="BUSD";return r===i&&a===i?0:r===i?-1:a===i?1:0},O=({activeTab:e,isSearching:t,sortKeyFromLocalStorage:r})=>{const a=(0,s.useSelector)((e=>e.futureMarket.sortInfo)),o=Object.keys(a).length?Object.keys(a)[0]:"symbol",n=Object.values(a).length?Object.values(a)[0]:void 0;return(0,i.useMemo)((()=>{if(e===S.I_)return(0,m.Z)([(0,p.Z)((0,f.Z)(0,"favoritesIndex"))]);const a=[];return t&&a.push(R),"default"!==n&&n&&r||S.xz.includes(null!==e&&void 0!==e?e:"")?"symbol"===o&&"ascend"===n?a.push(((e,t)=>I((0,d.Z)("symbol",e),(0,d.Z)("symbol",t)))):"symbol"===o&&"descend"===n?a.push(((e,t)=>E((0,d.Z)("symbol",e),(0,d.Z)("symbol",t)))):"difference"===o&&"descend"===n?a.push(((e,t)=>A((0,d.Z)(o,e),(0,d.Z)(o,t)))):"difference"===o&&"ascend"===n?a.push(((e,t)=>N((0,d.Z)(o,e),(0,d.Z)(o,t)))):"symbol"!==o&&"ascend"===n?a.push(((e,t)=>A((0,d.Z)(o,e),(0,d.Z)(o,t)))):"symbol"!==o&&"descend"===n&&a.push(((e,t)=>N((0,d.Z)(o,e),(0,d.Z)(o,t)))):a.push((0,g.Z)((0,f.Z)(0,"ruleNumber"))),(0,m.Z)(a)}),[e,t,o,r,n])}},uSdY:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Oe});var a=r("Uqe+"),i=r("w7Tp"),o=r("/SIk"),n=r.n(o),l=r("szIg"),s=r("klBV"),c=r("VM/Z");const u=({data:e,path:t,metaKey:r,ctrlKey:a,deliveryPath:i})=>{const{symbol:o,symbolDisplay:n,isDelivery:l}=e;let s=!1;const u=i===l;let d="spot";t&&(d=l?"delivery":"futures"),s=/windows|win32/i.test(navigator.userAgent)?a:r;{var m;let r=null===n||void 0===n||null===(m=n.split("/"))||void 0===m?void 0:m.join("_"),a=`binance://trade/spot/${r}${s?"":"?update=true"}`;if("delivery"===d){r=t[t.length-1];const e=!u;a=`binance://trade/quarterly/${r}${s?"":`?update=true&dateSymbol=${o}&refresh=${e}`}`}if("futures"===d){r=t[t.length-1];const i=!u;e.contractType===c.Yp.PERPETUAL&&(r=r.split("_").join("")),a=`binance://trade/perpetual/${r}${s?"":`?update=true&dateSymbol=${o}&refresh=${i}`}`}window.open(a,"_blank")}};var d=r("1U9V"),m=r("shUZ"),p=r("SJeZ"),f=r("k7O1"),g=r("4Dm0"),y=r("xHF/"),b=r("Fwls"),h=n().createElement;const v=(0,o.memo)((({group:e,active:t,getGroupOrderKey:r,showSort:a,renderProps:i})=>h(b.Z,{group:e,active:t,getGroupOrderKey:r,showSort:a,renderProps:i})));var x=r("qqZd"),k=n().createElement;const S=({sx:e,value:t,onSearch:r=(()=>{}),openShotCut:a})=>{const i=(0,o.useRef)(),{getI18n:n}=(0,y.wC)(),l=n("searchHolder",{defaultValue:"Search"});return(0,o.useEffect)((()=>{a&&setTimeout((()=>{var e;null===(e=i.current)||void 0===e||e.focus()}),100)}),[a]),k(x.Z,{sx:e,value:t,search:r,placeholder:l,ref:i})},P=n().memo(S),T=(0,o.createContext)({activeTab:"",keyword:"",activeSubTab:""});var C=r("W4bq"),M=r("5vwO"),Z=r("k1bI"),w=r("/yzf"),I=r("tfG6"),E=r("oe3e"),N=r("frZ3"),A=r("U7ms"),R=r("U0yl"),O=r("wGPX"),L=r("ka4r"),V=r("0hOy"),F=r("f48C"),D=r("8L7i"),_=r("Y+MU"),B=r("l4n0"),z=r("KsIl"),K=r("2rU8"),q=r("OjEc");const U={"& .bn-input-prefix":{ml:"6px",mt:"6px"},"& input":{fontSize:0,mt:"-2px",height:"18px",borderRadius:"4px"},flex:1,mb:"4px",mt:"4px",lineHeight:1.5,height:"24px",border:"none",width:"100%",borderRadius:"4px",bg:"inputBg",position:"static"},W={px:"sm"},H={display:"flex",flexDirection:"column",height:"100%","& .searchWrap":{padding:"0 16px","& .bn-input-suffix":{display:"flex"}},"& .tabListWrap":{display:"flex",justifyContent:"space-between",pt:"8px",pb:"4px",px:["5px","5px","sm"],flexWrap:"wrap",".tabBtn":{display:"flex"},".hot-icon":{marginLeft:"2px",position:"relative",bottom:"1px"},svg:{color:"inherit"}},"& .sortHeaderWrap":{height:"20px",lineHeight:"20px",marginTop:"8px",px:"16px"}},$={boxShadow:"card",bg:"t.grey500",fontSize:0,px:"xs",py:2,borderRadius:"2px",color:"t.grey0",alignItems:"center","& .nextLink":{color:"background",ml:"2px","& .linkIcon":{transform:"scale(1.6)"}},"&::before":{content:"''",position:"absolute",left:"-3px",top:"50%",transform:"rotate(45deg)",mt:"-5px",bg:"t.grey500",width:"10px",height:"10px",borderRadius:"2px"}},j={fontSize:0,color:"t.grey600",fontWeight:"normal"},G={" & .futuresMarketColumnWrap":{display:"flex",flex:1,flexDirection:"column",height:"100%","& .content":{px:"sm",display:"flex",alignItems:"center",height:"100%",fontSize:0,color:"t.third",textDecoration:"none",cursor:"pointer","&:hover":{bg:"marketColumn.hover"},"& .item":{display:"flex",alignItems:"center",cursor:["auto","pointer"],userSelect:"none",fontSize:"14px","& .favorite":{pr:"2px",color:"t.grey500","&.primary":{color:"primary"},"& .muted":{color:"t.muted"}},".name":{flex:1,color:"t.third",display:"flex",lineHeight:1,flexWrap:"wrap",alignItems:"center",".symbol":{color:"t.primary"}}}}}},J={".market-multiple":{boxSizing:"border-box",px:"1px",height:"14px",fontSize:"12px",lineHeight:"12px",borderRadius:"2px",ml:"4px",fontWeight:"normal",border:"1px solid",color:"multiple.color",cursor:"inherit",borderColor:"multiple.border"},".futuresMarketColumnWrap":{display:"flex",flex:1,flexDirection:"column",height:"100%",".content":{px:"sm",display:"flex",alignItems:"center",height:"100%",fontSize:0,color:"t.third",textDecoration:"none",cursor:"pointer","&:hover":{bg:"marketColumn.hover"},".item":{display:"flex",alignItems:"center",cursor:["auto","pointer"],userSelect:"none",fontSize:"14px",".favorite":{pr:"2px",color:"t.third","&.primary":{color:"primary"},"&.muted":{color:"t.muted"}},".name":{flex:1,color:"t.third",display:"flex",lineHeight:1,flexWrap:"wrap",alignItems:"center",".symbol":{color:"t.primary"}}}}}};var Y=n().createElement;const Q=(0,o.memo)((e=>Y(w.Z,Object.assign({__css:j},e)))),X=e=>{const{symbol:t,symbolDisplay:r,lastPrice:a,difference:i="--",quoteVolume:u,bigThan:m,tickSize:f=1e-7,pair:g,contractType:b,noFavorite:h,noFiat:v,changeSymbol:x,lastFlag:k=0,isGridWidget:S,isDefaultChange:P,needBreakline:C,active:M,openShotCut:Z,activityUrl:w,trackId:I}=e,E=(0,s.Kn)(),N=(0,o.useMemo)((()=>{var e;return t&&null!==(e=E[t])&&void 0!==e?e:{}}),[E,t]),A=m?"buy":"sell",R=(0,s.U1)("string"===typeof f?parseFloat(f):f),{format:U}=(0,s.ve)(R),{format:W}=(0,s.ve)(0),{favorites:H,setFavorite:G}=(0,p.ux)(),{pathname:J}=(0,B.Hb)(),X=J.split("/").slice(0,-1),{activeTab:ee}=(0,o.useContext)(T),te=(0,l.useSelector)((e=>e.futureMarket.radioWord)),re=!!e.isDelivery,ae="change"===te,{getI18n:ie}=(0,p.yk)(),oe=(0,o.useMemo)((()=>k>0?"buy":k<0?"sell":"t.grey600"),[k]),ne=re?H.indexOf(`${g}-${b}`):H.indexOf(null!==t&&void 0!==t?t:""),le=(0,o.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),G(re?`${g}-${b}`:t,ne,H)}),[G,re,g,b,t,ne,H]),se=(0,o.useMemo)((()=>{let e="";var t;re?(X[2]="delivery",e=[...X,(0,d.eB)({pair:g,contractType:b})].join("/")):(X[2]="futures",e=b!==c.Yp.PERPETUAL?[...X,(0,d.eB)({pair:g,contractType:b})].join("/"):[...X,null===r||void 0===r||null===(t=r.split("/"))||void 0===t?void 0:t.join("_")].join("/"));return e}),[re,X,g,b,r]),ce=ee===y.I_,ue=(0,z.hd)(),de=(0,o.useCallback)((e=>{var r,a;null!==(r=(a=e.target).closest)&&void 0!==r&&r.call(a,`.${q.mA}`)?(0,q.JO)({isChina:ue,cnDoc:null===N||void 0===N?void 0:N.cnDoc,enDoc:null===N||void 0===N?void 0:N.enDoc}):!e.metaKey&&!e.ctrlKey&&t&&b&&(e.preventDefault(),x&&x(t,re,b))}),[t,b,N,ue,x,re]),me=(0,o.useMemo)((()=>{const{symbol:t,contractTypeI18n:r,deliveryDateFormat:a}=(0,_.H)(e,ie);return Y(n().Fragment,null,Y("span",{className:"symbol"},`${t}`,"\xa0"),Y("div",{style:{width:C&&S?"100%":"auto",display:"flex",alignItems:"center"}},Y("div",null,r," ",a),Y(q.ZP,{config:N}),Y(q.yK,{url:w})))}),[e,ie,C,S,N,w]),pe=(0,o.useMemo)((()=>Z&&M),[M,Z]);return Y(O.ZP,{enablePortal:!0,trigger:"hover",className:"futuresMarketColumnWrap",placement:"right",sx:pe?{bg:"marketColumn.hover"}:{},overlay:v?null:Y(L.Z,{sx:$},Y(V.Z,Object.assign({href:se,target:"_blank",className:"nextLink"},I?{"data-testid":I}:null),Y(F.Z,{size:10,className:"linkIcon"})))},Y("a",Object.assign({className:"content",onClick:de},I?{"data-testid":I}:null),Y("div",{className:"item",style:y.X3.first},h?null:Y("div",{className:"favorite "+(ne>-1?"primary":""),onClick:le},Y(D.Z,{size:12})),Y(Q,{className:"name"},me)),!S||P?Y("div",{className:"item",style:y.X3.second},Y(Q,{sx:{color:oe}},(re&&ce?"$":"")+U(a))):null,Y("div",{className:"item",style:y.X3.third},Y(K.XI,{sx:{color:ae?A:"t.grey600"},__css:j},ae?`${i}%`:`${W(u)}`))))},ee=(0,o.memo)(X);var te=r("eIfy"),re=r.n(te),ae=r("NcRm"),ie=r("UGwn"),oe=n().createElement;const ne=(0,ae.W8)((({itemElement:e,itemData:t,itemHeight:r})=>oe(i.Z,{style:{height:r,zIndex:2e3},sx:G},oe(e,t)))),le=(0,ae.JN)((({items:e,itemElement:t,itemHeight:r,disabled:a})=>oe("div",{style:{overflow:"auto"}},Boolean(null===e||void 0===e?void 0:e.length)&&(null===e||void 0===e?void 0:e.map(((e,i)=>oe(ne,{index:i,key:`${e.symbolDisplay}-${e.symbol}`,itemElement:t,itemData:e,itemHeight:r,disabled:a}))))))),se=({itemElement:e,itemHeight:t,dataSource:r,disabled:a})=>{const i=(0,ie.X)(),n=(0,o.useCallback)((({oldIndex:e,newIndex:t})=>{i(re()(r,e,t))}),[r,i]);return oe(le,{distance:1,items:r,onSortEnd:n,itemElement:e,itemHeight:t,disabled:a})},ce=(0,o.memo)(se);var ue=n().createElement;(0,c.nM)();const de=(e,t)=>{const r=t[e];return"string"===typeof r?r:`${r.symbolDisplay}-${r.symbol}`},me=(0,o.memo)((({filterFunc:e,sortFunc:t,noFavorite:r,noFiat:a,changeSymbol:n,isGridWidget:l,isDefaultChange:c,needBreakline:u,openShotCut:d,onKeyDownCallback:m})=>{const{isLight:f}=(0,s.Fg)(),{getI18n:g}=(0,R.ZK)("","futures-ui"),{nextTickers:b,loading:h}=(0,C.Pj)(),{favorites:v}=(0,p.ux)(),{activeTab:x,activeSubTab:k,keyword:S}=(0,o.useContext)(T),P=(0,s.iB)(),O=(0,o.useMemo)((()=>b.map((e=>{const{contractVal:t,volume:r,symbol:a,isDelivery:i,rules:o}=e;if(o){const t=o.filter((e=>e.sectionKey===x));e.ruleNumber=t.length&&t[0].ruleNumber}else e.ruleNumber=Number.MAX_SAFE_INTEGER;var n;return i?(0,M.Z)((0,M.Z)({},e),{},{quoteVolume:Number(t)*Number(r||(null===(n=P[a])||void 0===n?void 0:n.volume)||0)}):e})).map((e=>{const t=v.indexOf(e.isDelivery?`${e.pair}-${e.contractType}`:e.symbol);return(0,M.Z)((0,M.Z)({},e),{},{favoritesIndex:v.length-t})}))),[x,v,P,b]),{0:L,1:V}=(0,o.useState)(O),{0:F}=(0,o.useState)(O),D=(0,o.useMemo)((()=>O.filter(e)),[e,O]),_=(0,o.useMemo)((()=>L.filter(e).sort((({difference:e=0},{difference:t=0})=>+t-+e)).slice(0,20)),[e,L]),B=(0,o.useMemo)((()=>F.filter(e).sort((({onboardDate:e=0},{onboardDate:t=0})=>t-e)).slice(0,20)),[e,F]),z=(0,o.useMemo)((()=>{let e=D;return x===y.UC&&(e=_),x===y.AE&&(e=B),t(e)}),[x,D,_,B,t]),K=(0,o.useMemo)((()=>ue(i.Z,{sx:{textAlign:"center"}},ue(f?I.Z:E.Z,{size:96}),ue(w.Z,{variant:"body2",color:"t.placeholder",pt:l?"18px":"5px"},g("futures-Market-NoSymbolUnder","No symbol under this category")))),[g,l,f]);(0,N.Z)((()=>{V(O)}),36e5);const q=(0,A.D)((e=>{const t=k===y.E6?{trackId:`BUSD_perp_${null===e||void 0===e?void 0:e.baseAsset}`}:"";return ue(ee,Object.assign({},e,t,{noFavorite:r,noFiat:a,changeSymbol:n,isGridWidget:l,isDefaultChange:c,needBreakline:u,openShotCut:d}))})),U=l?y.O$:24;return x===y.I_?ue(ce,{dataSource:z,itemElement:q,itemHeight:U,disabled:Boolean(v.length!==z.length||S)}):ue(Z.a,{sx:J,dataSource:z,loading:h,itemElement:q,itemKey:de,itemHeight:U,openShotCut:d,onKeyDownCallback:m,emptyChildren:K})}));var pe=r("wuzS"),fe=r("LmyI"),ge=r("B4YG"),ye=r("Qw9b"),be=r("DJuA"),he=n().createElement;const ve={delay:500,bg:"bg4"},xe={color:"t.yellow200",ml:"3px",fontSize:"16px",position:"relative",bottom:"2px"},ke=new Map([["hot",he(fe.Z,{size:14,sx:xe,key:"hot"})],["activity",he(ge.Z,{sx:xe,key:"new"})],["promoted",he(ye.Z,{sx:xe,key:"promote"})],["new",he(pe.Z,{sx:xe,key:"new"})]]),Se=({activeTab:e,switchTab:t,tabs:r})=>{const{i18n:{language:a}}=(0,s.ZK)(),l=(0,o.useMemo)((()=>{const e=r.map((e=>{let t=e;if(e.markIcon){const r=ke.get(e.markIcon);t=(0,M.Z)((0,M.Z)({},t),{},{display:he(n().Fragment,null,he(w.Z,{as:"span"},e.display),e.markIconLink?he(i.Z,{as:"a",href:`/${a}${e.markIconLink}`,target:"_blank",rel:"noopener noreferrer",sx:{color:"t.third",":hover":{color:"t.yellow"}}},r):r)})}return t}));return[{sectionKey:y.I_,display:he(D.Z,{size:14}),description:"",ruleNumber:"1000",sortValue:0},...e]}),[a,r]);return e?he(be.Z,{list:l,activeTab:e,switchTab:t,tabsStyle:{marginRight:"2px"},tooltipProps:ve}):null},Pe=(0,o.memo)(Se);var Te=r("Jnnm"),Ce=n().createElement;const Me=({types:e,activeType:t,onChange:r,sx:a={}})=>t&&r?Ce(i.Z,{sx:a},Ce(Te.Z,{types:e,type:t,onChange:r})):null,Ze=(0,o.memo)(Me);var we=r("xt2t"),Ie=n().createElement;const Ee=(0,o.memo)((({value:e,sx:t,change:r=(()=>!1)})=>Ie(we.Z,{fontSize:16,onClick:t=>{t.stopPropagation(),r("change"===e?"volume":"change")},sx:(0,M.Z)({mt:"2px",cursor:"pointer","&:hover":{color:"t.primary"}},t)})));var Ne=n().createElement;const Ae=({getI18n:e})=>(({list:e,i18nFunction:t})=>e.map((e=>({key:e,label:Ne("span",{"data-testid":e===y.E6?"BUSD_perp_tab":""},t(`market-text-${e}`))}))))({list:[...y._V,y.E6],i18nFunction:e}),Re=({name:e,noFavorite:t,noFiat:r,isGridWidget:n=!1,electronUpdateTabs:c,openShotCut:b,selectedCallback:h,changeSymbolCb:x=null,w:k,openEditFavoriteDialog:S})=>{const M=(0,l.useDispatch)(),Z=(0,s.Pv)(),w=(0,g.G)(),I=(0,l.useSelector)((e=>e.futureMarket.sortInfo)),E=(0,l.useSelector)((e=>e.futureMarket.radioWord)),N=(0,p.Bd)();let A=(0,f.d0)();A=x||A;const[R,O]=(0,a.Z)("futuresSort"),{getI18n:L}=(0,p.yk)(),V=(0,o.useMemo)((()=>w?y.mW:y.UD),[w]),{marketStyle:F,needBreakline:D,containerWidthRef:_,windowWidth:B}=(e=>{const{width:t}=(0,m.i)(),r=(0,o.useRef)(),{0:a,1:i}=(0,o.useState)(!1),{0:n,1:l}=(0,o.useState)(!0);return(0,o.useEffect)((()=>{r.current&&(i(r.current.offsetWidth>256),l(r.current.offsetWidth<400))}),[t,e]),(0,o.useMemo)((()=>({marketStyle:a,needBreakline:n,containerWidthRef:r,windowWidth:t})),[a,n,t])})(k),z=(0,o.useCallback)(((t,r)=>{A({isBlank:w!==r,stateSymbol:t,isDeliveryColumn:r,electronUpdateTabs:c,name:e}),h&&h(),(0,d.PI)(t)}),[A,e,w,h,c]),K=(0,o.useCallback)((({data:e,metaKey:t,ctrlKey:r})=>{const a=(0,f.co)(e.symbol,Z,e.isDelivery);u({data:e,path:a,metaKey:t,ctrlKey:r,deliveryPath:w}),h&&h()}),[w,h,Z]),{tabState:{activeTab:q,switchTab:$},searchState:{keyword:j,search:G},subTabState:{activeSubTab:J,switchSubTab:Y},filterFunc:Q}=(0,C.Mp)(V,N),X=(0,o.useCallback)((e=>M.futureMarket.updateState({sortInfo:e})),[M.futureMarket]),ee=(0,o.useCallback)((e=>{var t,r;M.futureMarket.updateState({radioWord:null===(t=y.jQ[e.ruleNumber])||void 0===t?void 0:t.key}),$(e.sectionKey);const a={[y.wm[null===(r=y.jQ[e.ruleNumber])||void 0===r?void 0:r.key]]:"default"};X(a),O(a)}),[M.futureMarket,O,X,$]),te=(0,o.useCallback)((e=>M.futureMarket.updateState({radioWord:e})),[M.futureMarket]);(0,o.useEffect)((()=>{R&&X(R)}),[q,M.futureMarket,R,X]);const re=(0,C.A1)({isChange:"change"===E,isGridWidget:n,marketStyle:F,openEditFavoriteDialog:S,activeTab:q}),ae=(0,C.TO)({activeTab:q,isSearching:Boolean(j),sortKeyFromLocalStorage:R}),ie=Ae({getI18n:L});return Ne(i.Z,{ref:_,sx:H},Ne(T.Provider,{value:{activeTab:q,activeSubTab:J,keyword:j}},Ne("div",{onClick:y.UW},Ne("div",{className:"searchWrap"},Ne(P,{value:j,onSearch:G,openShotCut:b,sx:U})),Ne("div",{className:"tabListWrap"},Ne(Pe,{tabs:N,switchTab:ee,activeTab:q,width:B,w:k})),Ne(Ze,{types:ie,activeType:J,onChange:Y,sx:W}),Ne("div",{className:"sortHeaderWrap"},Ne(v,{group:re,active:I,getGroupOrderKey:e=>{O(e),X(e)},showSort:q!==y.I_,renderProps:Ne(Ee,{value:E,change:te})}))),Ne(me,{filterFunc:Q,sortFunc:ae,noFavorite:t,noFiat:r,changeSymbol:z,isGridWidget:n,isDefaultChange:F,needBreakline:D,openShotCut:b,onKeyDownCallback:K})))},Oe=n().memo(Re)},CLE1:(e,t,r)=>{"use strict";r.d(t,{xG:()=>o,NU:()=>n,mU:()=>l,z$:()=>c});var a=r("0RPJ"),i=(r("klBV"),r("jQmP"));const o=e=>({price:`${e("orderBook-price",{defaultValue:"Price"})}`,size:`${e("orderBook-Size",{defaultValue:"Size"})}`,sum:`${e("orderBook-Sum",{defaultValue:"Sum"})}`}),n=({maxSumRef:e,amountAskSum:t,quantityPrecision:r,isCoinUnit:o,direction:n,tickSize:l,filters:s})=>(c,u,d,m)=>{var p;const f=(0,i.p)(l),{amount:g,sum:y}=u[d],b=m?t-((null===(p=u[d-1])||void 0===p?void 0:p.sum)||0):y||0,h=s.find((e=>"LOT_SIZE"===e.filterType)),{stepSize:v}=h,x=(0,i.p)(v),k={size:o?(0,a.uf)(g,x):(0,a.uf)(g,f),sum:o?(0,a.uf)(Number(b),r):(0,a.uf)(Number(b),f)};return{progress:Number(b)/Number(e.current),datas:c.map((({type:e},t)=>({type:e,value:k[e]||null,style:{textAlign:{ltr:0===t?"left":"right",rtl:0===t?"right":"left"}[n],direction:n}})))}},l=({getI18n:e,quoteAsset:t,baseAsset:r,marginAsset:a,isCoinUnit:i})=>[{type:"price",title:`${o(e).price}(${t})`,direction:"l",style:{flex:1,justifyContent:"flex-start"}},{type:"size",title:`${o(e).size}(${i?r:a})`,direction:"r",style:{flex:1,justifyContent:"flex-end"}},{type:"sum",title:`${o(e).sum}(${i?r:a})`,direction:"r",style:{flex:1,justifyContent:"flex-end"}}],s={bg:"bg4",delay:200,enablePortal:!0,placement:"top"},c=[{type:"all",dataTestid:"defaultModeButton",toolTipProps:s},{type:"bid",dataTestid:"buyModeButton",toolTipProps:s},{type:"ask",dataTestid:"sellModeButton",toolTipProps:s}]},GtUU:(e,t,r)=>{"use strict";r.d(t,{M:()=>s,N:()=>c});var a=r("0RPJ"),i=r("klBV"),o=r("jQmP"),n=r("SJeZ");const l=e=>({price:`${e("orderBook-Price",{defaultValue:"Price"})}`,amount:`${e("orderBook-Amount",{defaultValue:"Amount"})}`,total:`${e("orderBook-Total",{defaultValue:"Total"})}`}),s=(e,t)=>e.map(((e,r)=>({type:e,title:l(t)[e],style:{flex:1,justifyContent:0===r?"flex-start":"flex-end"}}))),c=({median:e,quantityPrecision:t,decimalPlace:r,isCoinUnit:l})=>(t,s,c)=>{const u=(0,i.gm)(),{tickSize:d,filters:m}=(0,i.j2)(),p=(0,o.p)(d),{amount:f,total:g,price:y}=s[c],b=m.find((e=>"LOT_SIZE"===e.filterType)),{stepSize:h}=b,v=(0,o.p)(h),x={amount:l?(0,a.uf)(f,v):(0,n.WA)({quantity:f,price:y,precision:p}),total:l?(0,a.uf)(Number(g),r):(0,n.WA)({quantity:f,price:y,precision:p})};return{progress:Number(f)/Number(e),datas:t.map((({type:e},t)=>({type:e,value:x[e]||null,style:{textAlign:{ltr:0===t?"left":"right",rtl:0===t?"right":"left"}[u],direction:u}})))}}},"6hWq":(e,t,r)=>{"use strict";r.d(t,{_:()=>a});const a={"&#futuresOrderbook":{".orderbook-tbheader":{".item":{display:"block",color:"t.third",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"end","&:first-of-type":{textAlign:"start"}}},"& .tick-content":{color:"t.primary"},"& .orderbook-ticker":{display:"flex",py:"1px",px:3,height:33,alignItems:"center","& .contractPrice":{display:"flex",mr:1,fontSize:"20px",alignItems:"center",fontWeight:"medium"},"& .markPrice":{flex:1,display:"inline-block",fontSize:"12px",textAlign:"left",color:"t.secondary"},"& .right":{flex:1,textAlign:"right"},"& .more":{color:"tradeWidget.orderbookMoreIconColor",fontSize:1,mr:2,textDecoration:"none","&:hover":{color:r("2HSj").er[300]}},"& .arrow-icon":{fontSize:"16px "},"& .status-sell":{color:"t.sell"},"& .status-green":{color:"t.buy"},"& .status-primary":{color:"t.primary"}},"& .orderbook-progress":{height:"20px !imporant","& .row-content":{lineHeight:"20px !imporant",px:"0px !important"},"& .progress-container":{height:"20px !imporant","& .row-content":{"& .text":{color:"t.secondary"}}},"& .progress-bar":{height:"20px !imporant"}}}}},qCKq:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var a=r("/SIk");const i=({currentType:e,asks:t,bids:r,addSumData:i,isMobile:o})=>{if(o)return{amountAskSum:0,amountBidSum:0,maxSumRef:(0,a.useRef)(0),setMaxSumRef:()=>{}};const n=(0,a.useRef)(0),l="bid"!==e?i(t):0,s="ask"!==e?i(r):0,c=(0,a.useCallback)((a=>{let i=0,o=0;if("ask"!==e){var s;const e=Math.min(a,r.length);i=(null===(s=r[e-1])||void 0===s?void 0:s.sum)||0}if("bid"!==e){var c;const e=Math.min(a,t.length);o=l-((null===(c=t[t.length-e-1])||void 0===c?void 0:c.sum)||0)}n.current=Math.max(i,o)}),[e,r,t,l]);return{amountAskSum:l,amountBidSum:s,maxSumRef:n,setMaxSumRef:c}}},GnZy:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("ixEh"),s=r("Fyo8"),c=r("LcTY"),u=r("lv1b"),d=r("VM/Z"),m=r("1U9V"),p=r("klBV"),f=r("8T+8"),g=r("SJeZ"),y=r("4Dm0"),b=r("CLE1"),h=r("GtUU"),v=r("jQmP");var x=r("qCKq"),k=r("6hWq"),S=o().createElement;const P="obSymbol",T={ask:void 0,bid:void 0},C=()=>{const e=(0,n.useDispatch)(),t=(0,d.BN)(),r=(0,p.gm)(),[o,[C,M]]=(0,p.z4)(),Z=(0,p.j2)(),{tickSize:w,filters:I}=Z,E=(0,n.useSelector)((e=>e.exchangeInfo.infos))[o],{levels:N=[],levelsIndex:A=[],minQty:R="0.01"}=E||{},O=-Math.log10(R),[L,V]=(0,p.it)(P,{}),F=(0,p.sH)(P),{getI18n:D}=(0,g.yk)(),{isCoinUnit:_}=(0,g.QV)(),B=function(){const{isCoinUnit:e}=(0,g.QV)(),{tickSize:t}=(0,p.j2)(),r=(0,v.p)(t);return(0,i.useCallback)((t=>t.reduce(((t,a)=>(a.originAmount||(a.originAmount=a.amount,a.unitChangedAmount=(0,g.WA)({quantity:a.amount,price:a.price,precision:r,format:!1})),a.amount=e?a.originAmount:a.unitChangedAmount,a.sum=t+Number(a.amount||0),a.sum)),0)),[e,r])}(),{isMobile:z}=(0,p.Fs)(),K=(0,y.G)(),q="rtl"===r?"right":"left",U=()=>"undefined"===typeof L[o]?A[A.length-1]:A.includes(L[o])?L[o]:A[A.length-1],W=(0,i.useCallback)(((e,t)=>{if($(e),!t){const t=s.tO.getItem(F,{});V((0,a.Z)((0,a.Z)({},t),{},{[o]:e}))}}),[V,F,o]),{0:H,1:$}=(0,i.useState)(U()),j=N[H],G=(0,i.useMemo)((()=>(0,b.mU)({getI18n:D,quoteAsset:M,baseAsset:C,marginAsset:Z.marginAsset,isCoinUnit:_})),[_,D,M,C,Z]),{preOrders:J,loading:Y}=(0,p.E)(),Q=(0,u.AJ)(J,!0,o),X=(0,p.U6)(o,t,K).getState(),ee=(0,m.jM)(X.ask,{num:400,level:j,desc:!1}),te=(0,m.jM)(X.bid,{num:400,level:j,desc:!0}),re=(0,i.useMemo)((()=>{if(ee&&te){var e;const t=ee.concat(te).sort(((e,t)=>e.amount-t.amount));return null===(e=t[Math.floor(.95*t.length)])||void 0===e?void 0:e.amount}return 0}),[ee,te]),{0:ae,1:ie}=((0,i.useRef)(T),(0,i.useState)("all")),{amountAskSum:oe,maxSumRef:ne,setMaxSumRef:le}=(0,x.E)({currentType:ae,asks:ee,bids:te,addSumData:B,isMobile:z}),se=(0,i.useMemo)((()=>z?(0,h.N)({median:re,quantityPrecision:O,decimalPlace:H,product:Z,isCoinUnit:_}):(0,b.NU)({maxSumRef:ne,amountAskSum:oe,quantityPrecision:O,tickSize:w,filters:I,direction:r,isCoinUnit:_})),[z,w,ne,oe,O,Z,re,H,_,r,I]),ce=(0,i.useCallback)((t=>{c.T.emit(c.F.UPDATE_ORDER_PRICE_INPUT,t.price),e.position.setOrderbookPrice({symbol:o,price:t.price})}),[e.orderForm,e.position,o]),ue=(0,i.useCallback)((t=>{e.userProfile.save({key:"orderBookDecimal",value:t})}),[e.userProfile]),de=(0,i.useMemo)((()=>S(f.Z,null)),[]);return(0,i.useEffect)((()=>{W(U(),"changeSymbol")}),[A,o]),S(l.Z,{symbol:o,TICK_MAP:N,baseAsset:C,quoteAsset:M,tickSizeMap:A,qty:R,ordersLoading:Y,openOrders:Q,asks:ee,bids:te,type:ae,changeType:ie,listStyle:{direction:r},isElectron:!0,level:H,setLevel:W,tableHeaderConfig:G,handleDecimalChange:ue,handleOrderSelected:ce,renderTicker:de,renderRow:se,renderAutoSizer:le,getHeaderConfig:h.M,getI18n:D,__css:k._,id:"futuresOrderbook",progessDirection:q,rowHeight:20,typeList:z?void 0:b.z$})}},eVjR:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var a=r("/SIk"),i=r.n(a),o=r("szIg"),n=(r("O94r"),r("sZZk")),l=r("Uqe+"),s=(r("MB7V"),r("ka4r"),r("/yzf"),r("0hOy"),r("w7Tp"),r("wGPX")),c=(r("4wBm"),r("5oTf")),u=(r("fjQ4"),r("klBV")),d=r("VM/Z");r("M86C"),r("OBoA"),i().createElement;r("1VTk"),r("5vwO"),r("GpFh");var m=r("YhxV"),p=r("Stvs"),f=r("rR/+");i().createElement;const g={red:m.Z.colors.sell,green:m.Z.colors.buy},y={red:f.Z.colors.sell,green:f.Z.colors.buy},b={red:p.Z.colors.sell,green:p.Z.colors.buy};d.Qq,d.qo,d.Pe;i().createElement;var h=r("ux7Q"),v=r("FOuV"),x=r("SJeZ");var k=i().createElement;d.Xs,d.Xs,d.Xs,d.Xs;const S=()=>{(0,o.useDispatch)();const[e,t]=(0,l.Z)(v.di,v.kj),{getI18n:r}=(0,u.ZK)(),{getI18n:i}=((0,u.gm)(),(0,x.yk)()),{setLayouts:s}=(0,a.useContext)(h.VY),{isIPad:c}=((0,o.useSelector)((e=>e.layout.pageLayout)),(0,u.Fs)()),d=((0,u.rd)(),(0,n.useMediaQuery)({query:"screen and (max-width: 1440px)"}));(0,a.useCallback)((e=>{if(d&&"six"===e)return;const{pathname:t,search:r}=window.location;let a="";if(t.indexOf("multipleChart")>-1){a=`${t.split("/").slice(0,4).join("/")}?type=${e}`}else{const i=t.split("/").slice(0,2);a=""===r?`${i.join("/")}/futures/multipleChart?type=${e}`:`${i.join("/")}/futures/multipleChart${r}&type=${e}`}return window.open(a,"_blank")}),[d]);return null},P=()=>{const e=(0,a.useRef)();return k(s.ZP,{trigger:"hover",ref:e,sx:{height:"64px",pt:"20px",pr:26,pl:"8px",bg:"moduleBg",position:"relative",cursor:"pointer",svg:{path:{fill:"t.primary"},"&:hover":{path:{fill:"t.yellow"}}}},"data-testid":"UIOptionSelect",overlay:k(S,null),placement:"bottom",enablePortal:!0},k(c.Z,{sx:{zIndex:10}}))},T=i().memo(P)},tXWo:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r("/SIk"),i=r.n(a),o=r("szIg"),n=r("fi7b"),l=r("klBV"),s=r("j4Sa"),c=r("ydHf"),u=r("ka4r"),d=r("/yzf"),m=r("SJeZ"),p=r("VDPE"),f=i().createElement;const g=()=>{const{isMobile:e}=(0,l.Fs)(),t=((e=!0,t=!0)=>({root:{color:e?"themeConfig.grey800":"themeConfig.grey50",backgroundColor:e?"#FEF6D8":"t.yellow700",border:"1px solid "+(e?"t.yellow100":"#665A28"),borderRadius:"4px",height:"auto",padding:"12px",margin:"0px 10px 4px",marginTop:t?"10px":"0px","& .warning":{width:"16px",height:"16px",marginRight:"10px",color:"t.yellow200"},"& .description":{fontSize:"12px",width:t?"calc(100% - 30px)":"auto",marginRight:t?"25px":2,wordBreak:"break-word",color:"#F0B90B"}},close:{width:"16px",height:"16px"}}))((0,l.Fg)().isLight,e),{t:r}=(0,m.$G)(),{getI18n:i}=(0,m.yk)(),g=(0,p.yN)({hideOtherSymbol:!1}),y=(0,l.zk)("openTip"),b=(0,l.zk)("placeOrder"),h=(0,o.useDispatch)(),v=(0,a.useCallback)((()=>h.serviceStatus.updateStateImmutable({openTip:!1})),[]);return y&&f(u.Z,{sx:t.root,alignItems:"center"},f(u.Z,{alignItems:"flex-start"},f(s.Z,{className:"warning"}),f("div",{className:"description"},f("span",null,i("service-abnormal",{defaultValue:"The service is currently overloaded or malfunctioning."})," ","\xa0",b&&f(n.c,{t:r,i18nKey:(0,m.Gv)("abnormal-close-all"),components:{bold:f("span",{style:{fontWeight:"bold"}})},defaults:"<bold>Cancel all open orders</bold> and <bold>close all positions</bold> here."})),f(d.Z,{mt:"4px",onClick:g},i("confirmBtn",{defaultValue:"Confirm"})," >"," "))),f(c.Z,{sx:t.close,onClick:v}))}},a9vC:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var a=r("ka4r"),i=r("/yzf"),o=r("wGPX"),n=r("/0Tg"),l=r("RkbI"),s=r("/SIk"),c=r.n(s),u=r("XtDi"),d=r("wXRv"),m=r("EZ8p"),p=r("klBV"),f=r("2rU8"),g=r("/1uR"),y=r("/MJE"),b=r("jQmP"),h=r("6Afj"),v=r("OjEc"),x=r("SJeZ"),k=r("4Dm0"),S=c().createElement;const P=(0,h.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(4726)]).then(r.bind(r,"uSdY")))),{registerActionHandle:T,constants:C}=y.Z;function M({showRightBorderLine:e}){const[t]=(0,p.z4)(),r=(0,p.Kn)()[t]||{},o=(0,p.j2)(),n=(0,p.rR)(),u=(0,x.CE)()[t],{getI18n:d}=(0,x.yk)(),{loading:m,value:y}=(0,g.s)(o.deliveryDate),h=!m&&y<1,k=(0,b.p)(n),P=Number((null===u||void 0===u?void 0:u.estimatedSettlePrice)||0).toFixed(k),{isMobile:T}=(0,p.Fs)(),{symbol:C,contractTypeI18n:M,deliveryDateFormat:Z}=(0,x.oO)();return(0,s.useMemo)((()=>S(c().Fragment,null,S(a.Z,{sx:{alignItems:"center",mr:0,mb:[1,0],pr:"16px",borderRight:e?"1px solid":"none",borderColor:"newLine"}},S(a.Z,{flexDirection:"column",sx:{color:"t.primary"}},S("h1",{style:{fontSize:"20px",fontWeight:"500"}},C,"\xa0 "),S(f.XI,{sx:{fontSize:"sm"}},S("h1",{style:{fontSize:"14px",display:"flex",alignItems:"center",fontWeight:"500"}},`${M} ${Z}`,S(v.ZP,{config:r,sx:{display:"inline-block",top:"2px",position:"relative","& svg":{fontSize:"20px"}}})))),S(l.Z,{color:"t.primary",fontSize:20})),h&&S(i.Z,{sx:{color:"t.yellow200",fontSize:"12px",fontWeight:"normal",width:T?"100%":"100px",whiteSpace:T?"normal":"nowrap"}},d("EstimatedDeliveryPrice",{defaultValue:"Est delivery price"}),"(USD):",P))),[P,h,o])}const Z=({name:e=null,showRightBorderLine:t})=>{const r=(0,k.G)(),a=(0,s.useRef)(),{0:i,1:l}=(0,s.useState)(!1),{0:p,1:f}=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=T((({name:e})=>{switch(e){case C.ACTION_TRADE_SEARCH_SYMBOL:l(!0),f(!0)}}));return()=>e}),[i,p]);const g=()=>l(!0),y=()=>{l(!1),f(!1)};(0,d.Z)({callback:y,id:"marketSymbol"});const b=(0,s.useMemo)((()=>({open:i,onMouseEnter:g,onMouseLeave:y,onClick:()=>l(!i)})),[i]),[h,v]=(0,u.Z)(!1),x=(0,s.useCallback)((()=>{v(!1)}),[v]),Z=(0,s.useCallback)((()=>{v(!0)}),[v]);return S(c().Fragment,null,S(o.ZP,Object.assign({ref:a,sx:{"&:hover":{cursor:"pointer"},whiteSpace:"nowrap",minWidth:"auto",mb:[r?"4px":0]},trigger:"hover",enablePortal:!0,overlay:S(n.Z,{id:"marketSymbol",className:"dropdown-box",sx:{bg:"marketCard",left:["-16px",0],px:0,pt:0,pb:"xs",minWidth:["auto","425px"],maxWidth:["100vw","425px"],height:318,maxHeight:"100vh",boxShadow:"selectShadow"}},S(P,{name:e,isGridWidget:!1,openShotCut:p,selectedCallback:y,openEditFavoriteDialog:Z}))},b),S(M,{showRightBorderLine:t})),S(m.default,{visible:h,onClose:x}))},w=(0,s.memo)(Z)},X2Id:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("sZZk"),l=r("klBV"),s=r("/uHq"),c=r("v2M8"),u=r("LTcb"),d=r("LcTY"),m=r("VM/Z"),p=r("vKbb"),f=r("SJeZ"),g=r("jQmP"),y=r("z+x3"),b=o().createElement;const h=Math.floor((y.FA-44-31)/20),v=({sx:e={}})=>{const[t,r]=(0,l.z4)(),{getI18n:o}=(0,u.Rk)(),{formatMi:v,formatTk:x}=(0,l.mC)(),{isCoinUnit:k}=(0,f.QV)(),{marginAsset:S,tickSize:P}=(0,l.j2)(),T=(0,g.p)(P),[C,M]=r,Z=(0,i.useMemo)((()=>[{text:`${o("price",{defaultValue:"Price"})}(${M})`,area:"left"},{text:`${o("amount",{defaultValue:"Amount"})}(${k?C:S})`,area:"right"},{text:o("time",{defaultValue:"Time"}),area:"right"}]),[o,M,C,S,k]),{trades:w,loading:I}=(0,p.K)({symbol:t,stream:(0,m.BN)(),isFutures:!0,isDelivery:!1}),E=(0,i.useCallback)((e=>{d.T.emit(d.F.UPDATE_ORDER_PRICE_INPUT,e.price)}),[]),N=(0,i.useMemo)((()=>o("common-nodata",{defaultValue:"No Data"})),[]),A=(0,n.useMediaQuery)({query:y.is}),R=(0,i.useMemo)((()=>(A?w.reverse().slice(0,h):w.slice().reverse()).map((e=>{const{quantity:t,price:r}=e,i=k?t:(0,f.WA)({quantity:t,price:r,precision:T,format:!1});return(0,a.Z)((0,a.Z)({},e),{},{quantity:i})}))),[w,A,T]);return b(c.Z,{sx:(0,a.Z)({px:"0",pb:"12px",width:"100%"},e)},b(s.Z,{headers:Z,trades:R,loading:I,itemHeight:20,formatMi:v,formatTk:x,formatQty:k,onRowClick:E,emptyText:N}))},x=o().memo(v)},"7Q68":(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var a=r("/SIk"),i=r.n(a),o=r("O94r"),n=r.n(o),l=r("wGPX"),s=r("w7Tp"),c=r("ka4r"),u=r("RkbI"),d=r("SJeZ"),m=r("FOuV"),p=i().createElement;const{LAST_PRICE:f,MARK_PRICE:g}=m.gu,y={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",".filter-option":{padding:"10px 32px 10px 16px",color:"t.primary","&:hover":{bg:"line"},"&.active":{color:"t.yellow"},fontSize:"14px"}},b=({workingType:e,changeWorkingType:t,sx:r={}})=>{var i;const{getI18n:o}=(0,d.yk)(),m=(0,a.useMemo)((()=>[{label:o("advancedStrategy-lastPrice",{defaultValue:"Last"}),type:f},{label:o("advancedStrategy-markPrice",{defaultValue:"Mark"}),type:g}]),[o]);return p(l.ZP,{trigger:"hover",sx:{ml:"8px"},overlay:p(s.Z,{sx:y},m.map((({label:r,type:a})=>p("div",{className:n()({"filter-option":!0,active:a===e}),key:a,onClick:()=>{a!==e&&t(a)}},r))))},p(c.Z,{sx:{height:"40px",bg:"inputBg",borderRadius:"4px",justifyContent:"center",alignItems:"center",color:"t.primary",minWidth:"80px"}},null===(i=m.find((t=>t.type===e)))||void 0===i?void 0:i.label,p(u.Z,{ml:"4px",color:"t.third",size:16})))}},FOuV:(e,t,r)=>{"use strict";r.d(t,{yf:()=>o,vQ:()=>n,dk:()=>l,PR:()=>s,Yl:()=>c,hp:()=>u,HZ:()=>d,O6:()=>m,gu:()=>p,PH:()=>f,HM:()=>g,x:()=>y,CN:()=>b,IA:()=>h,Fy:()=>v,rb:()=>x,cQ:()=>k,Y1:()=>S,fj:()=>P,di:()=>T,kj:()=>C,Z$:()=>M,PV:()=>Z,rf:()=>w,hI:()=>I,kE:()=>E,Sm:()=>N,yX:()=>A,L6:()=>R,Br:()=>O,Zv:()=>L,Xd:()=>V,y3:()=>F});var a=r("VM/Z"),i=r("EPGa");const o="futures/funding-history",n={USDT:{pricePrecision:2},USDT2:{pricePrecision:8},BNB:{pricePrecision:2},BNB2:{pricePrecision:8},perpetual:{pricePrecision:2},delivery:{pricePrecision:4}},l={UFutures:{precision:2},CFutures:{precision:4}};let s;!function(e){e.LONG="LONG",e.SHORT="SHORT",e.BOTH="BOTH"}(s||(s={}));const c={ISOLATED:"ISOLATED",CROSSED:"CROSSED"};let u;!function(e){e.BUY="BUY",e.SELL="SELL"}(u||(u={}));const d={CONTRACT_PRICE:"Last Price",MARK_PRICE:"Mark Price"};let m,p,f;!function(e){e[e.LONG=1]="LONG",e[e.SHORT=-1]="SHORT"}(m||(m={})),function(e){e.LAST_PRICE="CONTRACT_PRICE",e.MARK_PRICE="MARK_PRICE"}(p||(p={})),function(e){e.LIMIT="limit",e.LIMIT_TYPE="LIMIT",e.MARKET="market",e.MARKET_TYPE="MARKET",e.STOP="stop",e.STOP_TYPE="STOP",e.TAKE_PROFIT="takeProfit",e.CLOSE="close",e.STOP_LIMIT="STOP",e.STOP_MARKET="STOP_MARKET",e.TAKE_PROFIT_LIMIT="TAKE_PROFIT",e.TAKE_PROFIT_MARKET="TAKE_PROFIT_MARKET",e.TRAILING_STOP_MARKET="TRAILING_STOP_MARKET",e.LIQUIDATION="LIQUIDATION"}(f||(f={}));const g={ONE_WAY:.001,TWO_WAY:5e-4},y={FEE_URL:`${a.$g}/%locale%/fee/futureFee`,DEPOSIT_URL:`${a.$g}/%locale%/my/wallet/exchange/deposit/crypto/%coin%`,BUYING_URL:`${a.$g}/%locale%/buy-sell-crypto?crypto=%crypto%`,BUYING_URL_ELECTRON:"binance://buy-sell-crypto?crypto=%crypto%",COLLATERAL_URL:`${a.$g}/%locale%/my/wallet/account/futures`,GRID_TRADING_URL:`${a.$g}/%locale%/futures/strategy/grid?symbol=%symbol%`,GRID_LEARN_URL:`${a.$g}/%locale%/futures/strategy/grid?symbol=%symbol%&activeTab=%activeTab%`,TWAP_LEARN_URL:`${a.$g}/%locale%/futures/strategy/twap?symbol=%symbol%`};function b(e="",t={}){return Object.keys(t).reduce(((e,r)=>e.replace(new RegExp(`%${r}%`,"g"),t[r])),e)}const h=1,v={transferAvailable:!a.Jg,openAccountAvailable:!a.Jg,feeAvailable:!a.Jg,enableReduceOnly:!0,enableTakeProfit:!0,enableFundingHistory:!a.Jg,leverageInfo:{symbol:"\u2715",defaultVal:20,minVal:1,maxVal:125,avaliableVal:40,minNationalVal:5e4},slideFlag:!0,enabledMonthly:!1,enabledActivity:!a.Jg&&!1},x={GTC:"GTC",IOC:"IOC",FOK:"FOK",POST_ONLY:"GTX",GTE_GTC:"GTE_GTC"},k=[i.Jm.STOP_MARKET,i.Jm.TAKE_PROFIT_MARKET],S=[i.Jm.MARKET,i.Jm.TRAILING_STOP_MARKET,i.Jm.STOP_MARKET,i.Jm.TAKE_PROFIT_MARKET];let P;!function(e){e.OTOCO="OTOCO",e.OTO="OTO"}(P||(P={}));const T="page-mode",C="order_mode",M="chart_mode",Z="futures-chartSymbol",w="futures-lastProductList",I={two:[],three:[],four:[],six:[]},E={two:["btcusd_quarter","btcusd_quarter"],three:["btcusd_quarter","btcusd_quarter","btcusd_quarter"],four:["btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter"],six:["btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter"]},N={two:["delivery","delivery"],three:["delivery","delivery","delivery"],four:["delivery","delivery","delivery","delivery"],six:["delivery","delivery","delivery","delivery","delivery","delivery"]},A={futures:"futures",delivery:"delivery"},R="btcusd_quarter",O=e=>e.includes(i.Jm.MARKET)&&!(e=>e===i.Jm.TRAILING_STOP_MARKET)(e),L="MODIFY_ORDER_CONFIG",V={kLine:!0,needConfirm:!0},F={PRICE:"PRICE",QUANTITY:"QUANTITY",BOTH:"BOTH"}},SJeZ:(e,t,r)=>{"use strict";r.d(t,{xm:()=>o.xm,Gv:()=>Z.Gv,WA:()=>xe.WA,zZ:()=>$e,cO:()=>o.cO,G8:()=>se,zF:()=>ot,zu:()=>i.zu,KQ:()=>d.s,Kc:()=>d.K,he:()=>$,Wr:()=>f,Gf:()=>g.G,nL:()=>h,w2:()=>u,IV:()=>i.IV,d0:()=>v.d0,f3:()=>S,oD:()=>T,gN:()=>C.g,$h:()=>St,oO:()=>w,G3:()=>I.G,UI:()=>i.UI,t1:()=>i.t1,mL:()=>E,yV:()=>N,s4:()=>V,aq:()=>F.a,b9:()=>j,_k:()=>G,e5:()=>J,CJ:()=>i.CJ,I3:()=>i.I3,Bd:()=>ae,d2:()=>ee,E5:()=>te,yk:()=>Z.yk,C3:()=>re.C3,nN:()=>oe,m8:()=>le,uD:()=>Fe,Nx:()=>bt,rf:()=>pe,ho:()=>ge,H3:()=>Te,Qd:()=>We,m:()=>pt,se:()=>Me,CE:()=>Ee,ux:()=>we,kN:()=>i.kN,K5:()=>Ae,M6:()=>De,t2:()=>o.t2,lE:()=>Oe,Xb:()=>o.Xb,hN:()=>i.hN,db:()=>Ye,$J:()=>o.$J,F7:()=>i.F7,r8:()=>i.r8,QV:()=>Qe.Q,KK:()=>Ve,W5:()=>i.W5,BF:()=>kt,NU:()=>i.NU,H$:()=>Re,NJ:()=>fe,aT:()=>i.aT,LY:()=>Le,x_:()=>Xe,ql:()=>tt,_$:()=>it,$G:()=>Z.$G,Gb:()=>c,eY:()=>i.eY,s7:()=>xe.s7,F:()=>o.dM,Dj:()=>o.Dj,h5:()=>Y});var a=r("VM/Z");var i=r("+dPF"),o=r("8Y2u"),n=r("cucV"),l=r("DCTW"),s=r("wdcV");const c=e=>{const{useLastPrice:t}=(0,i.F7)(),r=(0,o.dM)(),a=(0,s.L6)(r)[e]||[];return(0,n.ot)(a,t)},u=e=>{const{useLastPrice:t}=(0,i.F7)(),r=(0,o.dM)(),a=(0,s.L6)(r)[e]||[];return(0,l.ot)(a,t)};var d=r("nFk2"),m=r("RCKr"),p=r("3ZO7");function f({symbol:e,isDelivery:t}){const{value:r=(e?{}:[])}=(0,m.N)((()=>t?(0,p.u)(e):(0,p.x)(e)),[e,t]);return r}var g=r("4c8F"),y=r("/SIk");r("W40Z"),r("Utn3");var b=r("EPGa");function h({orderType:e,activePrice:t,price:r}){let a=!1,i=!1;if(e===b.Jm.TRAILING_STOP_MARKET){const e=Number(t);t&&(e<r?i=!0:e>r&&(a=!0))}return{buyDisabled:a,sellDisabled:i}}var v=r("k7O1"),x=r("A2VZ");async function k(){const{data:e}=await(0,x.w)();return e}function S(){const{value:e=!1,error:t,loading:r}=(0,m.N)(k,[]);return{value:e,error:t,loading:r}}var P=r("klBV");const T=()=>{const{contractType:e}=(0,P.j2)();return e!==a.Yp.PERPETUAL};var C=r("vJ4P");var M=r("Y+MU"),Z=r("869M");function w(){const{getI18n:e}=(0,Z.yk)(),t=(0,P.j2)();return(0,M.H)(t,e)}var I=r("4Dm0");function E(e){return(0,P.iB)()[e]||{}}const N=()=>{const{0:e,1:t}=(0,y.useState)(!1);return{visible:e,onOpen:(0,y.useCallback)((()=>{t(!0)}),[]),onClose:(0,y.useCallback)((()=>{t(!1)}),[])}};var A=r("5vwO"),R=r("szIg"),O=r("eXOl"),L=r("KUZ0");const V=()=>{const e=(0,R.useSelector)(L.W9),{delivery:t,perpetual:r}=(0,O.Pv)();return e.map((e=>{if(Object.keys(r).includes(e))return(0,A.Z)((0,A.Z)({},r[e]||{}),{},{delivery:!1});const a=Object.values(t).find((({pair:t,contractType:r})=>{if("string"===typeof e&&e.indexOf("-")){const[a,i]=e.split("-");return a===t&&i===r}return!1}));return a?(0,A.Z)((0,A.Z)({},a),{},{delivery:!0}):void 0})).filter((e=>!!e))};var F=r("2ynj"),D=r("/MJE"),_=r("2yzH"),B=r("4m5F"),z=r("wqQ1"),K=r("0RPJ");const q=({orderType:e,qty:t=0,triggerPrice:r,orderPrice:a,contractVal:i,activationPrice:o,lastPrice:n,unit:l,precision:s})=>{const c=l===B.SW.coin,u=l===B.AO.usdt;if(c||u){let l;switch(e){case b.Jm.LIMIT:case b.Jm.STOP_LIMIT:case b.Jm.TAKE_PROFIT_LIMIT:case b.Jm.POST_ONLY:l=a||0;break;case b.Jm.MARKET:l=n||0;break;case b.Jm.STOP_MARKET:case b.Jm.TAKE_PROFIT_MARKET:l=r||0;break;case b.Jm.TRAILING_STOP_MARKET:l=o||0;break;default:l=0}if(c){const e=Number(i);return l=Number(l),l?(0,K.Jp)(e/l,t).toFixed(s,2):0}return u&&l?(0,K.Jp)(l,t).toFixed(s,2):0}return t};var U=r("IewQ"),W=r("NQFm");const H=b.Jm.MARKET;function $(){var e;const t=(0,I.G)(),[r]=(0,P.z4)(),i=E(r)||{},{filters:o=[]}=i,n=(null===(e=o.find(W.$H))||void 0===e?void 0:e.tickSize)||"",l=(0,a.l6)(!0),s=(0,P.d)(r,l,{num:1,level:n,isDelivery:t}),c=(0,P.H0)(r,l,{num:1,level:n,isDelivery:t});return{bidPrice:(0,y.useMemo)((()=>{var e;return null===(e=s[0])||void 0===e?void 0:e.price}),[s]),askPrice:(0,y.useMemo)((()=>{var e;return null===(e=c[0])||void 0===e?void 0:e.price}),[c])}}function j(){return{placeOrderReducer:(e,{type:t,payload:r})=>t===U.z?(0,A.Z)((0,A.Z)({},e),r):(0,A.Z)({},e)}}const G=()=>{const e=(0,I.G)(),[t]=(0,i.eY)(),[r,[a]]=(0,P.z4)(),o=(0,P.j2)(),{marginAsset:n}=o,{getI18n:l}=(0,Z.yk)(),s=l("Cont"),{contractVal:c}=(0,P.j2)(),u=(0,P.uH)(!0),d=(0,P.XY)(t),{maxBuyOrderAmount:m,maxSellOrderAmount:p}=(0,P.V2)({reduceOnly:!1,orderPrice:0,orderType:H,positionDirection:b.RS.OPEN}),f=q({qty:m,orderType:H,lastPrice:u,triggerPrice:u,orderPrice:u,activationPrice:u,unit:t,contractVal:c,precision:d}),g=q({qty:p,orderType:H,lastPrice:u,triggerPrice:u,orderPrice:u,activationPrice:u,unit:t,contractVal:c,precision:d});let y;return y=e?t===B.SW.coin?a:s:t===B.AO.usdt?n:a,{curMaxBuyAmount:f,curMaxSellAmount:g,cUnit:y,unitAmountPrecision:d}};function J(){const e=(0,R.useDispatch)(),{showFlashOrder:t}=(0,i.F7)(),r=(0,R.useSelector)(z.AK),a=(0,R.useSelector)((e=>e.setting.layout)),o=(0,y.useCallback)((t=>{localStorage.setItem(U.w,t),e.preference.updateState({showFlashOrder:t}),null===D.Z||void 0===D.Z||D.Z.tradeService.notifyProLayoutUpdate({name:a,detail:(0,A.Z)((0,A.Z)({},r),{flashOrder:t})})}),[a,r,e.preference]);return(0,y.useEffect)((()=>{0}),[o]),(0,y.useEffect)((()=>{{const{flashOrder:t}=r;localStorage.setItem(U.w,t),e.preference.updateState({showFlashOrder:t})}}),[e.preference,r]),[t,o]}const Y=()=>{const{getI18n:e}=(0,Z.yk)(),t=(0,I.G)(),[r]=(0,i.eY)(),a=(0,P.XY)(),o=(0,P.XY)(t?B.SW.cont:B.AO.coin),n=(0,P.j2)(),l=(0,P.iB)(),[s]=Oe(),[c]=Ve(),u=(0,P.c7)();return(0,y.useCallback)(((i,d)=>{var m;const p=null!==d&&void 0!==d&&d.symbol?l[null===d||void 0===d?void 0:d.symbol]:n,{contractVal:f,baseAsset:g,marginAsset:y,minQty:b,filters:h}=p,v=(null===(m=h.find(W.Jv))||void 0===m?void 0:m.notional)||"1";return(0,_.m)({unit:r,orderAmount:i,price:Number((null===d||void 0===d?void 0:d.price)||u()),contractVal:f,unitAmountPrecision:a,orderAmountPrecision:o,base:g,margin:y,minQty:b,minNotional:v,isDelivery:t,getFutI18n:e,positionDirection:s,reduceOnly:"boolean"===typeof(null===d||void 0===d?void 0:d.reduceOnly)?d.reduceOnly:c,messageType:null===d||void 0===d?void 0:d.messageType})}),[l,e,u,o,r,a,t,c,s,n])};var Q=r("jd5H");const X=["BTCUSDT","ETHUSDT","EOSUSDT","LTCUSDT","BCHUSDT","ETCUSDT","DOTUSDT","LINKUSDT","ADAUSDT","BNBUSDT","XLMUSDT"];function ee(){const e=(0,R.useDispatch)(),t=(0,P.Pc)(),[r]=(0,P.z4)();(0,y.useEffect)((()=>{t.isExistFutureAccount&&X.includes(r)&&(0,Q.v_)("/bapi/futures/v1/private/delivery/battle/um/game-status",{symbol:r}).then((t=>{t.success&&t.data.inBattle&&e.pageStore.updateState({battleStatus:t.data})})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[e.pageStore,r,t.isExistFutureAccount])}function te(){var e;const[t]=(0,P.z4)(),r=X.includes(t),a=(0,R.useSelector)((e=>e.pageStore.battleStatus))||{};return(0,A.Z)((0,A.Z)({},a),{},{inBattle:!(!r||!a.inBattle||(null===(e=a.battleOrderVo)||void 0===e?void 0:e.symbol)!==t)})}var re=r("unna");const ae=()=>(0,R.useSelector)(L.mS);var ie=r("1U9V");function oe(){const{getI18n:e}=(0,Z.yk)(),t=(0,y.useCallback)(((t={},r=!1)=>function({product:e={},getFuturesI18n:t}){var r,a,i;const{pair:o,baseAsset:n,quoteAsset:l,deliveryDate:s}=e,c=(null===(r=e.contractType)||void 0===r||null===(a=r.toLowerCase())||void 0===a||null===(i=a.split(" "))||void 0===i?void 0:i[0])||"",u=s?new Date(s):null,d=o||`${n}${l}`,m=(0,ie.Hn)(e),p=t((g=c,{perpetual:"inversePerpetual"}[g]||g),{defaultValue:c||""}),f=m||!u?"":`${`0${u.getMonth()+1}`.slice(-2)}${`0${u.getDate()}`.slice(-2)}`;var g;return{symbol:d,contractTypeI18n:p,deliveryDateFormat:f,fullName:`${d} ${p} ${f}`,shortName:`${d} ${m?p:f}`}}({product:t,objValue:r,getFuturesI18n:e})),[e]);return(0,y.useMemo)((()=>({genSymbolDisplay:t})),[t])}const ne=e=>e.indexPrice,le=()=>(0,R.useSelector)(ne)||{},se=()=>(0,R.useSelector)((e=>e.assetIndex));var ce=r("FOuV"),ue=r("xGav"),de=r("yxRq");const{leverageInfo:me}=ce.Fy;function pe(){return(0,R.useSelector)(ue.G)}function fe(e){const{leverageList:t={}}=pe()||{};return t[e]||me.defaultVal}function ge({symbol:e,brackets:t,positions:r}){var a,i;const{curLeverage:o}=pe(),n=(null===t||void 0===t?void 0:t[e])||[],l=Math.abs((null===r||void 0===r||null===(a=r[e])||void 0===a?void 0:a.notionalValue)||0);return{leverageData:{curLeverage:o||me.defaultVal,minVal:me.minVal,maxVal:(null===n||void 0===n||null===(i=n[0])||void 0===i?void 0:i.maxOpenPosLeverage)||me.maxVal,userNotionalValue:l,userCurLeverage:(0,de.IK)(n,l)},findLeverageByLevel:e=>(0,de._F)(n,e)}}var ye=r("MwrP"),be=r.n(ye),he=r("PVSG"),ve=r("U36K"),xe=r("GG68"),ke=r("H3aL"),Se=r("k2tD");const Pe=[b.Jm.LIMIT,b.Jm.TAKE_PROFIT_LIMIT,b.Jm.TAKE_PROFIT_MARKET,b.Jm.STOP_LIMIT,b.Jm.STOP_MARKET];function Te({symbol:e}){const{getI18n:t}=(0,P.KL)(),{tickers:r={}}=(0,he.s)((0,a.l6)(!0))||{},{delOpenOrders:o}=(0,ve.W)(),{preOrders:n}=(0,P.E)(),l=(0,P.AM)(),{unit:s}=(0,i.F7)(),c=(0,y.useMemo)((()=>{return e=t,({pricePrecision:t,price:r,stopPrice:a,isBuy:i,type:o,timeInForce:n})=>{const l=e("openOrder-trigger",{defaultValue:"Trigger"}),s=e("openOrder-type-LIMIT",{defaultValue:"Limit"}),c=e("post-only",{defaultValue:"Post only"}),u=e("openOrder-type-STOP",{defaultValue:"Stop Limit"}),d=e("openOrder-type-STOP_MARKET",{defaultValue:"Stop Market"}),m=e("openOrder-type-TAKE_PROFIT_LIMIT",{defaultValue:"Take Profit Limit"}),p=e("openOrder-type-TAKE_PROFIT_MARKET",{defaultValue:"Take Profit Market"}),f=(0,Se.mD)(r,t),g=(0,Se.mD)(a,t);switch(o){case b.Jm.STOP_LIMIT:return`${u}: ${f} ${l} ${i?">=":"<="} ${g}`;case b.Jm.STOP_MARKET:return`${d} ${l} ${i?">=":"<="} ${g}`;case b.Jm.TAKE_PROFIT_LIMIT:return`${m} ${f} ${l} ${i?"<=":">="} ${g}`;case b.Jm.TAKE_PROFIT_MARKET:return`${p} ${l} ${i?"<=":">="} ${g}`;case b.Jm.LIMIT:default:return`${n===ce.rb.POST_ONLY?c:s} ${f}`}};var e}),[t]),u=(0,y.useCallback)((async e=>{be()(e)||await o(e)}),[o]),d=(0,y.useMemo)((()=>n.filter((({symbol:t,type:r})=>t===e&&Pe.includes(r)))),[n,e]);return(0,y.useMemo)((()=>d.map((e=>{const{orderId:t,origQty:a,type:i,price:o,stopPrice:n,symbol:d,side:m,activatePrice:p,executedQty:f,timeInForce:g}=e,y=l[d]||{},{pricePrecision:h,quantityPrecision:v,equalQtyPrecision:x,contractVal:k}=y,S=r[d]||{},{lastPrice:P}=S,T=+a-+f;let C="";const M="BUY"===m,Z=+n>0&&i!==b.Jm.LIMIT?n:o,w=c({pricePrecision:h,type:i,isBuy:M,price:+o,stopPrice:+n,timeInForce:g});if(s===B.SW.coin){const e=ce.cQ.includes(i)?n:i===b.Jm.TRAILING_STOP_MARKET?p||P:o;C=(0,ke.unitChangeCoinQty)({quantity:a,contractVal:k,price:e,precision:x})}else if(s===B.AO.usdt){const e=ce.cQ.includes(i)?n:i===b.Jm.TRAILING_STOP_MARKET?p||P:o;C=(0,xe.WA)({quantity:a,price:e,precision:v,format:void 0})}else C=T.toFixed(v||2);return{orderId:t,quantity:+C>0?+C:0,origQty:a,price:(+Z).toFixed(h),isBuy:M,text:w,symbol:d,stopPrice:n,unit:s,order:e,cancel:()=>u(e)}}))),[d,l,r,c,s,u])}const Ce=e=>e.marginType;function Me(){return(0,R.useSelector)(Ce)}var Ze=r("IcOa");const we=()=>{const e=(0,R.useDispatch)(),t=(0,Ze._n)(),r=(0,R.useSelector)(L.W9),a=(0,y.useCallback)((async(r,a,i=[])=>{let o=[],n="";a>-1?(o=[...i.slice(0,a),...i.slice(a+1)],n="del"):(o=[...i,r],n="add"),e.futureMarket.oprFuturesFavorite({symbol:r,type:n,values:o,isLoggedIn:t})}),[e.futureMarket,t]);return(0,y.useMemo)((()=>({favorites:r||[],setFavorite:a})),[r,a])},Ie=e=>e.markPrice,Ee=()=>(0,R.useSelector)(Ie)||{};var Ne=r("bmcq");const Ae=()=>{const e=(0,R.useDispatch)();return[(0,R.useSelector)(Ne.yg),e.futuresOrderForm.changeOrderType]},Re=()=>{const e=(0,R.useDispatch)();return[(0,R.useSelector)(Ne.T8),e.futuresOrderForm.changeSubOrderType]},Oe=()=>{const e=(0,R.useDispatch)();return[(0,R.useSelector)(Ne.Vj),e.futuresOrderForm.changePositionDirection]},Le=()=>{const e=(0,R.useDispatch)();return[(0,R.useSelector)(Ne.DX),e.futuresOrderForm.changeTimeInForce]},Ve=()=>{const e=(0,R.useDispatch)();return[(0,R.useSelector)(Ne.Oc),e.futuresOrderForm.changeReduceOnly]},Fe=()=>{const e=(0,R.useDispatch)();return[(0,R.useSelector)(Ne.kd),e.futuresOrderForm.changeIsTPSLEnabled]},De=()=>(0,R.useSelector)(L.nJ);var _e=r("Q2PN"),Be=r("IOB8");const{leverageInfo:ze}=ce.Fy,Ke=({symbol:e,marginAsset:t,contractVal:r,positionSide:a,delta:i=0})=>{var n;const c=(0,s._g)(e,a),u=(0,R.useSelector)(Be.Y),d=(0,R.useSelector)(_e._Y),m=(0,R.useSelector)(ue.G),{leverageList:p={}}=m,f=p[e]||ze.defaultVal,g=(0,l.yh)(f),y=(0,o.$J)(),b=y[c];if(!b)return{};const h=(0,s.nn)({positions:y,marginAsset:t}),{entryPrice:v,markPrice:x,isolated:k,isolatedWallet:S,positionSize:P}=b,T=[(0,A.Z)((0,A.Z)({},b),{},{isolatedWallet:S+i})],C=(0,l.Ak)(u,T,d,m,e,!0,!1,h),{liquidationPrice:M=0}=(null===C||void 0===C?void 0:C[0])||{},Z=(({markPrice:e=1,entryPrice:t=1,leverage:r=1,position:a,bracket:i,contractVal:o=0})=>{if(0===t||0===e)return 0;const{isolatedWallet:n=0,positionSize:s=0}=a,c=(0,l.yh)(r),u=(0,l.SH)(i,a);return Math.max(0,Math.min(n-u,n+s*o*(1/t-1/e)-Math.abs(s)*c*o/e))})({markPrice:x,entryPrice:v,leverage:f,position:b,bracket:(null===u||void 0===u?void 0:u[e])||[],contractVal:r}),w=h.filter((e=>!(null!==e&&void 0!==e&&e.isolated))),I=h.filter((e=>null===e||void 0===e?void 0:e.isolated)),E=(0,l.ot)(w),N=(0,l.Uy)(w,f,e),O=(0,l.sE)(I,f,e),L=null===d||void 0===d||null===(n=d[t])||void 0===n?void 0:n.crossWalletBalance,V=L+E-(N+O),F=(0,l.zW)(w,u),D=(0,l.wj)(I)*g,_=Math.max(Math.min(V,L-D-F),0);return(0,A.Z)((0,A.Z)({maxAppend:_,maxRemovable:Z},b),{},{isolated:k,isolatedWallet:S,liquidationPrice:M,marginAsset:t})},{leverageInfo:qe}=ce.Fy,Ue=({symbol:e,marginAsset:t,positionSide:r,delta:a=0})=>{var i;const l=(0,s._g)(e,r),c=(0,R.useSelector)(Be.Y),u=(0,R.useSelector)(_e._Y),d=(0,R.useSelector)(ue.G),{leverageList:m={}}=d,p=m[e]||qe.defaultVal,f=(0,n.yh)(p),g=(0,o.$J)(),y=g[l];if(!y)return{};const b=(0,s.nn)({positions:g,marginAsset:t}),{entryPrice:h,markPrice:v,isolated:x,isolatedWallet:k}=y,S=[(0,A.Z)((0,A.Z)({},y),{},{isolatedWallet:k+a})],P=(0,n.Zk)(c,S,u,d,e,!0,!1,b),{liquidationPrice:T=0}=(null===P||void 0===P?void 0:P[0])||{},C=(({markPrice:e=0,entryPrice:t,leverage:r=0,position:a,bracket:i})=>{const{isolatedWallet:o=0,positionSize:l=0}=a,s=(0,n.yh)(r),c=(0,n.SH)(i,a);return Math.max(0,Math.min(o-c,o+l*(e-t)-e*Math.abs(l)*s))})({markPrice:v,entryPrice:h,leverage:p,position:y,bracket:(null===c||void 0===c?void 0:c[e])||[]}),M=b.filter((e=>!(null!==e&&void 0!==e&&e.isolated))),Z=b.filter((e=>null===e||void 0===e?void 0:e.isolated)),w=(0,n.ot)(M),I=(0,n.Uy)(M,p,e),E=(0,n.sE)(Z,p,e),N=null===u||void 0===u||null===(i=u[t])||void 0===i?void 0:i.crossWalletBalance,O=N+w-(I+E),L=(0,n.zW)(M,c),V=(0,n.wj)(Z)*f,F=Math.max(Math.min(O,N-V-L),0);return(0,A.Z)((0,A.Z)({maxAppend:F,maxRemovable:C},y),{},{isolated:x,isolatedWallet:k,liquidationPrice:T,marginAsset:t})},We=e=>(0,I.G)()?Ke(e):Ue(e);var He=r("6JMj");const $e=({symbol:e})=>{const{close:t}=(0,O.iB)()[e]||{},{tickers:r={}}=(0,he.s)((0,a.l6)(!0))||{};return r[e]||{lastPrice:Number(t)}},je=()=>{const[e]=(0,P.z4)(),t=(0,I.G)(),r=(0,R.useSelector)(_e._Y),s=(0,R.useSelector)(Be.Y),c=(()=>{const e=(0,O.iB)()||{},t={};for(var r in e){const a=e[r].close?Number(e[r].close):0;t[r]={lastPrice:a}}const{tickers:i}=(0,he.s)((0,a.l6)(!0))||{};return i||t})(),u=(0,o.dM)().map((e=>{var t;return(0,A.Z)((0,A.Z)({},e),{},{lastPrice:(null===c||void 0===c||null===(t=c[e.symbol])||void 0===t?void 0:t.lastPrice)||e.lastPrice})})),{preOrders:d}=(0,R.useSelector)(He.b),m=(0,R.useSelector)(ue.G)||{},{useLastPrice:p,assetMode:f}=(0,i.F7)(),{riskRatio:g,assetsRateEquity:y,assetsMM:b}=bt(t),h=se();return t?(0,l.Ak)(s,u,r,m,e,!0,p,void 0,d):f?(0,n.bG)({riskRatio:g,assetsRateEquity:y,assetsMM:b,assetIndexes:h,brackets:s,positions:u,balances:r,leverages:m,useLastPrice:p,openOrders:d}):(0,n.Zk)(s,u,r,m,e,!0,p,void 0,d)};var Ge=r("jQmP"),Je=r("mE5e");function Ye({symbol:e,tickSize:t}){const{getI18n:r}=(0,Z.yk)(),a=je(),o=Ee(),n=(0,P.AM)(),{unit:l}=(0,i.F7)(),s=(0,Ge.p)(t),c=(0,y.useMemo)((()=>r("pnl",{defaultValue:"PNL"})),[r]);return(0,y.useMemo)((()=>a.filter((({symbol:t,positionSize:r})=>{const a=Number(r);return t===e&&0!==a})).map((({id:e,entryPrice:t,positionSize:r,unrealizedPnl:a,symbol:i,lastPrice:u})=>{var d;const{contractVal:m=0}=n[i]||{},p=null===(d=o[i])||void 0===d?void 0:d.markPrice;let f=0;l===B.SW.cont||l===B.AO.coin?f=Number(r):l===B.SW.coin?f=(0,ke.unitChangeCoinQty)({quantity:Number(r),contractVal:m,price:u||p,precision:s}):l===B.AO.usdt&&(f=(({quantity:e,price:t,func:r=Je.mD,precision:a=2,format:i})=>r(e*t,a,i))({quantity:Number(r),price:u||p,precision:s}));const g=Number(a.toFixed(2));return{id:e,price:t,quantity:f,isBuy:f>0,PNL:g,text:`${c} ${g}`,positionTypeText:c}}))),[a,e,l,o,n,s,c])}var Qe=r("IpC4");r("viQn");function Xe(e){const{getI18n:t}=(0,Z.yk)(),{positionMode:r=!1}=(0,i.F7)(),a=r&&e?e:b.RS.BOTH;return(0,ie.ad)({positionMode:r,positionDirection:a,getFutI18n:t})}var et=r("SnVb");function tt({quantity:e}){const[t]=(0,i.eY)(),[r,[a,o]]=(0,P.z4)(),n=(0,P.j2)(),l=(0,I.G)(),{marginAsset:s}=n,{getI18n:c}=(0,Z.yk)(),{quantityPrecision:u,equalQtyPrecision:d=2,minQty:m,tickSize:p}=n,f=Number(m),g=(0,ie.p8)(p);let y,h=u,v="",x=c("entry-size",{defaultValue:"Enter Size"});const k=c("Cont"),S=Number((0,P.uH)(!0)),{contractVal:T}=n,{curMaxBuyAmount:C,curMaxSellAmount:M}=G(),w=S,E=~e.indexOf("%");let N,R;E?(N=(0,K.Jp)(parseFloat(e)/100,C).toNumber(),R=(0,K.Jp)(parseFloat(e)/100,M).toNumber()):N=R=Number(e);const O={quantity:e,buyQty:N,sellQty:R,buyCont:0,sellCont:0};let L;return l?t===B.SW.coin?(y=a,h=d,O.buyCont=Number((0,et.Z)({orderType:b.Jm.MARKET,contractVal:T,qty:N,lastPrice:S,isDelivery:l})),O.sellCont=Number((0,et.Z)({orderType:b.Jm.MARKET,contractVal:T,qty:R,lastPrice:S,isDelivery:l})),L=1,!E&&Number(e)&&(v=O.buyCont<1?w?`${c("mininumQtyPrefix",{defaultValue:"Minimum Qty is"})} ${(0,K.Jp)(T/w).toFixed(h,0)} ${a} \u2248 1 ${k}`:"":` \u2248 ${O.buyCont||0} ${k}`)):(h=0,y=k,x=`1 ${c("Cont",{defaultValue:"Cont"})} = ${T} ${o}`):t===B.AO.usdt?(y=s,h=g,O.buyCont=S?N/S:0,O.sellCont=S?R/S:0,L=f,!E&&Number(e)&&(v=O.buyCont<f?w?`${c("mininumQtyPrefix",{defaultValue:"Minimum Qty is"})} ${(0,K.Jp)(f*w).toFixed(h,0)} ${s} \u2248 ${f} ${a}`:"":` \u2248 ${(0,K.GW)(O.buyCont||0,u)} ${a}`,w||(v=""))):(y=a,h=u),(0,A.Z)({cUnit:y,precision:h,helperText:v,ticker:n,minContQty:L,placeholder:x},O)}const rt=e=>e.transferAssets,at=e=>e.transferAssets.assets;function it(){return(0,R.useSelector)(rt)}function ot(){return(0,R.useSelector)(at)}r("2srY"),r("ZJL0");(0,a.l6)(!0);const nt="t.third";Array.from({length:4},(()=>nt));var lt=r("tN1Z"),st=r("Zl10"),ct=r.n(st),ut=r("h++M"),dt=r.n(ut),mt=r("QlFx");const pt=(e,t,r)=>r?gt(e,t):ft(e,t),ft=(e,t)=>{const r=(0,R.useSelector)(_e._Y),a=(0,R.useSelector)(Be.Y),i=(0,o.dM)(),l=[],c=e("header-Cross",{defaultValue:"Cross"}),u=(0,s.L6)(i.filter((e=>{const{positionSide:r,positionSize:a}=e;return 0!==a&&(!t&&r===b.PR.BOTH||t&&r!==b.PR.BOTH)})));return Object.values(u).forEach(((i=[])=>{const[o,s]=ct()(i,(e=>e.isolated));if(s.length>0){const{marginAsset:e}=s[0]||{},t=(null===r||void 0===r?void 0:r[e])||{},{crossWalletBalance:i=0}=t,o=(0,n.zW)(s,a),u=(0,n.ot)(s);l.push({riskRatio:yt(o,i,u),marginBalance:i+u,maintenanceMargin:o,key:`${e}`,marginAsset:e,symbols:s.map((e=>e.symbol)),isolated:!1,marginRatioLabel:`${e} ${c}`})}o.forEach((r=>{const{positionSide:i,symbol:o,isolatedWallet:s=0,marginAsset:c}=r,u=(0,mt.lE)(o,e),d=(null===a||void 0===a?void 0:a[o])||[],m=(0,n.SH)(d,r),p=(0,n.nn)(r),f=t?`${e(i,{defaultValue:dt()(i)})}`:"";l.push({riskRatio:yt(m,s,p),marginBalance:s+p,maintenanceMargin:m,key:`${o}_${i}`,marginAsset:c,symbols:[o],isolated:!0,marginRatioLabel:`${u} ${f}`})}))})),l},gt=(e,t)=>{const r=(0,R.useSelector)(_e._Y),a=(0,R.useSelector)(Be.Y),i=(0,o.dM)(),n=[],c=e("header-Cross",{defaultValue:"Cross"}),u=(0,s.L6)(i.filter((e=>{const{positionSide:r,positionSize:a}=e;return 0!==a&&(!t&&r===b.PR.BOTH||t&&r!==b.PR.BOTH)})));return Object.values(u).forEach(((i=[])=>{const[o,s]=ct()(i,(e=>e.isolated));if(s.length>0){const{marginAsset:e}=s[0]||{},t=(null===r||void 0===r?void 0:r[e])||{},{crossWalletBalance:i=0}=t,o=(0,l.zW)(s,a),u=(0,l.ot)(s);n.push({riskRatio:yt(o,i,u),marginBalance:i+u,maintenanceMargin:o,key:`${e}`,marginAsset:e,symbols:s.map((e=>e.symbol)),isolated:!1,marginRatioLabel:`${e} ${c}`})}o.forEach((r=>{const{positionSide:i,symbol:o,isolatedWallet:s=0,marginAsset:c}=r,u=(0,mt.lE)(o,e),d=(null===a||void 0===a?void 0:a[o])||[],m=(0,l.SH)(d,r),p=(0,l.nn)(r),f=t?`${e(i,{defaultValue:dt()(i)})}`:"";n.push({riskRatio:yt(m,s,p),marginBalance:s+p,maintenanceMargin:m,key:`${o}_${i}`,marginAsset:c,symbols:[o],isolated:!0,marginRatioLabel:`${u} ${f}`})}))})),n},yt=(e=0,t=0,r=0)=>{const a=t+r;return(0,Je.JX)(a?e/a*100:0,2)},bt=e=>e?xt():vt(),ht=(0,lt._)(((e,t,r,a)=>{let i=0,o=0;const l={},c={},u={},d=(0,s.L6)(r);return Object.entries(e).forEach((([e,r])=>{if(!r.marginAvailable)return;const s=d[e]||[],[,m]=ct()(s,(e=>e.isolated)),{crossWalletBalance:p=0}=r||{},f=(null===a||void 0===a?void 0:a[e])||{},{askRate:g=0,bidRate:y=0}=f;let b=p,h=0;if(m.length>0){const e=(0,n.zW)(m,t);b+=(0,n.ot)(m),h+=e}i+=Math.min(b*g,b*y),o+=h*g,c[e]=Math.min(b*g,b*y),l[e]=b,u[e]=h})),{riskRatio:yt(o,i),marginBalance:i,maintenanceMargin:o,assetsRateEquity:c,assetsEquity:l,assetsMM:u}})),vt=()=>{const e=(0,R.useSelector)(_e._Y),t=(0,R.useSelector)(Be.Y),r=(0,o.dM)(),a=se();return ht(e,t,r,a)},xt=()=>({riskRatio:0,marginBalance:0,maintenanceMargin:0,assetsRateEquity:{},assetsEquity:{},assetsMM:{}});function kt(e=a.UW){const t=(0,I.G)(),r=(0,R.useSelector)((e=>e.setting)),{CoinFutures:{layout:i},USDTFutures:{layout:o}}=r,n=t?i===e:o===e;(0,re.C3)();return n}const St=({symbol:e})=>{const{getI18n:t}=(0,Z.yk)(),r=(0,P.iB)(),{baseAsset:a,marginAsset:o,isDelivery:n}=r[e]||{},{unit:l}=(0,i.F7)();return n?l===B.SW.coin?a:t("Cont"):l===B.AO.usdt?o:a}},nFk2:(e,t,r)=>{"use strict";r.d(t,{s:()=>o,K:()=>n});var a=r("szIg"),i=r("Q2PN");function o(){return(0,a.useSelector)(i.Pv)}function n(e){return(0,a.useSelector)(i.JW)[e]}},"4c8F":(e,t,r)=>{"use strict";r.d(t,{G:()=>o});var a=r("szIg"),i=r("IOB8");function o(){return(0,a.useSelector)(i.Y)}},k7O1:(e,t,r)=>{"use strict";r.d(t,{d0:()=>u,co:()=>m});var a=r("/SIk"),i=r("szIg"),o=r("l4n0"),n=r("At/5"),l=r("VM/Z"),s=r("eXOl"),c=(r("/M83"),r("FOuV"));const u=(e=!1)=>{const t=(0,i.useDispatch)(),{pathname:r,search:u}=(0,o.Hb)(),m=(0,s.AM)(),p=(0,n.C)(),f=(0,i.useSelector)((e=>e.setting.isElectronMainWindow));return(0,a.useCallback)((({isBlank:t=!1,stateSymbol:a,isDeliveryColumn:i=e,electronUpdateTabs:o,resPathList:n=[]})=>{if(n.length<1){const e=d(a,m,i);n=[i?c.yX.delivery:c.yX.futures,e]}const s=r.split("/"),g=s.slice(0,s.length-n.length).concat(n),y=a||n[n.length-1],b=`${g.join("/")}${u}`,h=m[y]||m[y.split("_").join("")],{contractType:v}=h;{let e=g[g.length-1],r=`binance://trade/quarterly/${e}${o?"":`?update=true&dateSymbol=${y}&refresh=${t}`}`;return i||(v===l.Yp.PERPETUAL&&(e="string"===typeof e&&e.split("_").join("")),r=`binance://trade/perpetual/${e}${o?"":`?update=true&dateSymbol=${y}&refresh=${t}`}`),void(f?window.open(r,"_blank"):p(b))}}),[t.pageStore,t.products,p,e,r,m,u])},d=(e,t,r=!1)=>{let a="";if(r){const{pair:r,contractType:i}=t[e]||{};a=[r,l.Yp[i]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}else{const{pair:r,contractType:i,symbol:o}=t[e]||{};a=i===l.Yp.PERPETUAL?o:[r,l.Yp[i]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}return a},m=(e,t,r=!1)=>{let a="";const i=r?c.yX.delivery:c.yX.futures;if(r){const{pair:r,contractType:i}=t.delivery[e]||{};a=[r,l.Yp[i]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}else{const{pair:r,contractType:i,symbolDisplay:o}=t.perpetual[e]||{};a=i===l.Yp.PERPETUAL?o.split("/").join("_"):[r,l.Yp[i]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}return[i,a]}},vJ4P:(e,t,r)=>{"use strict";r.d(t,{g:()=>o});var a=r("/SIk"),i=r("VM/Z");function o(){const{0:e,1:t}=(0,a.useState)({});return(0,a.useEffect)((()=>(0,i.BN)().getContractInfoStream().subscribe((e=>{t(e)}))),[]),e}},"3AuT":(e,t,r)=>{"use strict";r.d(t,{U:()=>h});var a=r("5vwO"),i=r("VM/Z"),o=r("klBV"),n=r("W2gp"),l=r("H8sf"),s=r.n(l),c=r("/SIk"),u=r("szIg"),d=r("TNnZ"),m=r("4m5F"),p=r("HkAn"),f=r("U7ms"),g=r("bi7V"),y=r("wdcV");const b=(0,i.l6)(!0),h=()=>{const e=(0,o._n)(),{isExistFutureAccount:t}=(0,o.Pc)(),[r]=(0,o.z4)(),i=(0,u.useDispatch)(),l=(0,c.useRef)({}),[h=""]=r.split("_"),{run:v}=(0,g.Z)((()=>i.position.updatePosition(l.current)),300);(0,p.aD)(),(0,o.mL)(),(0,o.S_)(),(0,o.U6)(r,b,!0),(0,c.useEffect)((()=>{i.userCenter.queryCurrency(),i.products.queryFuturesProduct(),i.bracket.getBrackets("",!0),i.symbolConfigInfo.querySymbolConfigInfo()}),[i.userCenter,i.bracket,i.products,i.symbolConfigInfo]),(0,c.useEffect)((()=>b.getMarkPriceStream(r).subscribe((e=>{i.markPrice.updateStateImmutable(e)}))),[i.markPrice,r]),(0,c.useEffect)((()=>b.getIndexPriceStream(h).subscribe((e=>{i.indexPrice.updateStateImmutable({[r]:(0,a.Z)((0,a.Z)({},e[h]),{},{symbol:r})})}))),[i.indexPrice,h,r]),(0,c.useEffect)((()=>{e&&t&&(i.leverage.getUserLeverageData(r),i.position.queryPosition({symbol:r}),i.preference.getOrderConfirmation(),i.preference.getUnit({data:{unit:m.SW.cont}}),i.preference.getFuturesPnlBasis(),i.preference.getPositionMode(),i.preference.getPriceProtection(d.x),i.balance.getBalance(!0),i.futureMarket.queryFuturesFavorites(),i.feeTier.getFeeTier({name:h}),i.tradeForbidden.getCoolingPeriodConfig(),i.userCenter.getAgentCode(),i.userCenter.queryUniAccountInfo())}),[r,h,e,t,i.preference,i.balance,i.leverage,i.position,i.futureMarket,i.feeTier,i.userCenter]);const x=(0,f.D)((t=>{if(e){const e=Object.values(t).map((e=>({symbol:null===e||void 0===e?void 0:e.symbol,markPrice:null===e||void 0===e?void 0:e.markPrice}))),r=(0,y.kh)(e);l.current=s()({},l.current,r),v()}}));(0,c.useEffect)((()=>b.getMarkPriceMiniStream().subscribe((e=>{i.markPrice.updateStateImmutable(e),x(e)}))),[]),(0,c.useEffect)((()=>{if(e&&t)return b.getStreamTickers().subscribe((e=>{const t=(0,y.kh)(Object.values(e));l.current=s()({},l.current,t),v()}))}),[e,t]),(0,c.useEffect)((()=>{if(e&&t)return b.getUserAssetsStream().subscribe((({balances:e,positions:t})=>{const r=(0,n.FB)(e,"asset"),o=Object.values(t).reduce(((e,t)=>{const{symbol:r="",positionSide:i}=t;return e[(0,y._g)(r,i)]=(0,a.Z)((0,a.Z)({},t),{},{pushTime:Date.now()}),e}),{});i.balance.mergeState(r),l.current=s()({},l.current,o),v()}))})),(0,c.useEffect)((()=>{if(e&&t){i.serviceStatus.getServiceStatus(!0);const e=setInterval((()=>{i.serviceStatus.getServiceStatus(!0)}),18e4);return()=>clearInterval(e)}}),[e,t])}},"4Dm0":(e,t,r)=>{"use strict";r.d(t,{G:()=>i});var a=r("l4n0");function i(){const{pathname:e}=(0,a.Hb)();return e.includes("delivery")}},"2ynj":(e,t,r)=>{"use strict";r.d(t,{a:()=>o});var a=r("szIg");const i=e=>e.feeTier;function o(){return(0,a.useSelector)(i)}},"57Vj":(e,t,r)=>{"use strict";r.d(t,{D:()=>x,n:()=>k});var a=r("5vwO"),i=r("VM/Z"),o=r("klBV"),n=r("W2gp"),l=r("H8sf"),s=r.n(l),c=r("/SIk"),u=r("szIg"),d=r("U7ms"),m=r("0DEp"),p=r("Fidm"),f=r("4m5F"),g=r("HkAn"),y=r("SJeZ"),b=r("bi7V"),h=r("wdcV");const v=(0,i.l6)(!0),x=()=>{const e=(0,o._n)(),{isExistFutureAccount:t}=(0,o.Pc)(),[r]=(0,o.z4)(),i=(0,u.useDispatch)(),{getI18n:l}=(0,y.yk)(),m=(0,c.useRef)({}),{run:x}=(0,b.Z)((()=>i.position.updatePosition(m.current)),300);(0,g.aD)(),(0,o.mL)(),(0,o.S_)(),(0,c.useEffect)((()=>{i.userCenter.queryCurrency(),i.products.queryFuturesProduct(),i.bracket.getBrackets(),i.symbolConfigInfo.querySymbolConfigInfo()}),[i.userCenter,i.bracket,i.products,i.symbolConfigInfo]),(0,c.useEffect)((()=>{e&&t&&(i.leverage.getUserLeverageData(r),i.position.queryPosition({symbol:r}),i.preference.getOrderConfirmation(),i.preference.getUnit({data:{unit:f.AO.coin}}),i.preference.getFuturesPnlBasis(),i.preference.getPositionMode(),i.preference.getMultiAssetMarginEnableConfig().then((e=>{e&&i.preference.getAssetMode()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})),i.preference.getPriceProtection(p.xK),i.balance.getBalance(!1),i.futureMarket.queryFuturesFavorites(),i.feeTier.getFeeTier({name:r}),i.tradeForbidden.getCoolingPeriodConfig(),i.userCenter.getAgentCode(),i.userCenter.queryUniAccountInfo())}),[r,e,t,i.preference,i.balance,i.leverage,i.position,i.futureMarket,i.feeTier,i.grid,i.userCenter]),(0,c.useEffect)((()=>v.getMarkPriceStream(r).subscribe((e=>{i.markPrice.updateStateImmutable(e),i.indexPrice.updateStateImmutable(e)}))),[i.indexPrice,i.markPrice,r]);const k=(0,d.D)((t=>{if(e){const e=Object.values(t).map((e=>({symbol:null===e||void 0===e?void 0:e.symbol,markPrice:null===e||void 0===e?void 0:e.markPrice}))),r=(0,h.kh)(e);m.current=s()({},m.current,r),x()}}));(0,c.useEffect)((()=>v.getMarkPriceMiniStream().subscribe((e=>{i.markPrice.updateStateImmutable(e),k(e)}))),[]),(0,c.useEffect)((()=>{if(e&&t)return v.getStreamTickers().subscribe((e=>{const t=(0,h.kh)(Object.values(e));m.current=s()({},m.current,t),x()}))}),[e,t]),(0,c.useEffect)((()=>{if(e&&t)return v.getUserAssetsStream().subscribe((({balances:e,positions:t})=>{const r=(0,n.FB)(e,"asset"),o=Object.values(t).reduce(((e,t)=>{const{symbol:r,positionSide:i}=t;return e[(0,h._g)(r,i)]=(0,a.Z)((0,a.Z)({},t),{},{pushTime:Date.now()}),e}),{});i.balance.mergeState(r),m.current=s()({},m.current,o),x()}))}));const S=(0,d.D)((({leverage:e})=>{if(e){const{symbol:t,leverage:a}=e;r===t?i.leverage.updateCurrentLeverage({symbol:t,leverage:a}):i.leverage.updateLeverageList({symbol:t,leverage:a})}}));(0,c.useEffect)((()=>{if(e&&t)return v.getUserAccountConfigUpdateStream().subscribe((e=>S(e)))})),(0,c.useEffect)((()=>{if(e&&t){i.serviceStatus.getServiceStatus(!1);const e=setInterval((()=>{i.serviceStatus.getServiceStatus(!1)}),18e4);return()=>clearInterval(e)}}),[e,t])},k=()=>{const e=(0,o._n)(),{isExistFutureAccount:t}=(0,o.Pc)(),r=(0,u.useDispatch)();(0,c.useEffect)((()=>{e&&t&&m.C&&r.orders.queryOpenOrder()}),[e,t,r.orders])}},"869M":(e,t,r)=>{"use strict";r.d(t,{yk:()=>l,Gv:()=>s,$G:()=>c});var a=r("Tr4L"),i=r("U0yl");const o="futures-trade",n="futures-ui",l=()=>(0,i.ZK)(o,n),s=e=>`${o}-${e}`,c=()=>(0,a.$)(n)},unna:(e,t,r)=>{"use strict";r.d(t,{C3:()=>n});var a=r("szIg"),i=r("VM/Z");r("wqQ1");const o=e=>e.layout.pageLayout,n=()=>(0,a.useSelector)(o)||i.$f},JlsY:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var a=r("FOuV"),i=r("SJeZ");const{UFutures:{precision:o},CFutures:{precision:n}}=a.dk;function l(){return(0,i.G3)()?n:o}},"8Y2u":(e,t,r)=>{"use strict";r.d(t,{xm:()=>c,$J:()=>d,dM:()=>m,kD:()=>p,Dj:()=>f,cO:()=>g,t2:()=>y,Xb:()=>b});var a=r("5vwO"),i=r("szIg"),o=r("eXOl"),n=r("tN1Z"),l=r("wdcV");const s=e=>"undefined"!==typeof e?Number(e):void 0,c=(0,n._)(((e,t)=>Object.entries(e).reduce(((e,[r,i])=>{const{symbol:o}=i||{},n=t[o]||{},{close:l,contractVal:c,marginAsset:u,baseAsset:d,quoteAsset:m,quantityPrecision:p,pricePrecision:f,equalQtyPrecision:g,tickSize:y,limitStepSize:b,marketStepSize:h}=n;return e[r]=(0,a.Z)((0,a.Z)({lastPrice:l,contractVal:c,marginAsset:u,baseAsset:d,quoteAsset:m,quantityPrecision:p,pricePrecision:f,equalQtyPrecision:g,tickSize:y,limitStepSize:b,marketStepSize:h},i),{},{askNotional:s(i.askNotional),bidNotional:s(i.bidNotional),cumRealized:s(i.cumRealized),entryPrice:s(i.entryPrice),isolatedWallet:s(i.isolatedWallet),markPrice:s(i.markPrice),notionalValue:s(i.notionalValue),positionSize:s(i.positionSize),unrealizedProfit:s(i.unrealizedProfit)}),e}),{}))),u=(0,n._)((e=>(0,l.J9)(e)));function d(){const e=(0,i.useSelector)((e=>e.position.positionMap)),t=(0,o.Vh)();return c(e,t)}function m(){const e=d();return u(e)}function p(){const{length:e}=m();return e}const f=()=>(0,i.useSelector)((e=>e.position.validPositionKeyArray)),g=e=>(0,i.useSelector)((t=>{var r;return(null===(r=t.position.positionMap)||void 0===r?void 0:r[e])||{}})),y=(e,t)=>(0,i.useSelector)((r=>{var a,i;return null===(a=r.position.positionMap)||void 0===a||null===(i=a[e])||void 0===i?void 0:i[t]})),b=()=>(0,i.useSelector)((e=>e.position.hideOtherSymbol))},"+dPF":(e,t,r)=>{"use strict";r.d(t,{zu:()=>P,IV:()=>A,UI:()=>M,t1:()=>Z,CJ:()=>E,I3:()=>N,kN:()=>R,hN:()=>T,F7:()=>k,r8:()=>C,W5:()=>w,NU:()=>O,aT:()=>I,eY:()=>S});var a=r("5vwO"),i=r("/SIk"),o=r("szIg"),n=r("VM/Z");const l=e=>e.preference,s=e=>e.preference.displayMarginTypeAndLeverage,c=e=>e.preference.enableAdvancedTPSL,u=e=>e.preference.positionMode,d=e=>e.preference.usdtFuturesUnit,m=e=>e.preference.coinFuturesUnit,p=e=>e.preference.assetMode,f=e=>e.preference.TPSLNotify,g=e=>e.preference.isEnableFundingFee,y=e=>e.preference.fundingFee,b=e=>e.preference.fundingFeeRange,h=e=>e.preference.orderConfirmation,v=e=>e.preference.showPlusMinusButton;var x=r("1U9V");function k(){const e=(0,o.useSelector)(l),t=(0,n.nM)();return(0,a.Z)((0,a.Z)({},e),{},{unit:t?e.coinFuturesUnit:e.usdtFuturesUnit})}function S(){const e=(0,o.useDispatch)(),t=(0,n.nM)(),r=(0,o.useSelector)(d),a=(0,o.useSelector)(m);return[t?a:r,e.preference.changeUnit]}function P(){const e=(0,o.useDispatch)();return[(0,o.useSelector)(p),e.preference.changeAssetMode]}function T(){const e=(0,o.useDispatch)();return[(0,o.useSelector)(u),(0,i.useCallback)((t=>e.preference.changePositionMode({dualSidePosition:t})),[])]}function C(){return{showPreferencePanel:(0,i.useCallback)((e=>{x.TB.emit(x.FP.SHOW_PREFERENCE_PANEL,e)}),[]),hidePreferencePanel:(0,i.useCallback)((()=>{x.TB.emit(x.FP.CLOSE_PREFERENCE_PANEL)}),[])}}function M(){const e=(0,o.useDispatch)();return[(0,o.useSelector)(s),t=>{e.preference.updateState({displayMarginTypeAndLeverage:t})}]}function Z(){const e=(0,o.useDispatch)();return[(0,o.useSelector)(c),t=>{e.preference.updateState({enableAdvancedTPSL:t})}]}function w(){const e=(0,i.useRef)(),t=(0,i.useCallback)((()=>{var t,r;null===(t=e.current)||void 0===t||null===(r=t.showResponsibleConfigPanel)||void 0===r||r.call(t)}),[]);return{responsiblePanelRef:e,showResponsiblePanel:t}}function I(){const e=(0,o.useDispatch)();return[(0,o.useSelector)(f),e.preference.updateTPSLNotify]}function E(){const e=(0,o.useDispatch)();return[{isEnableFundingFeeNotify:(0,o.useSelector)(g),fundingFee:(0,o.useSelector)(y)},e.preference.updateFundingFeeNotify]}function N(){return(0,o.useSelector)(b)}function A(){return(0,o.useDispatch)().preference.changeOrderConfirmation}function R(){return[(0,o.useSelector)(h),A()]}function O(){return[(0,o.useSelector)(v),(0,o.useDispatch)().preference.updateShowPlusMinusButton]}},IpC4:(e,t,r)=>{"use strict";r.d(t,{Q:()=>l});var a=r("4m5F"),i=r("+dPF");const{coin:o,usdt:n}=a.AO;function l(){const{unit:e}=(0,i.F7)();return{isCoinUnit:e===o,isUSDTUnit:e===n}}},viQn:(e,t,r)=>{"use strict";r.d(t,{I:()=>l});var a=r("/SIk"),i=r("klBV"),o=r("eXOl"),n=r("FOuV");function l(e){const t=(0,i.tZ)(),r=(0,o.AM)(),{pair:l="",quoteAsset:s}=r[e]||{};return(0,a.useMemo)((()=>`/${t}/${n.yf}${"USD"===s?"/quarterly":""}/3?contract=${l}`),[t,s,l])}},UGwn:(e,t,r)=>{"use strict";r.d(t,{X:()=>n});var a=r("/SIk"),i=r("szIg"),o=r("IcOa");const n=()=>{const e=(0,i.useDispatch)(),t=(0,o._n)();return(0,a.useCallback)((r=>{var a;e.futureMarket.oprFuturesFavorite({values:(a=r,a?[...new Set(a.map((e=>e.isDelivery?`${e.pair}-${e.contractType}`:e.symbol)))]:[]),isLoggedIn:t})}),[e.futureMarket,t])}},bi7V:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r("/SIk");const i=(e,t,r)=>{const i=Array.isArray(t)?t:[],o="number"===typeof t?t:r||0,n=(0,a.useRef)(!1),l=(0,a.useRef)(),s=(0,a.useRef)(e);s.current=e;const c=(0,a.useRef)([]),u=(0,a.useCallback)((()=>{l.current&&clearTimeout(l.current),l.current=void 0}),[]),d=(0,a.useCallback)(((...e)=>{c.current=e,l.current||(l.current=setTimeout((()=>{s.current(...c.current),l.current=void 0}),o))}),[o,u]);return(0,a.useEffect)((()=>u),[]),(0,a.useEffect)((()=>{n.current?d():n.current=!0}),[...i,d]),{run:d,cancel:u}}},GG68:(e,t,r)=>{"use strict";r.d(t,{WA:()=>s,s7:()=>c});var a=r("/SIk"),i=r("0RPJ"),o=r("jQmP"),n=r("IpC4"),l=r("k2tD");const s=({quantity:e,price:t,func:r=l.mD,precision:a=2,format:i})=>r(e*t,a,i),c=e=>{const t=(0,o.p)(e.tickSize),{isCoinUnit:r}=(0,n.Q)(),c=(0,a.useCallback)((({quantity:e,price:a,func:i=l.mD,precision:o=t,format:n})=>r?e:s({quantity:e,price:a,precision:o,func:i,format:n})),[r,t]),u=(0,a.useCallback)((()=>r?e.baseAsset:e.marginAsset),[r,e]),d=(0,a.useCallback)((({quantity:e,price:a,func:o=l.mD,qtyPrecision:n=2,tickSizePrecision:c,format:d=!0})=>{const m=u();return r?`${(0,i.uf)(e,n)} ${m}`:`${s({quantity:e,price:a,precision:c||t,func:o,format:d})} ${m}`}),[u,t,r]);return(0,a.useMemo)((()=>({getQuantity:c,getAssetLabel:u,getFormatedQuantity:d})),[u,c,d])}},"lP6+":(e,t,r)=>{"use strict";r.d(t,{z:()=>m});var a=r("Gqy6"),i=r("frZ3"),o=r("/SIk"),n=r("VM/Z"),l=r("klBV"),s=r("S24M");const c=(0,n.l6)(!0);let u,d;const m=()=>{const e=(0,l._n)(),{isExistFutureAccount:t}=(0,l.Pc)();(0,o.useEffect)((()=>{if(e&&t)return c.getStreamTickers().subscribe((()=>{u=Date.now()}))}),[e,t]),(0,i.Z)((()=>{u&&Date.now()-u>=5e3&&d!==u&&(d=u,(0,a.gp)({t:"ws_nodata"}),(0,s.j)("ws_nodata",{source:"futures",isOnline:window.navigator.onLine,visibilityState:document.visibilityState}))}),1e3)}},Q2PN:(e,t,r)=>{"use strict";r.d(t,{Pv:()=>a,_Y:()=>i,JW:()=>o});const a=e=>e.balance.balance,i=e=>e.balance.balance,o=e=>e.balance},IOB8:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});const a=e=>e.bracket},KUZ0:(e,t,r)=>{"use strict";r.d(t,{W9:()=>a,mS:()=>i,nJ:()=>o,zO:()=>n});const a=e=>e.futureMarket.futuresFavorites,i=e=>e.futureMarket.futuresMarketTabs,o=e=>e.futureMarket.placeholderSymbols,n=e=>e.futureMarket.isLoadedSectionInfo},xGav:(e,t,r)=>{"use strict";r.d(t,{G:()=>a});const a=e=>e.leverage},"2hF0":(e,t,r)=>{"use strict";r.d(t,{w:()=>ne});var a=r("e8gp"),i=r("5vwO"),o=r("S+Co"),n=r("rfrl"),l=r("H8sf"),s=r.n(l),c=r("9sz9");const u=(0,c.NY)()({name:"assetIndex",state:{},reducers:{mergeState(e,t){const r={};return Object.values(t).forEach((e=>{const t=e.symbol.replace(/USD$/,"");r[t]=e})),(0,n.ZP)(e,(e=>s()({},e,r)))}},effects:{async getAssetIndex(){const{success:e,data:t}=await(0,o.p)();if(e){const e=null===t||void 0===t?void 0:t.map((e=>(0,i.Z)((0,i.Z)({},e),{},{askBuffer:Number(e.askBuffer),askRate:Number(e.askRate),bidBuffer:Number(e.bidBuffer),bidRate:Number(e.bidRate),index:Number(e.index)})));this.mergeState(e)}}}});var d=r("YLfc"),m=r("W2gp"),p=r("b20b");const f=(0,c.NY)()({name:"balance",state:{loading:!0,isError:!1,balance:{}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable,mergeState(e,t){const r=s()({},e.balance,t);return(0,i.Z)((0,i.Z)({},e),{},{loading:!1,isError:!1,balance:r})}},effects:e=>({async getBalance(t){const{success:r,data:a=[]}=t?await(0,p.ig)():await(0,p.kL)(),o=t?a:a.map((e=>(0,i.Z)((0,i.Z)({},e),{},{availableBalance:"availableBalance"in e?Number(e.availableBalance):0,crossWalletBalance:Number(e.crossWalletBalance),initialMargin:Number(e.initialMargin),maintenanceMargin:Number(e.maintenanceMargin),marginBalance:Number(e.marginBalance),unrealizedProfit:Number(e.unrealizedProfit),walletBalance:Number(e.walletBalance)})));if(r){const t=(0,m.FB)(o,"asset"),r=o.map((e=>e.asset));e.transferAssets.updateState({assetTypes:r}),this.mergeState(t||{})}else this.updateState({isError:!0})}})});var g=r("jd5H");const y=(0,c.NY)()({name:"bracket",state:{isError:!1},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable,mergeState:(e,t)=>(0,i.Z)((0,i.Z)({},e),{},{isError:!1},t)},effects:{async getBrackets(e=""){let t;try{t=await(0,g.v_)("/bapi/futures/v1/friendly/future/common/brackets",{symbol:e},{enableErrorMsgIntercept:!1})}catch(r){t={success:!1}}if(t.success){const{brackets:e=[]}=t.data||{},r=(0,m.FB)(e,"symbol","riskBrackets");this.mergeState(r||{})}else this.updateState({isError:!0})}}});var b=r("0ygM");const h=(0,c.NY)()({name:"feeTier",state:{},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async getFeeTier(e){const t=await(0,b.Io)(e);this.updateState(t)}}});var v=r("prMB"),x=r("mlwG"),k=r.n(x);const S=(0,c.NY)()({name:"futureMarket",state:{futuresFavorites:[],sortInfo:{},radioWord:"change",futuresMarketTabs:[{description:"",display:"USD\u24c8-M",ruleNumber:1e3,sectionKey:"USDT-MARIN",sortValue:1},{description:"",display:"COIN-M",ruleNumber:4e3,sectionKey:"COIN-MARIN",sortValue:2}],isLoadedSectionInfo:!1,isLoadedSubTab:!1,placeholderSymbols:[]},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async queryFuturesFavorites(){const{success:e=!1,data:t}=await(0,v.eq)(),r=(t||"").length?t.split(","):[];if(e){var a,i;const e=null===(a=JSON.parse(localStorage.getItem("persist:root")))||void 0===a?void 0:a.futureMarket,t=(null===(i=JSON.parse(e||null))||void 0===i?void 0:i.futuresFavorites)||[];let o=!1;r.length!==t.length&&(o=!0);for(let a=0;a<t.length;a++){const e=t[a];-1===r.indexOf(e)&&(o=!0)}this.updateState({futuresFavorites:o?r:t})}},async oprFuturesFavorite({values:e,isLoggedIn:t},r){const a=r.futureMarket.futuresFavorites;if(this.updateState({futuresFavorites:e}),!t)return null;const i=await(0,v.YM)({optionalSymbols:k()(e.join(","),",")});return null!==i&&void 0!==i&&i.success||this.updateState({futuresFavorites:a}),i},async getSelectionInfo(){const{success:e=!1,data:t}=await(0,v.T)({pathFilter:!0});e&&t.length&&this.updateState({futuresMarketTabs:t}),this.updateState({isLoadedSectionInfo:!0})},async getSymbolExtInfo(){const{success:e=!1,data:t}=await(0,v.TV)({pathFilter:!0});e&&t.length&&this.updateState({placeholderSymbols:t})}}});var P=r("IHSN");const T=(0,c.NY)()({name:"grid",state:{openGrids:{loading:!1,data:[]}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async queryOpenGrids(e){this.updateStateImmutable({openGrids:{loading:!0}});const{success:t,data:r}=await(0,P.qq)(e);t&&this.updateState({openGrids:{loading:!1,data:r||[]}})}}}),C=(0,c.NY)()({name:"indexPrice",state:{},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{}});var M=r("VM/Z"),Z=r("ySwc");const w=(0,c.NY)()({name:"layout",state:{pageLayout:void 0},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:e=>({toggleLayout(t){e.pageStore.updateState({showSetting:!1,isLayoutChanging:!0}),this.updateState({pageLayout:t}),Z.Q.erase(M.IF),Z.Q.write(M.IF,t)}})});var I=r("uoGh"),E=r("FOuV");const{leverageInfo:N}=E.Fy,A=(0,c.NY)()({name:"leverage",state:{curLeverage:N.defaultVal,leverageList:{}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable,updateCurrentLeverage(e,{symbol:t,leverage:r}){const a=(0,i.Z)((0,i.Z)({},e.leverageList),{},{[t]:r}),o=r;return(0,i.Z)((0,i.Z)({},e),{},{leverageList:a,curLeverage:o})},updateLeverageList(e,{symbol:t,leverage:r}){const a=(0,i.Z)((0,i.Z)({},e.leverageList),{},{[t]:r});return(0,i.Z)((0,i.Z)({},e),{},{leverageList:a})}},effects:{async getUserLeverageData(e){const t=await(0,I.bK)(),{success:r,data:a}=t;if(r&&!Object.prototype.hasOwnProperty.call(a,"error")&&(null===a||void 0===a?void 0:a.length)>0){const t=(0,m.FB)(a,"symbol","leverage"),r=null===t||void 0===t?void 0:t[e];this.updateState({leverageList:t,curLeverage:r})}},async updateUserLeverage({symbol:e,leverage:t}){const r=await(0,I.Z)({symbol:e,leverage:t}),{success:a}=r;return a&&this.updateCurrentLeverage({symbol:e,leverage:t}),r}}});var R=r("dIel");const O=(0,c.NY)()({name:"marginType",state:{marginType:"CROSSED"},reducers:{updateState:(e,t)=>({marginType:t})},effects:{async changeMarginType({symbol:e,marginType:t}){const{success:r,data:a={}}=await(0,R.W)({symbol:e,marginType:t});return r&&this.updateState(a.marginType||E.Yl.CROSSED),a}}});var L=r("P2I6");const V=(0,c.NY)()({name:"markPrice",state:{},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async queryMarkPrice(e){const t=await(0,L.m4)(e);this.updateStateImmutable(t)}}});var F=r("GpFh"),D=r("CKG3"),_=r("PuIx"),B=r.n(_),z=r("wdcV");const K=(e,t,r,a,i)=>{if("initialMarkPrice"===r)return e||t||a.markPrice},q=(0,c.NY)()({name:"position",state:{apiError:!1,hideOtherSymbol:!1,onlySymbol:"",validPositionKeyArray:[],positionMap:{},rankingInfo:{rankingKey:"",rankingType:"default"}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable,updatePosition(e,t){const{positionMap:r,validPositionKeyArray:a,hideOtherSymbol:o,onlySymbol:l}=e,s=(0,F.Z)(e,["positionMap","validPositionKeyArray","hideOtherSymbol","onlySymbol"]),c=(0,n.ZP)(r,(e=>B()(e,t,K)));let u=(0,z.J9)(c).filter((e=>!o||(null===e||void 0===e?void 0:e.symbol)===l)).map((e=>(0,z._g)(e.symbol,e.positionSide)));return u.length===a.length&&u.every(((e,t)=>e===a[t]))&&(u=a),(0,i.Z)({positionMap:c,validPositionKeyArray:u,hideOtherSymbol:o,onlySymbol:l},s)},hideOtherSymbol(e,t){const{positionMap:r,validPositionKeyArray:a}=e,o=(0,F.Z)(e,["positionMap","validPositionKeyArray"]),{hideOtherSymbol:n,onlySymbol:l}=t;let s=(0,z.J9)(r).filter((e=>!n||(null===e||void 0===e?void 0:e.symbol)===l)).map((e=>(0,z._g)(e.symbol,e.positionSide)));return s.length===a.length&&s.every(((e,t)=>e===a[t]))&&(s=a),(0,i.Z)((0,i.Z)({positionMap:r,validPositionKeyArray:s},o),{},{hideOtherSymbol:n,onlySymbol:l})},setOrderbookPrice(e,t){const{price:r,symbol:a}=t,{positionMap:o}=e,l=(0,F.Z)(e,["positionMap"]),s=(0,n.ZP)(o,(e=>{const t=(0,z._g)(a,"LONG"),i=(0,z._g)(a,"SHORT"),{[a]:o,[t]:n,[i]:l}=e;return[o,n,l].forEach(((e={})=>{e.selectPrice=r})),e}));return(0,i.Z)({positionMap:s},l)}},effects:e=>({async queryPosition({symbol:t}){const r=(0,M.nM)()?D.G2:D.vY,{data:a,success:o}=await r({});o?this.updateState({apiError:!1}):this.updateState({apiError:!0});const n=(a||[]).reduce(((e,t)=>{const r=t||{},{symbol:a,positionSide:o,collateral:n,askNotional:l,bidNotional:s,cumRealized:c,entryPrice:u,isolatedWallet:d,markPrice:m,initialMarkPrice:p,notionalValue:f,positionAmount:g,unrealizedProfit:y}=r,b=(0,F.Z)(r,["symbol","positionSide","collateral","askNotional","bidNotional","cumRealized","entryPrice","isolatedWallet","markPrice","initialMarkPrice","notionalValue","positionAmount","unrealizedProfit"]);return e[(0,z._g)(a,o)]=(0,i.Z)({symbol:a,positionSide:o,collateral:n,marginAsset:n,askNotional:Number(l),bidNotional:Number(s),cumRealized:Number(c),entryPrice:Number(u),isolatedWallet:Number(d),markPrice:Number(m),initialMarkPrice:Number(p),notionalValue:Number(f),positionSize:Number(g),unrealizedProfit:Number(y)},b),e}),{}),{isolated:l}=(null===n||void 0===n?void 0:n[t])||{isolated:!1},s=l?E.Yl.ISOLATED:E.Yl.CROSSED;e.marginType.updateState(s),this.updatePosition(n)}})});var U=r("ulSS"),W=r("/8mO"),H=r("0RPJ"),$=r("1U9V"),j=r("4m5F"),G=r("C1dj"),J=r("s02S"),Y=r("EPGa");const Q=(0,c.NY)()({name:"preference",state:{orderConfirmation:{LIMIT:!1,MARKET:!1,STOP:!1,STOP_MARKET:!1,POST_ONLY:!1},priceProtection:!0,positionMode:!1,assetMode:!1,multiAssetMarginEnable:!1,usdtFuturesUnit:j.AO.coin,coinFuturesUnit:j.SW.cont,useLastPrice:!1,queryUnitFinished:void 0,showFlashOrder:!1,isEnableFundingFee:!1,fundingFee:.25,fundingFeeRange:{cap:.75,floor:1e-4},TPSLNotify:!1,displayMarginTypeAndLeverage:!0,enableAdvancedTPSL:!1,showPlusMinusButton:!1},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:e=>({async getOrderConfirmation(){const{success:e,data:t}=await(0,U.CQ)(),{orderConfirmation:r}=t||{};e&&r&&this.updateState({orderConfirmation:(0,i.Z)((0,i.Z)({},r),{},{POST_ONLY:r.LIMIT})})},async getFuturesPnlBasis(){const{success:e,data:t}=await(0,W.fc)(),{pnlPriceBasis:r}=t||{};e&&this.updateState({useLastPrice:"markPrice"!==r})},async changeOrderConfirmation(e,t){const r=await(0,U.wS)({orderConfirmation:e});return r&&this.updateState({orderConfirmation:(0,i.Z)((0,i.Z)((0,i.Z)({},t.preference.orderConfirmation),e),{},{POST_ONLY:e.LIMIT||t.preference.orderConfirmation.LIMIT})}),r},async getPositionMode(t,r){const{success:a,data:i}=await(0,U.wo)()||{dualSidePosition:!0},{dualSidePosition:o}=i||{};a&&(this.updateState({positionMode:o}),e.futuresOrderForm.changeReduceOnly(!o&&r.futuresOrderForm.reduceOnly),e.futuresOrderForm.changePositionDirection(o?Y.RS.OPEN:Y.RS.BOTH))},async getAssetMode(){const{success:e,data:t}=await(0,J.Jy)()||{joinMargin:!0},{joinMargin:r}=t||{};e&&this.updateState({assetMode:r})},async changePositionMode(t,r){const a=await(0,U.qM)(t),{success:i,data:o}=a,{dualSidePosition:n}=o||{};return i&&void 0!==n&&(this.updateState({positionMode:n}),e.futuresOrderForm.changeReduceOnly(!n&&r.futuresOrderForm.reduceOnly),e.futuresOrderForm.changePositionDirection(n?Y.RS.OPEN:Y.RS.BOTH)),a},async changeAssetMode(e){const t=await(0,J.QO)(e),{success:r,data:a}=t,{joinMargin:i}=a||{};return r&&void 0!==i&&this.updateState({assetMode:i}),t},async getUnit(e){const{success:t,data:r}=await(0,$.YD)(W.lU,5e4),a=(null===r||void 0===r?void 0:r.unit)||(null===e||void 0===e?void 0:e.data.unit),i=(0,M.nM)()?{coinFuturesUnit:a}:{usdtFuturesUnit:a};t&&a&&this.updateState(i)},async changeUnit(e){const t=(0,M.nM)()?{coinFuturesUnit:e}:{usdtFuturesUnit:e},r=await(0,U.t1)({unit:e});return r&&this.updateState(t),r},async getPriceProtection(e=(()=>({}))){const{success:t,data:r=!0}=await e();t&&this.updateState({priceProtection:r})},async getFundingFeeNotify(){const{success:e,data:{threshold:t,isEnable:r}}=await(0,G.TS)();e&&this.updateState({fundingFee:(0,H.Jp)(t,100).toNumber(),isEnableFundingFee:r})},async getFungFeeRange(){const{success:e,data:{cap:t,floor:r}}=await(0,G.j4)();e&&this.updateState({fundingFeeRange:{cap:(0,H.Jp)(t,100).toNumber(),floor:(0,H.Jp)(r,100).toNumber()}})},async getStopLimitOrderNotify(){const{success:e,data:t}=await(0,G.lj)();e&&this.updateState({TPSLNotify:t})},async getMultiAssetMarginEnableConfig(){const{success:e,data:t}=await(0,J.aO)(),{multiAssetMarginEnable:r=!1}=t||{},a=!e||r;return this.updateState({multiAssetMarginEnable:a}),a},async getCoolingPeriodConfig(){const{success:e,data:t={inCoolingDuration:!1,endTime:0,startTime:0}}=await(0,U.mh)(),{inCoolingDuration:r=!1,endTime:a=0,startTime:i=0}=t;return e&&this.updateState({responsibleConfig:{inCoolingDuration:r,endTime:a,startTime:i}}),t},async setCoolingPeriodConfig(e){const t=await(0,U.iy)(e);return t.success&&this.updateState({responsibleConfig:(0,i.Z)({},e)}),t},async updateTPSLNotify(e){const t=await(0,G.rR)(e);return t.success&&this.updateState({TPSLNotify:e}),t},async updateFundingFeeNotify({fundingFee:e,isEnable:t}){const r=await(0,G.hw)({threshold:(0,H.QZ)(e,100).toNumber(),isEnable:t});return r.success&&this.updateState({isEnableFundingFee:t,fundingFee:e}),r},async updateShowPlusMinusButton(t){e.preference.updateState({showPlusMinusButton:t})}})});var X=r("VtRc");const ee=(0,c.NY)()({name:"serviceStatus",state:{marketData:!0,userData:!0,placeOrder:!0,abnormal:!1,openTip:!1},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async getServiceStatus(e=!1){try{const t=await(0,X._)(e),{marketData:r,userData:a,placeOrder:i}=t,o=!r||!a||!i,n=o;this.updateStateImmutable({marketData:r,userData:a,placeOrder:i,abnormal:o,openTip:n})}catch(t){console.log("get service status error",t)}}}});var te=r("eSZT"),re=r("leTv");const ae=(0,c.NY)()({name:"transferAssets",state:{transferAsset:"USDT",assets:{},futuresAssets:{},assetTypes:[]},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async getUserAssets(){const e=await(0,re.N)({}),t=(0,m.FB)(e,"asset");return this.updateState({assets:t}),t},async getMaxWithdrawAmount(e=[]){const t=await Promise.all(e.map((e=>(0,b.yd)({assetName:e})))),r=null===t||void 0===t?void 0:t.reduce(((t,r,a)=>(t[e[a]]={free:Math.max(Object.prototype.hasOwnProperty.call(r,"error")?0:r,0)},t)),{});this.updateState({futuresAssets:r})},transfer:async(e,t)=>(0,te.r)(e,{lang:t})}}),ie=(0,c.NY)()({name:"userAsset",state:{userAsset:{}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable}}),oe=(0,c.NY)()({name:"userTab",state:{activeTab:"0"},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable}}),ne={assetIndex:u,balance:f,bracket:y,feeTier:h,futureMarket:S,grid:T,indexPrice:C,layout:w,leverage:A,marginType:O,markPrice:V,position:q,preference:Q,serviceStatus:ee,tradeForbidden:a.Z,transferAssets:ae,userAsset:ie,userTab:oe}},COFI:(e,t,r)=>{"use strict";r.d(t,{GY:()=>i,Sn:()=>o,Nn:()=>n,aV:()=>l,hr:()=>s,oU:()=>c,nW:()=>u,IS:()=>d,ZA:()=>f,Dc:()=>g,Jt:()=>y,SA:()=>b});var a=r("/MJE");const{registerActionHandle:i,constants:{ACTION_TRADE_ONECLIKE_BUY:o,ACTION_TRADE_ONECLIKE_SELL:n,ACTION_FUTURES_DUAL_OPEN:l,ACTION_FUTURES_DUAL_CLOSE:s,ACTION_TRADE_BUY:c,ACTION_TRADE_SELL:u,ACTION_FUTURES_ONECLIKE_CLOSE:d,COMMON_CANCEL:m,COMMON_OK:p,ACTION_TRADE_INCREASE_ORDER_PRICE:f,ACTION_TRADE_REDUCE_ORDER_PRICE:g,ACTION_TRADE_INCREASE_ORDER_QUANTITY:y,ACTION_TRADE_REDUCE_ORDER_QUANTITY:b}}=a.Z},lbaD:(e,t,r)=>{"use strict";function a(e){return Number.isNaN(e)||Math.abs(e)===1/0}function i({quantity:e,isBuy:t,entryPrice:r=0,closedPrice:i=0,contractVal:o=100,isDelivery:n,askPrice:l,bidPrice:s}){const c=t?1:-1;let u,d;return n?(u=e?(1/r-1/(t?s:l))*e*o*c:0,d=e?(1/r-1/i)*e*o*c:0):(u=e?((t?s:l)-r)*e*c:0,d=(i-r)*e*c),{marketPNL:a(u)?"-":u,limitPNL:a(d)?"-":d}}r.d(t,{k:()=>i})},QlFx:(e,t,r)=>{"use strict";r.d(t,{uf:()=>a,kh:()=>i,lE:()=>o});r("RX+5");const a=(e,t=2)=>{try{if("number"!==typeof e&&!e)return"-";const r=(e="number"===typeof e?e:+e).toFixed(Math.max(0,~~t)),a=-1!==r.indexOf(".")?/\d(?=(\d{3})+\.)/g:/\d(?=(\d{3})+$)/g;return r.replace(a,"$&,")}catch(r){return Sentry.captureException(r),"-"}},i=e=>e&&e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),o=(e="",t)=>{const[r="",a=""]=e.split("_");let i=[r,a.substr(2)].join(" ");if("PERP"===a||!a){i=[r,t("inversePerpetual",{defaultValue:"Perpetual"})].join(" ")}return i}},yxRq:(e,t,r)=>{"use strict";r.d(t,{BJ:()=>c,Nu:()=>p,w_:()=>f,IK:()=>g,_F:()=>y,sY:()=>b,zS:()=>k,Fb:()=>P,M4:()=>T,sE:()=>Z,wf:()=>w,qb:()=>E,sk:()=>A,qH:()=>R,mb:()=>O,iZ:()=>L,dK:()=>V,VX:()=>F,$g:()=>D});var a=r("5vwO"),i=r("FOuV"),o=r("k2tD"),n=r("wdcV");const{leverageInfo:l}=i.Fy,s=e=>Number((0,o.mD)(1/e,5)),c=e=>["MARKET","STOP_MARKET","TAKE_PROFIT_MARKET","TRAILING_STOP_MARKET"].includes(e),u=(e,t)=>{const r=[...e].reverse();let a=0;for(;a<r.length;){const e=r[a];if(t<=e.maxOpenPosLeverage&&e.minOpenPosLeverage<=t)return e;a+=1}return 0},d=({positionSize:e=0,entryPrice:t=0,markPrice:r=0,lastPrice:a=0,unrealizedProfit:i=0},{isDelivery:o=!1,contractVal:n=0},l=!1)=>{const s=l&&a?a:r;if(!s)return i;const c=Number(t)||0,u=Number(s)||0;return(Number(e)||0)*(o?n*((c?1/c:0)-(u?1/u:0)):u-c)||0},m=({positionSize:e=0,markPrice:t=0},{isDelivery:r=!1,contractVal:a=0})=>{const o=Number(t);return Math.abs(e*i.IA*(r?a*(o?1/o:0):o))},p=({positionSize:e=0,markPrice:t=0},{isDelivery:r=!1,contractVal:a=1}={})=>{const o=Number(t);return e*i.IA*(r?a*(o?1/o:0):o)},f=({formType:e="limit",type:t="bid",askPrice:r=0,bidPrice:a=0,orderPrice:o=0,markPrice:n=0,pricePrecision:l=2,isDelivery:s})=>{r=Number(r),a=Number(a),o=Number(o),n=Number(n);const u=r||n,d=a||n,m=10**l,p="bid"===t;let f;return f=c(e)?p?s?u:Math.floor(u*(1+i.HM.TWO_WAY)*m)/m:s?d*(1-i.HM.TWO_WAY):d:p?s?Math.min(r,n,o):o:s?o:Math.max(a,n,o),f},g=(e,t)=>((e,t)=>{let r=0;for(;r<e.length;){const a=e[r];if(t<a.bracketNotionalCap)return a;r+=1}return r&&e[r-1]})(e,t),y=(e,t)=>{let r=0;const a=[...e].reverse();for(;r<a.length;){const e=a[r],i=e.maxOpenPosLeverage;if(t===i)return e;if(t<i)return a[Math.max(r,0)];r+=1}return r&&a[r-1]},b=({positionSize:e,orderBidAmount:t,orderAskAmount:r,type:a})=>{r=Number(r),t=Number(t);const i="bid"===a;return(e=Number(e))>=0?i?t:Math.max(0,r-e):i?Math.max(0,t+e):r},h=({orderPrice:e=0,assumePrice:t=0,markPrice:r=0})=>({mp:r?1/r:0,op:e?1/e:0,ap:t?1/t:0}),v=({formType:e,type:t="bid",positionSize:r,orderBidAmount:a,orderAskAmount:o,markPrice:n=0,orderPrice:l=0,assumePrice:s=0,positionMode:u=!1,isDelivery:d=!1,contractVal:m=0})=>{n=Number(n)||0,l=Number(l)||0,s=Number(s)||0;const p="bid"===t?1:-1,f=b({positionSize:r,orderBidAmount:a,orderAskAmount:o,type:t}),g=u?Number("bid"===t?a:o):f*i.IA;let y;return y=d?(({orderPrice:e,markPrice:t,assumePrice:r,contractVal:a=0,formType:i})=>{const{mp:o,op:n,ap:l}=h({orderPrice:e,markPrice:t,assumePrice:r});return a*((c(i)?l:n)-o)})({orderPrice:l,markPrice:n,assumePrice:s,formType:e,contractVal:m}):n-(c(e)?s:l),g*Math.abs(Math.min(0,p*y))},x=({availableBalance:e,type:t="bid",formType:r="limit",orderPrice:a,markPrice:o,leverage:n,assumePrice:l=0,isolated:u=!1,isDelivery:d=!1,contractVal:m=0,bidNotional:p,askNotional:f,isTwoWay:g=!1,presetNotionalValue:y=0,positionNotionalValue:b=0,crossWalletBalance:v=0,totalIsolatedInitialMargin:x=0,totalCrossMaintenanceMargin:k=0})=>{e=Number(e),o=Number(o),a=Number(a);const S=s(n),P=y*S,T="bid"===t?1:-1;let C,M;if(d){const{ap:t,mp:i,op:n}=h({markPrice:o,assumePrice:l,orderPrice:a});if(g)M=e,C=m*(S*t+Math.abs(Math.min(0,T*((c(r)?t:n)-i)))),u&&(M=Math.max(0,Math.min(e,v-x-k)));else{let a=(b+(T>0?p:-f))*S;a=T>0?-a:a,C=m*(S*t+Math.abs(Math.min(0,T*((c(r)?t:n)-i)))),M=u?Math.max(0,Math.min(e,v-x-k)+P+a):Math.max(0,e+P+a)}}else M=u?Math.min(e,v-x-k):e,C=i.IA*(l*S+Math.abs(Math.min(0,T*(o-(c(r)?l:a)))));return C?M/C:0},k=({data:e={},isolated:t=!1,curPosition:r={},all:a=!1,isDelivery:i,contractVal:o})=>{let n=0;return t&&!a?Math.min(d(r,{isDelivery:i,contractVal:o},!1),d(r,{isDelivery:i,contractVal:o},!0)):(Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&(a||!e.isolated)){const t=e.contractVal||o;n+=Math.min(d(e,{isDelivery:i,contractVal:t},!1),d(e,{isDelivery:i,contractVal:t},!0))}})),n)},S=({riskTable:e,positionNotionalValue:t=0,symbol:r,positionSize:a=0,markPrice:i=0,isDelivery:o=!1,contractVal:n=0})=>{const{bracketMaintenanceMarginRate:l=0,cumFastMaintenanceAmount:s=0}=(({riskTable:e={},symbol:t,positionSize:r,markPrice:a,isDelivery:i,contractVal:o})=>{const n=m({positionSize:r,markPrice:a},{isDelivery:i,contractVal:o}),{bracketMaintenanceMarginRate:l,cumFastMaintenanceAmount:s}=(e[t]||[]).find((e=>n<e.bracketNotionalCap))||{};return{bracketMaintenanceMarginRate:l,cumFastMaintenanceAmount:s}})({riskTable:e,symbol:r,positionSize:a,markPrice:i,isDelivery:o,contractVal:n});return t*l-s},P=({positionNotionalValue:e=0,bidNotional:t=0,askNotional:r=0})=>Math.max(Math.abs(Number(e)+Number(t)),Math.abs(Number(e)-Number(r))),T=({data:e={},riskTable:t={},isolated:r,curPosition:i={},all:o=!1,isDelivery:n=!1,contractVal:l=0})=>{let s=0;if(r&&!o){const e=m(i,{isDelivery:n,contractVal:l});return S((0,a.Z)((0,a.Z)({riskTable:t},i),{},{isDelivery:n,contractVal:l,positionNotionalValue:e}))}return Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&(o||!e.isolated)){const r=m(e,{isDelivery:n,contractVal:l}),i=S((0,a.Z)({riskTable:t,positionNotionalValue:r,isDelivery:n,contractVal:l},e))||0;s+=i}})),s},C=({bidNotional:e=0,askNotional:t=0,positionSize:r,markPrice:a,isDelivery:i,contractVal:o})=>{e=Number(e)||0,t=Number(t)||0;const n=p({positionSize:r,markPrice:a},{isDelivery:i,contractVal:o});return Math.max(Math.abs(n+e),Math.abs(n-t))},M=({positionNotionalValue:e,bidNotional:t,askNotional:r,leverage:a=l.defaultVal})=>{const i=s(a);return P({positionNotionalValue:e,bidNotional:t,askNotional:r})*i},Z=({data:e,curLeverage:t,curSymbol:r,isDelivery:i=!1,contractVal:o=1})=>{let n=0;return Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){const{symbol:l,markPrice:c,positionSize:u,contractVal:d=o}=e,m=l===r?t:e.leverage,f=p(e,{isDelivery:i,contractVal:d});let g=Number(c);g=i?g?1/g:0:g,n+=(Math.abs(P((0,a.Z)((0,a.Z)({},e),{},{positionNotionalValue:f})))-g*Math.abs(u)*d)*s(m)}})),n},w=({data:e={},curLeverage:t,symbol:r,isolated:i,all:o=!1,curPosition:n,isDelivery:l=!1,contractVal:s=1})=>{let c=0;if(i&&!o){const e=p(n,{isDelivery:l,contractVal:s}),i=r===n.symbol?(0,a.Z)((0,a.Z)((0,a.Z)({},n),{leverage:t}),{},{positionNotionalValue:e}):(0,a.Z)((0,a.Z)({},n),{},{positionNotionalValue:e});return M(i)}return Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&(o||!e.isolated)){const i=e.contractVal||s,o=p(e,{isDelivery:l,contractVal:i}),n=e.symbol===r?(0,a.Z)((0,a.Z)((0,a.Z)({},e),{leverage:t}),{},{positionNotionalValue:o}):(0,a.Z)((0,a.Z)({},e),{},{positionNotionalValue:o});c+=M(n)}})),c},I=({assumePrice:e=0,type:t="bid",orderBidAmount:r=0,orderAskAmount:a=0,isDelivery:o=!1,contractVal:n=1})=>{e=Number(e)||0,r=Number(r)||0,a=Number(a)||0;const l="bid"===t,s=o?e?n/e:0:e;return{newBidNotional:l?i.IA*r*s:0,newAskNotional:l?0:i.IA*a*s}},E=({riskTable:e,brackets:t,positionSize:r,markPrice:a,availableBalance:o,type:n,formType:l,askPrice:s,bidPrice:c,orderPrice:d,leverage:m,bidNotional:g,askNotional:y,isolated:b,pricePrecision:h,isDelivery:v,contractVal:x,crossWalletBalance:k,calculateDeliveryActualMaxAmount:S,currentMarginPositions:M={},symbol:w,isNew:E=!0})=>{const A=f({formType:l,type:n,askPrice:s,bidPrice:c,orderPrice:d,markPrice:a,pricePrecision:h,isDelivery:v}),R=p({positionSize:r,markPrice:a},{isDelivery:v,contractVal:x}),O=P({positionNotionalValue:R,bidNotional:g,askNotional:y}),L=T({data:M.filter((e=>!e.isolated)),riskTable:t,isolated:b,all:!0,contractVal:x,isDelivery:v}),V=Z({data:M,curLeverage:m,curSymbol:w,isDelivery:v,contractVal:x});let F,D;const _=v?S({positionSize:r,availableBalance:o,positionNotionalValue:R,presetNotionalValue:O,bidNotional:g,askNotional:y,isolated:b,type:n,formType:l,orderPrice:d,markPrice:a,leverage:m,assumePrice:A,crossWalletBalance:k,contractVal:x,totalCrossMaintenanceMargin:L,totalIsolatedInitialMargin:V}):N({positionSize:r,availableBalance:o,presetNotionalValue:O,positionNotionalValue:R,bidNotional:g,askNotional:y,contractVal:x,isolated:b,type:n,formType:l,orderPrice:d,markPrice:a,leverage:m,assumePrice:A,isDelivery:v,crossWalletBalance:k,totalCrossMaintenanceMargin:L,totalIsolatedInitialMargin:V});"bid"===n?(F=_,D=0):(D=_,F=0);const{presentNotional:B,notionalAfterTrade:z}=(({bidNotional:e=0,askNotional:t=0,positionSize:r,markPrice:a,assumePrice:i,orderBidAmount:o,orderAskAmount:n,type:l,isDelivery:s=!1,contractVal:c=1,isNew:u=!1})=>{e=Number(e)||0,t=Number(t)||0;const d=p({positionSize:r,markPrice:a},{isDelivery:s,contractVal:c}),{newBidNotional:m,newAskNotional:f}=I({assumePrice:i,type:l,orderAskAmount:n,orderBidAmount:o,isDelivery:s,contractVal:c});let g;return g=u?"bid"===l?Math.max(Math.abs(d+e+m),Math.abs(d-t)):Math.max(Math.abs(d+e),Math.abs(d-t-f)):Math.max(Math.abs(d+e+m),Math.abs(d-t-f)),{presentNotional:C({bidNotional:e,askNotional:t,positionSize:r,markPrice:a,isDelivery:s,contractVal:c}),notionalAfterTrade:g,positionNotionalValue:d}})({positionSize:r,bidNotional:g,askNotional:y,markPrice:a,assumePrice:A,orderBidAmount:F,orderAskAmount:D,type:n,isDelivery:v,contractVal:x,isNew:E}),{bracketNotionalCap:K}=u(e,m);if(z<=K)return{maxBidAmount:F,maxAskAmount:D};let q;return v?(q=A?x/A:0,{maxBidAmount:q?Math.max((K-R-g)/q,0):0,maxAskAmount:q?Math.max((K+R-y)/q,0):0}):(q=A*i.IA,E?(F=q?(K-R-g)/q:0,D=q?(K+R-y)/q:0,F=F<0?0:F,D=D<0?0:D,{maxBidAmount:F,maxAskAmount:D}):r>=0?{maxBidAmount:q?Math.max((K-B)/q,0):0,maxAskAmount:q?Math.max((K+B)/q,0):0}:{maxBidAmount:q?Math.max((K+B)/q,0):0,maxAskAmount:q?Math.max((K-B)/q,0):0})},N=({positionSize:e,availableBalance:t,positionNotionalValue:r,bidNotional:a,askNotional:i,isolated:o,type:n,formType:l,orderPrice:u,markPrice:d,leverage:m,assumePrice:p,presetNotionalValue:f,crossWalletBalance:g,totalCrossMaintenanceMargin:y=0,totalIsolatedInitialMargin:b=0})=>{const h=s(m),v="bid"===n?1:-1,x=c(l)?p:u,k=c(l)?p:u,S=f*h,P=p*h+Math.abs(Math.min(0,v*(d-x))),T=p*h,C=1===v?-(r+a):r-i,M=o?Math.min(g-y-b,t):t,Z=M+S+C*h,w=Math.abs(e)*Math.abs(Math.min(0,v*(d-k))),I=Math.max(0,Z);if(e>=0){if(1===v)return P?I/P:0;const t=Math.max(0,Z+w),o=P?t/P:0;return Math.abs(r+a)>Math.abs(r-i-o*p)&&o>=Math.abs(e)?Math.max(0,(M+S-(r+a)*h+w)/(w/Math.abs(e))):o<Math.abs(e)?T?I/T:0:o}if(1===v){const t=Math.max(0,Z+w),o=P?t/P:0;return Math.abs(r+a+o*p)<Math.abs(r-i)&&o>=Math.abs(e)?Math.max(0,(M+S+(r-i)*h+w)/(w/Math.abs(e))):o<Math.abs(e)?T?I/T:0:o}return P?I/P:0},A=({leverage:e,positionSize:t,orderBidAmount:r,orderAskAmount:a,formType:i,type:o,askPrice:n,bidPrice:l,orderPrice:c,markPrice:u,bidNotional:d,askNotional:m,positionMode:g=!1,pricePrecision:y,isDelivery:b,contractVal:h})=>{const x=f({formType:i,type:o,askPrice:n,bidPrice:l,orderPrice:c,markPrice:u,pricePrecision:y,isDelivery:b}),k=(({positionSize:e,markPrice:t,assumePrice:r,type:a,bidNotional:i,askNotional:o,orderBidAmount:n,orderAskAmount:l,leverage:c=20,positionMode:u=!1,isDelivery:d=!1,contractVal:m=1})=>{const f=s(c);if(u){const e="bid"===a?n:l;return d?e*m*f*(Number(r)?1/r:0):r*f*e}i=Number(i)||0,o=Number(o)||0;const g=p({positionSize:e,markPrice:t},{isDelivery:d,contractVal:m}),{newBidNotional:y,newAskNotional:b}=I({assumePrice:r,type:a,orderAskAmount:l,orderBidAmount:n,isDelivery:d,contractVal:m}),h=Math.max(Math.abs(g+i),Math.abs(g-o)),v=Math.max(Math.abs(g+i+y),Math.abs(g-o-b));return Math.max((v-h)*f,0)})({positionSize:t,markPrice:u,assumePrice:x,type:o,bidNotional:d,askNotional:m,orderBidAmount:r,orderAskAmount:a,leverage:e,positionMode:g,isDelivery:b,contractVal:h}),S=v({formType:i,positionSize:t,orderBidAmount:r,orderAskAmount:a,markPrice:u,orderPrice:c,type:o,assumePrice:x,positionMode:g,isDelivery:b,contractVal:h});return{cost:k+S,openLost:S}},R=({riskTable:e,markPrice:t,availableBalance:r,formType:a,askPrice:i,bidPrice:o,leverage:n,longPosition:l,shortPosition:s,buyPrice:c,sellPrice:d,pricePrecision:m,isDelivery:g,isolated:y,contractVal:b,currentPairPositions:h={},getAllOthersPresentNotional:v,symbol:k,crossWalletBalance:S,brackets:P})=>{let C,M;const w=T({data:h.filter((e=>!e.isolated)),riskTable:P,isolated:y,all:!0,contractVal:b,isDelivery:g}),I=Z({data:h,curLeverage:n,curSymbol:k,isDelivery:g,contractVal:b}),E=f({formType:a,type:"bid",askPrice:i,bidPrice:o,orderPrice:c,markPrice:t,pricePrecision:m,isDelivery:g}),N=f({formType:a,type:"ask",askPrice:i,bidPrice:o,orderPrice:d,markPrice:t,pricePrecision:m,isDelivery:g}),A=x({availableBalance:r,type:"bid",formType:a,orderPrice:c,markPrice:t,leverage:n,assumePrice:E,isDelivery:g,contractVal:b,isTwoWay:!0,isolated:y,totalCrossMaintenanceMargin:w,totalIsolatedInitialMargin:I,crossWalletBalance:S}),R=x({availableBalance:r,type:"ask",formType:a,orderPrice:d,markPrice:t,leverage:n,assumePrice:N,isDelivery:g,contractVal:b,isTwoWay:!0,isolated:y,totalCrossMaintenanceMargin:w,totalIsolatedInitialMargin:I,crossWalletBalance:S}),{longNotionalAfterTrade:O,shortNotionalAfterTrade:L,shortPresentNotional:V,longPresentNotional:F}=(({longPosition:e,shortPosition:t,markPrice:r,longActualMaxOpenPositions:a,shortActualMaxOpenPositions:i,bidAssumePrice:o,askAssumePrice:n,isDelivery:l,contractVal:s})=>{const{bidNotional:c=0,askNotional:u=0,positionSize:d=0}=e,{bidNotional:m=0,askNotional:f=0,positionSize:g=0}=t,y=p({positionSize:d,markPrice:r},{isDelivery:l,contractVal:s}),b=p({positionSize:g,markPrice:r},{isDelivery:l,contractVal:s}),h=Math.max(Math.abs(y+Number(c)+(l?o?s/o:0:o)*a),Math.abs(y-u)),v=Math.max(Math.abs(b+Number(m)),Math.abs(b-f)),x=Math.max(Math.abs(y+Number(c)),Math.abs(y-u));return{longNotionalAfterTrade:h,shortNotionalAfterTrade:Math.max(Math.abs(b+Number(m)),Math.abs(b-f-(l?n?s/n:0:n)*i)),shortPresentNotional:v,longPresentNotional:x}})({longPosition:l,shortPosition:s,markPrice:t,longActualMaxOpenPositions:A,shortActualMaxOpenPositions:R,bidAssumePrice:E,askAssumePrice:N,isDelivery:g,contractVal:b}),{bracketNotionalCap:D}=u(e,n),_=v({currentPairPositions:h.filter((e=>e.symbol===k)),markPrice:t,contractVal:b});return C=g&&A<=0?0:O+V<=D?A:g?b?E*(D-_)/b:0:E?(D-F-V)/E:0,M=g&&R<=0?0:L+F<=D?R:g?b?N*(D-_)/b:0:N?(D-V-F)/N:0,{maxBidAmount:Math.max(C,0),maxAskAmount:Math.max(M,0)}},O=({orderPrice:e=0,assumePrice:t=0,triggerPrice:r=0,activationPrice:a=0,formType:o=i.PH.LIMIT})=>{switch(o){case i.PH.LIMIT_TYPE:case i.PH.STOP_LIMIT:case i.PH.TAKE_PROFIT_LIMIT:return Number(e);case i.PH.MARKET_TYPE:return Number(t);case i.PH.STOP_MARKET:case i.PH.TAKE_PROFIT_MARKET:return Number(r);case i.PH.TRAILING_STOP_MARKET:return Number(a);default:return Number(e)}},L=({positionSize:e=0,orderAmount:t=0,side:r=1})=>Number(e)+t*r,V=({entryPrice:e=0,positionSize:t=0,orderPrice:r=0,assumePrice:a=0,triggerPrice:i=0,activationPrice:o=0,orderAmount:n=0,formType:l,side:s=1})=>{const c=Math.abs(t),u=Number(t),d=L({positionSize:t,orderAmount:n,side:s}),m=O({orderPrice:r,assumePrice:a,triggerPrice:i,activationPrice:o,formType:l});return 0===u||1===s&&u>0||-1===s&&u<0?d?(e*c+m*n)/Math.abs(d):0:c>n?Number(e):c===Number(n)?0:m},F=({entryPrice:e=0,positionSize:t=0,orderPrice:r=0,assumePrice:a=0,triggerPrice:i=0,activationPrice:o=0,orderAmount:n=0,formType:l,side:s=1,isolatedWallet:c=0,crossWalletBalance:u=0,cost:d=0,openLost:m=0,bidNotional:p=0,askNotional:f=0,takerCommission:g=0})=>{const y=Math.abs(t),h=Number(t),v=0===h||1===s&&h>0||-1===s&&h<0,x=O({orderPrice:r,assumePrice:a,triggerPrice:i,activationPrice:o,formType:l});if(v)return{estCrossWalletBalance:u-n*x*g,estIsolatedWallet:Number(c)+Number(d)};if(y>n)return{estCrossWalletBalance:u-n*s*(x-e)-n*x*g,estIsolatedWallet:(h?(h-n)*c/h:0)+Math.min(0,(h?n*c/h:0)-n*s*(x-e))};if(y<n){const r=b({positionSize:t,orderBidAmount:n,orderAskAmount:n,type:1===s?"bid":"ask"});return{estCrossWalletBalance:u+h*(x-e)-n*x*g,estIsolatedWallet:m+Math.max(Math.abs(Number(p)+x*r),Math.abs(Number(f)-x*r))-Math.max(Math.abs(p),Math.abs(f))+Math.min(0,c+h*(x-e))}}return{estCrossWalletBalance:0,estIsolatedWallet:0}},D=({balance:e,leverage:t,symbol:r,isDelivery:a,contractVal:i,askRate:o=0,assetIndexes:l,positions:s})=>{let c=0,u=0;const d={};return Object.values(e).forEach((o=>{const{marginAvailable:m,asset:p}=o;if(m){var f;const o=(0,n.nn)({positions:s,marginAsset:p})||[],m=k({data:o,isolated:!1,isDelivery:a,contractVal:i}),g=(null===l||void 0===l?void 0:l[p])||{},{askRate:y=0,bidRate:b=0}=g||{},h=w({data:o,isolated:!1,curLeverage:t,symbol:r,isDelivery:a,contractVal:i});c+=h*y;const v=(({assetWalletBalance:e=0,totalCrossUnrealizedPNL:t=0})=>Number(e)+Number(t))({assetWalletBalance:Number((null===e||void 0===e||null===(f=e[p])||void 0===f?void 0:f.crossWalletBalance)||0),totalCrossUnrealizedPNL:m}),x=Math.min(v*b,v*y);u+=x,Object.assign(d,{[p]:x})}})),{availableBalance:Number(o)?(u-c)/o:0,assetEquityMap:d}}},DCTW:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>l,nn:()=>s,fS:()=>c,wj:()=>m,yh:()=>p,ot:()=>f,SH:()=>y,zW:()=>b,Uy:()=>h,sE:()=>v,W8:()=>x,ST:()=>k,Vo:()=>S});var a=r("5vwO"),i=r("mE5e"),o=r("FOuV");const{leverageInfo:n}=o.Fy,l=(e,t=[],r,i,o,l=!0,u=!1,d,m=[])=>{const{leverageList:g={}}=i||{},h=d||t;return t.map(((t={})=>{const{marginAsset:i,isolated:o,isolatedWallet:d=0,symbol:v="",positionSide:T}=t,C=r[i]||{},{crossWalletBalance:M=0}=C;let Z,w,I=0,E=0,N=0,A=0,R=0;const O=(null===e||void 0===e?void 0:e[v])||[],L=!o&&T&&"BOTH"!==T,V=o?d:M,F=g[v]||n.defaultVal;if(!o){const t=h.filter((e=>e.marginAsset===i)).filter((e=>!(null!==e&&void 0!==e&&e.isolated)));I=b(t,e),E=f(t),N=S(I,M,E);const r=t.filter((e=>(null===e||void 0===e?void 0:e.symbol)!==v));A=b(r,e)-f(r)}if(L){const e=h.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===v&&"BOTH"!==r&&r!==T}))[0]||{positionSize:0,entryPrice:0};Z="LONG"===T?t:e,w="SHORT"===T?t:e}l&&(R=L&&Z.positionSize&&w.positionSize?k(O,V,A,Z,w,t):x(O,V,A,t));const D=y(O,t),_=s(t),B=S(D,d,_),z=s(t,u),K=c(t)*p(F),q=`${(100*(z/K||0)).toFixed(2)}%`;return(0,a.Z)((0,a.Z)({},t),{},{liquidationPrice:R<0?0:R,unrealizedPnl:z,margin:o?d:K,riskRatio:o?B:N,ROEVal:q,leverage:F,strategyOrders:P(t,m)})}))},s=({positionSize:e=0,entryPrice:t=1,markPrice:r=1,contractVal:a=100,lastPrice:i},o=!1)=>{if(0===t||0===r)return 0;return e*a*(1/t-1/(o&&i||r))},c=({positionSize:e=0,markPrice:t=1,contractVal:r})=>Math.abs(e*r/t),u=({positionSize:e=0,markPrice:t=1,contractVal:r})=>e*r/t,d=({positionNotionalValue:e=0,bidNotional:t=0,askNotional:r=0})=>Math.max(Math.abs(Number(e)+Number(t)),Math.abs(Number(e)-Number(r))),m=e=>{let t=0;return e.forEach((e=>{const r=(({bidNotional:e,askNotional:t,markPrice:r,positionSize:a,contractVal:i})=>{const o=u({markPrice:r,positionSize:a,contractVal:i});return e=Number(e||0),t=Number(t||0),Math.max(Math.abs(o+e),Math.abs(o-t))})(e)-c(e);t+=r})),t},p=e=>1*(0,i.mD)(1/e,4),f=(e=[],t)=>e.reduce(((e,r)=>e+s(r,t)),0),g=(e=[],t)=>{const r=c(t);let i=e.findIndex((e=>r<e.bracketNotionalCap));return-1===i&&(i=e.length-1),(0,a.Z)((0,a.Z)({positionNotionalValue:r},e[i]),{},{index:i})},y=(e,t)=>{const{positionNotionalValue:r,bracketMaintenanceMarginRate:a,cumFastMaintenanceAmount:i}=g(e,t);return r*a-i},b=(e=[],t={})=>e.reduce(((e,r)=>{const{symbol:a}=r||{},i=(null===t||void 0===t?void 0:t[a])||[];return e+y(i,r)}),0),h=(e=[],t,r)=>e.filter((e=>!(null!==e&&void 0!==e&&e.isolated))).reduce(((e,i)=>e+(({positionNotionalValue:e,bidNotional:t,askNotional:r,leverage:a=n.defaultVal})=>{const i=p(a);return d({positionNotionalValue:e,bidNotional:t,askNotional:r})*i})((0,a.Z)((0,a.Z)({},i),{},{positionNotionalValue:u(i),leverage:r===i.symbol?t:i.leverage}))),0),v=(e=[],t,r)=>{let i=0;return e.forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){const{symbol:o,markPrice:n,positionSize:l,contractVal:s=100}=e,c=o===r?t:e.leverage,m=u(e);let f=Number(n);f=f?1/f:0,i+=(Math.abs(d((0,a.Z)((0,a.Z)({},e),{},{positionNotionalValue:m})))-f*Math.abs(l)*s)*p(c)}})),i},x=(e=[],t,r,a)=>{const{positionSize:i,entryPrice:o,contractVal:n=100}=a;if(!i||0===i)return 0;let l=0;const s=i>=0?1:-1;let c=e.length-1;for(;c>=0;){const{bracketMaintenanceMarginRate:a,cumFastMaintenanceAmount:u,bracketNotionalFloor:d}=e[c];l=(Math.abs(i)*a+s*Math.abs(i))/((t-r+u)/n+s*Math.abs(i)/o);if(Math.abs(i)*n/l>d)break;if(0===c)break;c-=1}return l},k=(e=[],t,r,a,i,o)=>{const{entryPrice:n=0,positionSize:l=0,contractVal:s=100}=a,{entryPrice:c=0,positionSize:u=0,markPrice:d}=i;if(0===l||0===u)return 0;const{index:m,bracketMaintenanceMarginRate:p,cumFastMaintenanceAmount:f}=g(e,a),{bracketMaintenanceMarginRate:y,cumFastMaintenanceAmount:b}=g(e,i);if(-1===m)return 0;let h=m,v=0,x=0;for(;h>=0;){let a=e.length-1;const{bracketMaintenanceMarginRate:i,cumFastMaintenanceAmount:o}=e[h];for(;a>=0;){const{bracketMaintenanceMarginRate:d,cumFastMaintenanceAmount:m,bracketNotionalFloor:p}=e[a];if(v=(Math.abs(l)*d+Math.abs(u)*i+Math.abs(l)-Math.abs(u))/((t-r+m+o)/s+Math.abs(l)/n-Math.abs(u)/c),0===v)return v;if(Math.abs(l*s/v)>p)break;a-=1}const m=Math.abs(u*s/v),p=Math.abs(u*s/d);if(e.reverse().findIndex((e=>m>e.bracketNotionalFloor))===e.reverse().findIndex((e=>p>e.bracketNotionalFloor)))break;if(0===h)break;h-=1}if(Math.abs(l)<Math.abs(u)){const{markPrice:e}=o;if(x=(Math.abs(l)*p+Math.abs(u)*y+Math.abs(l)-Math.abs(u))/((t-r+f+b)/s+Math.abs(l)/n-Math.abs(u)/c),x>=0&&(Math.abs(x-e)<Math.abs(v-e)||v<0))return x}return v},S=(e=0,t=0,r=0)=>{const a=t+r;return(0,i.JX)(a?e/a*100:0,2)},P=(e,t)=>{const r={sl:{},tp:{}};return t.forEach((t=>{const a=!0===t.closePosition,i=e.symbol===t.symbol,n=e.positionSide===t.positionSide,l=e.positionSize<0&&"BUY"===t.side||e.positionSize>0&&"SELL"===t.side;a&&i&&n&&l&&(t.type===o.PH.TAKE_PROFIT_MARKET&&(r.tp=t),t.type===o.PH.STOP_MARKET&&(r.sl=t))})),r}},cucV:(e,t,r)=>{"use strict";r.d(t,{Zk:()=>a.Zk,Uy:()=>a.Uy,sE:()=>a.sE,yh:()=>a.yh,SH:()=>a.SH,wj:()=>a.wj,zW:()=>a.zW,ot:()=>a.ot,nn:()=>a.nn,bG:()=>i.bG});var a=r("74Of"),i=r("H8fa")},H8fa:(e,t,r)=>{"use strict";r.d(t,{bG:()=>s,Dj:()=>c,_O:()=>u});var a=r("5vwO"),i=r("FOuV"),o=r("wdcV"),n=r("74Of");const{leverageInfo:l}=i.Fy,s=({riskRatio:e,assetsRateEquity:t,assetsMM:r,assetIndexes:i,brackets:s,positions:d,balances:m,leverages:p,useLastPrice:f,openOrders:g})=>{const{leverageList:y={}}=p||{},b=(0,o.L6)(d);return d.map(((o={})=>{const{symbol:p,positionSide:h,marginAsset:v}=o,x=m[v]||{},{crossWalletBalance:k=0}=x;let S,P,T=0;const C=(null===s||void 0===s?void 0:s[p])||[],M=y[p]||l.defaultVal,Z=i[v]||{},w=(b[v]||[]).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==p)),I=(0,n.zW)(w,s),E=(0,n.ot)(w);let N=0;Object.entries(t).forEach((([e,t])=>{e!==v&&(N+=t)})),Object.entries(r).forEach((([e,t])=>{const r=i[e]||{},{askRate:a=0}=r;N-=e!==v?t*a:I*a}));if(h&&"BOTH"!==h){const e=d.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===p&&"BOTH"!==r&&r!==h}))[0]||{positionSize:0,entryPrice:0};S="LONG"===h?o:e,P="SHORT"===h?o:e,T=u({accEquityAndMMs:N,assetIndex:Z,bracket:C,crossWalletBalance:k,smdsUPNL:E,longPosition:S,shortPosition:P,curPosition:o})}else T=c({accEquityAndMMs:N,assetIndex:Z,bracket:C,crossWalletBalance:k,smdsUPNL:E,curPosition:o});const A=(0,n.nn)(o,f),R=(0,n.fS)(o)*(0,n.yh)(M),O=`${(100*(A/R||0)).toFixed(2)}%`;return(0,a.Z)((0,a.Z)({},o),{},{liquidationPrice:T<0?0:T,riskRatio:e,unrealizedPnl:A,margin:R,ROEVal:O,leverage:M,strategyOrders:(0,n.Vf)(o,g)})}))},c=({accEquityAndMMs:e,assetIndex:t,bracket:r,crossWalletBalance:a,smdsUPNL:i,curPosition:o})=>{const{positionSize:n,entryPrice:l}=o,{askRate:s=1,bidRate:c=1}=t;if(!n||0===n)return 0;let u=0;const d=n>=0?1:-1;let m=r.length-1;const p={};for(;m>=0;){const{bracketMaintenanceMarginRate:t,cumFastMaintenanceAmount:o,bracketNotionalFloor:f,bracketNotionalCap:g}=r[m];p.mmr=t,p.cum=o,u=(e+o*s+(a+i-d*Math.abs(n)*l)*c)/(Math.abs(n)*(t*s-d*c));if(f<u*Math.abs(n))break;if(0===m)break;m-=1}if(a+i+d*Math.abs(n)*(u-l)<=0){const{mmr:t,cum:r}=p;u=(e+r*s+(a+i-d*Math.abs(n)*l)*s)/(Math.abs(n)*(t*s-d*s))}return u},u=({accEquityAndMMs:e,assetIndex:t,bracket:r,crossWalletBalance:a,smdsUPNL:i,longPosition:o,shortPosition:l,curPosition:s})=>{const{entryPrice:c=0,positionSize:u=0}=o,{entryPrice:d=0,positionSize:m=0}=l;if(0===u&&0===m)return 0;const{askRate:p=1,bidRate:f=1}=t,{index:g,bracketMaintenanceMarginRate:y,cumFastMaintenanceAmount:b}=(0,n.u5)(r,o),{bracketMaintenanceMarginRate:h,cumFastMaintenanceAmount:v}=(0,n.u5)(r,l);let x=g,k=0,S=0;const P={};for(;x>=0;){let t=r.length-1;const{bracketMaintenanceMarginRate:o,cumFastMaintenanceAmount:n,bracketNotionalFloor:l}=r[x];for(P.mmrLong=o,P.cumLong=n;t>=0;){const{bracketMaintenanceMarginRate:l,cumFastMaintenanceAmount:s,bracketNotionalFloor:g}=r[t];P.mmrShort=l,P.cumShort=s;k=(e+(s+n)*p+(a+i-Math.abs(u)*c+Math.abs(m)*d)*f)/((Math.abs(u)*o+Math.abs(m)*l)*p-(Math.abs(u)-Math.abs(m))*f);if(k*Math.abs(m)>g)break;t-=1}if(k*Math.abs(u)>l)break;if(0===x)break;x-=1}if(Math.abs(u)>Math.abs(m)){const{markPrice:t}=s;S=(e+(v+b)*p+(a+i-Math.abs(u)*c+Math.abs(m)*d)*f)/((Math.abs(u)*y+Math.abs(m)*h)*p-(Math.abs(u)-Math.abs(m))*f),S>=0&&(Math.abs(S-t)<Math.abs(k-t)||k<0)&&(P.mmrLong=y,P.cumLong=b,P.mmrShort=h,P.cumShort=v,k=S)}if(a+i+Math.abs(u)*(k-c)+Math.abs(m)*(d-k)<=0){const{mmrLong:t,cumLong:r,mmrShort:o,cumShort:n}=P;k=(e+(n+r)*p+(a+i-Math.abs(u)*c+Math.abs(m)*d)*p)/((Math.abs(u)*t+Math.abs(m)*o)*p-(Math.abs(u)-Math.abs(m))*p)}return k}},"74Of":(e,t,r)=>{"use strict";r.d(t,{Zk:()=>s,nn:()=>c,fS:()=>u,wj:()=>m,yh:()=>p,ot:()=>f,u5:()=>g,SH:()=>y,zW:()=>b,Uy:()=>h,sE:()=>v,W8:()=>x,wr:()=>k,Vo:()=>S,Vf:()=>P});var a=r("5vwO"),i=r("mE5e"),o=r("FOuV"),n=r("yxRq");const{leverageInfo:l}=o.Fy,s=(e,t=[],r,i,o,n=!0,s=!1,d,m=[])=>{const{leverageList:g={}}=i||{},h=d||t;return t.map(((t={})=>{const{isolated:i,isolatedWallet:o=0,symbol:d,positionSide:v,marginAsset:T}=t,C=r[T]||{},{crossWalletBalance:M=0}=C;let Z,w,I=0,E=0,N=0,A=0,R=0;const O=(null===e||void 0===e?void 0:e[d])||[],L=!i&&v&&"BOTH"!==v,V=i?o:M,F=g[d]||l.defaultVal;if(!i){const t=h.filter((e=>e.marginAsset===T)).filter((e=>!(null!==e&&void 0!==e&&e.isolated)));I=b(t,e),E=f(t),N=S(I,M,E);const r=t.filter((e=>(null===e||void 0===e?void 0:e.symbol)!==d));A=b(r,e)-f(r)}if(L){const e=h.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===d&&"BOTH"!==r&&r!==v}))[0]||{positionSize:0,entryPrice:0};Z="LONG"===v?t:e,w="SHORT"===v?t:e}n&&(R=L?k(O,V,A,Z,w,t):x(O,V,A,t));const D=y(O,t),_=c(t),B=S(D,o,_),z=c(t,s),K=u(t)*p(F),q=`${(100*(z/K||0)).toFixed(2)}%`;return(0,a.Z)((0,a.Z)({},t),{},{liquidationPrice:R<0?0:R,unrealizedPnl:z,margin:i?o:K,riskRatio:i?B:N,ROEVal:q,leverage:F,strategyOrders:P(t,m)})}))},c=({positionSize:e=0,entryPrice:t=0,markPrice:r=0,lastPrice:a},i=!1)=>e*((i&&a||r)-t),u=({positionSize:e=0,markPrice:t=0})=>Math.abs(e*t),d=({positionNotionalValue:e=0,bidNotional:t=0,askNotional:r=0})=>Math.max(Math.abs(e+Number(t)),Math.abs(e-Number(r))),m=e=>{let t=0;return e.forEach((e=>{const r=(({bidNotional:e,askNotional:t,markPrice:r,positionSize:a})=>{const i=(({positionSize:e=0,markPrice:t=0})=>e*t)({markPrice:r,positionSize:a});return e=Number(e||0),t=Number(t||0),Math.max(Math.abs(i+e),Math.abs(i-t))})(e)-u(e);t+=r})),t},p=e=>1*(0,i.mD)(1/e,4),f=(e=[],t)=>e.reduce(((e,r)=>e+c(r,t)),0),g=(e=[],t)=>{const r=u(t);let i=e.findIndex((e=>r<e.bracketNotionalCap));return-1===i&&(i=e.length-1),(0,a.Z)((0,a.Z)({positionNotionalValue:r},e[i]),{},{index:i})},y=(e,t)=>{const{positionNotionalValue:r,bracketMaintenanceMarginRate:a,cumFastMaintenanceAmount:i}=g(e,t);return r*a-i},b=(e=[],t={})=>e.reduce(((e,r)=>{const{symbol:a}=r||{},i=(null===t||void 0===t?void 0:t[a])||[];return e+y(i,r)}),0),h=(e=[],t,r)=>e.filter((e=>!(null!==e&&void 0!==e&&e.isolated))).reduce(((e,i)=>e+(({positionNotionalValue:e,bidNotional:t,askNotional:r,leverage:a=l.defaultVal})=>{const i=p(a);return d({positionNotionalValue:e,bidNotional:t,askNotional:r})*i})((0,a.Z)((0,a.Z)({},i),{},{positionNotionalValue:(0,n.Nu)(i),leverage:r===i.symbol?t:i.leverage}))),0),v=(e=[],t,r)=>{let i=0;return e.forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){const{symbol:o,markPrice:l,positionSize:s}=e,c=o===r?t:e.leverage,u=(0,n.Nu)(e);i+=(Math.abs(d((0,a.Z)((0,a.Z)({},e),{},{positionNotionalValue:u})))-l*Math.abs(s))*p(c)}})),i},x=(e=[],t,r,a)=>{const{positionSize:i,entryPrice:o}=a;if(!i||0===i)return 0;let n=0;const l=i>=0?1:-1;let s=e.length-1;for(;s>=0;){const{bracketMaintenanceMarginRate:a,cumFastMaintenanceAmount:c,bracketNotionalFloor:u}=e[s];n=(t-r+c-l*Math.abs(i)*o)/(Math.abs(i)*(a-l));if(n*Math.abs(i)>u)break;if(0===s)break;s-=1}return n},k=(e=[],t,r,a,i,o)=>{const{entryPrice:n=0,positionSize:l=0}=a,{entryPrice:s=0,positionSize:c=0}=i;if(0===l&&0===c)return 0;const{index:u,bracketMaintenanceMarginRate:d,cumFastMaintenanceAmount:m}=g(e,a),{bracketMaintenanceMarginRate:p,cumFastMaintenanceAmount:f}=g(e,i);let y=u,b=0,h=0;for(;y>=0;){let a=e.length-1;const{bracketMaintenanceMarginRate:i,cumFastMaintenanceAmount:o,bracketNotionalFloor:u}=e[y];for(;a>=0;){const{bracketMaintenanceMarginRate:u,cumFastMaintenanceAmount:d,bracketNotionalFloor:m}=e[a];b=(t-r+d+o-Math.abs(l)*n+Math.abs(c)*s)/(Math.abs(l)*i+Math.abs(c)*u-Math.abs(l)+Math.abs(c));if(b*Math.abs(c)>m)break;a-=1}if(b*Math.abs(l)>u)break;if(0===y)break;y-=1}if(Math.abs(l)>Math.abs(c)){const{markPrice:e}=o;if(h=(t-r+f+m-Math.abs(l)*n+Math.abs(c)*s)/(Math.abs(l)*d+Math.abs(c)*p-Math.abs(l)+Math.abs(c)),h>=0&&(Math.abs(h-e)<Math.abs(b-e)||b<0))return h}return b},S=(e=0,t=0,r=0)=>{const a=t+r;return(0,i.JX)(a?e/a*100:0,2)},P=(e,t)=>{const r={sl:{},tp:{}};return t.forEach((t=>{const a=!0===t.closePosition,i=e.symbol===t.symbol,n=e.positionSide===t.positionSide,l=e.positionSize<0&&"BUY"===t.side||e.positionSize>0&&"SELL"===t.side;a&&i&&n&&l&&(t.type===o.PH.TAKE_PROFIT_MARKET&&(r.tp=t),t.type===o.PH.STOP_MARKET&&(r.sl=t))})),r}},xbrC:(e,t,r)=>{"use strict";r.d(t,{r:()=>a});const a=(e=[])=>{const t=[];return e.forEach((e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach((e=>!t.includes(e)&&t.push(e)))})),t}},k4WF:(e,t,r)=>{"use strict";function a(e){return/[^\d|.|,|\u3002|\%]/.test(e)}r.d(t,{_p:()=>i,Y5:()=>o,f5:()=>n});const i=(e,t,r,i)=>{let o="object"!==typeof e?e:e.target.value;return a(Number(o))?"":~o.indexOf("%")?o:(/\u3002|,/.test(o)&&(o=o.replace(/[\u3002|,]/g,".")),/^0\d/.test(o)?o="0":/^\./.test(o)?o=0+o.substring(0,i+1):Number(o)>=0&&-1!==o.indexOf(".")&&o.split(".")[1].length>=i&&(o=o.replace(new RegExp(`^(\\d*\\.\\d{${i}})\\d*`),"$1")),Number.isNaN(Number(o))?"":void(r?t(r,o):t(o)))},o=e=>!/\d*\.?\d+$/.test(e.target.value)&&(e.target.value=""),n=(e,t)=>"Enter"===e.key&&t()},k2tD:(e,t,r)=>{"use strict";r.d(t,{GW:()=>o,mD:()=>n,OR:()=>l,nH:()=>s});var a=r("QlFx");const i=(e,t,r="round",i=!1)=>{const o=10**t;let n=(+(e=e||0)+1/10**(t+3))*o;if("string"===typeof r){const e=2;n=parseInt(n*10**e,10)/10**e,r=((e="bids")=>(()=>{switch(e){case"bids":return"floor";case"asks":return"ceil";default:if(Math[e])return Math[e];throw new Error("getRoundFunc called with unknown type")}})())(r)}if("function"!==typeof r)throw new Error("decRound unknown rounding func");return i?(0,a.uf)(r(n)/o,t):(r(n)/o).toFixed(t)},o=(e,t=2,r)=>i(e,t,"floor",r),n=(e,t=2,r)=>i(e,t,"ceil",r),l=e=>Math.abs(Math.log10(e)),s=(e=0)=>0===e?1:Math.abs(1/10**e)},wdcV:(e,t,r)=>{"use strict";r.d(t,{J9:()=>a,_g:()=>i,kh:()=>o,L6:()=>n,nn:()=>l,QN:()=>s});const a=e=>Object.values(e).filter((e=>{const{positionSize:t,isolatedWallet:r}=e||{};if(void 0===t)return;const a=Number(t);return 0!==a||0===a&&Number(r)<0})),i=(e,t)=>t&&"BOTH"!==t?`${e}_${t}`:e,o=(e=[])=>e.reduce(((e,t)=>{const{symbol:r}=t;return e[r]=t,e[`${i(r,"LONG")}`]=t,e[`${i(r,"SHORT")}`]=t,e}),{}),n=e=>e.reduce(((e,t)=>{const{marginAsset:r}=t;return e[r]=e[r]||[],e[r].push(t),e}),{}),l=({marginAsset:e,positions:t={}})=>Object.values(t).filter((t=>(null===t||void 0===t?void 0:t.marginAsset)===e))||[],s=e=>e.reduce(((e,{symbol:t,positionSide:r,orderSide:a,amount:i,message:o})=>{let n=r;"BOTH"===r&&(n="BUY"===a?"SHORT":"LONG");const l=`${t}_${n}`,s="LONG"===n?"buy":"sell",c=`${i} %unit% ${o}`;return e[l]?e[l].messages.push(c):e[l]={symbol:t,positionSide:n,color:s,amount:i,messages:[c]},e}),{})},"/M83":(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});const a=(e="",t={})=>{const{baseAsset:r,quoteAsset:a}=t;return[e,[r,a]]}},gHlc:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r("/SIk"),i=r.n(a),o=r("dzFz"),n=r("Fee1"),l=r("SJeZ"),s=r("klBV"),c=r("HkAn"),u=r("VM/Z"),d=r("S24M"),m=i().createElement;const p={[u.$f]:"bottomRight",[u.UW]:"topRight",mobile:"topCenter"},f=()=>{const e=(()=>{const{isMobile:e}=(0,s.Fs)(),t=(0,l.C3)()===u.UW;let r=u.$f;return e?r="mobile":t&&(r=u.UW),r})(),{pageName:t,dfSource:r}=(0,c.Vn)();return m(n.Z,{name:"announcement"},!u.Jg&&m(o.Z,{business:"FUTURES",scope:"TRADING_PAGE",i18nHost:u.Yz,WS_HOST:u.Ij,sensorsTrack:d.j,trackParams:{pageName:t,dfSource:r},placement:p[e]}))}},"3Slz":(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var a=r("/SIk"),i=r.n(a),o=r("szIg"),n=r("8+Lq"),l=r("3aob"),s=r("yEOA"),c=r("Qkkg"),u=r("ofts"),d=r("2iBS"),m=r("klBV"),p=r("HkAn"),f=r("VM/Z"),g=r("S24M"),y=r("6Afj"),b=i().createElement;const h=(0,y.SA)((()=>Promise.all([r.e(3712),r.e(9845),r.e(4666)]).then(r.bind(r,"gHlc")))),v=({children:e})=>{(0,m.TF)(),(0,p.r5)(),(0,p.Vr)(),(0,p.mz)();const t=(0,o.useDispatch)();return(0,a.useEffect)((()=>{t.userCenter.checkLogin()}),[t.userCenter]),b(i().Fragment,null,b(u.Z,null),b(d.Z,null),b(l.I,{sensorsTrack:g.j,questionConfig:s.r.NEW0223}),b(h,null),e)},x=({render:e,children:t})=>{const{isMobile:r}=(0,m.Fs)(),a=(0,o.useSelector)((e=>e.setting.layout)),l=(0,o.useSelector)((e=>e.layout.pageLayout))===f.UW,s=a===f.rh||a===f.UW||r||l,u=e?e():null;return b(i().Fragment,null,t,b(c.Z,null,b(n.Z,{queueSize:2,closable:!0,autoHideDuration:4500,anchorOrigin:{vertical:s?"top":"bottom",horizontal:"right"},disableAnimate:!0},b(v,null,u))))},k=(0,a.memo)(x)},WqGP:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>de});var a=r("/SIk"),i=r.n(a),o=r("w9Ve"),n=r("Ozc/"),l=r("Tfqf"),s=r("klBV"),c=r("SJeZ"),u=r("HkAn"),d=r("SKkT"),m=r("/MJE"),p=r("5vwO"),f=r("JWru"),g=r("XDgS"),y=r("3wSK"),b=r("FOuV"),h=r("EPGa"),v=r("S24M");const x=({type:e,price1:t,price2:r})=>{(0,v.j)("webClick",{module:"chart",type:e,price1:t,price2:r})};var k=r("NQFm");const S=Object.values(h.Jm),P=Object.values(h.Jm);var T=r("1U9V");var C=r("lXyA"),M=r.n(C),Z=r("U7ms");const w="trd_chart_basic_kline_load_timeout",I=e=>[e.time,e.open,e.high,e.low,e.close];const E=({dataProvider:e,symbol:t,interval:r,logOnFetchEndCallback:i,logOnFetchStartCallback:o,logOnKlineReadyCallback:l,logOnErrorDataCallback:s,logOnCatchChartCallback:c})=>{const u=(0,a.useCallback)((()=>{M()((e=>{(0,T.Os)({eventId:w,scheduleId:"",stepId:"fetchDataEnd",catch({error:t,track:r}){r({FETCH_DATA_END_TYPE:t,duration_:(0,T.Fr)(Date.now()-e)})},log({track:t}){t({FETCH_DATA_END_TYPE:"SUCCESS",duration_:(0,T.Fr)(Date.now()-e)})}})})),null===i||void 0===i||i()}),[i]),d=(0,a.useCallback)((()=>{M()((()=>{const e=(0,T.Nb)({id:"fetchDataStart"}),t=(0,T.Nb)({id:"fetchDataEnd",timeout:6}),r=(0,T.Nb)({id:"basicKlineReady",timeout:3});T.Os.init({step:e._(t)._(r),eventId:w}),(0,T.Os)({eventId:w,stepId:"fetchDataStart",catch({error:e,track:t}){t({FETCH_DATA_START_TYPE:e})},log({track:e}){e({FETCH_DATA_START_TYPE:"SUCCESS"})}})})),null===o||void 0===o||o()}),[o]),m=(0,a.useCallback)((()=>{M()((()=>{(0,T.Os)({eventId:w,stepId:"basicKlineReady",catch({error:e,track:t}){t({BASIC_KLINE_READY_TYPE:e})},log({track:e}){e({BASIC_KLINE_READY_TYPE:"SUCCESS"})}})})),null===l||void 0===l||l()}),[l]),f=(0,a.useRef)(new Set);return{logOnFetchEnd:u,logOnFetchStart:d,logOnKlineReady:m,logOnErrorData:(0,Z.D)((a=>{if(!f.current.has(a.type)){const i=e.trackingData.klineDataQueue.find((({id:e})=>a.payload.prevItem.id===e)),o=e.trackingData.klineDataQueue.find((({id:e})=>a.payload.nextItem.id===e));(0,v.j)(`trd_chart_${a.type}`,(0,p.Z)({trd_chart_symbol:t,trd_chart_interval:r,neighbor:JSON.stringify([i,o])},function(e){switch(e.type){case"disConnect":case"renderError":return{trd_chart_nextItem:JSON.stringify(I(e.payload.nextItem)),trd_chart_prevItem:JSON.stringify(I(e.payload.prevItem))};case"invalidData":return{trd_chart_invalid_data:JSON.stringify(I(e.payload.data))};default:return{}}}(a))),f.current.add(a.type)}null===s||void 0===s||s()})),logOnCatchChart:(0,a.useCallback)((e=>{n.Z.log(JSON.stringify({type:"kline-error",error:e}),"custom"),null===c||void 0===c||c()}),[c])}};var N=r("m92i"),A=r("uM3s"),R=r("l3xb"),O=r("EWim"),L=r("bXYW");const V=()=>{let e=0;return({symbol:t,pair:r,contractType:a,interval:i,priceType:o,useMiniTicker:n,isDelivery:l,onNewDataArrived:s=(()=>null),dataTransformer:c=(e=>e),disconnectCallback:u=(()=>null)})=>{e+=1;let d=0,m=null;const f={klineDataQueue:[]},g=(y=e,()=>y===e);var y;const b=(0,O.b0)({symbol:t,pair:r,contractType:a,interval:i,isDelivery:l,priceType:o});return{trackingData:f,getData:async({startTime:e=0,endTime:t=0},r=(()=>!1))=>{try{const a=(await(0,A.M)({onFetchKlineData:b,startTime:e,endTime:t})).map(c);(e=>{var t;const r=null===(t=e[e.length-1])||void 0===t?void 0:t.time;r&&r>d&&(d=r)})(a),f.klineDataQueue=a.slice(-100).map((e=>(0,p.Z)((0,p.Z)({},e),{},{id:(0,N.Z)()}))),r({data:a,isLoadAll:0===a.length})}catch(a){}},subscribe:(e,y)=>(m=(0,R.Ld)({symbol:t,pair:r,contractType:a,interval:i,priceType:o,isDelivery:l,useMiniTicker:n,checkIfInSync:g,callback:(e,t)=>{const r=(0,p.Z)((0,p.Z)({},t),{},{id:(0,N.Z)()});var a,o;a=f.klineDataQueue,o=r,a.push(o),a.length>100&&a.splice(0,1);const n=c(e),{time:l}=n;(e=>{if(0===d)return;const t=(0,L.nJ)(i);e-d>=2*t&&(null===u||void 0===u||u())})(l),l>d&&(d=l),y(n),s(n)}}),m),unsubscribe:()=>{var e;null===(e=m)||void 0===e||e(),m=null},getBarDatas:()=>null,subcribe:()=>null,unSubcribe:()=>null}}};var F=r("pqKJ"),D=r("jybJ"),_=r("HvGN"),B=r.n(_);const z=({transform:e,request:t})=>r=>{(async()=>{try{r(e(await t()))}catch(a){Sentry.captureException(a)}})()},K=(e,t=[])=>{var r;return(null===(r=t.find((t=>(null===t||void 0===t?void 0:t.time)===e)))||void 0===r?void 0:r.value)||0},q=({availableIntervals:e,transform:t,makeRequest:r})=>{let a=[];return{paramMetas:[],getData:function(i,o){const n=(0,L.xR)(e,i.interval)||(0,L.uC)(e),l=r((0,p.Z)((0,p.Z)({},i),{},{period:n}));z({transform:t,request:l})((e=>{a=e,o({data:e})}))},subscribe:function(i,o){const n=(0,L.xR)(e,i.interval)||(0,L.uC)(e),l=(0,L.nJ)(i.interval),s=setInterval((()=>{const e=r((0,p.Z)((0,p.Z)({},i),{},{period:n}));z({transform:t,request:e})((e=>{const t=B()(e,a,((e,t)=>e.time===t.time));a.push(...t),t.forEach((e=>o(e)))}))}),l>=2147483647?2147483647:l);return()=>clearInterval(s)}}},U=["5m","15m","30m","1h","2h","4h","6h","12h","1d"],W=({symbol:{pair:e},period:t})=>({symbol:e,period:t,limit:500}),H=(0,p.Z)((0,p.Z)({},q({availableIntervals:U,transform:e=>e.map((({timestamp:e,sumOpenInterest:t,sumOpenInterestValue:r})=>({time:e,sum:+t,sumValue:+r}))),makeRequest:e=>async()=>(0,D.K$)(W(e))})),{},{defaultProps:{id:"@OI-UM",title:"O.I",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,sumValue:t})=>({time:e,value:t})));r([{data:e.map((({time:e,sum:t})=>({time:e,value:t}))),chartType:"BAR",color:"@OI-UM.bar.color"},{data:a,chartType:"LINE",color:"@OI-UM.nv.color",lineWidth:"@OI-UM.nv.lineWidth",yAxisIndex:"oiValue"}])},getLabel(e,t){const[{data:r}={},{data:a}={}]=t;return[{key:"title",label:"Open Interest"},{key:"oi-value",label:`${(0,T.XR)(K(e,r),2)}`,styles:{color:"@OI-UM.bar.color"}},{key:"noi-text",label:"Notional Value of Open Interest"},{key:"noi-value",label:`${(0,T.XR)(K(e,a),2)}`,styles:{color:"@OI-UM.nv.color"}}]},getMobileLabel:()=>[{key:"title",label:"Open Interest"}]}),$=(0,p.Z)((0,p.Z)({},q({availableIntervals:U,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,D.Zc)(W(e))})),{},{defaultProps:{id:"@LS-Acco",title:"L.S Acco.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Acco.bar.buyColor",yAxisIndex:"bar",name:"bar",min:0,max:1,visible:!0},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Acco.bar.sellColor",yAxisIndex:"bar",stack:"bar",min:0,max:1,visible:!0},{data:a,chartType:"LINE",color:"@LS-Acco.ratio.color",lineWidth:"@LS-Acco.ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Account Ratio"},{key:"ratio-value",label:`${(0,T.JX)(K(e,i),2)}`,styles:{color:"@LS-Acco.ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,T.JX)(100*K(e,r),2)}%`,styles:{color:"@LS-Acco.bar.buyColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,T.JX)(100*K(e,a),2)}%`,styles:{color:"@LS-Acco.bar.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Account Ratio"}]}),j=(0,p.Z)((0,p.Z)({},q({availableIntervals:U,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,D.mk)(W(e))})),{},{defaultProps:{id:"@LS-Posit",title:"L.S Posit.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Posit.bar.buyColor",yAxisIndex:"bar",name:"bar",min:0,max:1,visible:!0},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Posit.bar.sellColor",yAxisIndex:"bar",stack:"bar",min:0,max:1,visible:!0},{data:a,chartType:"LINE",color:"@LS-Posit.ratio.color",lineWidth:"@LS-Posit.ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Position Ratio"},{key:"ratio-value",label:`${(0,T.JX)(K(e,i),2)}`,styles:{color:"@LS-Posit.ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,T.JX)(100*K(e,r),2)}%`,styles:{color:"@LS-Posit.bar.buyColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,T.JX)(100*K(e,a),2)}%`,styles:{color:"@LS-Posit.bar.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Position Ratio"}]}),G=(0,p.Z)((0,p.Z)({},q({availableIntervals:U,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,D._K)(W(e))})),{},{defaultProps:{id:"@LS-Ratio",title:"L.S Ratio",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Ratio.bar.buyColor",yAxisIndex:"bar1",name:"bar1",min:0,max:1,visible:!0},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Ratio.bar.sellColor",yAxisIndex:"bar1",stack:"bar1",min:0,max:1,visible:!0},{data:a,chartType:"LINE",color:"@LS-Ratio.ratio.color",lineWidth:"@LS-Ratio.ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Ratio"},{key:"ratio-value",label:`${(0,T.JX)(K(e,i),2)}`,styles:{color:"@LS-Ratio.ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,T.JX)(100*K(e,r),2)}%`,styles:{color:"@LS-Ratio.bar.buyColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,T.JX)(100*K(e,a),2)}%`,styles:{color:"@LS-Ratio.bar.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Ratio"}]}),J=(0,p.Z)((0,p.Z)({},q({availableIntervals:U,transform:e=>e.map((({timestamp:e,buyVol:t,sellVol:r,buySellRatio:a})=>({time:e,buy:+t,sell:+r,buySellRatio:+a}))),makeRequest:e=>async()=>(0,D.eq)(W(e))})),{},{defaultProps:{id:"@BSVol",title:"B.S Vol.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0,barWeight:.5},getResult(e,t,r){r([{data:e.map((({time:e,buy:t})=>({time:e,value:t}))),chartType:"BAR",color:"@BSVol.buyColor"},{data:e.map((({time:e,sell:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"@BSVol.sellColor",yAxisIndex:"bar"}])},getLabel(e,t){const[{data:r}={},{data:a}={}]=t;return[{key:"title",label:"Taker Buy/Sell Volume"},{key:"buy-text",label:"Buy"},{key:"buy-value",label:`${(0,T.XR)(K(e,r),2)}`,styles:{color:"@BSVol.buyColor"}},{key:"sell-text",label:"Sell"},{key:"sell-value",label:`${(0,T.XR)(K(e,a),2)}`,styles:{color:"@BSVol.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Taker Buy/Sell Volume"}]}),Y=[{name:H.defaultProps.id,indicator:H},{name:$.defaultProps.id,indicator:$},{name:j.defaultProps.id,indicator:j},{name:G.defaultProps.id,indicator:G},{name:J.defaultProps.id,indicator:J}],Q=["5m","15m","30m","1h","2h","4h","6h","12h","1d"],X=({symbol:{pair:e,contractType:t},period:r})=>({pair:e,period:r,contractType:t,limit:500}),ee=(0,p.Z)((0,p.Z)({},q({availableIntervals:Q,transform:e=>e.map((({timestamp:e,sumOpenInterest:t,sumOpenInterestValue:r})=>({time:e,sum:+t,sumValue:+r}))),makeRequest:e=>async()=>(0,D.Yo)(X(e))})),{},{defaultProps:{id:"@OI-CM",title:"O.I",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){r([{data:e.map((({time:e,sumValue:t})=>({time:e,value:t}))),chartType:"BAR",color:"@OI-CM.bar.color"}])},getLabel(e,t){const[{data:r}={}]=t;return[{key:"title",label:"Open Interest"},{key:"noi-text",label:"Notional Value of Open Interest"},{key:"noi-value",label:`${(0,T.XR)(K(e,r),2)}`,styles:{color:"@OI-CM.bar.color"}}]},getMobileLabel:()=>[{key:"title",label:"Open Interest"}]}),te=(0,p.Z)((0,p.Z)({},q({availableIntervals:Q,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,D.XC)((0,p.Z)((0,p.Z)({},X(e)),{},{contractType:"ALL"}))})),{},{defaultProps:{id:"@LS-Acco",title:"L.S Acco.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Acco.bar.buyColor",yAxisIndex:"bar",name:"bar",min:0,max:1,visible:!0},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Acco.bar.sellColor",yAxisIndex:"bar",stack:"bar",min:0,max:1,visible:!0},{data:a,chartType:"LINE",color:"@LS-Acco.ratio.color",lineWidth:"@LS-Acco.ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Account Ratio"},{key:"ratio-value",label:`${(0,T.JX)(K(e,i),2)}`,styles:{color:"@LS-Acco.ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,T.JX)(100*K(e,r),2)}%`,styles:{color:"@LS-Acco.bar.buyColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,T.JX)(100*K(e,a),2)}%`,styles:{color:"@LS-Acco.bar.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Account Ratio"}]}),re=(0,p.Z)((0,p.Z)({},q({availableIntervals:Q,transform:e=>e.map((({timestamp:e,longPosition:t,shortPosition:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,D.H8)((0,p.Z)((0,p.Z)({},X(e)),{},{contractType:"ALL"}))})),{},{defaultProps:{id:"@LS-Posit",title:"L.S Posit.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Posit.bar.buyColor",yAxisIndex:"bar",name:"bar",min:0,max:1,visible:!0},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Posit.bar.sellColor",yAxisIndex:"bar",stack:"bar",min:0,max:1,visible:!0},{data:a,chartType:"LINE",color:"@LS-Posit.ratio.color",lineWidth:"@LS-Posit.ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Position Ratio"},{key:"ratio-value",label:`${(0,T.JX)(K(e,i),2)}`,styles:{color:"@LS-Posit.ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,T.JX)(100*K(e,r),2)}%`,styles:{color:"@LS-Posit.bar.buyColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,T.JX)(100*K(e,a),2)}%`,styles:{color:"@LS-Posit.bar.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Position Ratio"}]}),ae=(0,p.Z)((0,p.Z)({},q({availableIntervals:Q,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,D.QE)((0,p.Z)((0,p.Z)({},X(e)),{},{contractType:"ALL"}))})),{},{defaultProps:{id:"@LS-Ratio",title:"L.S Ratio",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Ratio.bar.buyColor",yAxisIndex:"bar",name:"bar",min:0,max:1,visible:!0},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Ratio.bar.sellColor",yAxisIndex:"bar",stack:"bar",min:0,max:1,visible:!0},{data:a,chartType:"LINE",color:"@LS-Ratio.ratio.color",lineWidth:"@LS-Ratio.ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Ratio"},{key:"ratio-value",label:`${(0,T.JX)(K(e,i),2)}`,styles:{color:"@LS-Ratio.ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,T.JX)(100*K(e,r),2)}%`,styles:{color:"@LS-Ratio.bar.buyColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,T.JX)(100*K(e,a),2)}%`,styles:{color:"@LS-Ratio.bar.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Ratio"}]}),ie=(0,p.Z)((0,p.Z)({},q({availableIntervals:Q,transform:e=>e.map((({timestamp:e,takerBuyVol:t,takerBuyVolValue:r,takerSellVol:a,takerSellVolValue:i})=>({time:e,buy:+t,buyValue:+r,sell:+a,sellValue:+i}))),makeRequest:e=>async()=>(0,D.YW)(X(e))})),{},{defaultProps:{id:"@BSVol",title:"B.S Vol.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0,barWeight:.5},getResult(e,t,r){r([{data:e.map((({time:e,buyValue:t})=>({time:e,value:t}))),chartType:"BAR",color:"@BSVol.buyColor"},{data:e.map((({time:e,sellValue:t})=>({time:e,value:t}))),chartType:"BAR",color:"@BSVol.sellColor",yAxisIndex:"bar"}])},getLabel(e,t){const[{data:r}={},{data:a}={}]=t;return[{key:"title",label:"Taker Buy/Sell Volume"},{key:"buy-text",label:"Buy"},{key:"buy-value",label:`${(0,T.XR)(K(e,r),2)}`,styles:{color:"@BSVol.buyColor"}},{key:"sell-text",label:"Sell"},{key:"sell-value",label:`${(0,T.XR)(K(e,a),2)}`,styles:{color:"@BSVol.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Taker Buy/Sell Volume"}]}),oe=["1m","3m","8h","3d","1w","1M",...Q],ne=(0,p.Z)((0,p.Z)({},q({availableIntervals:oe,transform:e=>e.map((({timestamp:e,indexPrice:t,basisRate:r,futuresPrice:a,basis:i})=>({time:e,indexPrice:+t,basisRate:+r,futuresPrice:+a,basis:+i}))),makeRequest:e=>async()=>(0,D.rV)(X(e))})),{},{defaultProps:{id:"@Basis",title:"Basis",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){r([{data:e.map((({time:e,basis:t})=>({time:e,value:t}))),chartType:"AREA",color:"basis.area"},{data:e.map((({time:e,basisRate:t})=>({time:e,value:t}))),chartType:"LINE",color:"@Basis.basisColor",visible:!1},{data:e.map((({time:e,futuresPrice:t})=>({time:e,value:t}))),chartType:"LINE",color:"@Basis.futurePriceColor",yAxisIndex:"line"},{data:e.map((({time:e,indexPrice:t})=>({time:e,value:t}))),chartType:"LINE",color:"@Basis.priceIndexColor",yAxisIndex:"line"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={},{data:o}={}]=t;return[{key:"title",label:"Basis"},{key:"basis-value",label:`${(0,T.XR)(K(e,r),2)}`,styles:{color:"candle.upBarColor"}},{key:"basisRate-text",label:"Basis Rate"},{key:"basisRate-value",label:`${(0,T.JX)(100*K(e,a),2)}%`,styles:{color:"@Basis.basisColor"}},{key:"futuresPrice-text",label:"Futures Price"},{key:"futuresPrice-value",label:`${(0,T.XR)(K(e,i),2)}`,styles:{color:"@Basis.futurePriceColor"}},{key:"priceIndex-text",label:"Price Index"},{key:"priceIndex-value",label:`${(0,T.XR)(K(e,o),2)}`,styles:{color:"@Basis.priceIndexColor"}}]},getMobileLabel:()=>[{key:"title",label:"Basis"}]}),le=[{name:ee.defaultProps.id,indicator:ee},{name:te.defaultProps.id,indicator:te},{name:re.defaultProps.id,indicator:re},{name:ae.defaultProps.id,indicator:ae},{name:ie.defaultProps.id,indicator:ie},{name:ne.defaultProps.id,indicator:ne}];var se=r("BuGG"),ce=r("qcTx"),ue=i().createElement;const de=({namespace:e,symbol:t,useMiniTicker:r})=>{const h=o.k.Store.createStore(e),v=o.k.SessionStore.createStore(e),C=o.k.CandlestickHistoryStore.createStore(e),[M]=h(o.k.Store.getInterval),[Z]=h(o.k.Store.getPriceType),[,w]=C(o.k.CandlestickHistoryStore.getCandlestickHistory),[I]=v(o.k.SessionStore.getCandlestickReference),[,N]=v(o.k.SessionStore.getCandlestickKey),A=M===o.k.Store.DisplayIntervals.Time?o.k.Store.DisplayIntervals["1m"]:M,{getI18n:R}=(0,c.yk)(),O=(e=>{const t=(0,s.Vh)()[e];if(!t)return[];const{isDelivery:r}=t;return r?le:Y})(t),{isContUnit:L}=(0,l.Q)(),D=(0,u.Xw)(),_=(0,s.Fg)().isLight?"light":"dark",[B,z]=(0,u.TG)(),K=(0,s.C$)(),{symbolDisplay:q="",baseAsset:U,quoteAsset:W,pricePrecision:H,isDelivery:$,pair:j,contractType:G,contractVal:J}=(0,s.Vh)()[t]||{},Q=(0,a.useMemo)((()=>({pair:j,contractType:G})),[G,j]),X=(0,a.useMemo)((()=>R("Cont",{defaultValue:"Cont"})||""),[R]),ee=L?X:U;(0,se.M)(t,r),(0,ce.j)({symbol:t,interval:A,priceType:Z});const te=(0,a.useCallback)((()=>{setTimeout((()=>{const e=null===I||void 0===I?void 0:I.getCurrentItemByTime(Date.now()),t=(null===I||void 0===I?void 0:I.getSeriesData())||[];w([e,t[t.length-2]])}),0)}),[I,w]),re=(0,a.useMemo)((()=>$?L?(0,F.D)(J):(0,F.V)(J):e=>e),[J,L,$]),ae=(0,a.useMemo)((()=>V()),[]),ie=(0,a.useMemo)((()=>ae({symbol:t,pair:j,contractType:G,interval:A,priceType:Z,useMiniTicker:r,isDelivery:$,dataTransformer:re,onNewDataArrived:te,disconnectCallback:N})),[ae,t,j,G,A,Z,r,$,re,te,N]),{orders:oe,showConfirmation:ne,confirmationProps:de}=(({symbol:e,namespace:t})=>{var r;const i=o.k.Store.createStore(t),[n]=i(o.k.Store.getChartMode),[l]=(0,y.g)(b.Zv,b.Xd),{getI18n:u}=(0,c.yk)(),{kLine:d=!1,needConfirm:m}=l||{},h=(0,s.AM)()[e],{contractVal:v,isDelivery:T,filters:C=[]}=h||{},M=(null===(r=C.find(k.W4))||void 0===r?void 0:r.maxQty)||"",{enqueueNotification:Z}=(0,g.Z)(),{0:w,1:I}=(0,a.useState)(1),{0:E,1:N}=(0,a.useState)(!1),{0:A,1:R}=(0,a.useState)(),O=(0,a.useMemo)((()=>T?S:P),[T]),L=(0,c.H3)({symbol:e}),V=(0,a.useMemo)((()=>L.filter((({order:e})=>O.includes(e.origType)))),[L,O]),F=(0,a.useMemo)((()=>u("amendmentOrderSubmitted",{defaultValue:"Amendment Order Submitted"})),[u]),D=(0,a.useMemo)((()=>u("maxLimitQty",{defaultValue:"Maximum Limit Order Quantity"})),[u]),_=(0,a.useMemo)((()=>u("cont-unit",{defaultValue:"Cont"})),[u]),B=(0,a.useMemo)((()=>`${D}: ${M} ${_}`),[_,M,D]),z=(0,a.useCallback)((()=>I((e=>e+1))),[]),K=(0,a.useCallback)((()=>{z(),N(!1)}),[z]),q=(0,a.useCallback)((async({orderId:e,price:t,quantity:r,symbol:a,side:i})=>{const o=await(0,f.nC)({orderId:e,price:t,quantity:r,symbol:a,side:i,timestamp:Date.now()},void 0);o.success?Z({message:F}):"90814005"===o.code&&Z({message:B,autoHideDuration:1e4}),K()}),[Z,K,B,F]),U=(0,a.useCallback)((async t=>{var r;const a=+((null===t||void 0===t?void 0:t.origQty)||""),i=+((null===t||void 0===t?void 0:t.quantity)||""),o=+((null===t||void 0===t?void 0:t.price)||""),n="quantity"===t.hasChanged?"cont"===t.unit?i:(({price:e,coin:t,contractVal:r})=>t*e/r)({price:o,coin:i,contractVal:v}):a,l="cont"===t.unit?n:(({price:e,cont:t,contractVal:r})=>t*r/e)({price:o,cont:n,contractVal:v}),s={orderId:t.orderId,price:o,quantity:n,symbol:e,side:null===(r=t.order)||void 0===r?void 0:r.side},c="price"===t.hasChanged?"PRICE":"quantity"===t.hasChanged?"QUANTITY":"";m?(R({order:(0,p.Z)((0,p.Z)({},t.order),{},{modifyParams:{limitPrice:s.price,qty:l,amendedField:c},onConfirm:()=>q(s,void 0)}),onClose:K}),N(!0)):q(s,void 0)}),[v,e,m,K,q]);return{orders:(0,a.useMemo)((()=>n===o.k.Store.ChartMode.Four?[]:V.map((({price:e,quantity:t,text:r,origQty:a,cancel:i,orderId:o,unit:n,order:l})=>({isBuy:"BUY"===l.side,price:e.toString(),quantity:t.toString(),text:r,editable:T&&d,onClose:()=>{x({type:"cancel"}),i()},onPriceChange:t=>{x({type:"dragIcon"===t.trigger?"order":"vertical",price1:+e,price2:+((null===t||void 0===t?void 0:t.price)||"")}),U({price:t.price||"",quantity:t.quantity||"",origQty:a,orderId:o,unit:n,order:l,hasChanged:t.price!==t.prevPrice?"price":""})},onQuantityChange:e=>{x({type:"Amountclick"}),U({price:e.price||"",quantity:e.quantity||"",origQty:a,orderId:o,unit:n,order:l,hasChanged:e.quantity!==e.prevQuantity?"quantity":""})},onClickDragArea:e=>{x({type:"dragIcon"===e.triggerType?"order":"vertical"})},onClickQuantity:e=>{x({type:"Amountclick"})}})))),[n,T,d,V,U,w]),showConfirmation:E,confirmationProps:A}})({symbol:t,namespace:e}),{positions:me}=(({symbol:e,namespace:t})=>{const r=o.k.Store.createStore(t),[i]=r(o.k.Store.getChartMode),n=(0,s.AM)()[e],{tickSize:l}=n||{},u=(0,c.db)({symbol:e,tickSize:l}),d=(0,a.useMemo)((()=>(0,T.p8)(+l)),[l]);return{positions:(0,a.useMemo)((()=>i===o.k.Store.ChartMode.Four?[]:u.map((({isBuy:e,price:t,positionTypeText:r,quantity:a,PNL:i})=>{var o;return{isBuy:e,price:null===(o=t.toFixed(d))||void 0===o?void 0:o.toString(),quantity:a.toString(),pnl:i.toString(),positionTypeText:`${r} `,showCloseButton:!0}}))),[i,u,d])}})({symbol:t,namespace:e}),{setMessageInfo:pe}=(0,s.YT)(),fe=E({dataProvider:ie,symbol:t,interval:A}),ge=(0,a.useCallback)(((e,t)=>{n.Z.log(JSON.stringify({type:"origin_kline",error:e,componentStack:t}),"custom")}),[]);return t&&A&&G&&j?ue(i().Fragment,null,ue(o.k.Containers.BasicKline,{klineOptions:{symbol:Q,storeSymbol:t,candlestick:{tickSize:H},theme:_,themeKey:K,baseAsset:ee,quoteAsset:W,dataProvider:ie,customTheme:{light:B,dark:z},namespace:e,sensorsManager:fe},customIndicators:O,symbolDisplay:q.split("/").join("_"),bizType:$?"delivery":"futures",setMessageInfo:pe,onError:ge,orders:oe,positions:me,theme:D,electron:m.Z}),ne?ue(d.Z,de):null):null}},vNnD:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DepthChart:()=>d,default:()=>m});var a=r("/SIk"),i=r.n(a),o=r("DDYV"),n=r("w9Ve"),l=r("klBV"),s=i().createElement;const c=({price:e,depth:t})=>({xData:t,yData:+e}),u=({symbol:e,width:t,height:r,forceHorizontalMode:i=!1})=>{const o=(0,l.Om)(),u=(0,l.Vh)()[e],{pricePrecision:d,isDelivery:m}=u||{},{scale:p,setScale:f}=(0,l.pq)(),{asks:g,bids:y}=(0,l.Xl)(e,m,r>t?c:void 0),b=(0,a.useMemo)((()=>"BTCUSDT"===e?0:d-1),[e,d]);return s(n.k.Containers.DepthChart,{symbol:e,theme:o,asks:g,bids:y,width:t,height:r,pricePrecision:d,filterPricePrecision:b,scale:p,setScale:f,mode:i?n.k.DepthChartMode.Horizontal:r>t?n.k.DepthChartMode.Vertical:n.k.DepthChartMode.Horizontal})},d=({symbol:e,forceHorizontalMode:t})=>s(o.Z,null,(({width:r,height:a})=>s(u,{symbol:e,width:r,height:a,forceHorizontalMode:t}))),m=d},dJFx:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>X});var a=r("/SIk"),i=r.n(a),o=r("GuU3"),n=r.n(o),l=r("w9Ve"),s=r("klBV"),c=r("HkAn"),u=r("SKkT"),d=r("VM/Z"),m=r("6u/I"),p=r("Ekp3"),f=r("Ozc/"),g=r("5vwO"),y=r("9tmi"),b=r("JWru"),h=r("XDgS"),v=r("3wSK"),x=r("0RPJ"),k=r("FOuV"),S=r("SJeZ"),P=r("1U9V"),T=r("S24M");const C=({type:e})=>{(0,T.j)("webClick",{module:"chart",elementId:e})};var M=r("EPGa"),Z=r("NQFm");const w=Object.values(M.Jm),I=Object.values(M.Jm);var E=r("lXyA"),N=r.n(E),A=r("Y+MU"),R=r("FCBM"),O=r("l3xb"),L=r("uM3s"),V=r("EWim");var F=r("pqKJ"),D=r("Tfqf");const _="trd_chart_tv_load_timeout",B=({symbol:e,type:t,priceType:r})=>`${e}@${t}@${r}`,z=e=>{const[t,r,a]=e.split("@");return{symbol:t,type:r,priceType:a}},K=[d.ls.TRADING,d.ls.DELIVERING],q={1:"1m",3:"3m",5:"5m",15:"15m",30:"30m",60:"1h",120:"2h",240:"4h",360:"6h",480:"8h",720:"12h","1D":"1d","3D":"3d","1W":"1w","1M":"1M"};let U;!function(e){e.Futures="futures",e.FuturesMark="futures-mark",e.FuturesIndex="futures-index",e.Delivery="delivery",e.DeliveryMark="delivery-mark",e.DeliveryIndex="delivery-index"}(U||(U={}));const W=({ticker:e,name:t,productType:r,pricePrecision:a})=>({name:t,fullName:t,description:t,ticker:e,tickSize:10**a,exchange:"Binance",supportedResolutions:l.k.DefaultResolutions,type:r}),H=({namespace:e,useMiniTicker:t=!1})=>{const r=l.k.Store.createStore(e),i=l.k.OrderHistoryStore.createStore(e),o=(0,a.useRef)(0),n=(0,a.useMemo)((()=>N()((()=>(0,P.Os)({eventId:"trd_chart_tv_load_timeout",stepId:"getBarsStart",catch({error:e,track:t}){t({GET_BAR_START_TYPE:e})},log({track:e}){e({GET_BAR_START_TYPE:"SUCCESS"})}})))),[]),c=(0,a.useMemo)((()=>N()((e=>(0,P.Os)({eventId:"trd_chart_tv_load_timeout",stepId:"getBarsEnd",catch({error:t,track:r}){r({GET_BAR_END_TYPE:t,duration_:(0,P.Fr)(e-o.current)})},log({track:t}){t({GET_BAR_END_TYPE:"SUCCESS",duration_:(0,P.Fr)(e-o.current)})}})))),[]),{getI18n:u}=(0,s.ZK)("trd-chart","trade-ui"),{getI18n:m}=(0,S.yk)(),p=(0,s.Vh)(),f=(0,a.useRef)(p),{isContUnit:g}=(0,D.Q)(),y=(0,s._n)(),[b]=r(l.k.Store.getPriceType),[,,h,v]=i(l.k.OrderHistoryStore.getOrderHistory),x=(0,a.useRef)(y),k=(0,a.useRef)(),C=(0,a.useRef)(b);f.current=p,x.current=y,C.current=b;const M=(0,a.useMemo)((()=>g?F.D:F.V),[g]),Z=(0,a.useMemo)((()=>m("usdtFutures-13",{defaultValue:"Futures"})||""),[m]),w=(0,a.useMemo)((()=>m("inverseFutures-13",{defaultValue:"Delivery"})||""),[m]),I=(0,a.useMemo)((()=>u("indexPrice",{defaultValue:"Index Price"})||""),[u]),E=(0,a.useMemo)((()=>u("markPrice",{defaultValue:"Mark Price"})||""),[u]),_=(0,a.useMemo)((()=>u("lastPrice",{defaultValue:"Last Price"})||""),[u]),H=(0,a.useMemo)((()=>({exchanges:[{name:"Binance",value:"Binance",desc:""}],symbols_types:[{name:Z,value:U.Futures},{name:`${Z} ${E}`,value:U.FuturesMark},{name:`${Z} ${I}`,value:U.FuturesIndex},{name:w,value:U.Delivery},{name:`${w} ${E}`,value:U.DeliveryMark},{name:`${w} ${I}`,value:U.DeliveryIndex}]})),[w,Z,I,E]),$=(0,a.useCallback)((async e=>{var t;if(v(),null===(t=k.current)||void 0===t||t.call(k),!x.current)return;const r=f.current,{isDelivery:a}=r[e]||{},i=a?(0,d.RU)():(0,d.BN)(),o=await(async({isDelivery:e,symbol:t})=>await(0,V.lz)({symbol:t,isDelivery:e,rows:500,page:1}))({isDelivery:a,symbol:e});h(o.map((e=>({id:e.orderId.toString(),avgPrice:+(e.avgPrice||e.price),executedQty:+e.executedQty,side:e.side,time:e.updateTime,status:e.status})))),k.current=i.getUserOrderStream().subscribe((t=>{t.symbol===e&&h([{id:t.orderId.toString(),avgPrice:t.avgPrice||t.price,executedQty:t.executedQty,side:t.side,time:t.insertTime,status:t.status}])}))}),[h,v]),j=(0,a.useCallback)((e=>{const{symbol:t=""}=z(e);$(t)}),[$]),G=(0,a.useCallback)((async()=>{try{await(0,P.YY)({checker:()=>Object.keys(f.current).length>0})}catch(t){(0,T.j)("tv_web_error",{type:"onFetchSymbolsInfo",message:t.message,business:"futures"})}const e=f.current;return Object.keys(e).reduce(((t,r)=>{const{symbol:a,pricePrecision:i,isDelivery:o,contractStatus:n,contractType:s}=e[r];if(!K.includes(n))return t;const{symbol:c,contractTypeI18n:u,deliveryDateFormat:d}=(0,A.H)(e[r],m),p=`${c} ${u}${d?` ${d}`:""}`,f=B({symbol:a,type:s,priceType:l.k.Store.PriceType.Last}),g=B({symbol:a,type:s,priceType:l.k.Store.PriceType.Index}),y=B({symbol:a,type:s,priceType:l.k.Store.PriceType.Mark});return t[f]=W({ticker:f,name:`${p} ${_}`,productType:o?U.Delivery:U.Futures,pricePrecision:i}),t[g]=W({ticker:g,name:`${p} ${I}`,productType:o?U.DeliveryIndex:U.FuturesIndex,pricePrecision:i}),t[y]=W({ticker:y,name:`${p} ${E}`,productType:o?U.DeliveryMark:U.FuturesMark,pricePrecision:i}),t}),{})}),[m,I,E,_]),J=(0,a.useCallback)((async({symbolInfo:e,resolution:t,rangeStartDate:r,rangeEndDate:a})=>{const i=f.current;o.current=Date.now(),n();const{symbol:l="",priceType:s=C.current}=z(e.ticker||""),{pair:u,contractType:d,contractVal:m,isDelivery:p}=i[l],g=Math.max(0,1e3*r),y=1e3*a,b=q[t],h=p?M(m):e=>e,v=(0,V.b0)({symbol:l,pair:u,contractType:d,interval:b,isDelivery:p,priceType:s}),x=await(0,L.M)({onFetchKlineData:v,startTime:g,endTime:y});return c(Date.now()),x.map(h)}),[c,n,M]),Y=(0,a.useCallback)((({symbolInfo:e,resolution:r,callback:a})=>{const i=f.current,{symbol:o="",priceType:n=C.current}=z(e.ticker||""),{pair:l,contractType:s,contractVal:c,isDelivery:u}=i[o],d=q[r],m=u?M(c):e=>e;return(0,O.Ld)({symbol:o,pair:l,contractType:s,interval:d,priceType:n,isDelivery:u,useMiniTicker:t,checkIfInSync:()=>!0,callback:e=>a(m(e))})}),[M,t]),Q=(0,a.useCallback)((async()=>{const{serverTime:e}=await(0,R.b)(!0);return Math.floor(parseInt(e,10)/1e3)}),[]),X=(0,a.useMemo)((()=>l.k.createDatafeed()),[]),{datafeed:ee,symbolsInfo:te}=X({config:H,onFetchSymbolsInfo:G,onFetchBars:J,onSubscribeBars:Y,onFetchServerTimeApi:Q});return{datafeed:ee,symbolsInfo:te,onSymbolWillChange:j}};var $=r("k2tD");var j=r("BuGG"),G=r("qcTx"),J=i().createElement;const Y="myTradingView",Q=e=>{[m.sy,m.O7].map((e=>n().createInstance({name:e}))).forEach((t=>t.setItem(Y,e)))},X=({symbol:e,namespace:t,useMiniTicker:r=!1})=>{const o=l.k.Store.createStore(t),[T]=o(l.k.Store.getInterval),[E]=o(l.k.Store.getPriceType),N=(0,s.Vh)(),{contractType:A}=N[e]||{},{datafeed:R,symbolsInfo:O,onSymbolWillChange:L}=H({namespace:t,useMiniTicker:r}),V=(0,c.Xw)(),{isLight:F,shouldResetTradingView:D,updateShouldResetTradingView:z}=(0,s.Fg)(),K=F?"light":"dark",q=(0,p.k)(K),U=T===l.k.Store.DisplayIntervals.Time?l.k.Store.DisplayIntervals["1m"]:T,W=(0,a.useMemo)((()=>n().createInstance({name:t})),[t]),X=(0,a.useMemo)((()=>B({symbol:e,type:A,priceType:E})),[e,A,E]),ee=(0,a.useRef)(-1),{positionLines:te}=(({symbol:e})=>{const t=(0,s.AM)()[e],{tickSize:r}=t||{},a=(0,S.db)({symbol:e,tickSize:r});return{positionLines:(0,s.vE)((()=>a.map((({id:e,PNL:t,price:r,quantity:a,text:i})=>({id:e,PNL:t,text:i,price:r,quantity:a.toString(),tooltip:""})))),[a])}})({symbol:e}),{orderLines:re,showConfirmation:ae,confirmationProps:ie,modifiedModalProps:oe}=(({symbol:e})=>{var t;const{getI18n:r}=(0,S.yk)(),[i]=(0,v.g)(k.Zv,k.Xd),o=(0,S.$h)({symbol:e}),{kLine:n=!1,needConfirm:l}=i||{},c=(0,s.AM)()[e],{pricePrecision:u,contractVal:d,isDelivery:m,quoteAsset:p,equalQtyPrecision:f,quantityPrecision:T,filters:E=[]}=c||{},N=(null===(t=E.find(Z.W4))||void 0===t?void 0:t.maxQty)||"",{enqueueNotification:A}=(0,h.Z)(),{0:R,1:O}=(0,a.useState)(!1),{0:L,1:V}=(0,a.useState)(1),{0:F,1:D}=(0,a.useState)(!1),{0:_,1:B}=(0,a.useState)({order:{symbol:"",closePosition:!1,positionSide:"",side:M.g.BUY,type:M.Jm.LIMIT,stopPrice:"",workingType:k.gu.LAST_PRICE,orderId:0,clientOrderId:"",reduceOnly:!1,timeInForce:"",insertTime:0,origType:M.Jm.LIMIT,price:0,origQty:"",executedQty:"",activatePrice:"",priceRate:0,status:"",strategyId:"",strategyType:"",avgPrice:"",modifyParams:{},onConfirm:()=>{}},onClose:()=>null}),z=(0,a.useMemo)((()=>m?w:I),[m]),K=(0,S.H3)({symbol:e}),q=(0,a.useMemo)((()=>K.filter((({order:e})=>z.includes(e.origType)))),[K,z]),U=(0,a.useMemo)((()=>r("amendmentOrderSubmitted",{defaultValue:"Amendment Order Submitted"})),[r]),W=(0,a.useMemo)((()=>r("maxLimitQty",{defaultValue:"Maximum Limit Order Quantity"})),[r]),H=(0,a.useMemo)((()=>r("cont-unit",{defaultValue:"Cont"})),[r]),$=(0,a.useMemo)((()=>`${W}: ${N} ${H}`),[H,N,W]),j=(0,a.useMemo)((()=>r("tv-order-drag-tooltip",{defaultValue:"Drag for price modify"})),[r]),G=(0,a.useMemo)((()=>r("tv-order-modify-tooltip",{defaultValue:"Click for modify"})),[r]),J=(0,a.useMemo)((()=>r("tv-order-cancel-tooltip",{defaultValue:"Click for cancel"})),[r]),Y=(0,a.useMemo)((()=>r("tv-order-price-placeholder",{defaultValue:"Price"})),[r]),Q=(0,a.useMemo)((()=>r("tv-order-amount-placeholder",{defaultValue:"Amount"})),[r]),X=(0,a.useMemo)((()=>r("tv-order-cacnel",{defaultValue:"Cancel"})),[r]),ee=(0,a.useMemo)((()=>r("tv-order-submit",{defaultValue:"Submit"})),[r]),te=(0,a.useCallback)((()=>V((e=>e+1))),[]),re=(0,a.useCallback)((()=>{te(),D(!1)}),[te]),ae=(0,a.useCallback)((async({orderId:e,price:t,quantity:r,symbol:a,side:i})=>{const o=await(0,b.nC)({orderId:e,price:t,quantity:r,symbol:a,side:i,timestamp:Date.now()},void 0);o.success?A({message:U}):"90814005"===o.code&&A({message:$,autoHideDuration:1e4}),re()}),[A,re,$,U]),ie=(0,a.useCallback)((async t=>{var r;const a=+((null===t||void 0===t?void 0:t.origQty)||""),i=+((null===t||void 0===t?void 0:t.quantity)||""),o=+((null===t||void 0===t?void 0:t.price)||""),n="quantity"===t.hasChanged||"both"===t.hasChanged?"cont"===t.unit?i:(0,P.QQ)({price:o,coin:i,contractVal:d}):a,s="cont"===t.unit?n:(0,P.me)({price:o,cont:n,contractVal:d}),c={orderId:t.orderId,price:o,quantity:n,symbol:e,side:null===(r=t.order)||void 0===r?void 0:r.side},u="both"===t.hasChanged?"BOTH":"price"===t.hasChanged?"PRICE":"quantity"===t.hasChanged?"QUANTITY":"";l?(B({order:(0,g.Z)((0,g.Z)({},t.order),{},{modifyParams:{limitPrice:c.price,qty:s,amendedField:u},onConfirm:()=>ae(c,void 0)}),onClose:re}),D(!0)):ae(c,void 0)}),[d,e,l,re,ae]),{0:oe,1:ne}=(0,a.useState)({price:"",amount:""}),le=(0,y.TA)({initialValues:oe,enableReinitialize:!0,onSubmit:e=>{var t,r,a;const i=e.price!==le.initialValues.price,o=e.amount!==le.initialValues.amount;ie((0,g.Z)((0,g.Z)({},null===(t=e.order)||void 0===t?void 0:t.order),{},{order:null===(r=e.order)||void 0===r?void 0:r.order,price:(+e.price).toFixed(u),quantity:+e.amount,unit:null===(a=e.order)||void 0===a?void 0:a.unit,hasChanged:i&&o?"both":i?"price":o?"quantity":""})),O(!1)}}),se={visible:R,priceField:(0,g.Z)((0,g.Z)({},le.getFieldProps("price")),{},{suffixText:p,placeholder:Y}),amountField:(0,g.Z)((0,g.Z)({},le.getFieldProps("amount")),{},{suffixText:o,placeholder:Q}),submitText:ee,cancelText:X,onSubmit:le.handleSubmit,onCancel:()=>O(!1)};return{orderLines:(0,a.useMemo)((()=>q.map((e=>{const{order:t,unit:r,quantity:a,price:i,text:o,cancel:l}=e,s="cont"===r?+t.origQty:(0,P.me)({price:+i,cont:+t.origQty,contractVal:d}),c=(0,x.uf)(s,"cont"===r?T:f);return{id:t.orderId.toString(),text:o,price:+i,quantity:a.toString(),isBuy:"BUY"===t.side,tooltip:j,modifyTooltip:G,cancelTooltip:J,editable:m&&n,onMove:({price:e})=>{C({type:"TV_vertical"}),ie((0,g.Z)((0,g.Z)({},t),{},{order:t,price:e.toFixed(u),unit:r,hasChanged:"price"}))},onModify:()=>{C({type:"TV_amountclick"}),ne({price:i.toString(),amount:c,order:e}),O(!0)},onCancel:()=>{C({type:"TV_cancel"}),l()}}}))),[j,m,n,q,G,J,ie,u,L,o,f,T,Y,Q,d,p,X,ee,ne,O]),showConfirmation:F,confirmationProps:_,modifiedModalProps:se}})({symbol:e}),{executionOrders:ne}=(({symbol:e,namespace:t})=>{const r=l.k.OrderHistoryStore.createStore(t),[i]=r(l.k.OrderHistoryStore.getOrderHistory),{getI18n:o}=(0,s.KL)(),n=(0,S.$h)({symbol:e}),c=(0,s.AM)(),{baseAsset:u,pricePrecision:d,quantityPrecision:m,equalQtyPrecision:p,isDelivery:f,contractVal:g}=c[e]||{},y=(0,a.useMemo)((()=>o("openOrder-sideBuyBOTH",{defaultValue:"Buy"})||""),[o]),b=(0,a.useMemo)((()=>o("openOrder-sideSellBOTH",{defaultValue:"Sell"})||""),[o]),h=(0,a.useMemo)((()=>{switch(n){case u:return f?p:m;default:return f?m:d}}),[f,n,u,p,d,m]),v=(0,a.useCallback)((({avgPrice:e,executedQty:t})=>f?(0,$.GW)(n===u?(0,P.me)({price:e,cont:t,contractVal:g}):t,h):(0,$.mD)(n===u?t:t*e,h)),[u,g,f,h,n]);return{executionOrders:(0,a.useMemo)((()=>i.filter((({status:e,executedQty:t})=>"FILLED"===e.toUpperCase()||"PARTIAL FILL"===e.toUpperCase()||"PARTIALLY_FILLED"===e.toUpperCase()||"EXPIRED"===e.toUpperCase()&&t>0||"CANCELED"===e.toUpperCase()&&t>0)).map((({id:e,avgPrice:t,side:r,time:a,executedQty:i})=>{const o=`${"BUY"===r?y:b} ${v({avgPrice:t,executedQty:i})} @ ${(+t).toFixed(d)}`;return{id:e,text:"",price:+t,quantity:"",time:Math.round(a/1e3),isBuy:"BUY"===r,tooltip:o}}))),[i,y,b,v,d])}})({symbol:e,namespace:t}),le=(0,s.tZ)(),se=(0,m.GL)(le);(0,j.M)(e,r),(0,G.j)({symbol:e,interval:U,priceType:E});const ce=(0,a.useCallback)((()=>{ee.current=Date.now()}),[]),ue=(0,a.useCallback)((e=>Q(e)),[]),de=(0,a.useCallback)((()=>(()=>{const e=(0,P.Nb)({id:"chartReady"}),t=(0,P.Nb)({id:"getBarsStart",timeout:3}),r=(0,P.Nb)({id:"getBarsEnd",timeout:6}),a=(0,P.Nb)({id:"chartResponsive",timeout:3});P.Os.init({step:e._(t)._(r)._(a),eventId:_}),(0,P.Os)({eventId:_,stepId:"chartReady",catch({error:e,track:t}){t({CHART_READY_TYPE:e,connection:JSON.stringify(navigator.connection)})},log({track:e}){e({CHART_READY_TYPE:"SUCCESS",connection:JSON.stringify(navigator.connection)})}})})()),[]),me=(0,a.useCallback)((async()=>{const e=await W.getItem(Y);Q(e)}),[W]),pe=(0,a.useCallback)((e=>f.Z.log(JSON.stringify({type:"tv-error",error:e}),"custom")),[]),fe=(0,a.useCallback)((()=>{return e=ee.current,void(0,P.Os)({eventId:_,stepId:"chartResponsive",catch({error:e,track:t}){t({CHART_RESPONSIVE_TYPE:e,connection:JSON.stringify(navigator.connection)})},log({track:t}){t({CHART_RESPONSIVE_TYPE:"SUCCESS",duration_:(0,P.Fr)(Date.now()-e)})}});var e}),[]),ge=(0,a.useCallback)((()=>z(!1)),[z]);return J(i().Fragment,null,J(l.k.Containers.TradingView,{namespace:t,theme:V,storageName:Y,tradingViewProps:{symbol:X,symbolsInfo:O,theme:q,limitOrders:re,positionOrders:te,executionOrders:ne,overwritingThemeOnLoaded:D,initialConfig:{tvConfig:{library_path:`${d.Or}/charting_library_next/`,symbol:X,theme:q,locale:se,datafeed:R},onScriptLoaded:ce,onSave:ue,onChartReadyDone:de,onWillUnmount:me,onCreateOrderShapesError:pe,onFirstTimeDataLoadedDone:fe,onSymbolWillChange:L,onSetThemeDone:ge}}}),J(l.k.OrderModificationModal,oe),ae?J(u.Z,ie):null)}},lKaM:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createMainToobar:()=>N,default:()=>R,miniToolbar:()=>A});var a=r("/SIk"),i=r.n(a),o=r("szIg"),n=r("gtvA"),l=r("w9Ve"),s=r("VM/Z"),c=r("6C5I"),u=r("SJeZ"),d=r("klBV"),m=r("/MJE"),p=r("LcTY"),f=r("FOuV"),g=r("krVE"),y=r("irMk"),b=r("6u/I"),h=r("7uiG");const v=e=>[e.miniMultiChartType,e.setMiniMultiChartType],x=e=>[e.lastSelectedMiniMultiChartWindow,e.setLastSelectedMiniMultiChartWindow],k=e=>[e.miniMultiChartWindows,e.setMiniMultiChartWindows],S=e=>[e.interval,e.setInterval],P=e=>[e.chartType,e.setChartType],T=e=>[e.priceType,e.setPriceType],C=(e,t,r)=>{const i=(0,b.lv)(e,r),o=(0,b.lv)(t,r);((e,t)=>{const r=l.k.Store.createStore(e),[i,o]=r(l.k.Store.getInterval),[n,s]=(0,h.Qy)(t)(S);(0,a.useEffect)((()=>s(i)),[i,s]),(0,y.Z)((()=>o(n)))})(i,o),((e,t)=>{const r=l.k.Store.createStore(e),[i,o]=r(l.k.Store.getOriginalChartStyle),[n,s]=(0,h.Nu)(t)(P);(0,a.useEffect)((()=>s(i)),[i,s]),(0,y.Z)((()=>o(n)))})(i,o),((e,t)=>{const r=l.k.Store.createStore(e),[i,o]=r(l.k.Store.getPriceType),[n,s]=(0,h.kH)(t)(T);(0,a.useEffect)((()=>s(i)),[i,s]),(0,y.Z)((()=>o(n)))})(i,o)},M=(e,t)=>{((e,t)=>{const r=l.k.Store.createStore(e),[i,o]=r(l.k.Store.getChartMode),[n,s]=(0,h.PH)(t)(v);(0,a.useEffect)((()=>s(i)),[i,s]),(0,y.Z)((()=>o(n)))})(e,t),((e,t)=>{const r=l.k.Store.createStore(e),[i,o]=r(l.k.Store.getMiniMultiChartWindows),[n,s]=(0,h.Lb)(t)(k);(0,a.useEffect)((()=>s(i)),[i,s]),(0,y.Z)((()=>o(n)))})(e,t),((e,t)=>{const r=l.k.Store.createStore(e),[i,o]=r(l.k.Store.getLastSelectedMiniMultiChartWindow),[n,s]=(0,h.zz)(t)(x);(0,a.useEffect)((()=>s(i)),[i,s]),(0,y.Z)((()=>o(n)))})(e,t),C(e,t,0),C(e,t,1),C(e,t,2),C(e,t,3)};var Z=i().createElement;const w=i().lazy((()=>Promise.all([r.e(6374),r.e(3712),r.e(2211)]).then(r.bind(r,"dJFx")))),I=i().lazy((()=>Promise.all([r.e(6374),r.e(3712),r.e(9736)]).then(r.bind(r,"WqGP")))),E=i().lazy((()=>Promise.all([r.e(6374),r.e(3712)]).then(r.bind(r,"vNnD")))),N=({headerSlot:e,closeButton:t,isPro:r,showFullscreenIcon:a,showChartModeDropdown:i,tabKeys:s})=>({onSymbolChange:u})=>({namespace:m,components:{intervalFilter:p,indicator:f,orderMark:g,chartStyleDropdown:y,cameraButton:b,compareButton:h,tabs:v,fullscreen:x,chartModeDropdown:k,priceDropdown:S,symbolTabs:P}})=>{const T=l.k.Store.createStore(m),[C]=T(l.k.Store.getChartMode),[M]=T(l.k.Store.getActiveTab),Z=(0,d._n)(),w=(0,o.useDispatch)(),{isMobile:I}=(0,n.F)(),E=(0,o.useSelector)(c.Xj),N=C===l.k.Store.ChartMode.Single,A=l.k.Store.Tabs.TradingView,R=l.k.Store.Tabs.Depth,O=M===A?[l.k.Store.OrderMarkOption.Open,l.k.Store.OrderMarkOption.Position,l.k.Store.OrderMarkOption.Execution]:[l.k.Store.OrderMarkOption.Open,l.k.Store.OrderMarkOption.Position],L=N&&(M!==R||I)?p():null,V=N&&(M!==R||I)?f():null,F=Z&&N&&M!==R?g({isFullscreen:E,options:O}):null,D=i&&N&&M===A?y():null,_=N&&(M!==R||I)?S():null,B=N&&M===A?b():null,z=N&&M===A?h():null,K=N||I?null:P({onSymbolChange:u}),q=N?v({tabKeys:s}):null,U=a&&N?x({expanded:!E,onClick:w.pageStore.toggleFullScreen}):null,W=i?k():null;return{head:[e,L,V,F,D,B,z,_,K],mid:[],tail:[q,U,W,t],useDraggableHandle:r&&!E}},A=({onRemove:e,onResume:t})=>({components:{intervalFilter:r,indicator:a,miniSymbolStatus:i,resumeWindow:o,closeButton:n,priceDropdown:l}})=>({head:[r(),a(),l()],mid:[i({showChange:!0})],tail:[o({onResume:t}),n({onRemove:e})],useDraggableHandle:!1}),R=({symbol:e,globalNamespace:t,namespace:r,useMiniTicker:i,generateToolbar:n})=>{const y=l.k.Store.createStore(r),[b]=y(l.k.Store.getChartMode),[h]=y(l.k.Store.getActiveTab),v=(0,d.zO)(),x=(0,d.j2)(),k=(0,o.useSelector)((e=>e.products.products)),S=(0,o.useSelector)(c.Xj),P=(0,u.d0)(),T=(0,d.Vh)(),C=(0,a.useRef)(k),N=(0,a.useRef)(T);C.current=k,N.current=T;const{genSymbolDisplay:R}=(0,u.nN)(),{isLight:O}=(0,d.Fg)(),L=(0,a.useMemo)((()=>O?"white":"black"),[O]);M(r,t),(0,a.useEffect)((()=>{S&&(h===l.k.Store.Tabs.TradingView?p.T.emit("HIDE_FLASH_ORDER"):p.T.emit("SHOW_FLASH_ORDER"))}),[h,S]);const V=(0,a.useCallback)((e=>{const t=N.current[e]||{},{fullName:r}=R(t);return r}),[R]),F=(0,a.useCallback)((e=>{if(""===e)return e;const{curSymbol:t}=(0,g.Ib)(C.current,f.L6,"delivery"),{contractStatus:r}=N.current[e]||{},a=null===r||void 0===r?void 0:r.toLowerCase();return"close"===a||void 0===a?t:e}),[v]),D=(0,a.useCallback)((async()=>({isReadyToTrade:!0,openTime:0})),[]),_=(0,a.useCallback)((({symbol:e})=>{const t=N.current[e];t&&P({stateSymbol:t.symbol,isDeliveryColumn:t.isDelivery,isBlank:t.isDelivery!==x.isDelivery})}),[P,x.isDelivery]),B=(0,a.useCallback)((e=>Z(a.Suspense,{fallback:null},Z(I,{symbol:e.symbol,namespace:e.namespace,useMiniTicker:b===l.k.Store.ChartMode.Four||i}))),[b,i]),z=(0,a.useCallback)((e=>Z(a.Suspense,{fallback:null},Z(w,{symbol:e.symbol,namespace:e.namespace,useMiniTicker:i}))),[i]),K=(0,a.useCallback)((e=>Z(a.Suspense,{fallback:null},Z(E,{symbol:e.symbol,forceHorizontalMode:!0}))),[]);return Z(l.k.Containers.Chart,{namespace:r,symbol:e,hostAddress:s.Xs,themeName:L,getSymbolDisplayName:V,checkTradeStatus:D,checkMiniSymbolAvaliablility:F,beforeMiniChartSymbolChange:_,generateMiniToolbar:A,generateToolbar:n,basicKline:B,tradingView:z,depth:K,electron:m.Z})}},EWim:(e,t,r)=>{"use strict";r.d(t,{b0:()=>l,lz:()=>s});var a=r("5vwO"),i=r("Hzyg"),o=r("jd5H"),n=r("OH3c");const l=({symbol:e,pair:t,contractType:r,interval:i,isDelivery:l,priceType:s})=>c=>l&&"last"===s?(e=>(0,o.U2)(`/dapi/v1/continuousKlines?${(0,n.DT)(e)}`))((0,a.Z)((0,a.Z)({},c),{},{pair:t,contractType:r,interval:i})):l&&"mark"===s?(e=>(0,o.U2)(`/dapi/v1/markPriceKlines?${(0,n.DT)(e)}`))((0,a.Z)((0,a.Z)({},c),{},{symbol:e,interval:i})):l&&"index"===s?(e=>(0,o.U2)(`/dapi/v1/indexPriceKlines?${(0,n.DT)(e)}`))((0,a.Z)((0,a.Z)({},c),{},{pair:t,interval:i})):"mark"===s?(e=>(0,o.U2)(`/fapi/v1/markPriceKlines?${(0,n.DT)(e)}`))((0,a.Z)((0,a.Z)({},c),{},{symbol:e,interval:i})):"index"===s?(e=>(0,o.U2)(`/fapi/v1/indexPriceKlines?${(0,n.DT)(e)}`))((0,a.Z)((0,a.Z)({},c),{},{pair:t,interval:i})):(e=>(0,o.U2)(`/fapi/v1/continuousKlines?${(0,n.DT)(e)}`))((0,a.Z)((0,a.Z)({},c),{},{pair:t,contractType:r,interval:i})),s=async e=>{const{data:t=[]}=await(0,i.HY)(e);return t}},uM3s:(e,t,r)=>{"use strict";r.d(t,{M:()=>i});var a=r("5vwO");const i=async({onFetchKlineData:e,startTime:t,endTime:r,limit:i=1e3})=>{const o=[];let n=[],l=r;const s=0!==r;do{if(n=await e((0,a.Z)((0,a.Z)({},0===l?{}:{endTime:l}),{},{limit:i})),0===n.length)break;n.forEach((([e,t,r,a,i,n,,l])=>{o.push({time:+e,open:+t,high:+r,low:+a,close:+i,volume:+n,quantity:+l})})),l=n[0][0]-1}while(n.length===i&&l>t&&s);return o.sort(((e,t)=>e.time-t.time)),o}},bXYW:(e,t,r)=>{"use strict";r.d(t,{nJ:()=>a,xR:()=>i,uC:()=>o});const a=e=>{const[,t,r]=e.split(/(\d*)/),a=+t;switch(r){case"M":return 1e3*a*60*60*24*30;case"w":case"W":return 1e3*a*60*60*24*7;case"d":case"D":return 1e3*a*60*60*24;case"h":case"H":return 1e3*a*60*60;case"m":default:return 1e3*a*60}},i=(e,t)=>{const r=a(t);for(const i of e)if(a(i)%r===0)return i;return null},o=e=>{const[t]=e.reduce(((e,t)=>{const r=a(t),[,i]=e;return r>i?[t,r]:e}),["",Number.MIN_SAFE_INTEGER]);return t}},pqKJ:(e,t,r)=>{"use strict";r.d(t,{V:()=>i,D:()=>o});var a=r("5vwO");const i=e=>t=>(0,a.Z)((0,a.Z)({},t),{},{volume:t.quantity,quantity:t.volume*e}),o=e=>t=>(0,a.Z)((0,a.Z)({},t),{},{volume:t.volume,quantity:t.volume*e})},qcTx:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});var a=r("/SIk"),i=r("VM/Z"),o=r("S24M"),n=r("eXOl"),l=r("bXYW");const s=({symbol:e,interval:t,priceType:r})=>{const{pair:s,contractType:c,isDelivery:u}=(0,n.Vh)()[e]||{},d=(0,a.useRef)();(0,a.useEffect)((()=>{if(!s||!c)return;const a="mark"===r?e:s;d.current=void 0;const n=(0,l.nJ)(t);return(u?(0,i.RU)():(0,i.BN)()).getContinuousKlineStream(a,c,t,{priceType:r,symbol:e}).subscribe((e=>{d.current&&e.time>d.current.time+n&&(0,o.j)("kline_ws_timeout",{business:u?"CM":"UM",wsType:`${r}_kline`,symbol:a,contractType:c,interval:t,neighbor:JSON.stringify([d.current,e]),isOnline:window.navigator.onLine}),d.current=e}))}),[s,e,t,c,r,u])}},BuGG:(e,t,r)=>{"use strict";r.d(t,{M:()=>l});var a=r("/SIk"),i=r("VM/Z"),o=r("S24M"),n=r("eXOl");const l=(e,t)=>{const{isDelivery:r}=(0,n.Vh)()[e]||{},l=(0,a.useRef)();(0,a.useEffect)((()=>{if(t)return;return(r?(0,i.RU)():(0,i.BN)()).getStreamTradeSnap(e).subscribe((t=>{const a=t[t.length-1];l.current&&a.tradeTime-l.current.tradeTime>=8e3&&(0,o.j)("kline_ws_timeout",{business:r?"CM":"UM",wsType:"aggTrade",symbol:e,neighbor:JSON.stringify([l.current,a]),isOnline:window.navigator.onLine}),l.current=a}))}),[r,e,t])}},l3xb:(e,t,r)=>{"use strict";r.d(t,{Ld:()=>s});var a=r("5vwO"),i=r("VM/Z");var o=r("bXYW");const n=e=>e,l=e=>e,s=({symbol:e,pair:t,contractType:r,interval:s,priceType:c,isDelivery:u,useMiniTicker:d,callback:m,checkIfInSync:p=(()=>!0)})=>{const f=u?(0,i.RU)():(0,i.BN)(),g="mark"===c?e:t,y=f.getContinuousKlineStream(g,r,s,{priceType:c,symbol:e});y.selector=n;const b=d?f.getStreamTickers():f.getStreamTradeSnap(e);b.selector=d?(e=>t=>t[e])(e):l;const h=function(e=[]){const t=[];function r(){t.forEach((e=>e()))}return r.subscribe=function(r){const a=[];e.forEach(((e,i)=>{const o=e.subscribe((t=>{a[i]=e.selector(t),r(a)}));t.push(o)}))},r}([y,b]);return h.subscribe((([e,t])=>{if(!t||!e||!p())return;const r=(0,a.Z)({},e);if("last"===c){const e=Array.isArray(t)?t.slice(-1).pop():t,n=(0,o.nJ)(s),l=+(e.price||e.lastPrice),c=+(e.quantity||e.quoteVolume),u=e.tradeTime||e.eventTime;try{if("1M"===s){const e=new Date(u),t=new Date(r.time).getMonth();if(e.getMonth()>t){const e=+new Date(r.time).setMonth(t+1);Object.assign(r,(0,a.Z)({time:e,open:l,high:l,low:l,close:l},d?{volume:0,quantity:0}:{volume:c,quantity:c}))}}else if(u-r.time>n){const e=r.time+Math.floor((u-r.time)/n)*n;Object.assign(r,(0,a.Z)({time:e,open:l,high:l,low:l,close:l},d?{volume:0,quantity:0}:{volume:c,quantity:c}))}}catch(i){console.error(i)}r.close=l}m(r,e)})),h}},cN65:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r("5+Lg"),i=r("a4Ug"),o=r("/SIk"),n=r.n(o),l=n().createElement;const s={display:"flex",mt:"16px","& .checkBox":{height:"16px",width:"16px"},"& .label":{color:"t.primary",fontSize:"12px"}},c=(0,o.memo)((({defaultChecked:e,value:t,label:r,getValue:n,style:c})=>{const{0:u,1:d}=(0,o.useState)(e);return l(a.Z,{sx:s,style:c,onClick:e=>{e.stopPropagation()}},l(i.Z,{checked:u,onChange:e=>{d(e.currentTarget.checked),n({[t]:e.currentTarget.checked})},className:"checkBox"}),l("div",{className:"label"},r))})),u=(0,o.memo)((({options:e=[],getValue:t})=>l(n().Fragment,null,e.map((e=>l(c,{label:e.label,getValue:t,key:e.value,value:e.value,defaultChecked:e.defaultChecked,style:e.style}))))))},"E+7l":(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r("/SIk"),i=r.n(a),o=r("VM/Z"),n=r("+NB9"),l=r("klBV"),s=i().createElement;const c=function(){const e=(0,l.tZ)();return(0,l._n)()&&!1?s(n.Z,{expand:!0,lng:e,i18nHost:o.Xs}):null}},"8RC1":(e,t,r)=>{"use strict";r.d(t,{Vq:()=>k,ZP:()=>S});var a=r("5vwO"),i=r("GpFh"),o=r("GDnE"),n=r("/SIk"),l=r.n(n),s=r("7nmT"),c=r("Oci4"),u=r("XVzo"),d=r("w7Tp"),m=r("ka4r"),p=r("8+Lq"),f=r("xfzF"),g=r("ZkJp"),y=r("Y6Da"),b=r("ZJL0"),h=l().createElement;let v,x=0;!function(e){e.dialog="dialog",e.styledDialog="styledDialog"}(v||(v={}));class k{constructor(){(0,o.Z)(this,"id",""),(0,o.Z)(this,"show",(e=>{let{type:t=v.styledDialog}=e,r=(0,i.Z)(e,["type"]),a=document.getElementById(this.id);if(a||(a=document.createElement("div"),a.id=this.id,document.body.appendChild(a)),s.unmountComponentAtNode(a),t===v.dialog){if(!r.dialogProps)throw new Error("must pass dialogProps");this.showDialog(r,a)}else this.showStyledDialog(r,a)})),(0,o.Z)(this,"showDialog",((e,t)=>{const{dialogProps:r}=e;requestAnimationFrame((()=>{const{isLight:i,color:o}=e,n=(0,b.gh)(!!i,o);s.render(h(y.Z,{theme:n},h(c.Z,{sx:(0,a.Z)({width:["298px","360px","360px"],p:"md"},e.sx),visible:!0,onMaskClick:this.close},null===r||void 0===r?void 0:r.body,h(u.Z,{mt:["16px","16px","24px"],sz:"l",width:"100%",onClick:this.close},null===r||void 0===r?void 0:r.okText))),t)}))})),(0,o.Z)(this,"showStyledDialog",((e,t)=>{requestAnimationFrame((()=>{const{isLight:r,color:a}=e,i=(0,b.gh)(!!r,a);s.render(h(y.Z,{theme:i},h(p.Z,{queueSize:2,closable:!0,autoHideDuration:4500,anchorOrigin:{vertical:e.isMobile?"top":"bottom",horizontal:"right"}},h(f.Z,Object.assign({open:!0,onMaskClick:this.close,onCloseIconClick:this.close},e)))),t)}))})),(0,o.Z)(this,"close",(()=>{const e=document.getElementById(this.id);e&&s.unmountComponentAtNode(e)})),(0,o.Z)(this,"confirm",(async e=>{let{isLight:t,sx:r,content:o,cancelText:n,okText:s,hasFooter:c=!0}=e,p=(0,i.Z)(e,["isLight","sx","content","cancelText","okText","hasFooter"]);return new Promise(((e,i)=>{this.show((0,a.Z)((0,a.Z)({},p),{},{isLight:t,sx:(0,a.Z)({minWidth:"368px"},r),children:h(l().Fragment,null,h(d.Z,{sx:{mt:"xs",textAlign:"center"}},o),c&&h(g.y,null,h(m.Z,null,n&&h(u.Z,{flexGrow:1,variant:"outline",onClick:i,sz:"l",sx:{boxShadow:"none",border:"1px solid",borderColor:"dropdown.hoverBg",color:"t.primary",mr:3,width:.5,"&:hover":{borderColor:"t.yellow300",color:"t.yellow300",bg:"transparent !important"}}},n),s&&h(u.Z,{sx:{width:.5},sz:"l",flexGrow:1,onClick:e},s))))}))}))})),this.id=`binance-dialog${x}`,x++}}const S=new k},lFb1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r("/SIk"),i=r.n(a),o=r("w7Tp"),n=r("ka4r"),l=r("XVzo"),s=i().createElement;const c=({onCancel:e,message:t,cancelText:r,okText:a,onOk:i})=>s(o.Z,null,s(o.Z,{sx:{my:"md"}},t),s(n.Z,null,s(l.Z,{flexGrow:1,variant:"outline",onClick:e,sz:"l",sx:{boxShadow:"none",border:"1px solid",borderColor:"dropdown.hoverBg",mr:3,width:.5,"&:hover":{borderColor:"t.yellow300",color:"t.yellow300",bg:"transparent !important"}}},r),s(l.Z,{sx:{width:.5},sz:"l",flexGrow:1,onClick:i},a))),u=i().memo(c)},"2rU8":(e,t,r)=>{"use strict";r.d(t,{XI:()=>d,PH:()=>m});var a=r("/SIk"),i=r.n(a),o=r("/yzf"),n=r("klBV"),l=r("BzR9"),s=r("O94r"),c=r.n(s),u=i().createElement;const d=(0,a.forwardRef)(((e,t)=>{const r="rtl"===(0,n.gm)()?c()([l.Z["alb-direction-rtl"],e.className]):c()(e.className);return u(o.Z,Object.assign({ref:t},e,{className:r}),e.children)})),m=(0,a.forwardRef)(((e,t)=>{const r="rtl"===(0,n.gm)()?c()([l.Z["alb-direction-rtl"],e.className]):c()(e.className);return u("div",Object.assign({ref:t},e,{className:r}),e.children)}))},"b/WR":(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("w7Tp"),l=o().createElement;function s(e){let{children:t}=e,r=(0,a.Z)(e,["children"]);return l(n.Z,Object.assign({sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},r),t)}},Fee1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("/yzf"),l=r("O5R6"),s=r("Gqy6"),c=o().createElement;const u=()=>window.performance?window.performance.now():+new Date;const d=function(e){let{children:t,name:r,onError:d,onComponentMounting:m,fallbackRender:p,FallbackComponent:f,fallback:g}=e,y=(0,a.Z)(e,["children","name","onError","onComponentMounting","fallbackRender","FallbackComponent","fallback"]);const b=(0,i.useRef)(u()),h=(0,i.useCallback)(((e,t,a)=>{null===d||void 0===d||d(e,t,a),(0,s.gp)({t:"COMPONENT_JS_ERROR",componentName:r,errorInfo:t,errorName:e.name,errorMessage:e.message,renderError:1}),console.error(e),console.log(`${r||"Something"} went wrong.`)}),[r,d]),v=(0,i.useCallback)((()=>{null===m||void 0===m||m(),(0,s.gp)({t:"COMPONENT_JS_MOUNT",componentName:r,renderDuration:u()-b.current,mountTime:window.performance?window.performance.now():null,renderSuccess:1})}),[r,m]);let x;return o().isValidElement(g)||"function"===typeof p||"function"===typeof f||(x=c(n.Z,{fontSize:3,color:"t.primary",p:3},`Sorry, ${r||"Something"} went wrong. Please refresh the page.`)),c(l.S,Object.assign({name:r,onError:h,onComponentMounting:v,fallback:x||g,fallbackRender:p,FallbackComponent:f},y),t)}},"8Eqx":(e,t,r)=>{"use strict";r.d(t,{U:()=>F});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("w7Tp"),l=r("XVzo"),s=r("VM/Z"),c=r("klBV"),u=r("SJeZ"),d=r("kSVV"),m=r("p80b"),p=r("jd5H"),f=r("fi7b"),g=r("GpFh"),y=r("/yzf"),b=r("z/Z1"),h=o().createElement;function v(e){let{variant:t}=e,r=(0,g.Z)(e,["variant"]);const{text:a}=(0,b.Fg)();if("undefined"===typeof t||"string"===typeof t)return h(y.Z,Object.assign({variant:t},r));const i=t.map((e=>{var t;return null===a||void 0===a||null===(t=a[e])||void 0===t?void 0:t.fontSize})),o=t.map((e=>{var t;return null===a||void 0===a||null===(t=a[e])||void 0===t?void 0:t.fontWeight})),n=t.map((e=>{var t;return null===a||void 0===a||null===(t=a[e])||void 0===t?void 0:t.lineHeight}));return h(y.Z,Object.assign({fontSize:i,fontWeight:o,lineHeight:n},r))}var x=r("4Dm0"),k=r("5+Lg"),S=r("DZYF"),P=r("VGiB"),T=o().createElement;const C={lineHeight:"22px"};const M=e=>{let{label:t,options:r,value:a,onChange:i}=e,n=(0,g.Z)(e,["label","options","value","onChange"]);return T(o().Fragment,null,t&&T(k.Z,{sx:{alignSelf:"flex-start"}},t),T(S.Z,Object.assign({onValueChange:i,value:a,sx:C,renderValue:e=>function(e,t){var r;return null===(r=e.find((e=>e.value===t)))||void 0===r?void 0:r.title}(r,e),variant:"filled"},n),r.map((e=>T(P.W,{value:e.value,key:e.value},e.title)))))};var Z=r("ka4r"),w=o().createElement;const I={width:"100%",justifyContent:"space-between",alignItems:"center",height:"32px",padding:"0 32px 0 16px"},E=({asset:e="",walletBalance:t=0})=>w(Z.Z,{sx:I,className:"option-title-wrap"},w(v,{color:"t.primary"},e),w(v,{color:"t.secondary"},t));var N=o().createElement;const A={width:["100%","484px"],borderRadius:"4px",".modal-title":{border:"none",borderTopLeftRadius:"4px",borderTopRightRadius:"4px",textAlign:"center",py:[14]},".modal-content":{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",margin:["24px 0px","62px 0px"]}},R={asset:"",walletBalance:0},O=({onClose:e})=>{const{getI18n:t,t:r}=(0,u.yk)(),a=(0,u._$)(),n=(0,u.KQ)(),s=(0,x.G)(),g=(0,i.useMemo)((()=>{const e=s?"BTC":"USDT",{asset:t,walletBalance:r=0}=n[e]||R;return{asset:t,walletBalance:r}}),[n,s]),[y,b]=o().useState([]),[h,k]=o().useState(g),S=y.map((({walletBalance:e,asset:t})=>({title:N(E,{walletBalance:e,asset:t}),value:t})));(0,i.useEffect)((()=>{const e=Object.entries(n).map((([e,{walletBalance:t=0}])=>({asset:e,walletBalance:t})));e.length&&b(e)}),[n,a]);const P=(0,i.useCallback)((async e=>{k({asset:e,walletBalance:n[e].walletBalance||0})}),[k,n]),{setMessageInfo:T}=(0,c.YT)(),C=(0,i.useCallback)((async()=>{(await(0,p.v_)("/bapi/futures/v1/private/future/balance/testnet/top-up",{asset:h.asset})).success&&T({message:t("faucet-success")||"success",variant:"success"}),e&&e()}),[h.asset,T,t,e]);return N(d.Z.Modal,{visible:!0,sx:A},N("div",{className:"modal-title"},N(m.Z,{color:"#72768F",size:14,sx:{float:"right"},onClick:e,cursor:"pointer"}),N(v,{fontSize:[20],fontWeight:[500],color:"t.primary",variant:["headline6"]},t("Faucet"))),N("div",{className:"modal-content"},N(M,{options:S,value:h.asset,label:t("coinLabel"),onChange:P,sx:{width:"100%",bg:"inputBg",border:"none",height:"40px",borderRadius:"4px","& > div":{border:"none"},input:{paddingLeft:"16px"},svg:{marginTop:"4px"},"ul li":{bg:"popupBg",".option-title-wrap":{padding:"0"}}}}),N(v,{color:"t.secondary",pt:["16px"],pb:["32px"],variant:["body2","body1"],sx:{width:"100%"}},N(f.c,{t:r,components:{div:N("div",null)},i18nKey:"futures-trade-faucet-tips"})),N(l.Z,{sz:"l",width:[1,.5],onClick:C},t("faucet-transfer"))))};var L=o().createElement;const V={width:"calc(100% - 8px)",".faucet-button":{width:"100%",height:"24px",borderRadius:"4px"}},F=({sx:e={}})=>{const[t,r]=o().useState(!1),{getI18n:i}=(0,u.yk)(),d=e=>()=>{r(e)},m=(0,c._n)();return s.Jg&&m?L(n.Z,{sx:(0,a.Z)((0,a.Z)({},V),e)},L(l.Z,{variant:"default",colorStyle:"secondary",className:"faucet-button",onClick:d(!0)},i("Faucet")),t&&L(O,{onClose:d(!1)})):null}},wbLk:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("/SIk"),i=r.n(a),o=r("rUHi"),n=i().createElement;const l=()=>n("div",{style:{width:"100vw",height:"100vh"}},n("div",{style:{display:"flex",flex:"1 1 1",alignItems:"center",justifyContent:"center",height:"100%"}},n(o.Z,null)))},hIa1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("/SIk"),i=r.n(a),o=r("j3/i"),n=r("Qkkg"),l=i().createElement;function s(){return l(n.Z,null,l(o.xB,{styles:e=>o.iv`
          html {
            scrollbar-width: none;
            -webkit-tap-highlight-color: transparent;
            background-color: ${e.colors.overallBg};
          }
          body {
            margin: 0;
            height: 100%;
            width: 100vw;
            overflow-x: hidden !important;
            overflow-y: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            -webkit-overflow-scrolling: touch;
            -webkit-tap-highlight-color: transparent;
            background-color: ${e.colors.overallBg};
          }
          h1 {
            margin: 0;
            padding: 0;
          }
          #__next {
            max-width: 100vw;
            overflow-x: hidden;
          }
          input {
            font-family: inherit;

            &::placeholder {
              font-style: normal !important;
            }
          }

          .list-grid {
            > div > div > div {
              margin-top: 0;
              margin-bottom: 0;
              padding-left: 0;
              padding-right: 0;
              height: 100%;
              > div {
                flex: 1;
              }
            }
          }
          body:not(.scrollBar)::-webkit-scrollbar {
            display: none;
          }

          .scrollBar {
            padding-right: 0px;
          }
          .scrollBar:hover {
            padding-right: 0px;
          }
          .scrollBar::-webkit-scrollbar {
            width: 0px;
            height: 0px;
          }
          .scrollBar:hover::-webkit-scrollbar,
          ::-webkit-scrollbar {
            width: 5px;
            height: 6px;
          }
          body.scrollBar::-webkit-scrollbar {
            height: 6px;
            width: 8px !important;
          }
          /*  */
          input[type='number']::-webkit-outer-spin-button,
          input[type='number']::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
          }
          /* react-grid */
          .react-grid-layout {
            position: relative;
            transition: height 200ms ease;
            margin-bottom: 24px;
          }
          .react-grid-item {
            transition: all 100ms ease;
            transition-property: left, top;
          }
          .react-grid-item.cssTransforms {
            transition-property: transform;
          }
          .react-grid-item.resizing {
            z-index: 1;
            will-change: width, height;
          }
          .react-grid-item.react-draggable-dragging {
            transition: none;
            z-index: 3;
            will-change: transform;
          }
          .react-grid-item.dropping {
            visibility: hidden;
          }
          .react-grid-item.react-grid-placeholder {
            background: red;
            opacity: 0.2;
            transition-duration: 100ms;
            z-index: 2;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            -o-user-select: none;
            user-select: none;
            box-shadow: 0px 0px 100px #000;
          }
          .react-grid-item > .react-resizable-handle {
            position: absolute;
            width: 20px;
            height: 20px;
            bottom: 0;
            right: 0;
            cursor: se-resize;
            z-index: inherit;
          }
          .react-grid-item > .react-resizable-handle::after {
            content: '';
            position: absolute;
            right: 3px;
            bottom: 3px;
            width: 5px;
            height: 5px;
            border-right: 2px solid ${e.colors.icons.close};
            border-bottom: 2px solid ${e.colors.icons.close};
          }
          .react-resizable-hide > .react-resizable-handle {
            display: none;
          }
          /* react-resizable */
          .react-resizable {
            position: relative;
          }

          .draggableHandle {
            cursor: grab;
          }

          .react-draggable-dragging .draggableHandle {
            cursor: grabbing;
          }
          /*  */
          ::-webkit-scrollbar-track {
            background: transparent;
          }
          ::-webkit-scrollbar-thumb {
            background: ${e.colors.line};
            border-radius: 4px;
            width: 4px;
          }

          /*  stylisRtl .rc-calendar-picker */
          .rc-calendar-picker {
            position: absolute;
            right: 0 !important;
            z-index: 1000;
          }

          .react-grid-item.react-grid-placeholder {
            pointer-events: none;
          }

          .react-resizable-handle {
            visibility: hidden;
          }

          .trading-page-close-button {
            visibility: hidden;
          }

          .react-grid-item:hover .react-resizable-handle,
          .react-grid-item:hover .trading-page-close-button,
          .react-resizable-handle:hover {
            visibility: visible;
          }
          .react-draggable:hover .pro-layout-close-button {
            visibility: visible;
          }
        `}))}},pBBP:(e,t,r)=>{"use strict";r.d(t,{E:()=>n,v:()=>u});var a=r("/SIk"),i=r("HkAn"),o=r("S24M");const n=(e,t)=>{const{pageName:r,dfSource:n}=(0,i.Vn)();(0,a.useEffect)((()=>{e&&(0,o.j)("PopupView",{clientType:"web",title:t,pageName:r,df_source:n,eventName:"futures_help_center_tracking"})}),[n,t,r,e])};var l=r("5vwO"),s=r("GpFh"),c=r("1U9V");const u=()=>{const{pageName:e,dfSource:t}=(0,i.Vn)();return{trackWebClick:r=>{let{module:a="futures_helpCenter"}=r,i=(0,s.Z)(r,["module"]);(0,c.wZ)((0,l.Z)({module:a,pageName:e,dfSource:t},i))}}}},pV8G:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>le,openHelpCenterModal:()=>oe});var a=r("/SIk"),i=r.n(a),o=r("ka4r"),n=r("SOLP"),l=r("EaXC"),s=r("VM/Z"),c=r("Qkkg"),u=r("xpNn"),d=r("pBBP"),m=r("/yzf"),p=r("xfzF"),f=r("dMOv"),g=r("1U9V"),y=r("U0yl"),b=r("0hOy"),h=r("J8qU"),v=r("440K"),x=i().createElement;const k=()=>{},S=({title:e,children:t,isDefaultExpand:r=!1,trackCallback:i=k})=>{const{0:o,1:n}=(0,a.useState)(r),l=(0,a.useCallback)((()=>{n((e=>!e))}),[]);return x("div",{className:"toggle-panel"+(o?" expand":"")},x("div",{className:"toggle-title",onClick:()=>{l(),o&&i()}},e,x(v.Z,{size:16,className:"arrow"})),x("div",{className:"toggle-content"},t))},P=i().memo(S);var T=i().createElement;const C="support/list/a-guide-to-Binance-Futures",M=({codes:e,data:t})=>{const{i18n:{language:r},getI18n:a}=(0,y.r5)(),{trackWebClick:i}=(0,d.v)();return T(P,{isDefaultExpand:!0,title:T(o.Z,null,T(h.Z,{color:"t.third"}),T(m.Z,{variant:"subtitle1",className:"panel-name"},a("HotTopics",{defaultValue:"Hot Topics"})))},e.map(((e,a)=>{const{code:o,title:n,type:l}=t[e]||{};return T(b.Z,{variant:"secondaryLink",key:o,className:"common-link",href:`/${r}/support/${1===l?"announcement":"faq"}/${o}`,target:"_blank",onClick:()=>i({elementId:`hotTopics_${a+1}`,elementTargetUrl:o})},n)})),T(m.Z,{as:"a",variant:"addressLink",href:`/${r}/${C}`,target:"_blank",className:"more-link",onClick:()=>i({elementId:"hotTopics_learnMore",elementTargetUrl:C})},a("LearnMore",{defaultValue:"Learn More"})))},Z=i().memo(M);var w=r("LmyI"),I=r("LL18"),E=r("2iBS"),N=i().createElement;const A=({openHelpCenter:e,closeHelpCenter:t})=>{const{t:r}=(0,y.r5)(),{trackWebClick:i}=(0,d.v)(),n=(0,a.useCallback)((()=>{t(),(0,E.n)({afterClose:e}),i({elementId:"hot_feature"})}),[t,e,i]);return N("div",{className:"toggle-panel",onClick:n},N("div",{className:"toggle-title"},N(o.Z,null,N(w.Z,{size:24,color:"t.third"}),N(m.Z,{variant:"subtitle1",className:"panel-name"},r("futures-trade-hotFeatures",{defaultValue:"Hot Features"}))),N(I.Z,{size:16})))},R=i().memo(A);var O=r("L0XV"),L=r("ofts"),V=i().createElement;const F=({openHelpCenter:e,closeHelpCenter:t})=>{const{getI18n:r}=(0,y.r5)(),{trackWebClick:i}=(0,d.v)(),n=(0,a.useCallback)((()=>{t(),(0,L.l)({title:r("HowCompleteTrade",{defaultValue:"How to complete a trade?"}),showFooter:!1,afterClose:e}),i({elementId:"tour_around_trade"})}),[t,r,e,i]);return V(P,{title:V(o.Z,null,V(O.Z,{color:"t.third"}),V(m.Z,{variant:"subtitle1",className:"panel-name"},r("TourAround",{defaultValue:"Tour Around"}))),trackCallback:()=>{i({elementId:"tour_around"})}},V(b.Z,{variant:"secondaryLink",className:"common-link",onClick:n},r("HowCompleteTrade",{defaultValue:"How to complete a trade?"})))},D=i().memo(F);var _=r("fi7b"),B=r("icQp"),z=r("ClZ7"),K=r("n6bz"),q=r("3aob"),U=r("Jj8e"),W=r("GyCk"),H=r("SJeZ"),$=r("S24M"),j=i().createElement;const G=({icon:e,name:t,desc:r,onClick:a})=>j("div",{className:"action-item",onClick:a},e,j("div",{className:"action-content"},j(m.Z,{variant:"subtitle1",color:"t.primary"},t),j(m.Z,{variant:"body2",color:"t.third"},r))),J=({visible:e,openHelpCenter:t,closeHelpCenter:r})=>{const{t:i,getI18n:o}=(0,y.r5)(),{isLoggedIn:n}=(0,W.f0)(),{isExistFutureAccount:l}=(0,W.Pc)(),{trackWebClick:c}=(0,d.v)(),{shortName:p}=(0,H.oO)(),{0:f,1:g}=(0,a.useState)(),b=(0,a.useCallback)((e=>{r(),(0,q.F)(!0,{type:e,afterClose:t}),c({elementId:e===s.g3?"futures_help_tutorial":"futures_help_test"})}),[r,t,c]),h=(0,a.useCallback)((()=>{r(),(0,u.O)({afterClose:t}),c({elementId:"futures_help_tradingRules"})}),[r,t,c]),v=(0,a.useCallback)((()=>{b(s.Nz),(0,$.j)("$WebClick",{eventName:"futures_quiz",$element_id:"start_quiz",source:"help_center_popup"})}),[b]);return(0,a.useEffect)((()=>{e&&n&&l&&(0,U.o)().then((({data:e})=>{g(e)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[n,l,e]),j("div",{className:"bottom-panel"},j(G,{icon:j(B.Z,{color:"t.third"}),name:j(_.c,{t:i,i18nKey:"helpCenter-TradingRules",defaults:"<colorWrap>{{symbolName}}</colorWrap> Trading Rules",values:{symbolName:p},components:{colorWrap:j(m.Z,{as:"span",color:"t.yellow"})}}),desc:o("LearnMoreTradingRules",{defaultValue:"Learn more about trading rules of each symbol"}),onClick:h}),j(G,{icon:j(z.Z,{color:"t.third"}),name:o("TutorialVideo",{defaultValue:"Tutorial Video"}),desc:o("3MinsVideoTutorial",{defaultValue:"3 mins video tutorial on Futures trade"}),onClick:()=>b(s.g3)}),!1===f?j(G,{icon:j(K.Z,{color:"t.third"}),name:o("Quiz",{defaultValue:"Quiz"}),desc:o("CompleteMandatoryQuiz",{defaultValue:"Complete the mandatory Quiz to start Trading"}),onClick:v}):null)},Y=i().memo(J),Q={pt:20,pl:"xs",pr:["sm","xs"],cursor:"pointer",bg:"moduleBg",flex:"0 0 auto","&  path":{fill:"t.primary"},"&:hover path":{fill:"t.yellow"}},X={minWidth:["100%",640,720],maxWidth:["100%",640,720],"& > div:first-of-type":{pt:18,svg:{fontSize:20,"&:hover":{color:"t.primary"}}}},ee={height:"100%",p:0,"& .main-container":{height:["100%",580],display:"flex",flexDirection:"column"},"& .modal-title":{height:28,px:24,my:18,color:"t.primary"},"& .content-wrapper":{display:"flex",flex:1,minHeight:0},"& .overflow-container":{flex:1,overflow:"auto",mt:"ls",px:24,"&::-webkit-scrollbar":{width:"5px",height:"5px"},"&::-webkit-scrollbar-thumb":{bg:"icons.close"},"& .toggle-panel":{pb:"ls",mb:"ls",borderBottom:"1px solid",borderColor:"line","& .toggle-title":{display:"flex",justifyContent:"space-between",alignItems:"center",py:"ls",cursor:"pointer","& .panel-name":{ml:[10,18],color:"t.primary"},"& .arrow":{transform:"matrix(1, 0, 0, -1, 0, 0)",transition:"transform 0.3s ease-out","& > path":{fill:"t.third"}},"&:hover .arrow path":{fill:"t.primary"}},".toggle-content":{maxHeight:0,opacity:0,transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",overflow:"hidden",ml:[37,45],"& .common-link":{mb:"xs",display:"block",fontSize:1,color:"t.secondary",textDecoration:"underline",cursor:"pointer","&:first-of-type":{mt:"minor"}},"& .more-link":{color:"t.yellow",mb:"ls",fontSize:1}},"&.expand":{"& .toggle-title":{"& > svg":{transform:"matrix(-1, 0, 0, 1, 0, 0)"}},"& .toggle-content":{maxHeight:500,opacity:1}}},"& .bottom-panel":{display:"flex",flexDirection:["column","row"],justifyContent:["unset","space-between"],flexWrap:"wrap",pt:["ls",0],"& .action-item":{display:"flex",width:["100%",293,325],py:[0,"ls"],pl:"3px",pr:[0,"md"],mb:[30,0],cursor:"pointer",boxSizing:"border-box","& svg":{minWidth:"24px"}},"& .action-content":{ml:[10,18]}}}};var te=i().createElement;const re=({visible:e,openHelpCenter:t,closeHelpCenter:r})=>{const{getI18n:i}=(0,y.r5)(),{0:o,1:n}=(0,a.useState)({codes:[],data:{}}),{codes:l,data:s}=o,c=(0,a.useCallback)((async()=>{let e=[],t=[];try{const r=await(async()=>{const{data:e}=await(0,f.a)("a-guide-to-Binance-Futures"),{data:t}=e||{},r=new Set,a=t?JSON.parse(t):{};if(a.hash){const e=a.hash;Object.keys(e).filter((t=>"PlaylistFAQArticleList"===e[t].id)).forEach((t=>{var a,i,o,n;Object.keys(null!==(a=null===(i=e[t])||void 0===i||null===(o=i.config)||void 0===o||null===(n=o.config)||void 0===n?void 0:n.articles)&&void 0!==a?a:{}).forEach((a=>{var i,o,n;r.add(null===(i=e[t])||void 0===i||null===(o=i.config)||void 0===o||null===(n=o.config)||void 0===n?void 0:n.articles[a].id)}))}))}return r})();e=Array.from(r).slice(0,3),t=await(async e=>{const{data:t}=await(0,f.t)(e);return Array.isArray(null===t||void 0===t?void 0:t.items)?null===t||void 0===t?void 0:t.items:[]})(e)}catch(r){throw new Error(r)}n({codes:e,data:(0,g.FB)(t,"code")})}),[]);return(0,a.useEffect)((()=>{e&&!l.length&&c()}),[e,l,c]),te(p.Z,{open:e,onCloseIconClick:r,sx:X,contentSx:ee},te("div",{className:"main-container"},te(m.Z,{variant:"headline6",className:"modal-title"},i("title",{defaultValue:"Futures Help Center"})),te("div",{className:"content-wrapper"},te("div",{className:"overflow-container"},te(Z,{codes:l,data:s}),te(R,{openHelpCenter:t,closeHelpCenter:r}),te(D,{openHelpCenter:t,closeHelpCenter:r}),te(Y,{visible:e,openHelpCenter:t,closeHelpCenter:r})))))},ae=i().memo(re);var ie=i().createElement;const oe=()=>{l.Y.emit(s.xm,{visible:!0})},ne=()=>{const{0:e,1:t}=(0,a.useState)(!1),{trackWebClick:r}=(0,d.v)(),i=(0,a.useCallback)((()=>{oe(),r({module:"header",elementId:"futures_helpCenter_entry"})}),[r]),u=(0,a.useCallback)((()=>{t(!1)}),[]);return(0,a.useEffect)((()=>l.Y.on(s.xm,(({visible:e})=>{t(e)}))),[]),(0,d.E)(e,"futures_helpCenter"),ie(c.Z,null,ie(o.Z,{__css:Q},ie(n.Z,{onClick:i})),ie(ae,{visible:e,openHelpCenter:oe,closeHelpCenter:u}),!1)},le=i().memo(ne)},"2iBS":(e,t,r)=>{"use strict";r.d(t,{Z:()=>E,n:()=>w});var a=r("/SIk"),i=r.n(a),o=r("/yzf"),n=r("xfzF"),l=r("Wt2Q"),s=r("Jj8e"),c=r("EaXC"),u=r("GyCk"),d=r("Uqe+"),m=r("frZ3"),p=r("klBV"),f=r("SJeZ"),g=r("pBBP");const y=(e,t,r="gif")=>`static/images/futures/assets/guide-${e}-${t?"light":"dark"}-en.${r}`;var b=r("VM/Z");const h={minWidth:["100%",640,720],maxWidth:["100%",640,720]},v={height:["100%","500px"],py:18,px:24,bg:"modalBg",borderRadius:"6px","& .main-container":{height:["100%","auto"],display:"flex",flexDirection:"column"},"& .content-wrapper":{display:"flex",flex:1,minHeight:0},"& .overflow-container":{display:"flex",flexDirection:"column",flex:1},"& .modal-footer":{justifyContent:"flex-end",alignItems:"center","& .previous-btn":{mr:"md",color:"t.third",cursor:"pointer",":hover":{color:"t.primary"}}}};var x=r("ka4r"),k=r("XVzo"),S=i().createElement;const P=()=>{},T=({steps:e=[],closeModal:t,activeIndex:r=0,setActiveIndex:i=P,track:n=P})=>{const{t:l,getI18n:s}=(0,f.yk)(),{isMobile:c}=(0,p.Fs)(),u=0===r,d=e.length-1===r,m=(0,a.useCallback)((()=>{i(r-1),n("previous")}),[r,i,n]),g=(0,a.useCallback)((()=>{i(r+1),n("next")}),[r,i,n]),y=(0,a.useCallback)((()=>{t&&t(),n("startTrading")}),[t,n]);return S(x.Z,{className:"modal-footer"},!c&&!u&&S(o.Z,{className:"previous-btn",variant:"subtitle2",onClick:m},l("futures-guide-Previous")),!c&&!d&&S(k.Z,{sz:"normal",colorStyle:"flatprimary",width:125,onClick:g},l("futures-guide-Next")),(d||c)&&S(k.Z,{sz:"normal",colorStyle:"flatprimary",onClick:y},s("StartTrading",{defaultValue:"Start Trading"})))},C=i().memo(T);var M=i().createElement;let Z;const w=({afterClose:e=(()=>{})}={})=>{c.Y.emit(b.bG,{visible:!0,afterClose:e})},I=()=>{const{getI18n:e}=(0,f.yk)(),{isLight:t}=(0,p.Fg)(),{isLoggedIn:r}=(0,u.f0)(),{isExistFutureAccount:i}=(0,u.Pc)(),{trackWebClick:x}=(0,g.v)(),k=(0,a.useMemo)((()=>((e,t)=>[{title:e("ba-futures-mock"),desc:{i18nKey:"hotFeature_5_desc"},imgPath:y("hotfeature5",t,"png"),hasLearnMore:!0,learnMoreLink:"https://testnet.binancefuture.com/%lng%/futures/BTCUSDT",learnMoreText:e("futures-start-trading")},{title:e("trd-layout-setting-color-cvd"),desc:{i18nKey:"trd-guide-cvd-content"},imgPath:y("hotfeature6",t,"png"),hasLearnMore:!1},{title:e("hotFeature_1"),desc:{i18nKey:"hotFeature_1_desc"},imgPath:y("hotfeature1",t),hasLearnMore:!0,learnMoreLink:"support/faq/29b45c485d664028b9ca1cdf90b24f6f"},{title:e("hotFeature_2"),desc:{i18nKey:"hotFeature_2_desc"},imgPath:y("hotfeature2",t)},{title:e("hotFeature_3"),desc:{i18nKey:"hotFeature_3_desc"},imgPath:y("hotfeature3",t),hasLearnMore:!0,learnMoreLink:"futures/position/adjustment"}])(e,t)),[e,t]),[S,P]=(0,d.Z)(b.gu),[T,w]=(0,d.Z)(b.sS),[I,E]=(0,d.Z)(b.jN),{0:N,1:A}=(0,a.useState)(),{0:R,1:O}=(0,a.useState)(!1),L=!1===N,V=(0,a.useMemo)((()=>{return!S||!T&&(e=I,(new Date).toDateString()===new Date(e).toDateString());var e}),[S,I,T]),F=(0,a.useCallback)((()=>{O(!1)}),[]),D=(0,a.useCallback)((()=>{F(),"function"===typeof Z&&Z(),x({elementId:"hot_feature_close"})}),[F,x]),_=(0,a.useCallback)((e=>{x({elementId:`hot_feature_${e}`})}),[x]);return(0,m.Z)((()=>{T&&w(!1)}),864e5),(0,a.useEffect)((()=>{T||E(new Date("2022-03-09").getTime())}),[T,E]),(0,a.useEffect)((()=>{r&&i&&N&&V&&(O(!0),w(!0),P(!0))}),[i,r,N,V,w,P]),(0,a.useEffect)((()=>{r&&i&&(0,s.o)().then((({data:e})=>{A(e)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[r,i]),(0,a.useEffect)((()=>c.Y.on(b.bG,(({visible:e,afterClose:t})=>{O(e),Z=t}))),[]),(0,g.E)(R,"futures_hotFeature"),M(n.Z,{open:R,onCloseIconClick:D,sx:h,contentSx:v},M("div",{className:"main-container"},M(o.Z,{variant:"headline6",color:"t.primary"},e("hotFeatures",{defaultValue:"Hot Features"})),L&&M(o.Z,{variant:"body2",color:"t.third",mt:"minor"},e("hotFeaturesTip",{defaultValue:"Check out some features we recommended for you!"})),M("div",{className:"content-wrapper"},M("div",{className:"overflow-container"},M(l.Z,{steps:k,staticHost:b.Xs,closeModal:F,track:_,sx:{height:L?302:324}},M(C,null))))))},E=i().memo(I)},pww2:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("d5gM"),l=r("snMe"),s=r("T9gt"),c=o().createElement;n.Z.use(l.Db);const u={fallbackLng:"en",debug:!1,saveMissing:!1,react:{useSuspense:!1},partialBundledLanguages:!0},d=({i18n:e={},lng:t="en",ns:r,children:o})=>{const{0:l,1:d}=(0,i.useState)(!1),m=Object.keys(e)||[];return l||(d(!0),n.Z.init((0,a.Z)((0,a.Z)({},u),{},{lng:t,ns:m,defaultNS:r,fallbackLng:t,resources:{[t]:e},backend:{}}))),(0,i.useEffect)((()=>{m.length>0&&m.forEach((r=>n.Z.addResourceBundle(t,r,e[r],!0,!0))),n.Z.changeLanguage(t)}),[m,e,t]),c(s.a,{i18n:n.Z},o)}},UIpo:(e,t,r)=>{"use strict";r.d(t,{Jy:()=>g,hM:()=>y,Zb:()=>b,oZ:()=>v});var a=r("GpFh"),i=r("JwA9"),o=r("ka4r"),n=r("w7Tp"),l=r("YDVe"),s=r("tQHD"),c=r("/SIk"),u=r.n(c),d=r("szIg"),m=r("eXOl"),p=r("Dvpw"),f=u().createElement;const g=40,y=e=>{let{onRemove:t,renderExtra:r}=e,i=(0,a.Z)(e,["onRemove","renderExtra"]);return f(b,Object.assign({},i,{onRemove:t,renderExtra:()=>f(u().Fragment,null,r&&r(),t&&f(p.Z,{onRemove:t}))}))},b=e=>{let{children:t,title:r,area:l,renderExtra:s,onRemove:c,titleShrink:u=0,autoHeight:d}=e,m=(0,a.Z)(e,["children","title","area","renderExtra","onRemove","titleShrink","autoHeight"]);return f(i.Z,Object.assign({__css:{position:"relative",gridArea:l,zIndex:"auto",width:"100%",bg:"moduleBg",height:d?"auto":"100%"}},m),r&&f(o.Z,{sx:{position:"relative",zIndex:1,height:g,px:"sm",fontSize:1,color:"t.primary",justifyContent:"space-between",alignItems:"center",bg:"moduleBg",flexShrink:0,flexGrow:0,userSelect:c?"auto":"none"},className:c?"draggableHandle":void 0},f(o.Z,{sx:{fontSize:"14px",flexShrink:u,fontWeight:500}},r),s&&s()),f(n.Z,{sx:d?{overflowY:"auto",overflowX:"hidden"}:{position:"absolute",top:0,left:0,right:0,bottom:0,paddingTop:r?g:0,overflowY:"auto",overflowX:"hidden"}},t))},h={closeD:{cursor:"pointer",flexShrink:0,position:"absolute",right:0,top:0,color:"icons.close",zIndex:1,"&:hover":{color:"t.third"}},tabsContainer:{height:"100%",display:"flex",flexDirection:"column"},tabs:{flexShrink:0,flexGrow:0,height:40,px:"16px",width:["100%","100%","calc(100% - 220px)"],fontSize:"16px",lineHeight:"16px",position:"relative",bg:"transparent","div.active":{color:"t.yellow",borderBottom:"none"},"div:hover":{color:"t.yellow"}}},v=u().forwardRef(((e,t)=>{let{panes:r,extra:o,area:g,onRemove:y}=e,b=(0,a.Z)(e,["panes","extra","area","onRemove"]);const v=(0,d.useDispatch)(),{activeTab:x}=(0,m.jV)();return f(i.Z,Object.assign({__css:(0,c.useMemo)((()=>({width:"100%",height:"100%",gridArea:g,bg:"moduleBg",zIndex:"auto",position:"relative"})),[g])},b,{ref:t,name:"position"}),y&&f(p.Z,{onRemove:y,sx:h.closeD}),o,f(l.Z,{lazy:!0,variant:"trade-next",sx:h.tabsContainer,tabsSx:h.tabs,tabsClassName:y?"draggableHandle":"",tabClassName:"draggableCancel",defaultActiveKey:"0",onChange:e=>v.userTab.updateState({activeTab:e})},r.map((([e,t],r)=>f(s.Z,{key:r,sx:{flex:1,height:"calc(100% - 40px)"},tab:e,tabKey:String(r)},f(n.Z,{className:"draggableCancel",width:"100%",height:"100%"},u().cloneElement(t,{active:Number(x)===r})))))))}))},GR32:(e,t,r)=>{"use strict";r.d(t,{i:()=>u});var a=r("/SIk"),i=r.n(a),o=r("JwA9"),n=r("klBV"),l=r("6Afj"),s=i().createElement;const c=(0,l.SA)((()=>Promise.all([r.e(6374),r.e(3712)]).then(r.bind(r,"vNnD")))),u=()=>{const[e]=(0,n.z4)();return s(o.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",position:"relative"},name:"depthchart"},s(c,{symbol:e}))}},JwA9:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("/SIk"),i=r.n(a),o=r("w7Tp"),n=r("Fee1"),l=i().createElement;const s=i().memo(i().forwardRef(((e,t)=>l(n.Z,{name:e.name},l(o.Z,Object.assign({},e,{ref:t}),e.children)))))},hiQk:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("kO20"),l=r("ux7Q"),s=r("7uiG"),c=r("klBV"),u=r("VM/Z"),d=r("nnRT"),m=r.n(d),p=o().createElement;const f=(0,n.WidthProvider)(n.Responsive),g=({RenderWGLGrid:e})=>{const{layouts:t,setLayout:r,setLayouts:o,breakpoint:n,setBreakpoint:d,layout:g}=(0,i.useContext)(l.VY),y=(0,i.useCallback)((e=>{e!==n&&d(e)}),[d,n]),[b,h]=(0,s.xG)((e=>[e.disableMouse,e.setDisableMouse])),v=(0,c.gm)(),x=(e,t)=>e&&"chart"===t?"disable-mouse":"",k=(0,i.useCallback)(((e,t,r)=>{h(!1),"orderForm"===r.i&&(r.w<t.w&&(r.w=r.minW),r.w>t.w&&(r.w=r.maxW))}),[h]),{0:S,1:P}=(0,i.useState)(1),T=(0,i.useCallback)((()=>{P(3)}),[]),C=(0,i.useCallback)((()=>{P(1)}),[]),M=(0,i.useMemo)((()=>g.map((t=>p("div",{className:x(b,t.i),key:t.i,suppressHydrationWarning:!0,style:{zIndex:"subHeader"===t.i?2:S}},p(e,{el:t,layout:g,setLayout:r}))))),[g,b,S,e,r]);return!t||u.sk?null:p(f,{className:"layout",cols:l.e_,layouts:t,useCSSTransforms:"rtl"!==v,onBreakpointChange:y,rowHeight:10,margin:[1,1],autoSize:!0,draggableCancel:".draggableCancel",draggableHandle:".draggableHandle",containerPadding:[0,0],onLayoutChange:(e,r)=>{if(m()(e,g)&&m()(r,t))return;const i=Object.keys(t).find((e=>!m()(t[e],r[e])));if(i&&i!==n){const e=t[i].map((e=>e.i)),n=r[i].map((e=>e.i));if(!m()(e,n))return o((0,a.Z)((0,a.Z)({},r),{},{[i]:[...t[i],{i:"forceUpdate",x:0,y:0,h:0,w:0}]}))}return o(r)},onResizeStart:()=>{h(!0)},onResizeStop:k,breakpoints:l.j$,onDragStart:T,onDragStop:C},M)},y=(0,i.memo)(g)},DQ97:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var a=r("5vwO"),i=r("kO20"),o=r("/SIk"),n=r.n(o),l=r("szIg"),s=r("Uqe+"),c=r("ux7Q"),u=r("7OE6"),d=r("6C5I"),m=r("VM/Z"),p=r("/MJE"),f=r("SJeZ"),g=n().createElement;const y=(0,u.x)(),{constants:b,onAppEvent:h}=p.Z,v=({FullScreenLayout:e,Layout:t})=>{(0,f.G3)();const r=(0,l.useSelector)(d.Xj),n=((0,l.useSelector)((e=>e.setting.USDTFutures.layoutDetail)),(0,l.useSelector)((e=>e.setting.CoinFutures.layoutDetail)),(0,l.useSelector)((e=>e.setting.futuresLayoutDetail))),u=i.Responsive.utils.getBreakpointFromWidth(c.j$,y),{0:p,1:v}=(0,o.useState)(u),[x,k]=(0,s.Z)(m.v6,c.gH),S=(0,o.useRef)(c.EY),P=(0,o.useMemo)((()=>Object.keys(x).reduce(((e,t)=>{let r=Object.keys(n).map((e=>n[e]&&(x[t].find((t=>t.i===e))||S.current[t].find((t=>t.i===e))))).filter(Boolean);return t===p&&(n.market?r.market=(0,c.C1)(r,t):r=(0,c.I5)(r,t),n.verticalDepth?r.verticalDepth=(0,c.oq)(r,t):r=(0,c.ys)(r)),e[t]=r,e}),(0,a.Z)({},S.current))),[n,x,p]),[T,C]=(0,s.Z)(m.VM,c.t3),M=((0,o.useMemo)((()=>x[p].filter((e=>"forceUpdate"!==e.i))),[x,p]),P[p]),Z=(0,o.useCallback)((e=>{k((0,a.Z)((0,a.Z)({},x),{},{[p]:e}))}),[k,x,p]);return(0,o.useEffect)((()=>{const e=h(b.APPEVENT_RESET_FUTURES_USDT_LAYOUT,(e=>{k(c.gH)}));return()=>{null===e||void 0===e||e()}}),[]),(0,o.useEffect)((()=>{T!==c.t3&&(C(c.t3),k(c.gH))}),[T]),r?e:g(c.VY.Provider,{value:{layouts:P,setLayouts:k,layout:M,setLayout:Z,breakpoint:p,setBreakpoint:v}},t)},x=(0,o.memo)(v)},RfYP:(e,t,r)=>{"use strict";r.d(t,{KP:()=>c,rr:()=>d,S9:()=>p,Tc:()=>g});var a=r("/SIk"),i=r.n(a),o=r("ka4r"),n=r("klBV"),l=i().createElement;const s={color:"t.third",height:"100%",alignItems:"center",fontFamily:"BinancePlex",fontWeight:"medium",pr:"16px",fontSize:"14px"},c=i().memo((({i18nKey:e,defaultValue:t,active:r,suffix:a,testId:i})=>{const{getI18n:c}=(0,n.ZK)();return l(o.Z,{className:""+(r?"active":""),sx:s,active:r,"data-testid":i},c(e,{defaultValue:t}),a)})),u=i().memo((({active:e,i18nKey:t="trd-layout-tabOpenOrder"})=>{const{preOrders:r}=(0,n.E)();return l(c,{i18nKey:t,defaultValue:"Open Orders",active:e,suffix:`(${r.length})`,testId:"OpenOrder"})})),d=e=>l(u,{active:e}),m=i().memo((({active:e,i18nKey:t="trd-layout-tabOrderHistory"})=>l(c,{i18nKey:t,defaultValue:"Order History",active:e,testId:"OrderHistory"}))),p=e=>l(m,{active:e}),f=i().memo((({active:e,i18nKey:t="trd-layout-tabTradeHistory"})=>l(c,{i18nKey:t,defaultValue:"Trade History",active:e,testId:"TradeHistory"}))),g=e=>l(f,{active:e})},"/Kmz":(e,t,r)=>{"use strict";r.d(t,{O:()=>a});const a={bg:"overallBg",display:"grid",width:"100vw",height:"100vh",minHeight:"680px"}},ux7Q:(e,t,r)=>{"use strict";r.d(t,{j$:()=>x,e_:()=>k,EY:()=>C,gH:()=>T,ZJ:()=>P,mZ:()=>Z,t3:()=>v,VY:()=>w,HC:()=>A,y3:()=>E,oq:()=>L,C1:()=>R,ys:()=>N,I5:()=>O,tv:()=>I});var a=r("5vwO"),i=r("/SIk");const o=[{i:"favorite",x:0,y:0,w:18,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:18,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:18,h:52},{i:"orderbook",x:18,y:0,w:3,h:43},{i:"trades",x:18,y:43,w:3,h:20},{i:"userinfo",x:0,y:63,w:21,h:50},{i:"orderForm",x:21,y:0,w:3,h:63,minW:3,maxW:6},{i:"marginRatio",x:21,y:63,w:3,h:17},{i:"assetsCard",x:21,y:80,w:3,h:33},{i:"verticalDepth",x:0,y:64,w:21,h:13,hidden:!0},{i:"market",x:0,y:11,w:3,h:52,minW:3,hidden:!0}],n=[{i:"subHeader",x:0,y:0,isResizable:!1,w:18,h:7},{i:"chart",x:0,y:7,w:18,h:52},{i:"orderbook",x:18,y:0,w:3,h:39},{i:"trades",x:18,y:43,w:3,h:20},{i:"userinfo",x:0,y:59,w:21,h:50},{i:"orderForm",x:21,y:0,w:3,h:59,minW:3,maxW:6},{i:"marginRatio",x:21,y:63,w:3,h:17},{i:"assetsCard",x:21,y:80,w:3,h:33},{i:"verticalDepth",x:0,y:60,w:21,h:13,hidden:!0},{i:"market",x:0,y:7,w:3,h:52,minW:3,hidden:!0}],l=[{i:"favorite",x:0,y:0,w:16,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:16,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:16,h:52},{i:"orderbook",x:16,y:0,w:4,h:43},{i:"trades",x:16,y:43,w:4,h:20},{i:"userinfo",x:0,y:63,w:20,h:50},{i:"orderForm",x:20,y:0,w:4,h:63,minW:4,maxW:8},{i:"marginRatio",x:20,y:63,w:4,h:17},{i:"assetsCard",x:20,y:80,w:4,h:33},{i:"verticalDepth",x:0,y:64,w:20,h:13,hidden:!0},{i:"market",x:0,y:11,w:4,h:52,minW:4,hidden:!0}],s=[{i:"subHeader",x:0,y:0,isResizable:!1,w:16,h:7},{i:"chart",x:0,y:7,w:16,h:52},{i:"orderbook",x:16,y:0,w:4,h:39},{i:"trades",x:16,y:43,w:4,h:20},{i:"userinfo",x:0,y:59,w:20,h:50},{i:"orderForm",x:20,y:0,w:4,h:59,minW:4,maxW:8},{i:"marginRatio",x:20,y:63,w:4,h:17},{i:"assetsCard",x:20,y:80,w:4,h:33},{i:"verticalDepth",x:0,y:60,w:20,h:13,hidden:!0},{i:"market",x:0,y:7,w:4,h:52,minW:4,hidden:!0}],c=[{i:"favorite",x:0,y:0,w:15,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:15,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:15,h:52},{i:"orderbook",x:15,y:0,w:4,h:43},{i:"trades",x:15,y:43,w:4,h:20},{i:"userinfo",x:0,y:63,w:19,h:50},{i:"orderForm",x:19,y:0,w:5,h:63,minW:5,maxW:10},{i:"marginRatio",x:19,y:63,w:5,h:17},{i:"assetsCard",x:19,y:80,w:5,h:33},{i:"verticalDepth",x:0,y:64,w:19,h:13,hidden:!0},{i:"market",x:0,y:11,w:4,h:52,minW:4,hidden:!0}],u=[{i:"subHeader",x:0,y:0,isResizable:!1,w:15,h:7},{i:"chart",x:0,y:7,w:15,h:52},{i:"orderbook",x:15,y:0,w:4,h:39},{i:"trades",x:15,y:43,w:4,h:20},{i:"userinfo",x:0,y:59,w:19,h:50},{i:"orderForm",x:19,y:0,w:5,h:59,minW:5,maxW:10},{i:"marginRatio",x:19,y:63,w:5,h:17},{i:"assetsCard",x:19,y:80,w:5,h:33},{i:"verticalDepth",x:0,y:60,w:19,h:13,hidden:!0},{i:"market",x:0,y:7,w:4,h:52,minW:4,hidden:!0}],d=[{i:"favorite",x:0,y:0,w:14,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:14,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:14,h:52,minW:6,minH:6},{i:"orderbook",x:14,y:0,w:5,h:43},{i:"trades",x:14,y:43,w:5,h:20},{i:"userinfo",x:0,y:63,w:19,h:50},{i:"orderForm",x:19,y:0,w:5,h:63,minW:5,maxW:10},{i:"marginRatio",x:19,y:63,w:5,h:17},{i:"assetsCard",x:19,y:80,w:5,h:33},{i:"verticalDepth",x:0,y:64,w:19,h:13,hidden:!0},{i:"market",x:0,y:11,w:4,h:52,minW:4,hidden:!0}],m=[{i:"subHeader",x:0,y:0,isResizable:!1,w:14,h:7},{i:"chart",x:0,y:7,w:14,h:52,minW:6,minH:6},{i:"orderbook",x:14,y:0,w:5,h:39},{i:"trades",x:14,y:43,w:5,h:20},{i:"userinfo",x:0,y:59,w:19,h:50},{i:"orderForm",x:19,y:0,w:5,h:59,minW:5,maxW:10},{i:"marginRatio",x:19,y:63,w:5,h:17},{i:"assetsCard",x:19,y:80,w:5,h:33},{i:"verticalDepth",x:0,y:60,w:19,h:13,hidden:!0},{i:"market",x:0,y:7,w:4,h:52,minW:4,hidden:!0}],p=[{i:"favorite",x:0,y:0,w:24,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:24,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:13,h:55},{i:"orderbook",x:13,y:11,w:5,h:32},{i:"trades",x:13,y:44,w:5,h:23},{i:"userinfo",x:0,y:66,w:18,h:37},{i:"orderForm",x:18,y:11,w:6,h:55,minW:6,maxW:12},{i:"marginRatio",x:18,y:66,w:6,h:17},{i:"assetsCard",x:18,y:83,w:6,h:20},{i:"verticalDepth",x:0,y:66,w:18,h:13,hidden:!0},{i:"market",x:0,y:11,w:5,h:52,minW:5,hidden:!0}],f=[{i:"subHeader",x:0,y:0,isResizable:!1,w:24,h:7},{i:"chart",x:0,y:7,w:13,h:55},{i:"orderbook",x:13,y:11,w:5,h:32},{i:"trades",x:13,y:44,w:5,h:23},{i:"userinfo",x:0,y:64,w:18,h:37},{i:"orderForm",x:18,y:11,w:6,h:55,minW:6,maxW:12},{i:"marginRatio",x:18,y:66,w:6,h:17},{i:"assetsCard",x:18,y:83,w:6,h:20},{i:"verticalDepth",x:0,y:62,w:18,h:13,hidden:!0},{i:"market",x:0,y:7,w:5,h:52,minW:5,hidden:!0}],g={i:"chart",getTitle:e=>e("trd-layout-chartTle")},y={i:"orderbook",getTitle:e=>e("trd-layout-orderBookTle")},b={i:"trades",getTitle:e=>e("trd-layout-tradesTle")},h={i:"userinfo",getTitle:e=>`${e("trd-layout-tabPosition")} & ${e("trd-layout-tabOpenOrder")} `},v=4,x={xl:2e3,lg:1500,md:1439,sm:1200,xs:1023},k={xl:24,lg:24,md:24,sm:24,xs:24},S={xl:o,lg:l,md:c,sm:d,xs:p},P={xl:o.filter((e=>!e.hidden)),lg:l.filter((e=>!e.hidden)),md:c.filter((e=>!e.hidden)),sm:d.filter((e=>!e.hidden)),xs:p.filter((e=>!e.hidden))},T={xl:n.filter((e=>!e.hidden)),lg:s.filter((e=>!e.hidden)),md:u.filter((e=>!e.hidden)),sm:m.filter((e=>!e.hidden)),xs:f.filter((e=>!e.hidden))},C={xl:n,lg:s,md:u,sm:m,xs:f},M={xl:JSON.parse(JSON.stringify(n)),lg:JSON.parse(JSON.stringify(s)),md:JSON.parse(JSON.stringify(u)),sm:JSON.parse(JSON.stringify(m)),xs:JSON.parse(JSON.stringify(f))},Z=[{i:"favorite",getTitle:e=>e("trd-layout-favouriteTle")},{i:"market",x:0,y:0,w:4,h:27,minW:4,minH:6,getTitle:e=>e("trd-layout-MarketTle"),setting:!1},g,{i:"verticalDepth",x:11,y:27,w:16,h:9,minW:2,minH:2,getTitle:e=>e("trd-chart-Depth")},y,b,h,{i:"orderForm",getTitle:(e,t)=>t("placeOrder",{defaultValue:"Place Order"})},{i:"marginRatio",getTitle:(e,t)=>t("tradeHistory-positions-marginRatioLabel")},{i:"assetsCard",getTitle:(e,t)=>t("assets")}],w=(0,i.createContext)({layout:P.lg,layouts:P,breakpoint:"lg",setBreakpoint:()=>{},setLayout:()=>{},setLayouts:()=>{},showFavourite:!0,setFavourite:()=>{},dragged:!1,setDragged:()=>{}}),I=(e,t="lg")=>{const r=S[t].find((e=>"market"===e.i)),a=e.find((e=>"chart"===e.i)),i=S[t].find((e=>"chart"===e.i));return a&&i&&r&&a.x===i.x+r.w&&a.y===i.y&&a.w===i.w-r.w&&(a.x=i.x,a.w=i.w),e.filter((e=>"market"!==e.i))},E=(e,t)=>{const r=S[t].find((e=>"market"===e.i)),a=S[t].find((e=>"chart"===e.i)),i=e.find((e=>"chart"===e.i));return i&&a&&r&&i.x===a.x&&i.y===a.y&&(i.x+=r.w,i.w-=r.w),[...e,r]},N=e=>e.filter((e=>"verticalDepth"!==e.i)),A=(e,t)=>{const r=e.find((e=>"userinfo"===e.i)),a=S[t].find((e=>"verticalDepth"===e.i)),i=S[t].find((e=>"userinfo"===e.i));return r&&i&&a&&r.y===i.y&&(r.y+=a.h),[a,...e]},R=(e,t="lg")=>{const r=M[t].find((e=>"market"===e.i)),i=M[t].find((e=>"chart"===e.i)),o=e.find((e=>"chart"===e.i));return o&&i&&r&&o.x===i.x&&o.y===i.y&&(o.x+=r.w,o.w-=r.w),(0,a.Z)({},r)},O=(e,t="lg")=>{const r=M[t].find((e=>"market"===e.i)),a=e.find((e=>"chart"===e.i)),i=M[t].find((e=>"chart"===e.i));return a&&i&&r&&a.x===i.x+r.w&&a.y===i.y&&a.w===i.w-r.w&&(a.x=i.x,a.w=i.w),e.filter((e=>"market"!==e.i))},L=(e,t="lg")=>{const r=e.find((e=>"userinfo"===e.i)),a=M[t].find((e=>"verticalDepth"===e.i)),i=M[t].find((e=>"userinfo"===e.i));return r&&i&&a&&r.y===i.y&&(r.y+=a.h),a}},"z+x3":(e,t,r)=>{"use strict";r.d(t,{ZK:()=>i,FA:()=>o,c9:()=>n,is:()=>l});var a=r("klBV");const i=e=>(0,a.ZK)("trd-layout",e),o=405,n="screen",l="screen and (max-width: 767px)"},vt3k:(e,t,r)=>{"use strict";r.d(t,{dh:()=>y,TE:()=>s,Yr:()=>d});var a=r("/SIk"),i=r.n(a),o=(r("W33l"),r("U0yl"),r("/MJE")),n=(r("VM/Z"),i().createElement);const l=({children:e})=>n(i().Fragment,null,i().cloneElement(e,{onClick:e=>{e&&e.preventDefault(),o.Z.login()},href:"#"})),s=e=>n(l,e);var c=i().createElement;const u=({children:e})=>c(i().Fragment,null,i().cloneElement(e,{onClick:e=>{e&&e.preventDefault(),o.Z.register()},href:"#"})),d=e=>c(u,e);var m=r("GpFh"),p=r("/yzf"),f=r("869M"),g=i().createElement;const y=e=>{let{link:t}=e,r=(0,m.Z)(e,["link"]);const{getI18n:a}=(0,f.yk)();return g(p.Z,Object.assign({as:"a",variant:"addressLink",href:t,target:"_blank",color:"t.yellow",fontSize:12},r),a("learnMore",{defaultValue:"Learn More"}))}},DCFU:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var a=r("GDnE"),i=r("/SIk"),o=r.n(i),n=r("ka4r"),l=r("/yzf"),s=r("5vwO");const c={offset:0,x:!0},u=e=>"function"===typeof e,d=e=>e&&"object"===typeof e&&!(0,i.isValidElement)(e),m=(e,t)=>{const r=d(e),a=d(t);if(r&&r===a){const r=Object.keys(e),a=Object.keys(t);if(r.length===a.length)return Number(r.every((r=>m(e[r],t[r]))))}else if(u(e)&&u(t)||(0,i.isValidElement)(e)&&(0,i.isValidElement)(t))return!0;return Number(e===t)};function p(e,t=0,r=!0){const{top:a,right:i,bottom:o,left:n,width:l,height:s}=e.getBoundingClientRect(),{clientWidth:c,clientHeight:u}=document.documentElement;return(l>0||s>0)&&o>=-t&&a<u+t&&(!r||i>=-t&&n<c+t)}class f extends i.PureComponent{constructor(e){super(e),(0,a.Z)(this,"rootRef",(0,i.createRef)(null)),(0,a.Z)(this,"checkUpdate",(()=>{const{current:e}=this.rootRef;return e&&!this.unmount})),(0,a.Z)(this,"checkViewport",(e=>{const{index:t}=this,{current:r}=this.rootRef,{check:a,noLazy:i}=this.props;if(this.checkUpdate()){const{offset:o,x:n}=(0,s.Z)((0,s.Z)({},c),a);i||p(r,o,n)?(delete f.instances[t],this.inViewPort(e)):f.instances[t]=this}})),(0,a.Z)(this,"inViewPort",(()=>{})),(0,a.Z)(this,"equalUpdate",((e,t)=>{m(e,t)||this.checkViewport()})),this.index=f.count,f.count+=1}componentDidUpdate(e){const t=(0,s.Z)((0,s.Z)({},this.props),{},{check:null}),r=(0,s.Z)((0,s.Z)({},e),{},{check:null});this.equalUpdate(r,t)}componentDidMount(){this.checkViewport()}componentWillUnmount(){delete f.instances[this.index],this.unmount=!0}}(0,a.Z)(f,"instances",{}),(0,a.Z)(f,"count",0),(0,a.Z)(f,"reactEquals",m),(0,a.Z)(f,"isInViewport",p),(0,a.Z)(f,"checkViewport",(()=>{const{instances:e}=f;Object.keys(e).forEach((t=>{const r=e[t];r&&r.checkViewport()}))}));{const e=function(e,t){let r=null;return function(){r||(r=setTimeout((()=>{e.apply(this,[].slice.call(arguments,0)),r=null}),t))}}(f.checkViewport,100);document.addEventListener("scroll",e,!0),document.addEventListener("transitionend",e,!0)}const g=f;var y=o().createElement;const b=class extends g{constructor(...e){super(...e),(0,a.Z)(this,"state",{loading:!1}),(0,a.Z)(this,"checkUpdate",(()=>{const{loading:e}=this.state,{current:t}=this.rootRef;return t&&!e&&!this.unmount})),(0,a.Z)(this,"inViewPort",(()=>{const{showMore:e}=this.props;this.setState({loading:!0},(()=>{new Promise((t=>{e().then((()=>t(!1))).catch((e=>("undefined"!==typeof Sentry&&Sentry.captureException(e),t(!0))))})).then((()=>{g.instances[this.index]=this})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}))}))}componentWillReceiveProps({loading:e,error:t}){this.state.loading!==e&&setTimeout((()=>{this.setState({loading:e,error:t})}),2e3)}render(){const{rootRef:e,props:t}=this;return y(n.Z,{sx:{width:"100%",minHeight:"2px",justifyContent:"center",alignItems:"center",color:"t.secondary"},ref:e},t.error?y(l.Z,{onClick:this.inViewPort},"\u52a0\u8f7d\u5931\u8d25\uff0c\u70b9\u51fb\u91cd\u8bd5"):null)}}},zZ5f:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("7nmT"),l=r("rUHi"),s=o().createElement;const c={position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},u=({show:e=!0,fullScreen:t=!1,inner:r=!1,children:i=null,zIndex:n="100"})=>{if(!e)return i||null;const u=s(l.Z,{sx:(0,a.Z)({zIndex:n||"100"},c)});return s(o().Fragment,null,i,t?s("div",{style:{position:r?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(rgba(0, 0, 0, 0.05) 30%, transparent)",zIndex:2e3}},u):u)};let d;u.show=({fullScreen:e=!1}={})=>{d||(d=document.createElement("div"),document.body.appendChild(d)),n.render(s(u,{fullScreen:e}),d)},u.hide=()=>{d&&n.render(s(u,{show:!1}),d)};const m=u},PMF4:(e,t,r)=>{"use strict";r.d(t,{u:()=>p});var a=r("/SIk"),i=r.n(a),o=r("ka4r"),n=r("w7Tp"),l=r("XVzo"),s=r("0DEp"),c=r("vt3k"),u=r("klBV"),d=r("z+x3"),m=i().createElement;const p=({children:e,active:t=!1,height:r})=>{const{getI18n:a}=(0,d.ZK)(),{isLoggedIn:p,isLoading:f}=(0,u.f0)();return f||!s.C?null:p?i().cloneElement(e,{active:t}):m(o.Z,{sx:{justifyContent:"center",height:r||"100%",alignItems:"flex-end",color:"t.primary"}},m(n.Z,{sx:{height:"100%",fontSize:1,display:"flex",alignItems:"center"}},m(c.TE,null,m(l.Z,{as:"a",variant:"text",sz:"tiny",px:"2px",py:"4px",fontSize:1},a("tabLogIn",{defaultValue:"Log In"}))),"\xa0",a("tabOr",{defaultValue:"or"}),"\xa0",m(c.Yr,null,m(l.Z,{as:"a",variant:"text",sz:"tiny",px:"2px",py:"4px",fontSize:1},a("tabRegister",{defaultValue:"Register now"}))),"\xa0",a("tabStart",{defaultValue:"to start trading."})))}},vvaW:(e,t,r)=>{"use strict";r.d(t,{d:()=>u});var a=r("/SIk"),i=r.n(a),o=r("0hOy"),n=r("aUqa"),l=r("869M"),s=i().createElement;const c={display:"inline-flex",alignItems:"center",textDecoration:"none",ml:"8px"},u=({href:e,text:t,target:r})=>{const{getI18n:a}=(0,l.yk)(),i=t||a("learnMore",{defaultValue:"Learn More"});return s(o.Z,{variant:"standardLink",sx:c,href:e,target:r},i,s(n.Z,{size:12,ml:"2px",color:"t.yellow"}))}},LxGj:(e,t,r)=>{"use strict";r.d(t,{a:()=>I});var a=r("/SIk"),i=r.n(a),o=r("w7Tp"),n=r("fSg7"),l=r("l4n0"),s=r("Y+MU"),c=r("HDtI"),u=r("/yzf"),d=r("vJ4P"),m=r("869M"),p=r("eXOl"),f=r("VM/Z"),g=r("vvaW"),y=i().createElement;var b=r("5vwO"),h=r("IHSN"),v=r("7H20"),x=r("IcOa"),k=r("LcTY"),S=r("FOuV"),P=i().createElement;const T=(0,f.l6)(!0);var C=r("hlj2"),M=i().createElement;var Z=i().createElement;const w={marginTop:"1px"},I=({height:e})=>{const t=(()=>{const{getI18n:e,i18n:{language:t}}=(0,m.yk)(),{search:r}=(0,l.Hb)(),i=(0,p.j2)(),{symbol:o,settlePlan:n}=i,{0:b,1:h}=(0,a.useState)(!1),{fullName:v}=(0,s.H)(i,e),x=(0,a.useCallback)((()=>{h(!1)}),[]),{eventType:k,contractStatus:S,symbol:P}=(0,d.g)();return(0,a.useEffect)((()=>{if("contractInfo"!==k||P!==o||"CLOSE"!==S)return h(n>0),x;window.location.href=`${f.$g}/${t}/futures/BTC_USDT${r}`}),[S,P,k,x,t,r,n,o]),{content:b?y("div",null,y(u.Z,{color:"t.primary",as:"span"},e("settle-warning",{symbol:v,date:`${(0,c.v)(new Date(n),"yyyy-MM-dd hh:mm")}`})),y(g.d,{href:(0,f.b$)(t),target:"_blank"})):null,onClose:x}})(),r=(()=>{const{getI18n:e,i18n:{language:t}}=(0,m.yk)(),{isLoggedIn:r}=(0,x.f0)(),{isExistFutureAccount:i}=(0,x.Pc)(),[o]=(0,v.z)(),n=(0,p.j2)(),{0:l,1:c}=(0,a.useState)({[o]:!1}),{fullName:d}=(0,s.H)(n,e),f=(0,a.useCallback)((()=>{c((e=>(0,b.Z)((0,b.Z)({},e),{},{[o]:!1})))}),[o]);return(0,a.useEffect)((function(){if(i&&r)return async function(){const{data:e}=await(0,h.qq)({});c((t=>e.reduce(((e,t)=>(e[t.symbol]=!0,e)),(0,b.Z)({},t))))}(),T.getStrategyStream&&T.getStrategyStream().subscribe((({streategy:t={}})=>{const{code:r,symbol:a,strategyStatus:i,strategyType:o}=t;"GRID"===o&&(8003===r&&k.T.emit(k.F.NOTIFICATION,e("grid-canceled",{defaultValue:"Manually placing or cancelling an order of {{symbol}} has stopped the grid.",symbol:a}),{variant:"warning"}),c((e=>(0,b.Z)((0,b.Z)({},e),{},{[a]:"NEW"===i||"WORKING"===i}))))}))}),[i,r]),{content:l[o]?P("div",null,P(u.Z,{color:"t.primary",as:"span"},e("grid-warning",{defaultValue:"{{symbol}} is in Grid Trading. Manual trading, canceling orders or closing positions, of the symbol terminates Grid Strategy.",symbol:d})),P(g.d,{href:(0,S.CN)(S.x.GRID_LEARN_URL,{locale:t,symbol:o,activeTab:"workingGrid"})})):null,onClose:f}})(),i=(()=>{const{t:e,getI18n:t,i18n:{language:r}}=(0,m.yk)(),{isLoggedIn:i}=(0,x.f0)(),{isExistFutureAccount:o}=(0,x.Pc)(),[n]=(0,v.z)(),l=(0,p.j2)(),{0:c,1:u}=(0,a.useState)(0),{0:d,1:f}=(0,a.useState)({[n]:0}),{fullName:y}=(0,s.H)(l,t),h=d[n],k=(0,a.useCallback)((()=>{f((e=>(0,b.Z)((0,b.Z)({},e),{},{[n]:0})))}),[n]);return(0,a.useEffect)((function(){o&&i&&async function(){const{data:e}=await(0,C.OM)();u(e.length),f((t=>e.reduce(((e,t)=>(e[t.symbol]=e[t.symbol]?e[t.symbol]+1:1,e)),(0,b.Z)({},t))))}()}),[o,i]),{content:h>0?M("div",null,e("twap-warning",{defaultValue:"{{symbol}} is running TWAP Strategy. Manual trading, canceling orders or closing positions, of the symbol will not affect the total size of the strategy will execute.",symbol:y}),M(g.d,{href:(0,S.CN)(S.x.TWAP_LEARN_URL,{locale:r,symbol:n}),text:`${e("total-twap-orders",{defaultValue:"Total TWAP Orders"})} (${c})`})):null,onClose:k}})(),I=(0,a.useMemo)((()=>[t,r,i].filter((e=>Boolean(e.content)))),[t,r,i]);return 0===I.length?null:Z(o.Z,{sx:w,height:e},Z(n.v,{messages:I}))}},"96Xb":(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var a=r("/SIk"),i=r.n(a),o=r("w7Tp"),n=r("fSg7"),l=r("CQld"),s=r("klBV"),c=r("vd8b"),u=r("SJeZ"),d=r("vvaW"),m=r("uH0D"),p=i().createElement;const f={marginTop:"1px",height:"40px"},g=({type:e="umfutures"})=>{const{getI18n:t}=(0,u.yk)(),[r]=(0,s.z4)(),i=(0,c.pZ)((e=>e.announmentList)),[g,y]=(0,c.hM)(),b=(0,a.useMemo)((()=>(0,c.L0)(i,g||{},r,e).map((e=>({content:p("div",null,e.title,p(d.d,{href:(0,m.b)((null===e||void 0===e?void 0:e.path)||e.url),text:t("view-more"),target:"_blank"})),onClose:()=>(0,c.V$)(e.id,g||{},y)})))),[i,g,r,e,t,y]);return 0===b.length?null:p(o.Z,{sx:f},p(n.v,{messages:b,icon:p(l.Z,null)}))},y=i().memo(g)},"8T+8":(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var a=r("/SIk"),i=r.n(a),o=r("xAl0"),n=r("Tr4L"),l=r("IPTi"),s=r("VM/Z"),c=r("TeNm"),u=r("SJeZ"),d=r("klBV"),m=r("fi7b"),p=r("0hOy"),f=r("rdEq"),g=r("FOuV"),y=r("uH0D"),b=i().createElement;const h=(0,s.nM)(),v=i().memo((({markPrice:e,symbol:t})=>{const{formatTk:r}=(0,d.mC)(),{i18n:{language:a},t:i}=(0,u.yk)(),o=`/${a}/${g.yf}/${h?"quarterly/":""}3?index=m&contract=${t}`;return b(f.m,{tip:b(m.c,{t:i,components:{Link:b(p.Z,{target:"_blank",href:(0,y.b)(o)})},i18nKey:"futures-trade-markPrice-tip",defaults:"The current Mark Price. Click to <Link>Learn More</Link>."}),labelSx:{borderBottom:"1px solid",color:"t.third",borderBottomColor:"t.third","&:hover":{color:"primary",borderBottomColor:"primary"}}},r(e))})),x=()=>{var e;const[t]=(0,d.z4)(),r=null===(e=(0,u.CE)()[t])||void 0===e?void 0:e.markPrice;return r?b(v,{markPrice:r,symbol:t}):null};var k=i().createElement;const S=({isMore:e=!1})=>{const{t:t,i18n:{language:r}}=(0,n.$)(),a=(0,u.G3)()?(0,s.RU)():(0,s.BN)(),[i,[m,p]]=(0,d.z4)(),{trades:f}=(0,o.y)({symbol:i,stream:(0,s.l6)(!0),limit:2});let g=0;f[0]&&f[1]&&f[0].price!==f[1].price&&(g=Number(f[0].price)-Number(f[1].price)>0?-1:1);const{tickProps:y}=(0,c.k)(a),b=y?y.showPrice:0;let h,v="status-primary";switch(g){case-1:v="status-sell",h=k(l.Z,{className:`arrow-icon ${v}`});break;case 1:v="status-green",h=k(l.Z,{style:{transform:"rotate(180deg)"},className:`arrow-icon ${v}`});break;default:v="status-primary",h=k("div",{style:{width:"16px"}})}return k("div",{className:"orderbook-ticker"},k("div",{className:`contractPrice ${v}`},b,h),k("div",{className:"markPrice"},k(x,null)),k("div",null,e&&k("a",{className:"more",target:"_blank",href:`/${r}/orderbook/${m}_${p}`,rel:"noreferrer"},t("trd-orderBook-More",{defaultValue:"More"}))))},P=i().memo(S)},a2gA:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var a=r("/SIk"),i=r.n(a),o=r("/yzf"),n=i().createElement;const l={maxWidth:"104px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},s=({children:e})=>n(o.Z,{sx:l},e)},IBbm:(e,t,r)=>{"use strict";r.d(t,{Q:()=>k});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("w7Tp"),l=r("lvqx"),s=r("8uyB"),c=r("k2tD"),u=r("/yzf"),d=r("a2gA"),m=o().createElement;const p={display:"inline-block"},f=({text:e,target:t})=>m(u.Z,{as:"label",htmlFor:t,color:"t.third",sx:p},"string"===typeof e?m(d.u,null,e):e),g={marginTop:"10px",borderRadius:"4px",border:"none !important",fontSize:"14px",bg:"transInputBG",".bn-input-prefix":{display:"flex",alignItems:"center","> label":{height:"22px"}},".bn-input-suffix":{display:"flex",alignItems:"center",height:"100%",marginLeft:"4px"},"> .bn-input-status-disabled":{bg:"transparent !important","> input::placeholder":{color:"t.placeholder"}}},y={width:"100%",height:"40px",margin:"0"},b={border:"none !important",MozAppearance:"textfield","::-webkit-outer-spin-button, ::-webkit-inner-spin-button":{WebkitAppearance:"none"}};var h=o().createElement;const v=/^\d+\.?\d*|%$/,x=/^0+(?=\d)/,k=(0,i.forwardRef)(((e,t)=>{let{precision:r,maxLength:o,value:u,onChange:d,prefix:m,target:p,className:k,maxNumberValue:S}=e,P=(0,a.Z)(e,["precision","maxLength","value","onChange","prefix","target","className","maxNumberValue"]);const T=(0,i.useRef)(`${p}-${(1e3*Math.random()).toFixed(0)}`),C=!Number.isNaN(Number(u)),M=(0,c.nH)(r),Z=e=>{let t=e;if(!v.test(t)&&""!==t||Number.isNaN(Number(t)))return u;t=t.replace(x,"");return(0,s.N3)(t)>r&&(t=t.replace(new RegExp(`^(\\d*\\.\\d{${r}})\\d*`),"$1")),o&&t.split(".")[0].length>o&&(t=u),0===r&&(t=t.replace(".","")),S&&Number(t)>S&&(t=S.toString()),t},w=Z(u);(0,i.useEffect)((function(){w!==u&&"function"===typeof d&&d(w)}),[w,d,u]);return h(n.Z,{sx:g,className:k},h(l.Z,Object.assign({},P,{className:"order-form-input",id:T.current,variant:"inline",boxProps:y,sx:b,type:C?"number":"text",step:M,value:w,onChange:e=>{"function"===typeof d&&d(Z(e.target.value))},onKeyDown:e=>{if(69===e.keyCode||189===e.keyCode||187===e.keyCode)return e.preventDefault(),!1;38!==e.keyCode&&40!==e.keyCode||!(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)||e.preventDefault()},prefix:h(f,{text:m,target:T.current}),ref:t})))}))},b2zI:(e,t,r)=>{"use strict";r.d(t,{T:()=>o,U:()=>n});var a=r("EPGa"),i=r("FOuV");const o={LIMIT_PRICE:"limitPrice",SIDE:"side",UNIT_AMOUNT:"unitAmount",BUY_ORDER_AMOUNT:"buyOrderAmount",SELL_ORDER_AMOUNT:"sellOrderAmount",ACTIVATE_PRICE:"activatePrice",ACTIVATE_PRICE_WORKING_TYPE:"activatePriceWorkingType",PRICE_RATE:"priceRate",TRIGGER_PRICE:"triggerPrice",TRIGGER_PRICE_WORKING_TYPE:"triggerPriceWorkingType",STRATEGY_SIDE:"strategySide",TP_STOP_PRICE:"takeProfitStopPrice",SL_STOP_PRICE:"stopLossStopPrice",TP_STOP_PRICE_WORKING_TYPE:"takeProfitStopPriceWorkingType",SL_STOP_PRICE_WORKING_TYPE:"stopLossStopPriceWorkingType",TP_LIMIT_PRICE:"takeProfitLimitPrice",SL_LIMIT_PRICE:"stopLossLimitPrice",TP_ORDER_TYPE:"takeProfitOrderType",SL_ORDER_TYPE:"stopLossOrderType"},n={[o.SIDE]:void 0,[o.LIMIT_PRICE]:"",[o.UNIT_AMOUNT]:"",[o.BUY_ORDER_AMOUNT]:0,[o.SELL_ORDER_AMOUNT]:0,[o.TRIGGER_PRICE]:"",[o.TRIGGER_PRICE_WORKING_TYPE]:i.gu.MARK_PRICE,[o.STRATEGY_SIDE]:i.O6.LONG,[o.TP_STOP_PRICE]:"",[o.SL_STOP_PRICE]:"",[o.TP_STOP_PRICE_WORKING_TYPE]:i.gu.MARK_PRICE,[o.SL_STOP_PRICE_WORKING_TYPE]:i.gu.MARK_PRICE,[o.TP_LIMIT_PRICE]:"",[o.SL_LIMIT_PRICE]:"",[o.TP_ORDER_TYPE]:a.Jm.TAKE_PROFIT_MARKET,[o.SL_ORDER_TYPE]:a.Jm.STOP_MARKET,[o.ACTIVATE_PRICE]:"",[o.ACTIVATE_PRICE_WORKING_TYPE]:i.gu.MARK_PRICE,[o.PRICE_RATE]:""}},"3szt":(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var a=r("5vwO"),i=r("klBV"),o=r("/SIk"),n=r.n(o),l=r("ka4r"),s=r("+yB+"),c=r("szIg"),u=r("Xj6f"),d=r("VM/Z"),m=r("1U9V"),p=r("sIpC"),f=r("SJeZ"),g=r("IOB8"),y=n().createElement;function b({visible:e,onClose:t}){const r=(0,c.useDispatch)(),a=(0,i._n)(),n=(0,i.tZ)(),l=(0,c.useSelector)(g.Y),{curLeverage:s}=(0,f.rf)(),b=(0,f.G3)(),h=(0,f.$J)(),[v]=(0,i.z4)(),x=(0,i.j2)(),k=(0,o.useCallback)((e=>{r.leverage.updateCurrentLeverage({symbol:v,leverage:e}),m.TB.emit(m.FP.SET_SLIDER_AMOUNT,0)}),[r.leverage,v]),S=(0,m.CN)(b?d.l8.CM_LEVERAGE_MARGIN:d.l8.UM_LEVERAGE_MARGIN,{locale:n}),P=(0,m.CN)(d.O8,{locale:n});return y(u.Z,{visible:e,symbol:v,isLoggedIn:a,lng:n,brackets:l,leverage:s,positions:h,ticker:x,onChangeLeverage:k,onClose:t,toLogin:()=>(0,p.G)(n),enableErrorMsgIntercept:!0,tradingRuleLink:S,positionLimitEnargeLink:P,liquidationInfoLink:(0,m.CN)(d.Wh.LIQ_PRICE,{locale:n})})}var h=r("QbGR"),v=n().createElement;const x=({title:e,visible:t,onClose:r})=>{const{isLoggedIn:a}=(0,i.f0)(),{enable:n}=(0,i.kC)(),{preOrders:l}=(0,i.E)(),s=(0,f.F)(),[u]=(0,i.z4)(),{marginType:d}=(0,f.se)(),m=(0,c.useDispatch)(),g=(0,o.useCallback)((e=>{m.marginType.updateState(e)}),[]);return v(h.Z,{title:e,marginType:d,openOrders:l,symbol:u,validPositionArr:s,toLogin:p.G,visible:t,onClose:r,isLoggedIn:a,isUniAccount:n,onChange:g,enableErrorMsgIntercept:!0})},k=(0,o.memo)(x);var S=n().createElement;const P=({sx:e={},labelSx:t={},className:r})=>{var a;const c="rtl"===(0,i.gm)(),{getI18n:u}=(0,f.yk)(),[d]=(0,i.z4)(),{contractType:m}=(0,i.j2)(),{curLeverage:p=20}=(0,f.rf)(),{marginType:g="CROSSED"}=(0,f.se)(),{0:y,1:h}=(0,o.useState)(!1),{0:v,1:x}=(0,o.useState)(!1);let P;const T=d.split("_");var C;(P=P=`${null===T||void 0===T?void 0:T[0]} ${"PERPETUAL"===m?u("inversePerpetual",{defaultValue:"Perpetual"}):(null===T||void 0===T||null===(a=T[1])||void 0===a?void 0:a.substr(2))||""}`,c)&&(P=P=`${"PERPETUAL"===m?u("perpetual",{defaultValue:"Perpetual"}):(null===T||void 0===T||null===(C=T[1])||void 0===C?void 0:C.substr(2))||""}${null===T||void 0===T?void 0:T[0]}`);return S(n().Fragment,null,S(l.Z,{sx:e,className:r},S(s.Z,{title:"CROSSED"===g?u("header-Cross",{defaultValue:"Cross"}):u("headerIsolated",{defaultValue:"Isolated"}),as:"a",onClick:()=>{h(!0)},"data-testid":"Cross",sx:t},"CROSSED"===g?u("header-Cross",{defaultValue:"Cross"}):u("headerIsolated",{defaultValue:"Isolated"})),S(s.Z,{as:"a",onClick:()=>x(!0),"data-testid":"20x",sx:t},`${p}x`)),y&&S(k,{title:`${P} ${u("MarginModeTitle",{defaultValue:"Margin Mode"})}`,visible:!0,onClose:()=>{h(!1)}}),v&&S(b,{visible:!0,onClose:()=>x(!1)}))},T=n().memo(P);var C=n().createElement;const M={flex:1,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"64px",height:"24px",fontSize:"xs",lineHeight:"24px",padding:0,mr:"5px",borderRadius:"2px",textAlign:"center",cursor:"pointer",display:"inline-block",px:"4px",py:0,bg:"line",":hover":{bg:"bg3",borderColor:"bg3"},a:{color:"t.primary"}},Z={ml:"8px",mr:"20px",minWidth:"auto"};function w({sx:e={},labelSx:t={},className:r}){const{isMobile:n}=(0,i.Fs)(),l=(0,o.useMemo)((()=>(0,a.Z)((0,a.Z)({},Z),e)),[e]),s=(0,o.useMemo)((()=>(0,a.Z)((0,a.Z)({},M),t)),[t]);return C(T,{sx:l,labelSx:s,className:r})}},QKUR:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("e7xo"),s=r("w7Tp"),c=r("klBV"),u=r("U0yl"),d=r("SJeZ"),m=r("/MJE"),p=o().createElement;const f={pt:["24px","0px"],px:["16px","0px"],".mobile-open-futures-account":{bottom:"24px"}},g=()=>{const{getI18n:e}=(0,u.ZK)("trd-futures","trade-ui"),{ref:t}=(0,c.lr)(),r=(0,n.useDispatch)(),{setMessageInfo:i}=(0,c.YT)(),o=(0,c.Pc)(),{value:g}=(0,d.f3)();return p(s.Z,{sx:f},p(l.Z,{refCode:t,afterOpenFuturesAccount:async()=>{i({message:e("openAccout-successOpen",{defaultValue:"open success"}),variant:"success"}),m.Z.updateUserInfo((0,a.Z)((0,a.Z)({},o),{},{isExistFutureAccount:!0})),r.userCenter.updateState({userInfo:(0,a.Z)((0,a.Z)({},o),{},{isExistFutureAccount:!0})}),await r.preference.getPositionMode()},canUseFutureAgentCode:g}))},y=o().memo(g)},hfnl:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var a=r("/SIk"),i=r.n(a),o=r("szIg"),n=r("fi7b"),l=r("O94r"),s=r.n(l),c=r("w7Tp"),u=r("/yzf"),d=r("0hOy"),m=r("ka4r"),p=r("wGPX"),f=r("XDgS"),g=r("4wBm"),y=r("RkbI"),b=r("klBV"),h=r("SJeZ"),v=r("c5N6"),x=r("rdEq"),k=r("R+VW"),S=r("VM/Z"),P=r("uH0D");const T={justifyContent:"space-between",borderTop:"1px solid",borderTopColor:"newLine",mt:"8px",".asset-label":{display:"flex",alignItems:"center",color:"t.primary"}},C={cursor:"pointer"},M={width:"348px",maxWidth:"348px",m:0,".asset-block":{mb:"24px",".asset-title":{fontSize:"14px",lineHeight:"20px",mb:"8px"},".asset-desc":{fontSize:"12px",lineHeight:"16px",whiteSpace:"pre-line"}}},Z={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",".asset-option":{padding:"6px 16px",color:"t.primary","&:hover":{bg:"line"},"&.active":{color:"t.yellow"},fontSize:"14px",lineHeight:"20px"}};var w=i().createElement;const I=i().memo((()=>{const{getI18n:e}=(0,h.yk)(),{t:t}=(0,h.$G)(),r=(0,b.tZ)();return w(i().Fragment,null,w(c.Z,{className:"asset-block"},w(c.Z,{className:"asset-title"},e("singleAsset",{defaultValue:"Single-Asset Mode"})),w(u.Z,{className:"asset-desc"},e("singleAssetDes",{defaultValue:"Supports USD\u24c8-M Futures trading by only using the single margin asset of the symbol. \n PNL of the same margin asset positions can be offset. \n Supports Cross Margin Mode and Isolated Margin Mode."}))),w(c.Z,{className:"asset-block"},w(c.Z,{className:"asset-title"},e("multiAssets",{defaultValue:"Multi-Assets Mode"})),w(u.Z,{className:"asset-desc"},e("multiAssetsDes",{defaultValue:"USD\u24c8-M Futures trading across multiple margin assets. \n PNL can be offset among the different margin asset positions. \n Only supports Cross Margin Mode."}))),w(c.Z,null,w(n.c,{t:t,i18nKey:(0,h.Gv)("assetModeDes"),defaults:"<text>Multi-Assets Mode only applies to USD\u24c8-M Futures. Before activating Multi-Assets Mode, please read the <jump>{{guide}}</jump> in detail to better manage USD\u24c8-M Futures account risk accordingly when using Multi-Assets Mode.</text>",components:{text:w(u.Z,{fontSize:"12px",lineHeight:"16px"}),jump:w(d.Z,{href:(0,P.b)(`/${r}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`),sx:{mt:"0 !important",display:"inline"},target:"_blank"})},values:{guide:e("guide",{defaultValue:"guide"})}})))})),E=(0,a.forwardRef)((({},e)=>{const t=(0,o.useSelector)((e=>e.position.positionMap));return(0,a.useImperativeHandle)(e,(()=>({checkHasIsolated:()=>Object.values(t).some((e=>e.isolated))}))),null})),N=({sx:e={}})=>{var t;const{enable:r}=(0,b.kC)(),{assetMode:i=!1}=(0,h.F7)(),{getI18n:n}=(0,h.yk)(),l=(0,v.useConfirmStore)((e=>e.setVisible)),d=(0,v.useConfirmStore)((e=>e.setAssetMode)),{enqueueNotification:P}=(0,f.Z)(),N=(0,a.useRef)(null),A=[{label:n("singleAsset",{defaultValue:"Single-Asset Mode"}),value:!1},{label:n("multiAssets",{defaultValue:"Multi-Assets Mode"}),value:!0}],R=(0,o.useDispatch)(),O=(0,a.useCallback)((e=>{var t;return(null===N||void 0===N||null===(t=N.current)||void 0===t?void 0:t.checkHasIsolated())?(l(!0),void d(e)):e&&r?void P({message:n("uniAccountChangeAssetModeTip",{defaultValue:"You cannot switch to Multi-Asset Mode under Portfolio Margin mode."}),variant:"error"}):R.preference.changeAssetMode({joinMargin:e}).then((t=>{const{success:r,code:a}=t;r?P({header:n("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:n("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"}):a===S.gU&&!e&&(0,k.n)()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[R.preference,r]);return w(m.Z,{__css:T,sx:e},w(m.Z,{alignItems:"center",mt:"6px"},w(u.Z,{color:"t.third"},n("assetMode",{defaultValue:"Asset Mode"})),w(x.m,{tip:w(I,null),hideUnderLine:!0,enablePortal:!0,tipSx:M,labelSx:C},w(g.Z,{size:16,ml:"6px"}))),w(c.Z,{mt:"6px"},w(p.ZP,{trigger:"hover",enablePortal:!0,overlay:w(c.Z,{sx:Z},A.map((e=>{const{label:t,value:r}=e||{};return w("div",{className:s()({"asset-option":!0,active:r===i}),key:t,onClick:()=>O(r)},t)})))},w("div",{className:"asset-label"},null===(t=A.find((e=>e.value===i)))||void 0===t?void 0:t.label,w(y.Z,{ml:"4px",color:"t.third",size:16})))),w(E,{ref:N}))},A=i().memo(N)},rt3y:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Pe});var a=r("/SIk"),i=r.n(a),o=r("szIg"),n=r("ka4r"),l=r("/yzf"),s=r("w7Tp"),c=r("wGPX"),u=r("0hOy"),d=r("cmuY"),m=r("RkbI"),p=r("iCl3"),f=r("0RPJ"),g=r("fi7b"),y=r("EZOS"),b=r("Ygfp"),h=r.n(b),v=r("1U9V"),x=r("klBV"),k=r("4wBm"),S=r("rdEq"),P=r("uH0D"),T=r("SJeZ"),C=i().createElement;const M=({handleShowAssets:e})=>{const{getI18n:t,i18n:{language:r}}=(0,T.yk)();return C(i().Fragment,null,C(n.Z,{as:"span",sx:{justifyContent:"space-between",alignItems:"center"}},C(l.Z,{sx:{fontSize:"14px",fontWeight:"600",color:"t.primary",flex:"0 0 auto"},as:"span"},t("tradeHistory-positions-marginRatioLabel",{defaultValue:"Margin Ratio"})),C(d.Z,{sx:{transform:"rotate(180deg)",cursor:"pointer"},color:"t.grey500",size:20,onClick:e})),C(n.Z,{sx:{alignItems:"center",justifyContent:"center",color:"t.primary",bg:"dialog.panelBg",fontSize:0,lineHeight:"24px",borderRadius:"40px",px:"8px",cursor:"default",mt:"sm",ml:"auto",mr:"14px",boxSizing:"border-box"}},t("portfolioMargin",{defaultValue:"Portfolio Margin"}),C(S.m,{tip:C(i().Fragment,null,C(l.Z,{variant:"caption"},t("portfolioMarginTip1",{defaultValue:"Under Portfolio Margin Mode,  the Margin Account, USD-M Futures Account and COIN-M Futures Account can be taken as an Unified Account and all the assets in the Unified Account can be used to trade in margin trading and futures trading."})),C(l.Z,{variant:"caption",my:"xs"},t("portfolioMarginTip2",{defaultValue:"If you want to learn more details about Portfolio Margin, please read our guideline."})),C(l.Z,{variant:"caption"},C(u.Z,{href:(0,P.b)(`/${r}/support/faq/5054378212d240cca17ecd6006c11f23`),target:"_blank",variant:"secondaryLink",color:"t.yellow"},t("portfolioMarginGuideline",{defaultValue:"Portfolio Margin Guideline"}))))},C(k.Z,{size:16,ml:"6px"}))))},Z=i().memo(M);var w=r("xfzF"),I=i().createElement;const E={flexDirection:"column","& .content":{mt:["sm","md"]},"& .grid":{display:"grid",gridTemplateColumns:"repeat(3, 33.33%)",gridTemplateRows:"repeat(3, 33.33%)"},"& .rateList":{mb:"sm",maxHeight:["60%","180px"],overflowY:"auto"},"& .row, & .cation":{pb:"xs"},"& .row:last-of-type":{pb:0},"& .cation":{color:"t.third"},"& .row":{color:"t.primary"},"& .updateTime":{pb:"sm",mb:"sm",borderBottom:"1px solid",borderColor:"t.secondary"},"& .info":{color:"t.third",fontSize:0,lineHeight:"16px","& > a":{color:"t.yellow"}},"& .link":{mt:"xs"}},N=({children:e})=>I(l.Z,{variant:"body2"},e),A=({visible:e,onClose:t})=>{const r=(0,x.tZ)(),{t:i}=(0,T.$G)(),{getI18n:o}=(0,T.yk)(),s=(()=>{const e=(0,T.G8)(),t=(0,T.KQ)();return(0,a.useMemo)((()=>Object.entries(e).filter((([e])=>{var r;return null===(r=t[e])||void 0===r?void 0:r.marginAvailable})).map((([,e])=>e))),[e,t])})();return I(w.Z,{open:e,onCloseIconClick:t,sx:{width:["100%","488px"]}},I(n.Z,{__css:E},I(l.Z,{variant:"title6",color:"t.primary"},o("joinMargin-MultiAssetsExchangeRate",{defaultValue:"Multi-Assets Exchange Rate"})),I("div",{className:"content"},I("div",{className:"grid cation"},I(N,null,o("joinMargin-Pair",{defaultValue:"Pair"})),I(N,null,o("joinMargin-AskRate",{defaultValue:"Ask Rate"})),I(N,null,o("joinMargin-BidRate",{defaultValue:"Bid Rate"}))),I("div",{className:"rateList"},s.map((({symbol:e="",askRate:t=0,bidRate:r=0})=>I("div",{key:e,className:"grid row"},I(N,null,e.slice(0,-3),"/",e.slice(-3)),I(N,null,(0,f.GW)(t,4)),I(N,null,(0,f.GW)(r,4)))))),I("div",{className:"info updateTime"},"\xb7"," ",o("joinMargin-UpdateTime",{defaultValue:"Update Time"}),": ",s[0]?(0,v.vs)(s[0].time||0):""," UTC"),I("div",{className:"info"},o("joinMargin-ExchangeRateTip",{defaultValue:"USD valuation of the Margin assets in the USD\u24c8-M Futures account are calculated according to the real-time exchange rate under Multi-Assets mode, including the available balance for orders and withdrawals."})),I("div",{className:"info link"},I(g.c,{t:i,i18nKey:(0,T.Gv)("joinMargin-MultiAssetsCalcDetails"),components:{jump:I("a",{href:(0,P.b)(`/${r}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`),target:"_blank",rel:"noreferrer"})},defaults:"For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump>.",values:{guideLink:o("joinMargin-guidLink")}})))))},R=i().memo(A);var O=r("XN9V"),L=r("5kFy"),V=r("8uyB"),F=r("VM/Z"),D=r("GpFh"),_=r("Zl10"),B=r.n(_),z=r("Srn1"),K=r("M1Kr"),q=r("cPln"),U=r("9JzQ"),W=r("LcTY"),H=r("S24M"),$=r("hfnl"),j=r("z4Ks"),G=r("FOuV"),J=i().createElement;const Y=(0,a.forwardRef)(((e,t)=>{let{children:r}=e,a=(0,D.Z)(e,["children"]);return J(l.Z,Object.assign({variant:"labelButton.default",sx:{flex:1,mr:"xs",py:"4px",color:"t.fifth",lineHeight:"16px",textDecoration:"none",":last-of-type":{mr:"0"}},ref:t},a),r)})),Q=({balance:e,onChange:t,curAsset:r})=>{const a=Object.values(e);return J(s.Z,{sx:{ml:"auto"}},J(c.ZP,{trigger:"hover",overlay:J(s.Z,{variant:"dropdown",sx:{overflowY:"auto",maxHeight:"193px"}},a.map((e=>{const{asset:r}=e||{asset:""};return J(s.Z,{key:r,sx:{px:"sm",pt:"12px",pb:"6px",bg:"control",cursor:"pointer",":last-of-type":{pt:"6px",pb:"12px"}},onClick:()=>{t(r)}},J(l.Z,{color:"t.primary",key:r,value:r,sx:{":hover":{color:"primary"}}},r))})))},J(n.Z,{as:"span",sx:{fontWeight:"400",color:"t.grey300",borderBottom:"2px solid",cursor:"pointer",borderBottomColor:"transparent",alignItems:"center",":hover":{svg:{transform:"rotate(180deg)"}}}},r,J(z.Z,{color:"#929AA5",size:16}))))},X=i().memo((({getFutI18n:e,curAsset:t,balance:r,setCurAsset:a})=>{const i=(0,o.useSelector)((e=>{var t,r;return(null===e||void 0===e||null===(t=e.setting)||void 0===t||null===(r=t.USDTFutures)||void 0===r?void 0:r.layout)||!1})),s=(0,T.C3)()===F.UW||i===F.UW;return J(n.Z,{as:"span",sx:{justifyContent:"space-between"}},J(l.Z,{sx:{fontSize:"16px",fontWeight:"600",color:"t.primary"},as:"span"},e("assets",{defaultValue:"Assets"})),J(Q,{curAsset:t,balance:r,onChange:a}),s&&J(K.Z,{sx:{color:"t.yellow200",border:"1px solid",borderColor:"t.yellow200",cursor:"pointer",borderRadius:"2px",fontSize:"16px",ml:"16px"},onClick:()=>{W.T.emit(W.F.OPEN_TRANSFER_MODAL,t)}}))}),(function(e,t){const{curAsset:r,balance:a,setCurAsset:i}=e,{curAsset:o,balance:n,setCurAsset:l}=t,s=Object.keys(a).join(),c=Object.keys(n).join();return r===o&&i===l&&s===c})),ee=i().memo((({getFutI18n:e,futUrlConfig:t,locale:r,base:i,curAsset:o})=>{const l=(0,a.useRef)(null);return J(n.Z,{sx:{justifyContent:"space-between",pt:"sm",mt:"14px"}},J(Y,{as:"a",onClick:()=>{let e=(0,V.CN)(t.BUYING_URL,{locale:r,crypto:o});e=(0,V.CN)(t.BUYING_URL_ELECTRON,{crypto:o}),window.open(e)}},e("buy-crypto",{defaultValue:"Buy Crypto"})),J(Y,{as:"a",ref:l,onClick:()=>W.T.emit(W.F.OPEN_CONVERT_MODAL),"data-testid":"orderform-convert-button"},e("convert",{defaultValue:"Convert"})),J(Y,{as:"a",onClick:()=>W.T.emit(W.F.OPEN_TRANSFER_MODAL,o),"data-testid":"orderform-transfer-button"},e("transfer",{defaultValue:"Transfer"})))})),te=i().memo((({marginPrecision:e,marginAsset:t})=>{const r=(0,T.Gb)(t);return J(l.Z,{color:"t.fifth"},(0,f.uf)(r||0,e)," ",t)})),re=i().memo((({isEmptyBalance:e,loading:t,getFutI18n:r,walletBalance:o,marginPrecision:c,quoteAsset:u,bnbWalletBalance:d,locale:m})=>{const p=(0,a.useMemo)((()=>J(n.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},J(S.m,{tip:r("tradeHistory-positions-walletBalanceTip",{defaultValue:""})},r("tradeHistory-positions-walletBalanceLabel",{defaultValue:"Wallet Balance"})),J(l.Z,{color:"t.fifth"},(0,f.GW)(o||0,c,!0)," ",u))),[r,u,c,o]);return J(i().Fragment,null,!e&&!t&&J(s.Z,{mt:"16px"},p,J(n.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},J(S.m,{tip:r("tradeHistory-positions-unrealizedPnlTip",{defaultValue:""})},r("tradeHistory-positions-unrealizedPNLLabel",{defaultValue:"Unrealized PNL"})),J(te,{marginPrecision:c,marginAsset:u}))),e&&!t&&J(q.Z,{showIcon:!0,mt:"12px",flexDirection:"row",variant:"warning"},r("TransferAssetToTrading",{defaultValue:"Please transfer assets into futures account to start trading."})))})),ae=({mt:e="50px",noButtons:t})=>{var r,i;const{getI18n:n,i18n:{language:l}}=(0,T.yk)(),c=(0,x._n)(),{assetMode:u=!1}=(0,T.F7)(),[,[d]]=(0,x.z4)(),m=(0,o.useDispatch)(),p=(0,x.Oh)(),f=(0,T.KQ)(),g=(0,T.Kc)("loading"),[,[,y]]=(0,x.z4)(),{0:b,1:h}=(0,a.useState)(y),{isMobile:v}=(0,x.Fs)(),k=Object.values(f),S=k.every((({walletBalance:e})=>!e)),P=!u&&k.some((({walletBalance:e})=>e<0)),[C,M]=B()(k,(({asset:e})=>"BUSD"===e||"USDT"===e)),Z=u&&C.some((({walletBalance:e})=>e<0))&&k.every((({walletBalance:e})=>e<=0));return(0,a.useEffect)((()=>{h(y),m.transferAssets.updateState({transferAsset:y})}),[y,m]),v?null:c?J(s.Z,{mt:e,fontSize:"12px"},J(X,{getFutI18n:n,curAsset:b,balance:f,setCurAsset:h}),t||!F.Jg&&J(ee,{getFutI18n:n,futUrlConfig:G.x,locale:l,base:d,curAsset:b}),!F.Jg&&(P||Z)&&J(j.Z,null),J(U.Z,{isJoinMargin:u,walletBalanceList:k,autoAssetExchangeInfo:p,onTransfer:()=>W.T.emit(W.F.OPEN_TRANSFER_MODAL,b),onConvert:()=>W.T.emit(W.F.OPEN_CONVERT_MODAL),pageName:"um_trading",sensorsTrack:H.j}),J(re,{isEmptyBalance:S,loading:g,getFutI18n:n,walletBalance:null===(r=f[b])||void 0===r?void 0:r.walletBalance,marginPrecision:4,quoteAsset:b,bnbWalletBalance:null===(i=f.BNB)||void 0===i?void 0:i.walletBalance,locale:l}),!S&&!g&&J($.Z,{sx:{flexDirection:"column"}})):null},ie=i().memo(ae);var oe=r("5vwO"),ne=i().createElement;const le=(0,a.forwardRef)(((e,t)=>{let{children:r}=e,a=(0,D.Z)(e,["children"]);return ne(l.Z,Object.assign({variant:"labelButton.default",sx:{flex:1,mr:"xs",py:"4px",color:"t.fifth",lineHeight:"16px",textDecoration:"none",":last-of-type":{mr:"0"}},ref:t},a),r)})),se=({balance:e,onChange:t,curAsset:r,sx:a={}})=>{const i=Object.values(e);return ne(s.Z,{sx:(0,oe.Z)({ml:"auto"},a)},ne(c.ZP,{trigger:"hover",overlay:ne(s.Z,{variant:"dropdown",sx:{overflowY:"auto",maxHeight:"193px"}},i.map((e=>{const{asset:r}=e||{};return ne(s.Z,{key:r,sx:{px:"sm",pt:"12px",pb:"6px",bg:"control",cursor:"pointer",":last-of-type":{pt:"6px",pb:"12px"}},onClick:()=>{t(r)}},ne(l.Z,{color:"t.primary",key:r,value:r,sx:{":hover":{color:"primary"}}},r))})))},ne(n.Z,{as:"span",sx:{fontWeight:"400",color:"t.grey300",borderBottom:"2px solid",cursor:"pointer",borderBottomColor:"transparent",alignItems:"center",":hover":{svg:{transform:"rotate(180deg)"}}}},r,ne(z.Z,{color:"#929AA5",size:16}))))},ce=i().memo((({getFutI18n:e,curAsset:t,balance:r,setCurAsset:a})=>{const i=(0,o.useSelector)((e=>{var t,r;return(null===e||void 0===e||null===(t=e.setting)||void 0===t||null===(r=t.CoinFutures)||void 0===r?void 0:r.layout)||!1})),s=(0,T.C3)()===F.UW||i===F.UW;return ne(n.Z,{as:"span",sx:{justifyContent:"space-between"}},ne(l.Z,{sx:{fontSize:"16px",fontWeight:"600",color:"t.primary"},as:"span"},e("assets",{defaultValue:"Assets"})),ne(se,{curAsset:t,balance:r,onChange:a}),s&&ne(K.Z,{sx:{color:"t.yellow200",border:"1px solid",borderColor:"t.yellow200",cursor:"pointer",borderRadius:"2px",fontSize:"16px",ml:"16px"},onClick:()=>{W.T.emit(W.F.OPEN_TRANSFER_MODAL,t)}}))}),(function(e,t){const{curAsset:r,balance:a,setCurAsset:i}=e,{curAsset:o,balance:n,setCurAsset:l}=t,s=Object.keys(a).join(),c=Object.keys(n).join();return r===o&&i===l&&s===c})),ue=i().memo((({getFutI18n:e,futUrlConfig:t,locale:r,curAsset:i})=>{const o=(0,a.useRef)(null);return ne(n.Z,{sx:{justifyContent:"space-between",pt:"sm",mt:"14px"}},ne(le,{as:"a",onClick:()=>{let e=(0,V.CN)(t.BUYING_URL,{locale:r,crypto:i});e=(0,V.CN)(t.BUYING_URL_ELECTRON,{crypto:i}),window.open(e)}},e("buy-crypto",{defaultValue:"Buy Crypto"})),ne(le,{as:"a",ref:o,onClick:()=>W.T.emit(W.F.OPEN_CONVERT_MODAL),"data-testid":"orderform-convert-button"},e("convert",{defaultValue:"Convert"})),ne(le,{as:"a",onClick:()=>W.T.emit(W.F.OPEN_TRANSFER_MODAL,i),"data-testid":"orderform-transfer-button"},e("transfer",{defaultValue:"Transfer"})))})),de=i().memo((({marginPrecision:e,marginAsset:t})=>{const r=(0,T.w2)(t);return ne(l.Z,{color:"t.fifth"},(0,f.uf)(r||0,e)," ",t)})),me=i().memo((({isEmptyBalance:e,loading:t,getFutI18n:r,walletBalance:a,marginPrecision:o,curAsset:c})=>ne(i().Fragment,null,!e&&!t&&ne(s.Z,{mt:"16px"},ne(n.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},ne(S.m,{tip:r("tradeHistory-positions-walletBalanceTip",{defaultValue:""})},r("tradeHistory-positions-walletBalanceLabel",{defaultValue:"Wallet Balance"})),ne(l.Z,{color:"t.fifth"},(0,f.GW)(a||0,o,!0)," ",c)),ne(n.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},ne(S.m,{tip:r("tradeHistory-positions-unrealizedPnlTip",{defaultValue:""})},r("tradeHistory-positions-unrealizedPNLLabel",{defaultValue:"Unrealized PNL"})),ne(de,{marginPrecision:o,marginAsset:c}))),e&&!t&&ne(q.Z,{showIcon:!0,mt:"12px",flexDirection:"row",variant:"warning"},r("TransferAssetToTrading",{defaultValue:"Please transfer assets into futures account to start trading."}))))),pe=({mt:e="50px",noButtons:t})=>{var r;const{getI18n:i,i18n:{language:n}}=(0,T.yk)(),l=(0,x._n)(),[,[c]]=(0,x.z4)(),u=(0,o.useDispatch)(),d=(0,T.KQ)(),m=(0,T.Kc)("loading"),[,[p]]=(0,x.z4)(),{0:f,1:g}=(0,a.useState)(p),{isMobile:y}=(0,x.Fs)(),b=Object.values(d).every((({walletBalance:e})=>!e)),h=Object.values(d).some((({walletBalance:e})=>e<0));return(0,a.useEffect)((()=>{g(p),u.transferAssets.updateState({transferAsset:p})}),[p,u]),y?null:l?ne(s.Z,{mt:e,fontSize:"12px"},ne(ce,{getFutI18n:i,curAsset:f,balance:d,setCurAsset:g}),t||!F.Jg&&ne(ue,{getFutI18n:i,futUrlConfig:G.x,locale:n,base:c,curAsset:f}),!F.Jg&&h&&ne(j.Z,null),ne(me,{isEmptyBalance:b,loading:m,getFutI18n:i,walletBalance:null===(r=d[f])||void 0===r?void 0:r.walletBalance,marginPrecision:4,curAsset:f})):null},fe=i().memo(pe);var ge=i().createElement;const ye=(0,F.nM)(),be=i().memo((({getFutI18n:e,handleShowAssets:t})=>{const{assetMode:r}=(0,T.F7)();return ge(n.Z,{as:"span",sx:{justifyContent:"space-between",alignItems:"center"}},ge(l.Z,{sx:{fontSize:"14px",fontWeight:"600",color:"t.primary",flex:"0 0 auto"},as:"span"},e("tradeHistory-positions-marginRatioLabel",{defaultValue:"Assets"})),!ye&&ge(s.Z,{sx:{color:"primary",bg:"dialog.panelBg",fontSize:0,lineHeight:"24px",borderRadius:"40px",px:"8px",cursor:"pointer",ml:"auto",mr:"14px"},onClick:()=>v.TB.emit(v.FP.SHOW_PREFERENCE_PANEL,"am")},r?e("joinMargin-multi-assets",{defaultValue:"Multi-Assets"}):e("joinMargin-single-asset",{defaultValue:"Single-Asset"})),ge(d.Z,{sx:{transform:"rotate(180deg)",cursor:"pointer"},color:"t.grey500",size:20,onClick:t}))})),he=({marginRatioList:e,onChange:t,marginRatioLabel:r})=>ge(s.Z,null,ge(c.ZP,{trigger:"hover",overlay:e.map((e=>ge(s.Z,{key:e.key,sx:{px:"sm",maxWidth:"150px",bg:"control",color:"t.primary",cursor:"pointer",":hover":{color:"primary"},":last-of-type":{pt:"6px",pb:"12px"},div:{maxWidth:"100%"}},onClick:()=>{t(e.key)}},ge(l.Z,{key:e.key,value:e.key,sx:{display:"inline-block",maxWidth:"80px",color:"t.priamry"}},e.marginRatioLabel))))},ge(n.Z,{as:"span",sx:{width:"auto",maxWidth:"138px",textAlign:"right",fontWeight:"400",color:"t.grey300",cursor:"pointer",alignItems:"center",":hover":{svg:{transform:"rotate(180deg)"}}}},r,ge(m.Z,{color:"t.grey300",size:24})))),ve=i().memo((({isRtl:e,isJoinMargin:t,marginRatioSelector:r,hasOptions:a,getFutI18n:i,riskRatio:c,maintenanceMargin:d,marginBalance:m,marginAsset:y,marginPrecision:b})=>{const h=(0,x.tZ)(),{t:v}=(0,T.$G)(),{visible:k,onOpen:C,onClose:M}=(0,T.yV)(),Z=ge(u.Z,{href:(0,P.b)(`/${h}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`),target:"_blank",variant:"secondaryLink",color:"t.yellow"}),w=ge(l.Z,{variant:"addressLink",as:"span",sx:{color:"t.yellow",cursor:"pointer",fontSize:"12px"},onClick:C}),I=t?i("joinMargin-accountMarginRatioTip",{defaultValue:"Account Margin Ratio = Account Maintenance Margin / Account Equity"}):i("tradeHistory-positions-marginRatioTip",{defaultValue:""}),E=t?i("joinMargin-accountMarginRatioLabel",{defaultValue:"Account Margin Ratio"}):i("tradeHistory-positions-marginRatioLabel",{defaultValue:"Margin Ratio"}),N=t?ge(g.c,{t:v,i18nKey:(0,T.Gv)("joinMargin-accountMaintenanceMarginTipV2"),components:{jump:Z,showRate:w},defaults:"The sum of USD value of all cross positions maintenance margin in the USD\u24c8-M Futures. For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump> and <showRate>{{exchangeRate}}</showRate>.",values:{guideLink:i("joinMargin-guidLink",{defaultValue:"Multi-Assets Mode guide"}),exchangeRate:i("joinMargin-ExchangeRate",{defaultValue:"Real-time Exchange Rate"})}}):i("tradeHistory-positions-maintenanceMarginTip",{defaultValue:"The minimum amount of margin balance required to keep your open positions."}),A=t?i("joinMargin-accountMaintenanceMarginLabel",{defaultValue:"Account Maintenance Margin"}):i("tradeHistory-positions-maintenanceMarginLabel",{defaultValue:"Maintenance Margin"}),O=t?ge(g.c,{t:v,i18nKey:(0,T.Gv)("joinMargin-accountEquityTipV2"),components:{jump:Z,showRate:w},defaults:"The sum of USD value of all margin balance in the USD\u24c8-M Futures. For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump> and <showRate>{{exchangeRate}}</showRate>.",values:{guideLink:i("joinMargin-guidLink",{defaultValue:"Multi-Assets Mode guide"}),exchangeRate:i("joinMargin-ExchangeRate",{defaultValue:"Real-time Exchange Rate"})}}):i("tradeHistory-positions-marginBalanceTip",{defaultValue:""}),F=t?i("joinMargin-accountEquityLabel",{defaultValue:"Account Equity"}):i("tradeHistory-positions-marginBalanceLabel",{defaultValue:"Margin Balance"}),D=(0,o.useSelector)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),_=(0,o.useSelector)((e=>e.loading.effects.preference.getAssetMode)),B=D||_;return ge(s.Z,{mt:"8px",sx:{borderBottom:"1px solid",borderColor:"t.grey700"}},ge(n.Z,{justifyContent:"space-between",alignItems:"center",lineHeight:"21px"},!t&&a?r:ge(S.m,{tip:I},E),ge(n.Z,{justifyContent:"flex-end",alignItems:"center"},ge(L.Z,{riskRatio:c}),ge(l.Z,{fontSize:3,color:"buy",ml:"8px"},(0,V.JX)(B?0:c,2)||"0.00","%"))),ge(n.Z,{sx:{marginTop:"8px",lineHeight:"16px"},justifyContent:"space-between"},ge(S.m,{tip:N},A),ge(n.Z,{flexDirection:e?"row-reverse":null},ge(l.Z,{color:"t.fifth"},(0,f.uf)(B?0:d,b)),"\xa0",ge(l.Z,{color:"t.fifth"},y))),ge(n.Z,{sx:{marginTop:"8px",lineHeight:"16px",paddingBottom:"11px"},justifyContent:"space-between"},ge(n.Z,null,ge(S.m,{tip:O},F),t&&ge(p.Z,{ml:1,size:2,onClick:C,sx:{cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}}})),ge(n.Z,{flexDirection:e?"row-reverse":void 0},ge(l.Z,{color:"t.fifth"},(0,f.GW)(B?0:m,Number(b),!0)),"\xa0",ge(l.Z,{color:"t.fifth"},y))),ge(R,{visible:k,onClose:M}))})),xe=({handleShowAssets:e})=>{var t;const{getI18n:r}=(0,T.yk)(),o=(0,x._n)(),{enable:n}=(0,x.kC)(),[l]=(0,x.z4)(),{marginAsset:c}=(0,x.j2)(),u=(0,T.KQ)(),d="rtl"===(0,x.gm)(),{0:m,1:p}=(0,a.useState)(""),{positionMode:f=!1}=(0,T.F7)(),g=(0,T.m)(r,f,ye),b=(0,y.Z)(g)||[],v=g.find((e=>e.key===m)),{riskRatio:k=0,marginBalance:S=(null===(t=u[c])||void 0===t?void 0:t.walletBalance)||0,maintenanceMargin:P=0,marginAsset:C=c,marginRatioLabel:M}=v||{},w=e=>{let t;g.length>0&&(t=g.find((e=>e.symbols.some((e=>e===l)))),e||t||(t=g[0]||{}),t&&p(t.key))};(0,a.useEffect)((()=>{v||w()}),[g.length]),(0,a.useEffect)((()=>{const e=h()(g,b,"key").find((e=>e.symbols.some((e=>e===l))));e&&p(e.key)}),[g.length]),(0,a.useEffect)((()=>{w(!0)}),[l]);const I=Boolean(null===g||void 0===g?void 0:g.length);return o?ge("div",null,ge(s.Z,{fontSize:"12px",display:["none","block"]},n?ge(i().Fragment,null,ge(Z,{handleShowAssets:e}),ge(O.Z,{isRtl:d})):ge(i().Fragment,null,ge(be,{getFutI18n:r,handleShowAssets:e}),ge(ve,{marginRatioSelector:ge(he,{marginRatioLabel:M,marginRatioList:g,onChange:p}),hasOptions:I,isRtl:d,isJoinMargin:!1,getFutI18n:r,riskRatio:k,maintenanceMargin:P,marginBalance:S,marginAsset:C,marginPrecision:4}))),ge(ye?fe:ie,{mt:"12px",noButtons:!0})):null},ke=({handleShowAssets:e})=>{const t=(0,x._n)(),{getI18n:r}=(0,T.yk)(),a="rtl"===(0,x.gm)(),{riskRatio:i=0,marginBalance:o,maintenanceMargin:n}=(0,T.Nx)(ye),l=ye?4:2;return t?ge("div",null,ge(s.Z,{fontSize:"12px",display:["none","block"]},ge(be,{getFutI18n:r,handleShowAssets:e}),ge(ve,{isRtl:a,isJoinMargin:!0,getFutI18n:r,riskRatio:i,maintenanceMargin:n,marginBalance:o,marginAsset:"USD",marginPrecision:l})),ge(ye?fe:ie,{mt:"12px",noButtons:!0})):null},Se=({handleShowAssets:e})=>{const{assetMode:t}=(0,T.F7)();return ge(t?ke:xe,{handleShowAssets:e})},Pe=i().memo(Se)},"+yB+":(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("5vwO"),i=r("GpFh"),o=r("/yzf"),n=r("/SIk"),l=r.n(n)().createElement;const s=e=>{let{children:t,sx:r}=e,n=(0,i.Z)(e,["children","sx"]);return l(o.Z,Object.assign({sx:(0,a.Z)({mr:"xs",py:"4px",flex:"1",fontSize:[0],lineHeight:"16px",color:"t.primary",fontWeight:"500",cursor:"pointer",textAlign:"center",borderRadius:"4px",bg:"orderformBtn.bg",textDecoration:"none",":last-of-type":{mr:"0"},":hover":{bg:"t.secondary",borderColor:"t.secondary"}},r)},n),t)}},z4Ks:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("2kM9"),l=r("/yzf"),s=r("VM/Z"),c=r("SJeZ"),u=r("S24M"),d=o().createElement;const m=(0,s.nM)(),p=o().memo((()=>{const{getI18n:e}=(0,c.yk)(),{assetMode:t}=(0,c.F7)(),r=(0,i.useCallback)(((e,t)=>{(0,u.j)(e,(0,a.Z)({module:"asset",df_source:m?"cm":"um",pageName:m?"cm_trading":"um_trading"},t))}),[]),o=(0,i.useCallback)((()=>{r("$WebClick",{$element_id:"negativeBalance_entry"}),n.ee.emit("SHOW_NEG_BALANCE_CLEAR_MODAL",{isJoinMargin:t,isolated:!1,isCM:m,sensorsTrack:r})}),[t,r]);return d(l.Z,{sx:{color:"t.yellow",cursor:"pointer",my:"12px"},onClick:o},e("clear-neg-balance-entry",{defaultValue:"How to Clear Negtive Balance >"}))}))},"5kFy":(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r("/SIk"),i=r.n(a),o=r("w7Tp"),n=r("8uyB"),l=r("klBV"),s=i().createElement;const c=({riskRatio:e,riskDeg:t})=>{const r=t||(e=>(0,n.JX)(2.7*Number(e)-45,0))(e),a=(0,l.Om)(),{buy:i,sell:c,primary:u}=null===a||void 0===a?void 0:a.colors;return s(o.Z,{sx:{position:"relative"}},s(o.Z,{sx:{position:"relative",width:"24px",height:"24px"}},s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.05044 7.05025C8.31719 5.7835 10.0672 5 12.0002 5C13.9332 5 15.6832 5.7835 16.9499 7.05025L18.3642 5.63604C16.7355 4.00736 14.4855 3 12.0002 3C9.51491 3 7.26491 4.00736 5.63623 5.63604L7.05044 7.05025Z",fill:u}),s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.9497 7.05044C18.2165 8.31719 19 10.0672 19 12.0002C19 13.9332 18.2165 15.6832 16.9497 16.9499L18.364 18.3642C19.9926 16.7355 21 14.4855 21 12.0002C21 9.51491 19.9926 7.26491 18.364 5.63623L16.9497 7.05044Z",fill:c}),s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.05025 16.9496C5.7835 15.6828 5 13.9328 5 11.9998C5 10.0668 5.7835 8.31681 7.05025 7.05006L5.63604 5.63585C4.00736 7.26453 3 9.51453 3 11.9998C3 14.4851 4.00736 16.7351 5.63604 18.3638L7.05025 16.9496Z",fill:i}))),s(o.Z,{style:{transform:`rotate(${r}deg)`},sx:{position:"absolute",left:"0",top:"0",transformOrigin:"center",transition:"transform 1s ease",height:"24px",width:"24px"}},s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 12C15 13.6569 13.6569 15 12 15C10.6938 15 9.58254 14.1652 9.17071 13H3V11H9.17071C9.58254 9.83481 10.6938 9 12 9C13.6569 9 15 10.3431 15 12ZM13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12Z",fill:"#5E6673"}))))},u=i().memo(c)},Q9ZO:(e,t,r)=>{"use strict";let a;r.d(t,{C:()=>a}),function(e){e.Normal="NORMAL",e.Horizontal="HORIZONTAL",e.FullScreen="FULL_SCREEN"}(a||(a={}))},SnVb:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r("0RPJ"),i=r("EPGa"),o=r("1U9V");const n=({orderType:e,qty:t=0,triggerPrice:r=0,orderPrice:n=0,contractVal:l,activationPrice:s=0,lastPrice:c=0,markPrice:u=0,isDelivery:d,precision:m=0})=>{let p;switch(e){case i.Jm.STOP_LIMIT:case i.Jm.TAKE_PROFIT_LIMIT:case i.Jm.POST_ONLY:case i.Jm.LIMIT:p=n;break;case i.Jm.MARKET:p=c;break;case i.Jm.STOP_MARKET:case i.Jm.TAKE_PROFIT_MARKET:p=r;break;case i.Jm.TRAILING_STOP_MARKET:p=s||u;break;default:p=n}const f=Number(l);return d?f?(0,a.Jp)(t/f,p).toFixed(0,1):0:(0,o.GW)(t/p,m)}},YkKT:(e,t,r)=>{"use strict";r.d(t,{F:()=>T});var a=r("5vwO"),i=r("3aob"),o=r("0RPJ"),n=r("szIg"),l=r("d2db"),s=r("4m5F"),c=r("EPGa"),u=r("klBV"),d=r("VM/Z"),m=r("LcTY"),p=r("1U9V"),f=r("De8U");var g=r("wqQ1"),y=r("revF"),b=r("SJeZ"),h=r("FOuV"),v=r("k2tD"),x=r("yxRq"),k=r("NQFm"),S=r("S24M");const P=["90802019","90812019"];function T({afterSubmit:e,overrides:t={}}){const r=(0,n.useDispatch)(),{showBattleDialog:T}=(0,l.P)(),{inBattle:C}=(0,y.M)(),{inBattle:M}=(0,b.E5)(),{setMessageInfo:Z}=(0,u.YT)(),{getI18n:w}=(0,b.yk)(),I=(0,b.G3)(),E=(0,u.c7)(),[N]=(0,b.eY)(),A=(0,n.useSelector)(g.wx)===d.UW,{marginType:R}=(0,b.se)(),O=(0,b.Gf)(),L=(i,n)=>{var l,u,d,g,y,T,C,M,L,V;const{preference:{orderConfirmation:F,positionMode:D,assetMode:_,enableAdvancedTPSL:B,priceProtection:z},futuresOrderForm:K,userCenter:{loginStatus:{isLoggedIn:q}},products:{currentProduct:{filters:U,equalQtyPrecision:W=2,minQty:H,marginAsset:$,contractVal:j=1,pricePrecision:G},allProducts:J},pageStore:{symbol:[Y,[Q,X]]},markPrice:ee,position:te,leverage:{curLeverage:re},exchangeInfo:{infos:ae},balance:ie,assetIndex:oe}=n;if(!q)return;const ne=t.orderType||K.orderType,le=t.positionDirection||K.positionDirection,se=t.timeInForce||K.timeInForce,ce="boolean"===typeof t.reduceOnly?t.reduceOnly:K.reduceOnly,ue="boolean"===typeof t.isTPSLEnabled?t.isTPSLEnabled:K.isTPSLEnabled,[de,me]=(null===(l=document.querySelector('div[data-testid="max-buy-amount"]'))||void 0===l||null===(u=l.textContent)||void 0===u?void 0:u.split(" "))||[],[pe]=(null===(d=document.querySelector('div[data-testid="max-sell-amount"]'))||void 0===d||null===(g=d.textContent)||void 0===g?void 0:g.split(" "))||[],fe=(null===(y=h.vQ[X])||void 0===y?void 0:y.pricePrecision)||h.vQ.delivery.pricePrecision,ge=(null===(T=U.find(k.$H))||void 0===T?void 0:T.tickSize)||"",ye=(0,v.OR)(ge),be=(0,v.OR)(null===(C=U.find(k.W4))||void 0===C?void 0:C.stepSize),he=(0,v.OR)(null===(M=U.find(k.vr))||void 0===M?void 0:M.stepSize),ve=null===(L=U.find(k.Jv))||void 0===L?void 0:L.notional,{levels:xe}=ae[Y]||{levels:f.zq.map((e=>(0,f.Wv)(e)))},{askPrice:ke,bidPrice:Se}=(0,p.OA)({tickSize:ge,symbol:Y,levels:xe,isDelivery:I}),Pe=Number(E()),Te=(0,p._V)({orderType:ne,equalQtyPrecision:W,unit:N,filters:U}),Ce=(0,p._V)({orderType:ne,equalQtyPrecision:W,unit:I?s.SW.cont:s.AO.coin,filters:U}),Me=Number(null===(V=ee[Y])||void 0===V?void 0:V.markPrice),{side:Ze,buyOrderAmount:we,sellOrderAmount:Ie,unitAmount:Ee,activatePriceWorkingType:Ne}=i,Ae=Ze===h.hp.BUY,Re=Number(i.limitPrice),Oe=Ae?we:Ie,Le=Number(i.triggerPrice),Ve=Number(i.activatePrice),Fe=Number(i.priceRate),De=(0,p.JN)({orderType:ne,activatePrice:Ve,stopPrice:Le,limitPrice:Re,lastTradePrice:Pe,activatePriceWorkingType:Ne,markPrice:Me}),_e=Ee&&!~Ee.indexOf("%")?Number(Ee):Number((0,p.u2)({unit:N,contractVal:j,price:De,orderAmount:Oe,stepSizePrecision:(0,h.Br)(ne)?he:be,tickSizePrecision:ye,equalQtyPrecision:W})),Be=e=>(0,x.w_)({askPrice:ke,bidPrice:Se,orderPrice:Re,formType:ne,markPrice:Me,pricePrecision:G,isDelivery:I,type:e}),{buyCost:ze,sellCost:Ke,buyOpenLost:qe,sellOpenLost:Ue}=(0,p.l3)({positionMode:D,positions:te,symbol:Y,leverage:re,buyOrderAmount:we,sellOrderAmount:Ie,orderType:ne,askPrice:ke,bidPrice:Se,price:Re,markPrice:Me,pricePrecision:G,isDelivery:I,contractVal:j}),We=(0,p.vY)({symbol:Y,isDelivery:I,leverage:re,marginAsset:$,contractVal:j,positions:(0,b.xm)(te,J),balance:ie.balance,assetIndexes:oe,assetMode:_,marginType:R,brackets:O}),{BuyText:He,SellText:$e}=(0,p.ad)({positionMode:D,positionDirection:le,getFutI18n:w}),{valid:je,message:Ge}=(h.hp.BUY,(0,p.mv)({unit:N,orderAmount:Oe,price:De,contractVal:j,unitAmountPrecision:Te,orderAmountPrecision:Ce,base:Q,margin:$,minQty:H,minNotional:ve,getFutI18n:w,isDelivery:I,messageType:"order-form-toast",reduceOnly:ce,positionDirection:le}));if(!je)return void Z({message:Ge,variant:"error"});const Je=()=>{let t=ne===c.Jm.POST_ONLY?c.Jm.LIMIT:ne;const n=i.triggerPriceWorkingType;Ae?(n===h.gu.LAST_PRICE&&Le<Pe||n===h.gu.MARK_PRICE&&Le<Me)&&(t=t===c.Jm.STOP_LIMIT?c.Jm.TAKE_PROFIT_LIMIT:t,t=t===c.Jm.STOP_MARKET?c.Jm.TAKE_PROFIT_MARKET:t):(n===h.gu.LAST_PRICE&&Le>Pe||n===h.gu.MARK_PRICE&&Le>Me)&&(t=t===c.Jm.STOP_LIMIT?c.Jm.TAKE_PROFIT_LIMIT:t,t=t===c.Jm.STOP_MARKET?c.Jm.TAKE_PROFIT_MARKET:t);const l=(0,p.M6)({formData:(0,a.Z)((0,a.Z)({},i),{},{buyOrderAmount:Number((0,o.Jp)(i.buyOrderAmount).toFixed(Ce,1)),sellOrderAmount:Number((0,o.Jp)(i.sellOrderAmount).toFixed(Ce,1))}),orderType:t,positionDirection:le,timeInForce:ne===c.Jm.POST_ONLY?h.rb.POST_ONLY:se,reduceOnly:ce,enableAdvancedTPSL:B,isTPSLEnabled:ue,priceProtection:z,symbol:Y,positionMode:D});return"subOrderList"in l?r.futuresOrderForm.placeStrategy(l).then((t=>{if(t.success){var r;e&&e();const i=A?{anchorOrigin:{vertical:"top",horizontal:"right"}}:{};Z((0,a.Z)({message:w("order-submitted",{defaultValue:""}),variant:"success"},i)),(0,p.kd)({symbol:Y,id:null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.orderId,side:Ze})}})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})):(I?(l.quantity*j/re).toFixed(2):(l.quantity*Number(l.price)/re).toFixed(2),`${l.side}`.toLowerCase(),r.futuresOrderForm.placeOrder((0,a.Z)((0,a.Z)({},l),{},{placeType:"order-form"})).then((t=>{if(t.success){var i;e&&e();const r=A?{anchorOrigin:{vertical:"top",horizontal:"right"}}:{};Z((0,a.Z)({message:w("order-submitted",{defaultValue:""}),variant:"success"},r)),(0,p.kd)({symbol:Y,id:null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.orderId,side:Ze})}const{code:o}=t||{};return-4061===o?r.preference.getPositionMode():P.includes(String(o))&&(0,S.j)("place_order_event",{df_business:I?"delivery":"futures",type:"insufficientMargin",symbol:l.symbol,placeOrderType:l.type,price1:De,df_direction:l.side,df_1:l.quantity,df_2:de,df_3:pe,df_4:me}),t})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})))};(0,p.i)({orderType:ne,orderAmount:Oe,price:Re,priceRate:Fe,stopPrice:Le,hideMask:()=>m.T.emit(m.F.HIDE_MOBILE_MASK),orderConfirmation:F,showConfirm:()=>m.T.emit(m.F.SHOW_ORDER_CONFIRM_PANEL,{orderType:ne,placeOrder:Je,orderForm:{triggerPrice:Le,price:Re,buyQty:_e,sellQty:_e,side:Ze,callbackRate:Fe,activationPrice:Ve,positionSide:(0,p.JO)({side:Ze,positionDirection:le,positionMode:D}),buyCost:(0,o.GW)(ze,fe,!0),sellCost:(0,o.GW)(Ke,fe,!0),tickSize:ye,limitStepSize:be,marketStepSize:he,availableBalance:We,takeProfitStopPrice:i.takeProfitStopPrice,takeProfitStopPriceWorkingType:i.takeProfitStopPriceWorkingType,stopLossStopPrice:i.stopLossStopPrice,stopLossStopPriceWorkingType:i.stopLossStopPriceWorkingType,strategySide:i.strategySide,oLastPrice:Pe},bCost:ze,sCost:Ke,buyOpenLost:qe,sellOpenLost:Ue,positionDirection:le,title:"",isDelivery:I,Cont:w("Cont"),contractVal:j,getAssumePrice:Be}),placeOrder:Je})};return e=>{(0,i.F)()&&(C||M?T(M?"um":"cm"):r.futuresOrderForm.handleSubmit({formData:e,submitHandler:L}))}}},EUwT:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Yn});var a={};r.r(a),r.d(a,{PNL:()=>Ai,PNLFormat:()=>Ui,ROE:()=>Ri,ROEFormat:()=>Wi,formPositionSize:()=>Bi,initialMargin:()=>Ni,initialMarginFormat:()=>qi,isLiqPriceInValid:()=>zi,isLiqPriceInValidHEDGE:()=>Ki,liquidationPrice:()=>Li,maxOpenCoin:()=>Fi,maxOpenQuantity:()=>Vi,openPriceCoin:()=>Di,openPriceUSDT:()=>_i,targetPrice:()=>Oi});var i=r("/SIk"),o=r.n(i),n=r("klBV"),l=r("6Afj"),s=r("ka4r"),c=r("w7Tp"),u=r("szIg"),d=r("EPGa"),m=r("0RPJ"),p=r("SJeZ"),f=r("JlsY"),g=r("GpFh"),y=r("xt2t"),b=r("LcTY"),h=r("VM/Z"),v=o().createElement;const x={justifyContent:"space-between",position:"relative",width:"100%",alignContent:"center",fontSize:1,".balance":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"12px",color:"t.third",".value":{ml:"4px",color:"t.primary"}}},k=e=>{let{balance:t,dispatch:r,tradeType:a,side:o=d.g.BUY,transfer:n=!1,base:l,quote:c,marginAsset:u,isLoggedIn:m,userAssets:f,isDelivery:k=!1}=e,S=(0,g.Z)(e,["balance","dispatch","tradeType","side","transfer","base","quote","marginAsset","isLoggedIn","userAssets","isDelivery"]);const{getI18n:P}=(0,p.yk)(),T=k?l:a===d.xy.FUTURES||o===d.g.BUY?c:l,C=(0,i.useCallback)((()=>{b.T.emit(b.F.OPEN_TRANSFER_MODAL,u)}),[u]);return(0,i.useMemo)((()=>v(s.Z,Object.assign({sx:x},S),v("div",{className:"balance"},P("orderForm-avbl",{defaultValue:"Avbl"}),v("span",{className:"value"},m?t:"-"," ",T)),m&&n&&!h.Jg&&v(y.Z,{"data-testid":"orderform-transfer-button",color:"t.third",cursor:"pointer",fontSize:"16px",mx:"8px",sx:{flexShrink:0,"&:hover":{color:"t.primary"}},onClick:C}))),[S,m,n,C,T,t,P])},S=o().memo(k);var P=o().createElement;const T=({transfer:e=!0})=>{const[,[t,r]]=(0,n.z4)(),a=(0,p.G3)(),i=(0,f.c)(),{marginAsset:o}=(0,n.j2)(),l=(0,n.Li)(),s=(0,u.useDispatch)(),c=(0,n._n)(),g=(0,n.dO)();return P(S,{tradeType:a?d.xy.DELIVERY:d.xy.FUTURES,balance:(0,m.Jp)(g).toFixed(i,1),dispatch:s,transfer:e,base:t,quote:r,isLoggedIn:c,userAssets:l,isDelivery:a,marginAsset:o})};var C=r("ydHf"),M=r("8uyB"),Z=r("wGPX"),w=r("CE5Z"),I=o().createElement;const E=(0,i.forwardRef)((({overlay:e},t)=>I(Z.ZP,{ref:t,trigger:"hover",display:"inline-flex",flexDirection:"column",justifyContent:"space-between",height:"16px",pl:["0","12px"],color:"t.third",enablePortal:!0,overlay:e,sx:{cursor:"pointer",verticalAlign:"top",":hover":{color:"primary"}}},I(w.Z,{size:"20px"})))),N=o().memo(E);var A=r("/yzf"),R=o().createElement;const O=e=>{let{children:t,handle:r}=e,a=(0,g.Z)(e,["children","handle"]);return R(A.Z,Object.assign({className:"item",as:"span",onClick:r},a),t)},L=({getFutI18n:e,orderType:t})=>{switch(t){case d.Jm.LIMIT:return e("orderType-limit-tip",{defaultValue:"A limit order is an order to buy or sell at a specific price or better. Limit orders are not guaranteed to execute."});case d.Jm.MARKET:return e("orderType-market-tip",{defaultValue:"Market order is immediately matched to the best available market price."});case d.Jm.STOP_LIMIT:return e("STOPtip",{defaultValue:"Stop Limit"});case d.Jm.STOP_MARKET:return e("STOP_MARKETtip",{defaultValue:"Stop Market"});case d.Jm.TRAILING_STOP_MARKET:return e("TRAILING_STOP_MARKET_TIP",{});case d.Jm.POST_ONLY:return e("limitType-postOnly-tip",{defaultValue:"limitType-postOnly-tip"});default:return R(o().Fragment,null)}};var V=r("YDVe"),F=r("tQHD"),D=r("O94r"),_=r.n(D),B=o().createElement;const z={width:"100%",boxShadow:"none"},K={width:"100%"},q={flex:1,".tab":{borderTop:"2px solid",borderTopColor:"moduleBg",color:"t.third",padding:"8px 0px",backgroundColor:"moduleBg",textAlign:"center",borderBottom:"1px solid",borderBottomColor:"modalBg","&.active":{borderTop:"2px solid",borderTopColor:"primary",borderBottomColor:"transparent",borderRight:"1px solid",borderRightColor:"modalBg",backgroundColor:"popupBg",color:"t.primary","&.close":{borderLeft:"1px solid",borderLeftColor:"modalBg"}}}},U=e=>{const{getI18n:t}=(0,p.yk)(),r=t("Open",{defaultValue:"Open"}),a=t("Close",{defaultValue:"Close"}),[i]=(0,p.hN)(),[o,n]=(0,p.lE)(),l=(e,t,r)=>B("div",{className:_()({active:e,tab:!0,[r]:!0})},t);return i?B(V.Z,Object.assign({variant:"standard",defaultActiveKey:o,controlledKey:o,onChange:n,tabsSx:z,tabSx:q,sx:K},e),B(F.Z,{tab:e=>l(e,r,"open"),tabKey:d.RS.OPEN,"data-testid":"open"}),B(F.Z,{tab:e=>l(e,a,"close"),tabKey:d.RS.CLOSE,"data-testid":"close"})):null};var W=r("Tr4L");const H=e=>{const{t:t,i18n:r}=(0,W.$)(e);return{i18n:r,getI18n:(0,i.useCallback)(((e,r,a=!0)=>{let i;"boolean"===typeof a?i=a?"trd-orderForm":"trd":"string"===typeof a&&(i=a);return t(`${i}-${e}`,r)}),[t])}};var $=r("3szt"),j=r("LHeJ"),G=r("uAQg"),J=r("1U9V"),Y=r("c5N6"),Q=o().createElement;const X={position:"fixed",width:"100vw",height:"100vh",left:0,right:0,top:0,bottom:0,zIndex:999,mb:"sm"},ee={mb:"md"},te=(0,j.Z)((e=>({visible:!1,setVisible:t=>e((()=>({visible:t}))),assetMode:!1,setAssetMode:t=>e((()=>({assetMode:t})))}))),re=(0,i.forwardRef)(((e,t)=>{const{getI18n:r}=(0,p.yk)(),{0:a,1:n}=(0,i.useState)({defaultActiveKey:"oc"}),{defaultActiveKey:l="oc"}=a,{0:u,1:d}=(0,i.useState)(!1),m=te((e=>e.visible)),f=te((e=>e.setVisible)),g=te((e=>e.setAssetMode)),y=(0,i.useCallback)((()=>{d(!1)}),[d]),b=(0,i.useCallback)((e=>{d(!0),n(e)}),[]);(0,i.useImperativeHandle)(t,(()=>({showPreferencePanel:b}))),(0,i.useEffect)((()=>J.TB.on(J.FP.SHOW_PREFERENCE_PANEL,(e=>{b({defaultActiveKey:e})}))),[b]);const h=(0,p.$J)(),v=new Set,x=!!Object.values(h).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:t}=e;return!v.has(t)&&(v.add(t),!0)}return!1})).length,k=(0,i.useMemo)((()=>({pb:0})),[]),S=(0,i.useMemo)((()=>({hidePreferencePanel:y})),[y]);return(0,i.useMemo)((()=>u||m?Q(o().Fragment,null,Q(G.ZP,null,Q(c.Z,{tx:"preference.dialog",variant:"container",sx:X},Q(s.Z,{alignItems:"center",justifyContent:"space-between",tx:"preference.header",variant:"container"},Q(A.Z,{tx:"preference.header",variant:"title"},r("preference",{defaultValue:"Preference"})),Q(C.Z,{tx:"preference.header",variant:"close",onClick:y})),Q(c.Z,{sx:{px:"sm"}},Q(V.Z,{defaultActiveKey:l,variant:"trade-next",tabSx:k,tabsSx:ee,lazy:!0},Q(F.Z,{tab:()=>Q(A.Z,{variant:"subtitle2"},r("order-confirmation",{defaultValue:"Order Confirmation"})),tabKey:"oc"},Q(Y.OrderConfirmationForm,null)),Q(F.Z,{tab:()=>Q(A.Z,{variant:"subtitle2"},r("position-mode",{defaultValue:"Position Mode"})),tabKey:"pm"},Q(Y.PositionSideForm,null)),Q(F.Z,{tab:()=>Q(A.Z,{variant:"subtitle2"},r("priceProtection",{defaultValue:"Price Protection"})),tabKey:"pp"},Q(Y.PriceProtectionForm,null)),Q(F.Z,{tab:()=>Q(A.Z,{variant:"subtitle2"},r("preferenceNotification",{defaultValue:"Notification"})),tabKey:"pn"},Q(Y.NotificationForm,null)),Q(F.Z,{tab:()=>Q(A.Z,{variant:"subtitle2"},r("assetMode",{defaultValue:"Asset Mode"})),tabKey:"am"},Q(Y.AssetModeForm,Object.assign({setConfirmVisible:f,setAssetMode:g,isolatedPositionFlag:x},S))))))),Q(Y.AssetModeDialog,{confirmVisible:m,setConfirmVisible:f})):null),[f,x,g,m,l,r,y,S,k,u])}));var ae=r("869M"),ie=r("FOuV"),oe=r("xpNn"),ne=o().createElement;const le=e=>{let{children:t}=e,r=(0,g.Z)(e,["children"]);return ne(c.Z,Object.assign({variant:"dropdown",__css:{display:"flex",flexDirection:"column"}},r),t)},se=({locale:e,base:t,quote:r,futUrlConfig:a,isDelivery:i,showPreferencePanel:n})=>{const{getI18n:l}=(0,ae.yk)();return ne(le,null,ne(O,{handle:()=>{let t=(0,M.CN)(a.BUYING_URL,{locale:e,crypto:r});t=(0,M.CN)(a.BUYING_URL_ELECTRON,{crypto:r}),window.open(t)}},l("buy-crypto",{defaultValue:"Buy Crypto"})),ne(o().Fragment,null,i?ne(O,{handle:()=>b.T.emit(b.F.OPEN_CONVERT_MODAL)},l("convert",{defaultValue:"Convert"})):ne(O,{handle:()=>{window.location.href=(0,M.CN)(a.DEPOSIT_URL,{locale:e,coin:r})}},l("deposit",{defaultValue:"Deposit"})),ne(O,{handle:()=>b.T.emit(b.F.OPEN_TRANSFER_MODAL,t)},l("transfer",{defaultValue:"Transfer"})),ne(O,{handle:()=>n("oc")},l("preference",{defaultValue:"Preference"})),ne(O,{handle:()=>(0,oe.O)()},l("trading-rules",{defaultValue:"Trading Rules"}))))},ce=e=>ne(c.Z,{lineHeight:"0"},e.isLoggedIn&&ne(N,{overlay:ne(se,e)}),ne(C.Z,{ml:"sm",color:"t.third",fontSize:"16px",onClick:()=>e.hideMask()})),ue=()=>{const e=(0,p.G3)(),t=(0,n._n)(),{i18n:{language:r}}=H(),[,[a,l]]=(0,n.z4)(),c=(0,i.useRef)(null),{isMobile:u}=(0,n.Fs)(),{showPreferencePanel:d}=(0,p.r8)(),[m]=(0,p.hN)(),f=(0,i.useCallback)((()=>b.T.emit(b.F.HIDE_MOBILE_MASK)),[]),g=(0,i.useMemo)((()=>({alignItems:"center",justifyContent:"space-between",borderBottom:e=>`1px solid ${e.colors.newLine}`,width:"100%",py:m?"0px":"10px",pl:m?"0px":"16px",pr:"16px",bg:m?"moduleBg":"unset"})),[m]);return(0,i.useMemo)((()=>u?ne(o().Fragment,null,ne(s.Z,{sx:g,ref:c},m?ne(U,{width:"248px"}):ne($.Z,{sx:{width:"248px"}}),ne(ce,{base:a,quote:l,locale:r,hideMask:f,isLoggedIn:t,futUrlConfig:ie.x,isDelivery:e,showPreferencePanel:d})),m?ne($.Z,{sx:{mt:"10px",mx:"16px"}}):ne(U,null),ne(re,null)):null),[u,a,l,r,f,t,e,d,m,g])},de=o().memo(ue);var me=r("5vwO"),pe=r("EZOS"),fe=r("NKCw"),ge=r("//nZ"),ye=r.n(ge),be=r("XVzo"),he=r("Uqe+");const ve={callBackTip:"The callback rate is one condition for a trailing stop order, satisfied when the trigger price compared with the highest market price / lowest market price (or mark price) is greater than or equal to the callback rate.",activationPriceTip:"The activation price is one of the trigger conditions of the trailing stop order. If you do not fill in it, it will default to the latest price (marked price). When the market's highest / lowest price reaches or exceeds the activation price after the trailing stop order is submitted, the condition is consideredto be satisfied."};var xe=r("rdEq"),ke=r("YkKT"),Se=r("b2zI"),Pe=r("COFI"),Te=r("4m5F"),Ce=o().createElement;function Me({value:e,unit:t,filters:r}){const{limitStepSize:a,tickSize:i}=(0,J.k7)({filters:r});let o;return t===Te.AO.usdt&&e/1<i&&(o=i),(t===Te.AO.coin||t===Te.SW.cont)&&e/1<a&&(o=a),t===Te.SW.coin&&e/1<i&&(o=i),o}function Ze(){const{setFocus:e,setValue:t,getValues:r}=(0,fe.Gc)(),{filters:a}=(0,n.j2)(),[o]=(0,p.hN)(),[l]=(0,p.eY)(),[,s]=(0,p.lE)(),c=(0,n.c7)(),u=(0,n.PZ)(),f=(0,i.useCallback)((({payload:e,side:r})=>{var a,i;const{priceLevel:n,valueInput:{type:l="percentage",value:m}}=e,p=Number(n),{bids:f,asks:g}=u(Math.abs(p)-1),y=p>0?null===(a=f[0])||void 0===a?void 0:a.price:null===(i=g[0])||void 0===i?void 0:i.price,b=c(),h=y||b;t(Se.T.LIMIT_PRICE,h),t(Se.T.SIDE,r),s(o?d.RS.OPEN:d.RS.BOTH),t(Se.T.UNIT_AMOUNT,"percentage"===l?`${m}%`:m)}),[c,u,t,o,s]);return(0,i.useEffect)((()=>(0,Pe.GY)((async({name:e,payload:i})=>{switch(e){case Pe.Sn:setTimeout((()=>{f({payload:i,side:d.g.BUY})}),10);break;case Pe.Nn:setTimeout((()=>{f({payload:i,side:d.g.SELL})}),10);break;case Pe.ZA:setTimeout((()=>{const e=r(Se.T.LIMIT_PRICE),{valueInput:{type:t,value:a}}=i;let o;if(e){if("percentage"===t)o=(0,m.Jp)(e,(0,m.PD)(1,a/100));else{if("amount"!==t)throw new Error("Invalid event type. Expected to be percentage or amount");o=(0,m.PD)(e,a)}b.T.emit(b.F.UPDATE_ORDER_PRICE_INPUT,o.toFixed())}else o=c()}),10);break;case Pe.Dc:setTimeout((()=>{const e=r(Se.T.LIMIT_PRICE),{valueInput:{type:t,value:a}}=i;let o;if(e){if("percentage"===t)o=(0,m.Jp)(e,(0,m.h9)(1,a/100));else{if("amount"!==t)throw new Error("Invalid event type. Expected to be percentage or amount");o=(0,m.h9)(e,a)}b.T.emit(b.F.UPDATE_ORDER_PRICE_INPUT,o.toFixed())}else o=c()}),10);break;case Pe.Jt:setTimeout((()=>{const{valueInput:{type:e,value:o}}=i;let n=r(Se.T.UNIT_AMOUNT);if("percentage"===e){let e=0;if(-1!==n.indexOf("%")){const t=n.split("%")[0],r=(0,m.PD)(t,o);e=r.gt(100)?"0":r.toFixed()}t(Se.T.UNIT_AMOUNT,`${e}%`),b.T.emit(b.F.SET_SLIDER_AMOUNT,e)}else{if("amount"!==e)throw new Error("Invalid event type. Expected to be percentage or amount");{(isNaN(n)||"NaN"===n)&&(n="0");const e=Me({value:o,unit:l,filters:a});let r=(0,m.PD)(n,e||o).toFixed();(Number(r)<0||isNaN(Number(r)))&&(r="0"),t(Se.T.UNIT_AMOUNT,r)}}}),10);break;case Pe.SA:setTimeout((()=>{const{valueInput:{type:e,value:o}}=i;let n=r(Se.T.UNIT_AMOUNT);if("percentage"===e){let e=0;if(-1!==n.indexOf("%")){const t=n.split("%")[0],r=(0,m.h9)(t,o);e=r.lt(0)?"0":r.toFixed()}b.T.emit(b.F.SET_SLIDER_AMOUNT,e),t(Se.T.UNIT_AMOUNT,`${e}%`)}else{if("amount"!==e)throw new Error("Invalid event type. Expected to be percentage or amount");{let e;(isNaN(n)||"NaN"===n)&&(n="0");const r=Me({value:o,unit:l,filters:a});e=(0,m.h9)(n,r||o).toFixed(),(Number(e)<0||isNaN(Number(e)))&&(e="0"),t(Se.T.UNIT_AMOUNT,e)}}}),10);break;case Pe.aV:setTimeout((()=>{o&&s(d.RS.OPEN)}),10);break;case Pe.hr:setTimeout((()=>{o&&s(d.RS.CLOSE)}),10)}}))),[f,o,s,a,t,e,r,l,c]),null}function we(){return Ce(Ze,null)}var Ie=r("IBbm"),Ee=o().createElement;const Ne=e=>{let{fieldName:t,required:r=!0,error:a}=e,i=(0,g.Z)(e,["fieldName","required","error"]);const{field:{onChange:o,ref:n,name:l},fieldState:{invalid:s}}=(0,fe.bc)({name:t,rules:{required:r}}),c=(0,fe.qo)({name:t});return Ee(Ie.Q,Object.assign({},i,{value:c,onChange:o,error:a||s,target:t,name:l,ref:n}))};var Ae=r("JrV+"),Re=r("wrgj"),Oe=o().createElement;const Le=e=>Oe(Re.Z,Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"t.third"},e),Oe("path",{xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",d:"M7.91668 3.3335V5.41676H10V7.91676H7.91668V10.0002H5.41668V7.91676H3.33337V5.41676H5.41668V3.3335H7.91668ZM16.6667 12.5002H10V15.0002H16.6667V12.5002ZM15.1262 3.45965L3.45958 15.1263L4.87379 16.5405L16.5405 4.87386L15.1262 3.45965Z",fill:"currentColor"}));var Ve=o().createElement;const Fe={":hover":{color:"t.primary"},cursor:"pointer"};function De({fieldName:e}){const{tickSize:t}=(0,n.j2)(),[r]=(0,p.NU)(),{setValue:a,getValues:o}=(0,fe.Gc)(),l=(0,n.ih)(),s=(0,i.useCallback)((t=>{const r=(Number(o(e))||0)+t;a(e,r<0?"0":(0,m.mD)(r,l))}),[a,o,e,l]);return r?Ve(Ae.Z,{height:"20px",scales:[1,10,50,200],size:t,onSelect:s},Ve(Le,{sx:Fe,"data-testid":"plus-minus-button"})):null}var _e=o().createElement;const Be={color:"t.yellow",cursor:"pointer",maxWidth:"40px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},ze=({onClick:e})=>{const{getI18n:t}=(0,p.yk)();return _e(xe.m,{tip:t("orderForm-lastPriceTip",{defaultValue:"Last price, place a current price order."}),hideUnderLine:!0},_e(A.Z,{sx:Be,onClick:e},t("orderForm-lastPrice",{defaultValue:"Last"})))};var Ke=o().createElement;const qe=({fieldName:e,prefix:t,disabled:r,required:a,getLastTracePrice:o})=>{const{setValue:l}=(0,fe.Gc)(),c=(0,n.ih)(),[,u]=(0,n.z4)(),[,d]=u;(0,i.useEffect)((()=>b.T.on(b.F.UPDATE_ORDER_PRICE_INPUT,(t=>{l(e,t)}))),[e,l]);const m=Ke(s.Z,{flexDirection:"row",alignItems:"center"},Ke(De,{fieldName:e}),Ke(ze,{onClick:()=>{l(e,o())}}),Ke(A.Z,{ml:"8px",color:"t.primary"},d));return Ke(Ne,{fieldName:e,prefix:t,suffix:m,precision:c,maxLength:Te.ze,disabled:r,required:a})};var Ue=r("zZ5f"),We=r("vt3k"),He=o().createElement;const $e=({getI18n:e,registerTestId:t="orderform_register",loginTestId:r="orderform_login"})=>{const{isLoading:a}=(0,n.f0)();return(0,i.useMemo)((()=>a?He(c.Z,{fontSize:"1",sx:{bg:"inputBg"}},He(s.Z,{alignItems:"center",justifyContent:"center",sx:{height:"40px",position:"relative",borderRadius:"4px"}},He(Ue.Z,{inner:!0,fullScreen:!0,show:!0}))):He(c.Z,{"data-testid":"register-login-buttons"},He(We.Yr,null,He(be.Z,{as:"a",width:1,py:"10px",variant:"primary","data-testid":t},e("register"))),He(We.TE,null,He(be.Z,{as:"a",width:1,mt:"12px",py:"10px",bg:"line",colorStyle:"secondary","data-testid":r},e("login"))))),[a,e])},je={justifyContent:"space-between",marginTop:"8px",color:"t.third",fontSize:"12px",lineHeight:"16px",letterSpacing:"0.32px",".content":{flex:1,minWidth:0,marginLeft:"2px",color:"t.primary",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",textAlign:"right"}},Ge={justifyContent:"space-between",fontSize:"12px",marginTop:"8px",".left, .right":{display:"flex",flexWrap:"wrap",width:"48.47%",fontSize:"12px",lineHeight:"16px",letterSpacing:"0.32px",color:"t.third"},".left":{justifyContent:"flex-start"},".right":{justifyContent:"flex-end"},".content":{marginLeft:"2px",color:"t.primary"},".truncated":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}};var Je=o().createElement;const Ye=({label:e,content:t,dataTestId:r})=>Je(s.Z,{sx:je},Je("div",null,e),Je("div",{className:"content","data-testid":r},t));var Qe=o().createElement;const Xe=({leftDataTestId:e,rightDataTestId:t,leftLabel:r,rightLabel:a,leftContent:i,rightContent:o})=>Qe(s.Z,{sx:Ge},Qe("div",{className:"left"},Qe("div",{className:"truncated"},r),Qe("div",{className:"content truncated","data-testid":e},i)),Qe("div",{className:"right"},Qe("div",{className:"truncated"},a),Qe("div",{className:"content truncated","data-testid":t},o," ")));var et=o().createElement;const tt={height:1,border:0,my:"16px",bg:"newLine"},rt=()=>et(c.Z,{as:"hr",sx:tt});var at=o().createElement;const it={flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"},ot=({children:e})=>at(s.Z,{sx:it},e);var nt=o().createElement;var lt=o().createElement;var st=o().createElement;var ct=o().createElement;var ut=o().createElement;var dt=o().createElement;var mt=r("a2gA"),pt=o().createElement;const ft={justifyContent:"center",alignItems:"center",width:"40px",height:"40px",marginLeft:"6px",bg:"transInputBG",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"t.third","&:hover":{bg:"line",color:"t.primary"}},gt=({value:e,onClick:t})=>pt(s.Z,{sx:ft,onClick:()=>{t(e)}},e,"%");var yt=o().createElement;const bt={flexDirection:"row",mt:"10px",".callback-rate-input":{mt:0,flex:1},".bn-input-prefix":{flex:"1"},".prefix-tooltip-container":{width:"100%"},".bn-input-suffix":{marginLeft:"0px !important"},".order-form-input":{width:"28px",px:"4px"}},ht=({fieldName:e,required:t})=>{const{setValue:r}=(0,fe.Gc)(),{getI18n:a}=(0,p.yk)(),i=yt(xe.m,{className:"prefix-tooltip-container",tip:a("callbackRateTip",{defaultValue:ve.callBackTip})},yt(mt.u,null,a("callbackRate",{defaultValue:"Callback Rate"}))),o=t=>{r(e,t)};return yt(s.Z,{sx:bt},yt(Ne,{className:"callback-rate-input",fieldName:e,prefix:i,suffix:yt(A.Z,{color:"t.primary"},"%"),precision:1,maxNumberValue:5,maxLength:Te.ze,required:t}),yt(gt,{value:"1",onClick:o}),yt(gt,{value:"2",onClick:o}))},vt=({lastPriceType:e})=>{const[t,r,a,i]=(0,fe.qo)({name:[Se.T.LIMIT_PRICE,Se.T.TRIGGER_PRICE,Se.T.ACTIVATE_PRICE,Se.T.ACTIVATE_PRICE_WORKING_TYPE]}),[o]=(0,p.K5)(),l=o===d.Jm.MARKET,s=o===d.Jm.TRAILING_STOP_MARKET,c="trade"===e,u=(0,n.uH)(l&&c||s&&!a&&i===ie.gu.LAST_PRICE),{bidPrice:m,askPrice:f}=(0,n.y$)(l&&!c),g=(0,n.aJ)(s&&!a&&i===ie.gu.MARK_PRICE);let y;switch(o){case d.Jm.LIMIT:case d.Jm.STOP_LIMIT:case d.Jm.TAKE_PROFIT_LIMIT:case d.Jm.POST_ONLY:y=t;break;case d.Jm.MARKET:switch(e){case"trade":y=u;break;case"bid":y=m;break;case"ask":y=f}break;case d.Jm.STOP_MARKET:case d.Jm.TAKE_PROFIT_MARKET:y=r;break;case d.Jm.TRAILING_STOP_MARKET:y=a||(i===ie.gu.MARK_PRICE?g:u)}return Number(y)||0},xt=({side:e})=>{const t="buy"===e?Se.T.BUY_ORDER_AMOUNT:Se.T.SELL_ORDER_AMOUNT,r=(0,fe.qo)({name:t});return Number(r)};var kt=r("5+Lg"),St=r("Srn1");const Pt={position:"relative",top:"4px",width:"fit-content",py:"4px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",".option":{padding:"4px 16px",fontSize:"12px",color:"t.primary","&:hover":{bg:"line",cursor:"pointer"},"&.active":{color:"t.yellow"}}},Tt={height:"100%",".label":{display:"flex",alignItems:"center",height:"100%",color:"t.primary",cursor:"pointer","&.disabled":{cursor:"not-allowed"}},".label-text":{maxWidth:"48px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}};var Ct=o().createElement;function Mt({options:e,value:t,handleClick:r}){return Ct(c.Z,{sx:Pt,name:"orderform-select-menu"},e.map((({label:e,value:a})=>Ct("div",{key:String(a),className:_()({active:a===t,option:!0}),onClick:()=>{r(a)}},e))))}function Zt(e){var t;let{name:r,options:a,disabled:i,value:o,onChange:n}=e,l=(0,g.Z)(e,["name","options","disabled","value","onChange"]);const s=(null===(t=a.find((e=>e.value===o)))||void 0===t?void 0:t.label)||"";return Ct(Z.ZP,Object.assign({},l,{sx:Tt,trigger:"click",disabled:i,enablePortal:!0,overlay:Mt({options:a,value:o,handleClick:n})}),(({name:e,label:t,disabled:r})=>{const a=e?`${e}-select-button`:"TriggerSelect";return Ct(kt.Z,{className:_()({label:!0,disabled:r}),variant:"small","data-testid":a},Ct("div",{className:"label-text"},t),!r&&Ct(St.Z,{color:"#76808F",size:16}))})({name:r,label:s,disabled:i}))}var wt=o().createElement;const It=()=>{const[,e]=(0,n.z4)(),t=(0,n.Pc)(),{isExistFutureAccount:r}=t,{isLoggedIn:a}=(0,n.f0)(),{setValue:o}=(0,fe.Gc)(),l=(0,u.useDispatch)(),{getI18n:s}=(0,p.yk)(),{baseAsset:c,marginAsset:d}=(0,n.j2)(),[m]=(0,p.eY)(),f=(0,p.G3)(),g=(0,i.useCallback)((async e=>{await l.preference.changeUnit(e),o(Se.T.UNIT_AMOUNT,"")}),[l]),y=a&&r,b=(0,i.useMemo)((()=>f?[{label:s("Cont",{defaultValue:"Cont"}),value:Te.SW.cont},{label:e[0],value:Te.SW.coin}]:[{label:d,value:Te.AO.usdt},{label:c,value:Te.AO.coin}]),[f,s,e,d,c]);return wt(Zt,{name:"unit",value:m,options:b,onChange:g,disabled:!y})};var Et=r("NQFm"),Nt=o().createElement;const At=({fieldName:e,prefix:t,required:r})=>{var a;const i=(0,p.G3)(),o=(0,n.XY)(),l=(0,n.XY)(i?Te.SW.cont:Te.AO.coin),{getI18n:s}=(0,p.yk)(),{contractVal:c,marginAsset:u,minQty:d,filters:m}=(0,n.j2)(),f=(null===(a=m.find(Et.Jv))||void 0===a?void 0:a.notional)||"1",[,[g,y]]=(0,n.z4)(),[b]=(0,p.lE)(),[h]=(0,p.KK)(),[v]=(0,p.eY)(),x=v===Te.SW.cont?`1 ${s("Cont",{defaultValue:"Cont"})} = ${c} ${y}`:"",k=(0,fe.qo)({name:e}),S=vt({lastPriceType:"trade"}),P=xt({side:"buy"}),T=Boolean(k),{message:C,valid:M}=(0,J.mv)({unit:v,orderAmount:P,price:S,contractVal:c,unitAmountPrecision:o,orderAmountPrecision:l,base:g,margin:u,minQty:d,minNotional:f,isDelivery:i,getFutI18n:s,reduceOnly:h,positionDirection:b}),{isSubmitted:Z}=(0,fe.cl)(),w=Z&&!M&&T;return Nt(Ne,{fieldName:e,prefix:t,suffix:Nt(It,null),precision:o,maxLength:Te.ze,required:r,placeholder:x,error:w,errorText:w?C:"",infoText:T?C:""})};var Rt=r("eOsi"),Ot=o().createElement;const Lt=e=>{let{fieldName:t}=e,r=(0,g.Z)(e,["fieldName"]);const{setValue:a}=(0,fe.Gc)(),o=(0,fe.qo)({name:t}),n=(0,i.useCallback)((e=>a(t,e)),[a,t]);return Ot(Zt,Object.assign({},r,{name:t,value:o,onChange:n}))};var Vt=o().createElement;const Ft=({priceFieldName:e,workingTypeFieldName:t,prefix:r,required:a,disabled:n,onFocus:l})=>{const s=(0,Rt.i)(),{getI18n:c}=(0,p.yk)(),u=(0,i.useMemo)((()=>[{label:c("advancedStrategy-lastPrice",{defaultValue:"Last"}),value:ie.gu.LAST_PRICE},{label:c("advancedStrategy-markPrice",{defaultValue:"Mark"}),value:ie.gu.MARK_PRICE}]),[c]),d=Vt(o().Fragment,null,Vt(De,{fieldName:e}),Vt(Lt,{fieldName:t,options:u,disabled:n}));return Vt(Ne,{fieldName:e,prefix:r,suffix:d,precision:s,maxLength:Te.ze,required:a,disabled:n,onFocus:l})};var Dt=r("nnm9"),_t=r.n(Dt),Bt=r("y9GW"),zt=r("+Ai6"),Kt=r("eXOl"),qt=r("vSWf"),Ut=r("/w94"),Wt=r("eeZR");const Ht=(0,i.forwardRef)((({},e)=>{const[t]=(0,p.KK)(),r=vt({lastPriceType:"trade"}),{maxBuyOrderAmount:a,maxSellOrderAmount:o}=(0,Wt.V)({reduceOnly:t,orderPrice:r});return(0,i.useImperativeHandle)(e,(()=>({buyMaxAmount:a,sellMaxAmount:o}))),null})),$t={paddingTop:"8px","> div":{px:["","","0px"]},".bn-slider-container":{"> label.bn-slider-radio-tooltip":{bg:"transparent",color:"t.secondary",fontSize:"14px"},".bn-slider-stepper":{bg:"popupBg"},".bn-slider-progress-bar, .bn-slider-progress-stepper":{bg:"t.secondary"},".bn-slider-radio-button":{borderColor:"t.secondary"},".bn-slider-progress-stepper, .bn-slider-stepper:hover, .bn-slider-radio-button:after":{borderColor:"popupBg"}}};var jt=o().createElement;const Gt={steppers:[0,25,50,75,100],range:{min:0,max:100},unit:"%"},Jt=({amountFieldName:e,amountFieldValueType:t,showUnitAmount:r})=>{const{getI18n:a}=(0,p.yk)(),o=(0,i.useRef)({buyMaxAmount:0,sellMaxAmount:0}),{setValue:n,setFocus:l}=(0,fe.Gc)(),s=(0,zt.m)(),u=(0,fe.qo)({name:e}),d="percentage"===t,m=u.includes("%"),{0:f,1:g}=(0,i.useState)(0),y=(0,pe.Z)(f),[b]=(0,p.lE)(),h=(0,pe.Z)(b),v=vt({lastPriceType:"trade"}),[x]=(0,p.K5)(),{stepSizePrecision:k,tickSizePrecision:S,equalQtyPrecision:P}=(0,qt.q)({orderType:x}),[T]=(0,p.eY)(),{contractVal:C}=(0,Kt.j2)(),M=(0,i.useRef)(_t()),{0:Z,1:w}=(0,i.useState)(""),{0:I,1:E}=(0,i.useState)(""),N=(0,Ut.e)({unit:T,contractVal:C,price:v,orderAmount:0,stepSizePrecision:k,tickSizePrecision:S,equalQtyPrecision:P});(0,i.useEffect)((()=>{M.current=()=>{const e=(0,Ut.e)({unit:T,contractVal:C,price:v,orderAmount:o.current.buyMaxAmount*f/100,stepSizePrecision:k,tickSizePrecision:S,equalQtyPrecision:P}),t=(0,Ut.e)({unit:T,contractVal:C,price:v,orderAmount:o.current.sellMaxAmount*f/100,stepSizePrecision:k,tickSizePrecision:S,equalQtyPrecision:P});w(e),E(t)}}),[C,P,v,f,k,S,T]);const A=(0,i.useCallback)((()=>{g(0),w(""),E("")}),[]);(0,i.useEffect)((()=>J.TB.on(J.FP.SET_SLIDER_AMOUNT,g)),[]),(0,i.useEffect)((function(){b===h&&f===y||M.current()}),[b,h,f,y]),(0,i.useEffect)((function(){d||A()}),[s,d,A]),(0,i.useEffect)((function(){d&&!m&&A()}),[m,d,A]),(0,i.useEffect)((function(){""===u&&g(0)}),[u,A]),(0,i.useEffect)((function(){d&&n(e,`${f}%`)}),[e,d,f,n]),(0,i.useEffect)((function(){switch(t){case"buyUnitAmount":n(e,Z);break;case"sellUnitAmount":n(e,I)}}),[e,t,Z,f,I,n]);const R=(0,i.useCallback)((()=>{l(e)}),[l,e]);return jt(c.Z,{sx:$t},jt(Ht,{ref:o}),jt("div",{onMouseUp:R},jt(Bt.Z,Object.assign({},Gt,{progress:f,onChange:g,px:"0px"}))),r&&jt(Xe,{leftLabel:a("Buy",{defaultValue:"Buy"}),rightLabel:a("Sell",{defaultValue:"Sell"}),leftContent:`${Z||N} ${s}`,rightContent:`${I||N} ${s}`}))},Yt=({fieldName:e,unitAmountFieldName:t,side:r})=>{const{setValue:a}=(0,fe.Gc)(),[,[o]]=(0,n.z4)(),l=(0,n.XY)(o),{contractVal:s}=(0,n.j2)(),[c]=(0,p.eY)(),[u]=(0,p.KK)(),d=vt({lastPriceType:"trade"}),{maxBuyOrderAmount:f,maxSellOrderAmount:g}=(0,n.V2)({reduceOnly:u,orderPrice:d}),y=(0,fe.qo)({name:t})||0,b="string"===typeof y&&~(null===y||void 0===y?void 0:y.indexOf("%")),h="buy"===r?f:g,v=Number((0,m.yd)(b?parseFloat(y)/100*h:(({unit:e,contractVal:t,price:r,unitAmount:a})=>{const i=e===Te.SW.coin,o=e===Te.AO.usdt;if(i){const e=Number(t);return r?(0,m.Jp)(a/e,r):0}return o?r?a/r:0:a})({unit:c,contractVal:s,price:d,unitAmount:y}),l,1));return(0,i.useEffect)((()=>{a(e,v)}),[e,v,a]),null};var Qt=r("tS/l"),Xt=r("H3ec"),er=r("a4Ug"),tr=o().createElement;const rr={color:"t.primary"},ar=e=>{let{label:t,disabled:r,className:a,tooltipText:i,tooltipLearnMoreLink:o,checked:n,onChange:l}=e,s=(0,g.Z)(e,["label","disabled","className","tooltipText","tooltipLearnMoreLink","checked","onChange"]);const c=e=>{e.preventDefault()},u=tr(A.Z,{fontSize:12,onClick:c},t);return tr(kt.Z,{className:a,width:"auto",mt:16},tr(er.Z,Object.assign({},s,{onChange:e=>{l(e.currentTarget.checked)},checked:n,disabled:r})),i?tr(xe.m,{labelSx:rr,tip:tr("span",{onClick:c},i),learnMoreLink:o},u):u)};var ir=r("1VTk"),or=o().createElement;const nr=e=>{let{fieldName:t,value:r,label:a,disabled:i}=e,o=(0,g.Z)(e,["fieldName","value","label","disabled"]);const{setValue:n}=(0,fe.Gc)(),l=(0,fe.qo)({name:t})===r;return or(ir.ZP,Object.assign({},o,{value:r,name:t,label:a,disabled:i,checked:l,onChange:e=>n(t,e)}))};var lr=o().createElement;const sr=({priceFieldName:e,orderTypeFieldName:t,prefix:r,disabled:a,required:n,limitOptionValue:l,marketOptionValue:s})=>{const c=(0,Rt.i)(),{getI18n:u}=(0,p.yk)(),{setValue:d,getValues:m}=(0,fe.Gc)(),f=(0,i.useRef)(m(e)),g=(0,fe.qo)({name:t})===s,y=(0,i.useMemo)((()=>[{label:u("limit",{defaultValue:"Limit"}),value:l},{label:u("market",{defaultValue:"Market"}),value:s}]),[u,l,s]);(0,i.useEffect)((function(){g?(f.current=m(e),d(e,"")):d(e,f.current)}),[m,g,e,d]);const b=lr(o().Fragment,null,!g&&lr(De,{fieldName:e}),lr(Lt,{fieldName:t,options:y,disabled:a}));return lr(Ne,{fieldName:e,prefix:r,suffix:b,precision:c,maxLength:Te.ze,placeholder:g?u("advancedStrategy-marketPrice",{defaultValue:"Market Price"}):"",disabled:g||a,required:n})};var cr=o().createElement;const ur={"> .percent-input":{width:"64px",minWidth:"64px",marginLeft:"6px",".bn-input-prefix":{display:"none"},".bn-input-suffix":{ml:"2px"}}},dr=({type:e,entryPrice:t,strategySideFieldName:r,stopPriceFieldName:a,stopPriceWorkingTypeFieldName:o,disabled:n,required:l})=>{const{getI18n:c}=(0,p.yk)(),{setValue:u}=(0,fe.Gc)(),d=(0,Rt.i)(),{0:f,1:g}=(0,i.useState)(""),y=(0,i.useRef)(null),[b,h]=(0,fe.qo)({name:[r,a]}),v="takeProfit"===e;(0,i.useEffect)((()=>{if(!t||!f||"pnlPercent"!==y.current)return;const e=v?(({strategySide:e,entryPrice:t,pnlPercent:r})=>t*(1+r*e/100))({strategySide:b,entryPrice:t,pnlPercent:Number(f)}):(({strategySide:e,entryPrice:t,pnlPercent:r})=>t*(1-r*e/100))({strategySide:b,entryPrice:t,pnlPercent:Number(f)});u(a,e<0?"0":(0,m.uf)(e,d).replace(/,/g,""))}),[t,v,f,d,u,a,b]),(0,i.useEffect)((()=>{if(!t||!h||"stopPrice"!==y.current)return;const e=v?(({strategySide:e,entryPrice:t,stopPrice:r})=>e*(r-t)*100/t)({strategySide:b,entryPrice:t,stopPrice:h}):(({strategySide:e,entryPrice:t,stopPrice:r})=>e*(r-t)*100*-1/t)({strategySide:b,entryPrice:t,stopPrice:h});g(e<0?"0":(0,m.uf)(e,1))}),[t,v,h,b]);const x=v?c("advancedStrategy-takeProfitStopPrice",{defaultValue:"TP"}):c("advancedStrategy-stopLossStopPrice",{defaultValue:"SP"}),k=v?c("advancedStrategy-gain",{defaultValue:"Gain"}):c("advancedStrategy-loss",{defaultValue:"Loss"});return cr(s.Z,{sx:ur},cr(Ft,{prefix:x,priceFieldName:a,workingTypeFieldName:o,disabled:n,required:l,onFocus:()=>{y.current="stopPrice"}}),cr(Ie.Q,{className:"percent-input",precision:1,suffix:"%",value:f,onChange:g,onFocus:()=>{y.current="pnlPercent"},placeholder:k,disabled:n,target:v?"gain":"loss"}))};var mr=r("4Dm0"),pr=o().createElement;const fr=({qty:e,contractSize:t,entryPrice:r,stopPrice:a,side:i,precision:o})=>r&&a&&t&&e?(0,m.uf)(t*e*i*(1/r-1/a),o):"-",gr=({qty:e,entryPrice:t,stopPrice:r,side:a,precision:i})=>t&&r&&e?(0,m.uf)(e*a*(r-t),i):"-",yr={width:"100%",mt:"12px",fontSize:"12px",lineHeight:"16px","> .row":{display:"flex",justifyContent:"space-between","> .label":{color:"t.third"},"&.stop-pnl-row":{mt:"6px"}}},br=({takeProfitStopPrice:e,takeProfitPrice:t,takeProfitOrderType:r,stopLossStopPrice:a,stopLossPrice:i,stopLossOrderType:o,entryPrice:l,side:s})=>{const{getI18n:u}=(0,ae.yk)(),{contractVal:m=1,marginAsset:p,pricePrecision:f}=(0,n.j2)(),g=xt({side:"buy"}),y=xt({side:"sell"});let b="-",h="-";return(0,mr.G)()?(b=fr({entryPrice:+l,stopPrice:r===d.Jm.TAKE_PROFIT_LIMIT?+t:+e,side:s,qty:1===s?+g:+y,contractSize:m,precision:f}),h=fr({entryPrice:+l,stopPrice:o===d.Jm.STOP_LIMIT?+i:+a,side:s,qty:1===s?+g:+y,contractSize:m,precision:f})):(b=gr({entryPrice:+l,stopPrice:r===d.Jm.TAKE_PROFIT_LIMIT?+t:+e,side:s,qty:1===s?+g:+y,precision:f}),h=gr({entryPrice:+l,stopPrice:o===d.Jm.STOP_LIMIT?+i:+a,side:s,qty:1===s?+g:+y,precision:f})),pr(c.Z,{sx:yr},pr("div",{className:"row"},pr("div",{className:"label"},u("advancedStrategy-exitPNL")),pr("div",{className:"value"},b," ",p)),pr("div",{className:"row stop-pnl-row"},pr("div",{className:"label"},u("advancedStrategy-stopPNL")),pr("div",{className:"value"},h," ",p)))};var hr=o().createElement;const vr=({strategySideFieldName:e,takeProfitPriceFieldName:t,takeProfitStopPriceFieldName:r,takeProfitStopPriceWorkingTypeFieldName:a,takeProfitOrderTypeFieldName:i,stopLossPriceFieldName:n,stopLossStopPriceFieldName:l,stopLossStopPriceWorkingTypeFieldName:s,stopLossOrderTypeFieldName:c})=>{const{getI18n:u}=(0,p.yk)(),[m]=(0,p.t1)(),{isMobile:f}=(0,Qt.F)(),[g]=(0,p.KK)(),y=g,[b,h,v,x,k,S,P]=(0,fe.qo)({name:[e,t,r,i,n,l,c]}),T=vt({lastPriceType:b===ie.O6.LONG?"ask":"bid"});return m&&!f?hr(o().Fragment,null,hr(dr,{type:"takeProfit",entryPrice:T,strategySideFieldName:e,stopPriceFieldName:r,stopPriceWorkingTypeFieldName:a,disabled:y,required:!1}),hr(sr,{prefix:u("advancedStrategy-takeProfitPrice",{defaultValue:"TP Price"}),priceFieldName:t,orderTypeFieldName:i,limitOptionValue:d.Jm.TAKE_PROFIT_LIMIT,marketOptionValue:d.Jm.TAKE_PROFIT_MARKET,disabled:y,required:!1}),hr(dr,{type:"stopLoss",entryPrice:T,strategySideFieldName:e,stopPriceFieldName:l,stopPriceWorkingTypeFieldName:s,disabled:y,required:!1}),hr(sr,{prefix:u("advancedStrategy-stopLossPrice",{defaultValue:"SL Price"}),priceFieldName:n,orderTypeFieldName:c,limitOptionValue:d.Jm.STOP_LIMIT,marketOptionValue:d.Jm.STOP_MARKET,disabled:y,required:!1}),hr(br,{takeProfitPrice:h,takeProfitStopPrice:v,takeProfitOrderType:x,stopLossPrice:k,stopLossStopPrice:S,stopLossOrderType:P,entryPrice:T,side:b})):hr(o().Fragment,null,hr(Ft,{prefix:u("takeProfit",{defaultValue:"Take Profit"}),priceFieldName:r,workingTypeFieldName:a,required:!1,disabled:y}),hr(Ft,{prefix:u("stopLoss",{defaultValue:"Stop Loss"}),priceFieldName:l,workingTypeFieldName:s,required:!1,disabled:y}))},xr={flexDirection:"row",justifyContent:"space-between",height:"16px",".tpsl-checkbox":{mt:0},".side-radio":{color:"t.primary",".radio-text":{fontSize:"12px",lineHeight:"16px"},"&.short-side-radio":{ml:"16px"}}};var kr=o().createElement;const Sr=({strategySideFieldName:e,takeProfitPriceFieldName:t,takeProfitStopPriceFieldName:r,takeProfitStopPriceWorkingTypeFieldName:a,takeProfitOrderTypeFieldName:o,stopLossPriceFieldName:n,stopLossStopPriceFieldName:l,stopLossStopPriceWorkingTypeFieldName:c,stopLossOrderTypeFieldName:u,showSideRadioButtons:d})=>{const m=(0,Xt.tZ)(),{reset:f,getValues:g}=(0,fe.Gc)(),{getI18n:y}=(0,p.yk)(),[b,v]=(0,p.t1)(),{isMobile:x}=(0,Qt.F)(),[k]=(0,p.KK)(),S=k,P=(0,p.C3)(),[T,C]=(0,p.uD)(),M=T&&b&&!x,Z=(0,i.useCallback)((e=>{C(e),e||f((0,me.Z)((0,me.Z)({},g()),ye()(Se.U,[r,t,n,l])))}),[C,f,g,r,t,n,l]);return(0,i.useEffect)((()=>{P===h.UW&&v(!1)}),[P,v]),kr("div",null,kr(s.Z,{sx:xr},kr(ar,{className:"tpsl-checkbox",tooltipText:y("limitType-strategyOrder-tip",{defaultValue:""}),tooltipLearnMoreLink:(0,J.CN)(h.Wh.TP_SL,{locale:m}),label:y("limitType-strategyOrder",{defaultValue:"TP/SL"}),disabled:S,checked:T,onChange:Z}),M&&d&&kr(s.Z,{flexDirection:"row"},kr(nr,{className:"side-radio",fieldName:e,value:ie.O6.LONG,label:kr("span",{className:"radio-text"},y("advancedStrategy-long",{defaultValue:"Long"})),disabled:S}),kr(nr,{className:"side-radio short-side-radio",fieldName:e,value:ie.O6.SHORT,label:kr("span",{className:"radio-text"},y("advancedStrategy-short",{defaultValue:"Short"})),disabled:S}))),T&&kr(vr,{strategySideFieldName:e,takeProfitPriceFieldName:t,takeProfitStopPriceFieldName:r,takeProfitStopPriceWorkingTypeFieldName:a,takeProfitOrderTypeFieldName:o,stopLossPriceFieldName:n,stopLossStopPriceFieldName:l,stopLossStopPriceWorkingTypeFieldName:c,stopLossOrderTypeFieldName:u}))};var Pr=r("k2tD"),Tr=o().createElement;const Cr=()=>{const e=(0,i.useRef)(document.querySelector('div[name="orderForm"]')),t=(0,n.tZ)(),{getI18n:r}=(0,p.yk)(),a=r("cost",{defaultValue:"Cost"}),o=r("costTip",{defaultValue:"The margin required to execute this order. Reducing a position does not cost margin."});return Tr(xe.m,{tip:o,learnMoreLink:(0,J.CN)(h.Wh.COST,{locale:t}),placement:"bottom",container:e.current},a)};var Mr=o().createElement;const Zr=({side:e,price:t,buyOrderAmount:r,sellOrderAmount:a})=>{const o=(0,i.useMemo)((()=>Mr(Cr,null)),[]),{marginAsset:l}=(0,n.j2)(),{buyOrderCost:s,sellOrderCost:c}=(0,n.E4)({orderPrice:t,buyOrderAmount:r,sellOrderAmount:a});switch(e){case"buy":return Mr(Ye,{label:o,content:`${s} ${l}`});case"sell":return Mr(Ye,{label:o,content:`${c} ${l}`});case"both":return Mr(Xe,{leftLabel:o,rightLabel:o,leftContent:`${s} ${l}`,rightContent:`${c} ${l}`});default:return null}},wr=({side:e})=>{const t=(0,i.useMemo)((()=>Mr(Cr,null)),[]),{marginAsset:r}=(0,n.j2)(),a=(0,p.G3)()?ie.vQ.delivery.pricePrecision:ie.vQ.USDT.pricePrecision,o=(0,i.useRef)((0,Pr.GW)(0,a,!0)),l=(0,i.useRef)((0,Pr.GW)(0,a,!0));switch(e){case"buy":return Mr(Ye,{label:t,content:`${o.current} ${r}`});case"sell":return Mr(Ye,{label:t,content:`${l.current} ${r}`});case"both":return Mr(Xe,{leftLabel:t,rightLabel:t,leftContent:`${o.current} ${r}`,rightContent:`${l.current} ${r}`});default:return null}},Ir=({side:e})=>{const t=vt({lastPriceType:"trade"}),r=xt({side:"buy"}),a=xt({side:"sell"}),[i]=(0,p.hN)(),[n]=(0,p.lE)(),l=!i||n===d.RS.OPEN,s=r>0||a>0;return Mr(o().Fragment,null,l&&s?Mr(Zr,{side:e,price:t,buyOrderAmount:r,sellOrderAmount:a}):Mr(wr,{side:e}))};var Er=o().createElement;const Nr=({side:e})=>{const{getI18n:t}=(0,p.yk)(),r=t("Max",{defaultValue:"Max"}),a=(0,n.mA)(),[i]=(0,n.z4)(),[o]=(0,p.K5)(),[l]=(0,p.eY)(),{contractVal:s}=(0,n.j2)(),c=vt({lastPriceType:"trade"}),[u]=(0,p.KK)(),{maxBuyOrderAmount:d,maxSellOrderAmount:m}=(0,n.V2)({reduceOnly:u,orderPrice:c}),{stepSizePrecision:f,tickSizePrecision:g,equalQtyPrecision:y}=(0,qt.q)({orderType:o}),b=(0,Ut.e)({unit:l,contractVal:s,price:c,orderAmount:d,stepSizePrecision:f,tickSizePrecision:g,equalQtyPrecision:y}),h=(0,Ut.e)({unit:l,contractVal:s,price:c,orderAmount:m,stepSizePrecision:f,tickSizePrecision:g,equalQtyPrecision:y});switch(e){case"buy":return Er(Ye,{dataTestId:"max-buy-amount",label:r,content:`${b} ${a}`});case"sell":return Er(Ye,{dataTestId:"max-sell-amount",label:r,content:`${h} ${a}`});case"both":return Er(Xe,{leftDataTestId:"max-buy-amount",rightDataTestId:"max-sell-amount",leftLabel:r,rightLabel:r,leftContent:`${b} ${a}`,rightContent:`${h} ${a}`});default:return null}};var Ar=o().createElement;const Rr=({side:e})=>Ar(o().Fragment,null,Ar(Ir,{side:e}),Ar(Nr,{side:e}));var Or=o().createElement;const Lr={flexDirection:"row",alignItems:"center",height:"16px",fontSize:"12px",mt:"16px"},Vr={verticalAlign:"50%",marginRight:"8px"},Fr=[ie.rb.GTC,ie.rb.IOC,ie.rb.FOK].map((e=>({label:e,value:e}))),Dr=({text:e})=>(0,i.useMemo)((()=>Or(A.Z,{p:0,mb:2},e)),[e]),_r=e=>{const{getI18n:t}=(0,p.yk)(),[r,a]=(0,p.LY)();return Or(s.Z,Object.assign({__css:Lr},e),Or(xe.m,{sx:Vr,tip:Or(o().Fragment,null,Or(Dr,{text:t("timeInForce-title",{defaultValue:"Time in Force"}),key:0}),Or(Dr,{text:t("timeInForce-GTC",{defaultValue:"GTC: Good Till Cancel"}),key:1}),Or(Dr,{text:t("timeInForce-IOC",{defaultValue:"IOC: Immediate Or Cancel"}),key:2}),Or(Dr,{text:t("timeInForce-FOK",{defaultValue:"FOK: Fill Or Kill"}),key:3}))},t("limitType-TIF",{defaultValue:"TIF"})),Or(Zt,{value:r,onChange:a,options:Fr,"data-testid":"TIFReduxSelector"}))};var Br=o().createElement;const zr=({className:e})=>{const{getI18n:t}=(0,p.yk)(),[r,a]=(0,p.KK)(),[o]=(0,p.hN)(),[,n]=(0,p.uD)();return(0,i.useEffect)((()=>{r&&n(!1)}),[r]),o?null:Br(ar,{className:e,checked:r,onChange:a,tooltipText:t("limitType-reduceOnly-tip",{defaultValue:""}),label:t("limitType-reduceOnly",{defaultValue:"Reduce Only"})})};var Kr=r("bmcq"),qr=o().createElement;const Ur=(0,i.forwardRef)(((e,t)=>{let{fieldName:r,value:a,children:i}=e,o=(0,g.Z)(e,["fieldName","value","children"]);const{setValue:n}=(0,fe.Gc)();return qr(be.Z,Object.assign({sz:"normal",variant:"default",type:"submit",onClick:()=>{n(r,a)},ref:t},o),i)}));var Wr=o().createElement;const Hr=({fieldName:e,activatePriceFieldName:t,side:r})=>{const[a]=(0,p.K5)(),[o]=(0,p.lE)(),{BuyText:l,SellText:c}=(0,p.x_)(o),m=(0,u.useSelector)(Kr.X8),f=(0,fe.qo)({name:Se.T.TRIGGER_PRICE_WORKING_TYPE}),g=(0,n.uH)(f===d.HZ.LAST_PRICE),y=(0,n.CE)(),b=f===d.HZ.LAST_PRICE?g:y,h=(0,fe.qo)({name:t}),{buyDisabled:v,sellDisabled:x}=(0,p.nL)({orderType:a,activePrice:h,price:b}),k=(0,i.useRef)(null),S=(0,i.useRef)(null);(0,i.useEffect)((()=>(0,Pe.GY)((({name:e})=>{var t;switch(e){case Pe.oU:v||null===(t=k.current)||void 0===t||t.click();break;case Pe.nW:var r;if(!x)null===(r=S.current)||void 0===r||r.click()}}))),[v,x]);const P=Wr(Ur,{ref:k,fieldName:e,value:ie.hp.BUY,disabled:m||v,colorStyle:"buy",flex:1,width:"100%",mr:"8px",mt:"8px"},l),T=Wr(Ur,{ref:S,fieldName:e,value:ie.hp.SELL,disabled:m||x,colorStyle:"sell",width:"100%",flex:1,mt:"8px"},c);return"buy"===r?P:"sell"===r?T:"both"===r?Wr(s.Z,null,P,T):null};var $r=r("fjQ4"),jr=r("IcOa"),Gr=r("QT1x"),Jr=r("+vya"),Yr=r("xxGv"),Qr=r("isaE");const Xr={m:"-12px",pb:"12px",bg:"modalBg",fontSize:"12px",borderRadius:"4px",overflow:"hidden",".fee-row":{display:"flex",justifyContent:"space-between",px:"12px","&.taker":{mb:"4px"}},".fee-label":{color:"t.third"},".fee-value":{color:"t.primary"},".vip-level":{color:"t.yellow"},".arrow-icon-container":{ml:"auto",transform:"rotate(-90deg)"}},ea={".tooltip-label":{cursor:"pointer",fontSize:"12px",borderBottom:"1px solid",borderColor:"t.secondary",color:"t.secondary","&:hover":{borderColor:"t.yellow",color:"t.yellow"}}};var ta=o().createElement;const ra=1e6,{FEE_URL:aa}=ie.x,ia=(0,me.Z)((0,me.Z)({},{display:"flex",alignItems:"center",width:"200px",height:"40px",mb:"12px",px:"10px",textDecoration:"none","&.header-link-color":{color:"t.primary","&:hover":{color:"t.primary"}}}),{},{background:e=>`linear-gradient(to right, ${e.colors.line}80, ${e.colors.modalBg})`}),oa=()=>{const{isLight:e}=(0,Yr.Fg)(),{getI18n:t}=(0,p.yk)(),r=(0,Xt.tZ)(),a=(0,p.aq)(),{feeTier:i,makerCommission:o=0,takerCommission:n=0}=a,l=(0,m.Bq)(n,ra,{digit:4}),c=(0,m.Bq)(o,ra,{digit:4});return ta(s.Z,{"data-testid":"freeLevel-content",flexDirection:"column",sx:(0,me.Z)((0,me.Z)({},Xr),!e&&{boxShadow:"elevation2"})},ta(A.Z,{as:"a",className:"header-link-color",target:"_blank",rel:"noreferrer",href:(0,Qr.C)(aa,{locale:r}),sx:ia},ta(Gr.Z,{size:24,color:"t.secondary"}),t("fee-feeTierLabel",{defaultValue:"Fee Tier"}),"\xa0",ta("span",{className:"vip-level"},0===Number(i)?t("fee-regularUser",{defaultValue:"Regular User"}):`VIP ${i}`),ta("span",{className:"arrow-icon-container"},ta(Jr.Z,{size:16,color:"t.third"}))),ta("div",{className:"fee-row taker"},ta("label",{className:"fee-label"},t("fee-takerLabel",{defaultValue:"Taker"}),":"),ta("span",{className:"fee-value"},`${n<0?"-":""}${l}`)),ta("div",{className:"fee-row"},ta("label",{className:"fee-label"},t("fee-makerLabel",{defaultValue:"Maker"}),":"),ta("span",{className:"fee-value"}," ",`${o<0?"-":""}${c}`)))};var na=o().createElement;const la=()=>{const{isIPad:e}=(0,Qt.F)(),{getI18n:t}=(0,p.yk)(),r=(0,p.aq)(),a=(0,jr._n)(),{feeTier:i="-"}=r;return a&&!h.Jg?na($r.Z,{sx:ea,enablePortal:!e,placement:"bottom",tip:"-"===i?null:na(oa,null),bg:"modalBg"},na("div",{className:"tooltip-label","data-testid":"freeLevel-button"},t("feeLevel",{defaultValue:"Fee level"}))):null};var sa=o().createElement;const ca={[d.Jm.LIMIT]:({price:e,amount:t,amountSlider:r,tpsl:a,reduceOnly:i,tif:n,costAndMax:l,placeOrderButtons:s,divider:c})=>nt(o().Fragment,null,e,t,r,c,a,nt(ot,null,i,n),c,s,l),[d.Jm.MARKET]:({divider:e,amount:t,amountSlider:r,tpsl:a,reduceOnly:i,costAndMax:n,placeOrderButtons:l,showTPSL:s,showReduceOnly:c})=>{const u=s||c;return lt(o().Fragment,null,t,r,u&&e,a,i,u&&e,l,n)},[d.Jm.STOP_LIMIT]:({divider:e,price:t,stopPrice:r,amount:a,amountSlider:i,reduceOnly:n,tif:l,tpsl:s,costAndMax:c,placeOrderButtons:u})=>st(o().Fragment,null,r,t,a,i,e,s,st(ot,null,n,l),e,u,c),[d.Jm.STOP_MARKET]:({divider:e,stopPrice:t,amount:r,amountSlider:a,reduceOnly:i,tpsl:n,costAndMax:l,placeOrderButtons:s,showReduceOnly:c,showTPSL:u})=>{const d=c||u;return ct(o().Fragment,null,t,r,a,d&&e,n,i,d&&e,s,l)},[d.Jm.TRAILING_STOP_MARKET]:({divider:e,callbackRate:t,activationPrice:r,amount:a,amountSlider:i,reduceOnly:n,costAndMax:l,placeOrderButtons:s,showReduceOnly:c})=>ut(o().Fragment,null,t,r,a,i,c&&e,n,c&&e,s,l),[d.Jm.POST_ONLY]:({divider:e,price:t,amount:r,amountSlider:a,reduceOnly:i,tpsl:n,costAndMax:l,placeOrderButtons:s,showTPSL:c,showReduceOnly:u})=>{const d=c||u;return dt(o().Fragment,null,t,r,a,d&&e,n,i,d&&e,s,l)}},ua=e=>{let{side:t,horizontal:r}=e,a=(0,g.Z)(e,["side","horizontal"]);const[l]=(0,p.K5)(),[u]=(0,p.hN)(),[m]=(0,p.lE)(),{symbol:f}=(0,n.j2)(),y=(0,n.c7)(),b=(0,n._n)(),{getI18n:v}=H(),{getI18n:x}=(0,p.yk)(),[k,S]=(0,he.Z)(h._J,ye()(Se.U,[Se.T.TRIGGER_PRICE_WORKING_TYPE,Se.T.TP_STOP_PRICE_WORKING_TYPE,Se.T.TP_ORDER_TYPE,Se.T.SL_STOP_PRICE_WORKING_TYPE,Se.T.SL_ORDER_TYPE])),P=(0,i.useCallback)((()=>(0,me.Z)((0,me.Z)((0,me.Z)({},Se.U),k),{},{[Se.T.LIMIT_PRICE]:y(),[Se.T.STRATEGY_SIDE]:"sell"===t?ie.O6.SHORT:ie.O6.LONG})),[k,y,t]),T=(0,fe.cI)({defaultValues:P()}),{reset:C,handleSubmit:M,getValues:Z}=T,w=(0,i.useCallback)((()=>{const e=Z(Se.T.TRIGGER_PRICE_WORKING_TYPE),t=Z(Se.T.TP_STOP_PRICE_WORKING_TYPE),r=Z(Se.T.TP_ORDER_TYPE),a=Z(Se.T.SL_STOP_PRICE_WORKING_TYPE),i=Z(Se.T.SL_ORDER_TYPE);return{[Se.T.TRIGGER_PRICE_WORKING_TYPE]:e,[Se.T.TP_STOP_PRICE_WORKING_TYPE]:t,[Se.T.TP_ORDER_TYPE]:r,[Se.T.SL_STOP_PRICE_WORKING_TYPE]:a,[Se.T.SL_ORDER_TYPE]:i}}),[Z]),I=(0,ke.F)({afterSubmit:()=>C((0,me.Z)((0,me.Z)({},P()),w()))}),E=(0,pe.Z)(l),N=(0,pe.Z)(f);(0,i.useEffect)((function(){E===l&&N===f||C((0,me.Z)((0,me.Z)({},P()),w()))}),[C,l,E,P,w,N,f]),(0,i.useEffect)((function(){function e(){const e=w();S(e)}return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}),[w,S]);const A=ca[l]||null,R=(0,i.useMemo)((()=>sa(qe,{fieldName:Se.T.LIMIT_PRICE,prefix:x("price",{defaultValue:"Price"}),required:!0,getLastTracePrice:y})),[x,y]),O=(0,i.useMemo)((()=>sa(Ft,{prefix:x("stopPrice",{defaultValue:"Stop Price"}),priceFieldName:Se.T.TRIGGER_PRICE,workingTypeFieldName:Se.T.TRIGGER_PRICE_WORKING_TYPE,required:!0})),[x]),L=(0,i.useMemo)((()=>sa(ht,{fieldName:Se.T.PRICE_RATE,required:!0})),[]),V=(0,i.useMemo)((()=>{const e=sa(xe.m,{className:"prefix-tooltip-container",tip:x("activationPriceTip",{defaultValue:ve.activationPriceTip})},sa(mt.u,null,x("activationPrice",{defaultValue:"Activation Price"})));return sa(c.Z,{sx:{".bn-input-prefix":{flex:"1"},".prefix-tooltip-container":{width:"100%"},".bn-input-suffix":{marginLeft:"0px !important"},".order-form-input":{width:"73px",px:"4px"}}},sa(Ft,{prefix:e,priceFieldName:Se.T.ACTIVATE_PRICE,workingTypeFieldName:Se.T.ACTIVATE_PRICE_WORKING_TYPE,required:!1}))}),[x]),F=(0,i.useMemo)((()=>sa(At,{fieldName:Se.T.UNIT_AMOUNT,prefix:x("quantity",{defaultValue:"Size"}),required:!0})),[x]),D=b?sa(Yt,{fieldName:Se.T.BUY_ORDER_AMOUNT,unitAmountFieldName:Se.T.UNIT_AMOUNT,side:"buy"}):null,_=b?sa(Yt,{fieldName:Se.T.SELL_ORDER_AMOUNT,unitAmountFieldName:Se.T.UNIT_AMOUNT,side:"sell"}):null,B=(0,i.useMemo)((()=>sa(Jt,{amountFieldName:Se.T.UNIT_AMOUNT,amountFieldValueType:r?"buy"===t?"buyUnitAmount":"sellUnitAmount":"percentage",showUnitAmount:b&&!r})),[b,t,r]),z=(0,i.useMemo)((()=>b&&m!==d.RS.CLOSE),[b,m]),K=(0,i.useMemo)((()=>z?sa(Sr,{showSideRadioButtons:!r,strategySideFieldName:Se.T.STRATEGY_SIDE,takeProfitPriceFieldName:Se.T.TP_LIMIT_PRICE,takeProfitStopPriceFieldName:Se.T.TP_STOP_PRICE,takeProfitStopPriceWorkingTypeFieldName:Se.T.TP_STOP_PRICE_WORKING_TYPE,takeProfitOrderTypeFieldName:Se.T.TP_ORDER_TYPE,stopLossPriceFieldName:Se.T.SL_LIMIT_PRICE,stopLossStopPriceFieldName:Se.T.SL_STOP_PRICE,stopLossStopPriceWorkingTypeFieldName:Se.T.SL_STOP_PRICE_WORKING_TYPE,stopLossOrderTypeFieldName:Se.T.SL_ORDER_TYPE}):null),[z,r]),q=b&&!r&&!u,U=(0,i.useMemo)((()=>q?sa(zr,null):null),[q]),W=(0,i.useMemo)((()=>b&&!r?sa(_r,{mt:z?"16px":"0px"}):null),[b,r,z]),$=(0,i.useMemo)((()=>b?sa(o().Fragment,null,sa(Rr,{side:t}),!r&&sa(s.Z,{justifyContent:"flex-end",mt:"12px"},sa(la,null))):null),[b,t,r]),j=(0,i.useMemo)((()=>b?sa(Hr,{fieldName:Se.T.SIDE,activatePriceFieldName:Se.T.ACTIVATE_PRICE,side:t}):sa(o().Fragment,null,sa($e,{getI18n:v}),!h.Jg&&sa(be.Z,{as:"a",width:1,mt:"12px",py:"10px",bg:"line",colorStyle:"secondary",href:h.x.TESTNET_OAUTH_URL},x("ba-futures-mock")))),[b,t,v,x]),G=(0,i.useMemo)((()=>b&&!r?sa(rt,null):null),[b,r]),J=(0,i.useMemo)((()=>sa(we,null)),[]);return sa(fe.RV,T,sa("form",Object.assign({autoComplete:"off",onSubmit:M(I)},a),A&&sa(A,{side:t,horizontal:r,divider:G,price:R,stopPrice:O,callbackRate:L,activationPrice:V,amount:F,amountSlider:B,tpsl:K,reduceOnly:U,tif:W,costAndMax:$,placeOrderButtons:j,showReduceOnly:q,showTPSL:z}),D,_),J)},da=o().memo(ua);var ma=r("PcQm"),pa=r("/0Tg"),fa=r("K49m"),ga=r("0hOy"),ya=r("MB7V"),ba=r("Oci4"),ha=r("xfzF"),va=r("P3ur"),xa=r("PYOp"),ka=r("ZkJp"),Sa=r("aUqa"),Pa=r("ogBT"),Ta=r("HDtI"),Ca=r("S24M"),Ma=r("uH0D"),Za=o().createElement;const wa=(e,t)=>{switch(t.type){case"changeResponsibleTradingPeriod":return(0,me.Z)((0,me.Z)({},e),t.payload);case"toggleResponsibleTrade":return(0,me.Z)((0,me.Z)({},e),{},{inCoolingDuration:t.payload});case"reset":return(0,me.Z)({},t.payload);default:return e}},Ia=new Date,Ea=Ia.setHours(0,0,0,0),Na={today:{startTime:Ea,endTime:Ia.setHours(23,59,59,59)},oneWeek:{startTime:Ea,endTime:Ea+691192e3},oneMonth:{startTime:Ea,endTime:new Date(Ia.setMonth(Ia.getMonth()+1)).setHours(23,59,59,59)}},Aa=(0,i.forwardRef)(((e,t)=>{const r=(0,u.useDispatch)(),{getI18n:a}=(0,p.yk)(),{0:l,1:d}=(0,i.useState)(!1),{0:m,1:f}=(0,i.useState)(!1),{setMessageInfo:g}=(0,n.YT)(),y=(0,fa.p)(),{0:b,1:h}=(0,i.useState)(""),v=(0,n.tZ)(),x=(0,i.useMemo)((()=>y.inCoolingDuration?y:{inCoolingDuration:!1,startTime:0,endTime:0}),[y]),{0:k,1:S}=(0,i.useReducer)(wa,x),P=(0,i.useCallback)((e=>{S({type:"toggleResponsibleTrade",payload:e.target.checked})}),[]),T=(0,i.useCallback)((()=>{setTimeout((()=>{S({type:"reset",payload:{initialState:x}}),h("")}),0)}),[x]),C=(0,i.useCallback)((({startTime:e,endTime:t})=>{S({type:"changeResponsibleTradingPeriod",payload:{startTime:e,endTime:t}})}),[]),M=(0,i.useCallback)((()=>{d(!1),T()}),[T]),Z=(0,i.useCallback)((()=>{f(!1),T()}),[T]),w=(0,i.useCallback)((()=>{d(!1),f(!0)}),[]),I=(0,i.useCallback)((()=>{r.tradeForbidden.setCoolingPeriodConfig(k).then((e=>{e.success?(g({message:a("coolingSettingSuccess",{defaultValue:"Cooling-off Period setting successfully"}),variant:"success"}),(0,Ca.j)("set_cooling_success")):T()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})),f(!1)}),[T,a,g,r.tradeForbidden,k]);return(0,i.useEffect)((()=>{!k.inCoolingDuration||k.startTime||k.endTime||(C((0,me.Z)({},Na.today)),h("today"))}),[C,k.inCoolingDuration,k.startTime,k.endTime]),(0,i.useImperativeHandle)(t,(()=>({showResponsibleConfigPanel:()=>{d(!0)}}))),Za(o().Fragment,null,Za(ha.Z,{tx:"responsibleTrade",variant:"dialog",open:l,onCloseIconClick:M,title:a("coolingPeriod",{defaultValue:"Cooling Period"}),"data-testid":"cooling-off-period-panel"},Za(c.Z,{className:"des"},a("responsibleContent",{defaultValue:"You can voluntarily enter a Cooling-off Period whereby disabling Futures accounts related trading, including Futures, Strategy Trading, Battle and Options. This is an interface level function and not guaranteed to block all trades. You\u2019re not allowed to turn on trading function during Cooling-off Period. You must close all positions and open orders before enabling this setting."}),Za(ga.Z,{variant:"defaultLink",ml:"8px",fontSize:"14px",href:(0,Ma.b)(`/${v}/support/faq/ad7fd07f63a64954a6d6e9257d16adcc`),target:"_blank"},a("learnMore",{defaultValue:"Learn More"}),Za(Sa.Z,{size:14,ml:"2px",verticalAlign:"middle"}))),Za(s.Z,{className:"label"},Za(A.Z,{mr:"20px"},a("disableFuturesTrading",{defaultValue:"Disable Futures Trading Function"})),Za(ya.Z,{"data-testid":"cooling-off-period-switch",size:16,checked:k.inCoolingDuration,disabled:y.inCoolingDuration,onChange:P})),Za(va.Z,{value:b,fontSize:"14px",disabled:y.inCoolingDuration||!k.inCoolingDuration,hideSearch:!0,placeholder:a("chooseLockoutPeriod",{defaultValue:"Choose a lockout period"}),onChange:e=>{C((0,me.Z)({},Na[e])),h(e)},renderValue:e=>e&&a(e)},Za(xa.W,{value:"today"},a("today",{defaultValue:"Today"})),Za(xa.W,{value:"oneWeek"},a("oneWeek",{defaultValue:"1 Week"})),Za(xa.W,{value:"oneMonth"},a("oneMonth",{defaultValue:"1 Month"}))),Za(s.Z,{className:"time-container"},Za(s.Z,{className:"time"},Za("span",null,a("startDate",{defaultValue:"Start Date"})),Za("span",null,k.startTime?(0,Ta.v)(new Date(k.startTime),"yyyy-MM-dd"):"--")),Za("span",{className:"separate"},"-"),Za(s.Z,{className:"time"},Za("span",null,a("endDate",{defaultValue:"End Date"})),Za("span",null,k.endTime?(0,Ta.v)(new Date(k.endTime),"yyyy-MM-dd"):"--"))),Za(ka.y,null,Za(s.Z,{className:"confirm"},Za(be.Z,{sz:"normal",variant:"default",onClick:w,"data-testid":"cooling-off-period-confirm-button",disabled:y.inCoolingDuration||!k.inCoolingDuration||!b},a("PreferenceConfirm",{defaultValue:"Confirm"}))))),Za(ba.Z,{tx:"responsibleTrade",variant:"secondaryConfirm",visible:m},Za(s.Z,{flexDirection:"column",alignItems:"center"},Za(Pa.Z,{width:"96px",height:"96px"}),Za(A.Z,{color:"t.primary",fontSize:"16px"},a("disableWarningDes",{periodOptions:a(b)})),Za(s.Z,{width:"100%",mt:"24px",justifyContent:"space-between"},Za(be.Z,{width:"46%",variant:"default",colorStyle:"secondary",sz:"l",onClick:Z},a("cancelBtnText")),Za(be.Z,{width:"46%",sz:"l",onClick:I},a("confirmBtn"))))))}));var Ra=o().createElement;const Oa={maxWidth:"240px",boxSizing:"border-box",mt:"sm",color:"filterDropdown.color",py:2,borderRadius:"4px",boxShadow:"elevation2",width:"auto",p:0,position:"relative",bg:"modalBg",top:"-20px",right:"10px","& .opr":{variant:"filters.button",color:"t.primary",fontSize:1,lineHeight:"16px",py:"12px",px:3,":hover":{bg:"bg3"},".page-link":{color:"t.primary",textDecoration:"none"},justifyContent:"space-between"},"& .line":{borderTop:"1px solid",borderColor:"newLine",my:"8px",mx:"16px"},"& .checkbox":{color:"t.primary",fontSize:"12px",lineHeight:"16px",py:"8px",px:3,justifyContent:"flex-start",alignItems:"flex-start",":last-of-type":{paddingBottom:"16px"}}},La=()=>{const{getI18n:e}=(0,p.yk)(),t=(0,n.tZ)(),r=(0,n._n)(),a=(0,p.BF)(h.UW),l=(0,i.useRef)(null),s=(0,J.CN)(h.O8,{locale:t}),{showPreferencePanel:c}=(0,p.r8)(),{responsiblePanelRef:u,showResponsiblePanel:d}=(0,p.W5)(),[m,f]=(0,p.UI)(),[g,y]=(0,p.t1)(),[b,v]=(0,p.NU)();return Ra(o().Fragment,null,Ra(Z.ZP,{overlay:Ra(pa.Z,{sx:Oa,onClick:e=>e.stopPropagation()},Ra("div",{name:"orderform-preference-menu"},r&&Ra("div",{className:"opr",onClick:()=>c("oc")},e("preference",{defaultValue:"Preference"})),r&&Ra("div",{className:"opr",onClick:d},e("coolingPeriod",{defaultValue:"Cooling Period"})),Ra("div",{className:"opr",onClick:()=>(0,oe.O)()},e("trading-rules",{defaultValue:"Trading Rules"})),r&&Ra("div",{className:"opr"},Ra("a",{className:"page-link",href:s,target:"_blank"},e("positionLimitEnarge",{defaultValue:"Position Limit Enarge"}))),Ra("div",{className:"line"}),!a&&Ra(o().Fragment,null,Ra(kt.Z,{className:"checkbox"},Ra(er.Z,{onChange:e=>{f(e.target.checked)},checked:m,id:"remember",name:"displayMargin"}),Ra(A.Z,null,e("orderFromPreference-displayMargin",{defaultValue:"Display Margin Mode & Leverage Adjustment Button"}))),Ra(kt.Z,{className:"checkbox"},Ra(er.Z,{onChange:e=>{y(e.target.checked)},checked:g,id:"remember",name:"advancedTPSL"}),Ra(A.Z,null,e("orderFromPreference-advancedTPSL",{defaultValue:"Advanced TP/SL"})))),Ra(kt.Z,{className:"checkbox"},Ra(er.Z,{onChange:e=>{v(e.target.checked)},checked:b,id:"remember",name:"showPlusMinusButton"}),Ra(A.Z,null,e("orderFromPreference-showPlusMinusButton",{defaultValue:"Show Plus/Minus Buttons"}))))),trigger:"click",enablePortal:!0,placement:"bottom-start"},Ra("div",{ref:l},Ra(w.Z,{"data-testid":"orderform-preference-button",fontSize:"20px",sx:{position:"relative",top:"2px",ml:"4px",color:"icons.close",cursor:"pointer","&:hover path":{fill:"t.third"}}}))),r&&Ra(Aa,{ref:u}))};var Va=r("4wBm"),Fa=o().createElement;const Da={":hover":{color:"t.primary"}},_a={ml:"8px",flexShrink:0},Ba=({orderType:e})=>{const{getI18n:t,i18n:{language:r}}=(0,p.yk)(),a=e===d.Jm.TRAILING_STOP_MARKET?(0,J.CN)(h.Wh.TRAILING_STOP_MARKET_ORDER,{locale:r}):(0,J.CN)(h.Wh.ORDER,{locale:r});return Fa(xe.m,{sx:_a,hideUnderLine:!0,learnMoreLink:a,tip:Fa(L,{getFutI18n:t,orderType:e})},Fa(Va.Z,{color:"t.third",size:16,sx:Da}))},za=o().memo(Ba),Ka=[{value:d.Jm.STOP_LIMIT,testId:d.OO.STOP_LIMIT,i18nKey:d.Jm.STOP_LIMIT},{value:d.Jm.STOP_MARKET,testId:d.OO.STOP_MARKET,i18nKey:d.Jm.STOP_MARKET},{value:d.Jm.TRAILING_STOP_MARKET,testId:d.OO.TRAILING_STOP_MARKET,i18nKey:d.Jm.TRAILING_STOP_MARKET},{value:d.Jm.POST_ONLY,testId:d.OO.POST_ONLY,i18nKey:"limitType-postOnly"},{value:d.Jm.TWAP,getTestId:({loginText:e})=>`ordertype_twap_${e}`,i18nKey:d.Jm.TWAP}],qa={width:"100%",boxShadow:"none",overflow:"hidden"},Ua={marginRight:["24px","16px"],".tab":{color:"t.third","&.xs":{fontSize:"xs"},"&:hover":{color:"t.yellow"},"&.active":{color:"t.yellow"}},"&:last-of-type":{marginRight:0,flex:1,minWidth:0,".tab":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},Wa={position:"relative",top:"4px",width:"fit-content",py:"4px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",".option":{padding:"6px 16px",fontSize:"14px",color:"t.primary","&:hover":{bg:"line",cursor:"pointer"},"&.active":{color:"t.yellow"}}};var Ha=o().createElement;const $a={cursor:"pointer"},ja=(e={})=>{const[t,r]=(0,p.K5)(),[a,o]=(0,p.H$)(),{getI18n:l}=(0,p.yk)(),u=(0,p.G3)(),m=(0,n._n)(),f="ph"===(0,n.Jr)(),g=(0,i.useMemo)((()=>u||h.Jg?Ka.filter((e=>e.value!==d.Jm.TWAP)):Ka),[u]),y=(0,i.useMemo)((()=>[d.Jm.LIMIT,d.Jm.MARKET,...g.map((e=>e.value))]),[g]),b=g.find((e=>e.value===a))||g[0];(0,i.useEffect)((function(){y.includes(t)||r(y[0]),y.includes(a)||o(b.value)}),[t,a,b.value]);const v=m?"login":"notLogin",x=(e,t,r)=>Ha("div",{className:_()({active:e,tab:!0,xs:f}),"date-testid":r},t),k=(0,i.useMemo)((()=>Ha(c.Z,{sx:Wa,name:"ordertabs-menu","data-testid":`ordertype_dropdown_${v}`},g.map((({value:e,i18nKey:a,testId:i,getTestId:n})=>Ha("div",{key:e,className:_()({active:t===e,xs:f,option:!0}),"data-testid":n?n({loginText:v}):i,onClick:()=>{r(e),o(e)}},l(a)))))),[l,f,t,r,o,v,g]);return Ha(s.Z,Object.assign({alignItems:"center"},e,{className:"order-tabs"}),Ha(s.Z,{flexDirection:"row"},Ha(V.Z,{variant:"standard",defaultActiveKey:t,controlledKey:t,onChange:r,tabsSx:qa,tabSx:Ua},Ha(F.Z,{tab:()=>x(t===d.Jm.LIMIT,l("limit"),"limit"),tabKey:d.Jm.LIMIT}),Ha(F.Z,{tab:()=>x(t===d.Jm.MARKET,l("market"),"market"),tabKey:d.Jm.MARKET}),Ha(F.Z,{tab:()=>x(t===b.value,l(b.i18nKey),b.getTestId?b.getTestId({loginText:v}):b.testId),tabKey:b.value})),Ha(Z.ZP,{trigger:"hover",enablePortal:!0,placement:"bottom-end",overlay:k},Ha(St.Z,{color:"t.third",size:16,verticalAlign:"middle","data-testid":"moreStopMode",sx:$a}))),t!==d.Jm.TWAP&&Ha(za,{orderType:t}))},Ga=o().memo(ja);var Ja=o().createElement;const Ya={position:"sticky",top:0,zIndex:1,bg:"popupBg",fontSize:"14px",".flex-row":{display:"flex",flexDirection:"row",alignItems:"center",width:"100%",boxSizing:"border-box","&.position-tab-row":{alignItems:"stretch"},"&.margin-leverage-or-title-row":{pt:"10px",px:"16px"}},".dropdown-wrapper-near-position-tabs":{display:"flex",alignItems:"center",px:"4px",bg:"moduleBg",borderBottom:"1px solid",borderBottomColor:"modalBg"},".dropdown-wrapper-near-margin-leverage":{ml:"16px"},".title":{mr:"auto",color:"t.primary"},".draggable-area":{pb:"20px","& .close-button":{cursor:"pointer",flexShrink:0,color:"icons.close",position:"absolute",right:"0","&:hover":{color:"t.third"}},".divider":{pt:"10px",borderBottom:"1px solid",borderColor:"modalBg"}}},Qa={flex:1,m:0},Xa={pb:"20px",px:"16px",justifyContent:"space-between",fontSize:"14px"},ei=({onRemove:e})=>{const{getI18n:t}=(0,p.yk)(),[r]=(0,p.hN)(),[a]=(0,p.UI)(),i=!r&&!a,n=i||a;return Ja(o().Fragment,null,Ja(c.Z,{sx:Ya},r&&Ja("div",{className:"flex-row position-tab-row"},Ja(U,null),Ja("div",{className:"dropdown-wrapper-near-position-tabs"},Ja(La,null))),Ja("div",{className:"flex-row margin-leverage-or-title-row"},a&&Ja($.Z,{sx:Qa}),i&&Ja("div",{className:"title"},t("placeOrder",{defaultValue:"Place Order"})),!r&&Ja("div",{className:"dropdown-wrapper-near-margin-leverage"},Ja(La,null))),Ja("div",{className:"draggable-area draggableHandle"},n&&Ja("div",{className:"divider"}),e&&Ja(ma.Z,{className:"close-button cancelIcon pro-layout-close-button",onClick:e,size:16}))),Ja(Ga,{sx:Xa}))};var ti=r("JPsv"),ri=o().createElement;const ai=ti.Z,ii=()=>{const e=(0,i.useRef)(),[t,[r,a]]=(0,n.z4)(),o=(0,n.j2)();return(0,i.useEffect)((()=>b.T.on(b.F.SHOW_ORDER_CONFIRM_PANEL,(t=>{var r,a;null===e||void 0===e||null===(r=e.current)||void 0===r||null===(a=r.showOrderConfirmPanel)||void 0===a||a.call(r,t)}))),[]),ri(ai,{symbol:t,base:r,quote:a,ticker:o,ref:e,marginAsset:o.marginAsset})},oi=(0,i.memo)(ii);var ni=r("GzPd"),li=o().createElement;const si=({onClick:e})=>{const{getI18n:t}=H();return li(s.Z,{bg:"moduleBg",display:["flex","none"],p:"sm",flexDirection:"column"},li(s.Z,{justifyContent:"space-between"},li(be.Z,{flex:"1",color:"white",colorStyle:"buy",sx:{height:"40px",borderRadius:"2px"},onClick:()=>e(d.g.BUY),mr:"xs"},t("BUY")),li(be.Z,{flex:"1",color:"white",colorStyle:"sell",sx:{height:"40px",borderRadius:"2px"},onClick:()=>e(d.g.SELL)},t("SELL"))))};var ci=o().createElement;const ui=({children:e})=>{const{0:t,1:r}=(0,i.useState)(!1),a=(0,i.useCallback)((()=>{r(!1)}),[r]),n=(0,i.useCallback)((()=>{r(!0)}),[r]),l=t?"-100%":"0";return(0,i.useEffect)((()=>b.T.on(b.F.HIDE_MOBILE_MASK,a)),[a]),ci(o().Fragment,null,ci(si,{onClick:n}),ci(ni.Z,{visible:t,onClick:a}),ci(c.Z,{sx:{bg:"popupBg",zIndex:[30,0],color:"t.primary",fontSize:[1],position:"relative",userSelect:"none",borderTopLeftRadius:["10px","0"],borderTopRightRadius:["10px","0"],transition:["transform .3s ease-in-out","none"],transform:[`translate3d(0, ${l}, 0)`,"none"]}},e))},di=o().memo(ui);var mi=r("XG6S"),pi=r("yuQJ"),fi=r("R+VW"),gi=r("UMWK"),yi=o().createElement;const{Wallet:bi}=gi.Z,hi=({visible:e,onClose:t,curAsset:r})=>{const a=(0,p.G3)(),o=(0,u.useDispatch)(),l=(0,p._$)(),s=(0,i.useCallback)((()=>{o.transferAssets.getUserAssets()}),[o.transferAssets]),{assets:c}=l,d=Object.values((0,n.iB)()),m=(0,i.useMemo)((()=>Object.keys(c).reduce(((e,t)=>{var r,a,i,o;return e[t]={assetName:null===c||void 0===c||null===(r=c[t])||void 0===r?void 0:r.assetName,assetCode:null===c||void 0===c||null===(a=c[t])||void 0===a?void 0:a.asset,assetLogo:null===c||void 0===c||null===(i=c[t])||void 0===i?void 0:i.logoUrl,balance:null===c||void 0===c||null===(o=c[t])||void 0===o?void 0:o.free},e}),{})),[c]),f=(0,i.useMemo)((()=>Object.values(m)),[m]);(0,i.useEffect)((()=>{e&&s()}),[e,s]);const g=a?r||"BTC":"BUSD",y=a?"BTC"===g?"BNB":"BTC":r&&"BUSD"!==r?r:"USDT",b=(0,p.d0)(a),h=(0,i.useCallback)((e=>{const r=d.filter((t=>t.marginAsset===e)),a=r.find((e=>"CURRENT_QUARTER"===e.contractType))||r.find((e=>"PERPETUAL"===e.contractType))||r[0]||{},{symbol:i}=a;i?b({stateSymbol:i}):console.log("target asset no matched exchange symbol"),t()}),[b,d,t]);return yi(gi.Z,{assets:f,defaultToAsset:g,defaultFromAsset:y,afterSubmit:(e,t)=>{const{asset:r,sellAsset:a}=t||{};(0,J.DB)({eventLabelSuffix:`convert_${a}_to_${r}`,elementIdSuffix:"convert_confirm"})},goTrade:h,wallet:a?bi.DELIVERY:bi.FUTURE,visible:e,onClose:t})};var vi=r("MUT+");const xi=(0,i.memo)((()=>{const{launchTransfer:e}=(0,vi.i)(),t=(0,mr.G)();return(0,i.useEffect)((function(){return b.T.on(b.F.OPEN_TRANSFER_MODAL,(r=>{e({from:"MAIN",to:t?"DELIVERY":"FUTURE",defaultCoin:r||(t?"BTC":"USDT")})}))}),[t,e]),null}));var ki=o().createElement;const Si=(0,i.memo)((()=>{const{0:e,1:t}=(0,i.useState)(!1),{0:r,1:a}=(0,i.useState)("BTC"),{setMessageInfo:l}=(0,n.YT)(),{getI18n:s}=(0,p.yk)(),{isLoggedIn:c}=(0,n.f0)();(0,i.useEffect)((function(){return b.T.on(b.F.OPEN_CONVERT_MODAL,(e=>{t(!0),a(e)}))}),[]);const u=(0,i.useCallback)(((e,{asset:t})=>{l(e?{message:e.message,variant:"error"}:{header:s("transfer-asset",{defaultValue:""}),message:`${t} ${s("successTransferAsset",{defaultValue:""})}`,variant:"success"})}),[s,l]);return h.sk?null:ki(o().Fragment,null,!h.Jg&&ki(pi.Z,null),ki(hi,{visible:e,onClose:()=>t(!1),curAsset:r}),c&&ki(mi.Z,{afterTransfer:u,needFuturesJointMargin:!0},ki(xi,null)),ki(fi.Z,null))}));var Pi=r("JN/Q"),Ti=r("fi7b");const Ci=e=>(0,n.ZK)("trd-calculator",e);var Mi=r("BkSH"),Zi=r("jQmP"),wi=r("H3aL"),Ii=r("QlFx"),Ei=r("74Of");const Ni=({entryPrice:e,quantity:t,leverage:r})=>e*t*(1/r),Ai=({positionDirection:e,exitPrice:t,entryPrice:r,quantity:a})=>(e===Mi.DD.LONG?t-r:r-t)*a,Ri=({PNL:e,entryPrice:t,quantity:r,leverage:a})=>e/Ni({entryPrice:t,quantity:r,leverage:a})*100,Oi=({ROE:e,leverage:t,positionDirection:r,entryPrice:a})=>{let i=e/100/t;return i=r===Mi.DD.LONG?i+1:1-i,a*i},Li=({brackets:e,positions:t,symbol:r,marginType:a,positionMode:i,walletBalance:o,longPosition:n,shortPosition:l,curPosition:s})=>{const c=(null===e||void 0===e?void 0:e[r])||[];let u=0;if(a===Mi.Yl.CROSS){const a=t.filter((e=>!(null!==e&&void 0!==e&&e.isolated))).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==r));u=(0,Ei.zW)(a,e)-(0,Ei.ot)(a)}return i===Mi.Tw.ONEWAY?(0,Ei.W8)(c,o,u,s):(0,Ei.wr)(c,o,u,n,l,s)},Vi=({walletBalance:e,leverage:t,entryPrice:r,bracketNotionalCap:a})=>Math.floor(Math.min(e*t/r,a/r)),Fi=({walletBalance:e,leverage:t,bracketNotionalCap:r})=>(0,Pr.GW)(Math.min(e*t,r)),Di=({positions:e})=>e.reduce(((e,{entryPrice:t,quantity:r})=>e+r*t),0)/e.reduce(((e,{quantity:t})=>e+t),0),_i=({positions:e})=>e.reduce(((e,{quantity:t})=>e+t),0)/e.reduce(((e,{entryPrice:t,quantity:r})=>e+r/t),0),Bi=({quantity:e,entryPrice:t})=>e*t,zi=({walletBalance:e,entryPrice:t,quantity:r,leverage:a})=>e<Math.abs(t)*Math.abs(r)/a,Ki=({walletBalance:e,leverage:t,longPosition:r,shortPosition:a})=>e<Math.abs(r.entryPrice)*Math.abs(r.quantity)/t+Math.abs(a.entryPrice)*Math.abs(a.quantity)/t,qi=e=>(0,Ii.uf)(e),Ui=e=>(0,Ii.uf)(e),Wi=e=>(0,Ii.uf)(e);var Hi=r("ca2E");function $i(){const e=(0,p.G3)(),{getI18n:t}=(0,p.yk)(),r=(0,p.QV)(),o=(0,Hi.QV)(),{tickSize:l,quantityPrecision:s}=(0,n.j2)()||Mi.oF,c=(0,Zi.p)(l);return(0,i.useMemo)((()=>e?(({isCoinUnit:e,getFuturesI18n:t})=>({helper:(0,me.Z)((0,me.Z)({},wi),{},{openPrice:e?wi.openPriceCoin:wi.openPriceCont}),walletBalancePrecision:4,leveragePositionUnitField:"baseAsset",getUnitChangeQty:({quantity:t,entryPrice:r,contractVal:a})=>e?Math.floor(t*r/a):t,getCoinUnitUnit:()=>t("Cont",{defaultValue:"Cont"}),getQuantityUnit:({product:r})=>e?r.baseAsset:t("Cont",{defaultValue:"Cont"}),getQuantityPrecision:({product:t})=>e?t.equalQtyPrecision:t.quantityPrecision,getNotionalValue:({quantity:t,entryPrice:r,contractVal:a})=>e?t:t*a/r}))({getFuturesI18n:t,isCoinUnit:o.isCoinUnit}):(({isCoinUnit:e,tickSizePrecision:t,quantityPrecision:r})=>({helper:(0,me.Z)((0,me.Z)({},a),{},{openPrice:e?Di:_i}),walletBalancePrecision:2,leveragePositionUnitField:"quoteAsset",getUnitChangeQty:({quantity:t,entryPrice:a})=>e?t:(0,Pr.GW)(t/a,r),getCoinUnitUnit:({product:e})=>e.baseAsset,getQuantityUnit:({product:t})=>e?t.baseAsset:t.marginAsset,getQuantityPrecision:({product:r})=>e?r.quantityPrecision:t,getNotionalValue:({quantity:t,entryPrice:r})=>e?t*r:t}))({isCoinUnit:r.isCoinUnit,tickSizePrecision:c,quantityPrecision:s})),[e,t,o.isCoinUnit,r.isCoinUnit,c,s])}const ji={form:{container:{p:"16px 12px 16px 12px",flexDirection:"column",justifyContent:"unset",borderTop:"1px solid",borderColor:"calculator.containerBorderColor"},panel:{width:"100%",mr:0},tip:{pt:"15px"}},switch:{item:{bg:"calculator.resultBg",border:"none",color:"calculator.numberColor","&.active":{fontWeight:500,background:"linear-gradient(270deg, #FBDA3C 0%, #EFB80B 100%)",color:"#212833"}}},result:{container:{width:"100%",mt:"12px",bg:"calculator.resultBgMobile",py:"12px"},title:{fontWeight:"normal !important",mb:"12px"},label:{fontSize:"16px",color:"#848E9C"},value:{fontSize:"15px",color:"calculator.numberColor"},tooltipLabel:{fontSize:"16px",color:"#848E9C",borderBottom:"none !important"},description:{position:"relative",fontSize:"12px",color:"#848E9C",lineHeight:"18px",mt:10}},calculateBtn:{height:50,mt:18,fontWeight:"normal !important",background:"linear-gradient(90deg, #FBDA3C 0%, #EFB80B 100%)"},SymbolSelect:{overlayBoxSx:{width:"94vw"}},DropBpx:{sx:{bg:"calculator.dropBoxBg",borderColor:"calculator.dropBoxBg",fontWeight:"normal"}},custom:{TextField:{props:{color:"calculator.inputColor",fontSize:"15px !important",fontWeight:500,pb:"1px"},boxProps:{width:"100%",mt:12,height:44,borderColor:"calculator.inputBorderColorMobile"},prefix:{color:"#848E9C"},suffix:{color:"#848E9C",fontSize:"15px !important"}}}};function Gi(){const{isMobile:e}=(0,n.Fs)();return(0,i.useMemo)((()=>e?ji:void 0),[e])}const Ji=(0,i.createContext)({currentLeverageBracket:{}});var Yi=o().createElement;const Qi={button:{flex:1,"&:last-child":{ml:"8px"},"&.normal-button":{bg:"inputBg","&:hover:not(:disabled):not(:active):not(.inactive)":{bg:"line"}},"&.long-button":{"&:hover:not(:disabled):not(:active)":{bg:["buy","buyHover"]}},"&.short-button":{"&:hover:not(:disabled):not(:active)":{bg:["sell","sellHover"]}}}},Xi=()=>{const{getI18n:e}=Ci(),t=Gi(),{positionDirection:r,setPositionDirection:a,marginType:o,positionMode:n}=(0,i.useContext)(Ji),l=(0,i.useCallback)((()=>a(Mi.DD.LONG)),[a]),c=(0,i.useCallback)((()=>a(Mi.DD.SHORT)),[a]);return(0,i.useMemo)((()=>{if(o===Mi.Yl.ISOLATED&&n===Mi.Tw.HEDGE)return null;const t=r===Mi.DD.LONG,a=r===Mi.DD.SHORT;return Yi(s.Z,{sx:Qi},Yi(be.Z,{variant:"default",colorStyle:"buy",className:t?"long-button":"normal-button",onClick:l,"data-testid":"LongButton"},e("Long",{defaultValue:"Long"})),Yi(be.Z,{variant:"default",colorStyle:"sell",className:a?"short-button":"normal-button",onClick:c,"data-testid":"ShortButton"},e("Short",{defaultValue:"Short"})))}),[e,o,t,l,c,r,n])};var eo=o().createElement;const to=({onClick:e})=>{const{isCalculateBtnValid:t}=(0,i.useContext)(Ji),{getI18n:r}=Ci(),a=Gi(),o=(0,i.useMemo)((()=>({"&:disabled":{bg:"line",color:"t.third"}})),[]);return(0,i.useMemo)((()=>eo(be.Z,Object.assign({variant:"default",width:1,sz:"l",disabled:!t,onClick:e,sx:o},(0,me.Z)({mt:4},null===a||void 0===a?void 0:a.calculateBtn),{"data-testid":"Calculate"}),r("Calculate",{defaultValue:"Calculate"}))),[o,r,t,a,e])};var ro=r("Lxwm"),ao=r("Wx6g"),io=o().createElement;const oo={width:"50%",p:"24px",pt:0,position:"relative",borderLeft:"0.5px solid",borderLeftColor:"line",".title":{mb:"28px",fontStyle:"normal",fontWeight:500,fontSize:"md",lineHeight:"24px",color:"t.primary"},".field":{mt:"12px",display:"flex",fontSize:"14px",justifyContent:"space-between"},".label":{color:"t.third"},".value":{color:"t.primary"},".description":{fontSize:"12px",lineHeight:"16px",color:"t.third",position:[null,"absolute"],bottom:"16px",mr:"16px"}},no=({results:e,sx:t,titleSx:r,itemSx:a}={})=>{const{getI18n:o}=Ci(),n=Gi();return(0,i.useMemo)((()=>io(c.Z,{sx:(0,me.Z)((0,me.Z)((0,me.Z)({},oo),t),null===n||void 0===n?void 0:n.result.container)},io(A.Z,{className:"title",sx:(0,me.Z)((0,me.Z)({},r),null===n||void 0===n?void 0:n.result.title)},o("Result",{defaultValue:"Result"})),io(c.Z,null,io(lo,{items:e,sx:a})))),[o,a,n,e,t,r])};function lo({items:e,sx:t}){const{0:r,1:a}=(0,i.useState)(!1),n=Gi(),{getI18n:l}=(0,p.yk)();return io(o().Fragment,null,io(ba.Z,{tx:"calculator.dialog",variant:"container",visible:Boolean(r),onMaskClick:()=>a(null),sx:{borderRadius:"7px"}},io(s.Z,{flexDirection:"column"},io(A.Z,{sx:{px:"24px",py:"32px",fontSize:"14px",lineHeight:"22px",color:"calculator.numberColor",boxShadow:"0px 2px 8px rgba(11, 14, 17, 0.3)"}},r),io(be.Z,{sx:{height:"54px",borderTop:"1px solid",borderColor:"calculator.resultBg",fontSize:"17px",fontWeight:"normal",bg:"calculator.dialogBg"},onClick:()=>a(null)},l("CalculatorMobile-PNLTooltipConfirm",{defaultValue:"Ok, got it"})))),e.map((({value:e,label:r,asset:i,description:o,labelTooltip:l,testId:c},u)=>{var d,m,p,f;return io(s.Z,Object.assign({className:"field",key:u},c?{"data-testid":c}:{},{sx:t}),!l&&io(A.Z,{className:"label",sx:null===n||void 0===n||null===(d=n.result)||void 0===d?void 0:d.label},r),!!l&&io(ao.Z,null,(({isMobile:e})=>{var t;return e?io(s.Z,{className:"label",sx:null===n||void 0===n||null===(t=n.result)||void 0===t?void 0:t.tooltipLabel,onClick:()=>a(l)},io(A.Z,{mr:"8px"},r),io(ro.Z,{size:18})):io($r.Z,{tip:l},io(A.Z,{className:"label"},r))})),(e||0===e)&&io(A.Z,{className:"label",sx:null===n||void 0===n||null===(m=n.result)||void 0===m?void 0:m.label},io(A.Z,{className:"value",as:"span",sx:null===n||void 0===n||null===(p=n.result)||void 0===p?void 0:p.value},e," ",i)),o&&io(A.Z,{className:"description",sx:null===n||void 0===n||null===(f=n.result)||void 0===f?void 0:f.description},o))})))}var so=o().createElement;const{leverageInfo:{defaultVal:co}}=ie.Fy,uo=({children:e}={})=>{const t=(0,n.z4)()[0],{0:r,1:a}=(0,i.useState)(!1),{0:o,1:l}=(0,i.useState)(t),{0:s,1:c}=(0,i.useState)(Mi.DD.LONG),{0:u,1:d}=(0,i.useState)(Mi.Yl.CROSS),{0:m,1:f}=(0,i.useState)(Mi.Tw.ONEWAY),{0:g,1:y}=(0,i.useState)(!1),b=(0,p.Gf)(),{findLeverageByLevel:h,leverageData:{maxVal:v}}=(0,p.ho)({symbol:o,brackets:b}),{0:x,1:k}=(0,i.useState)(Math.min(v,co)),S=h(x),P=r&&!g;return(0,i.useEffect)((()=>{l(t)}),[t]),(0,i.useEffect)((()=>{k(Math.min(v,co))}),[v,k,o]),so(Ji.Provider,{value:{symbol:o,setSymbol:l,leverage:x,setLeverage:k,isLeverageGreaterThan:g,setIsLeverageGreaterThan:y,currentLeverageBracket:S||{},positionDirection:s,setPositionDirection:c,marginType:u,setMarginType:d,positionMode:m,setPositionMode:f,setIsFormValid:a,isCalculateBtnValid:P}},e)};var mo=o().createElement;const po={pt:"16px",pb:"12px",".slider-tip":{color:"t.third",fontSize:"12px",pt:"16px",".position-cap":{color:"t.primary",mt:"4px"}}};function fo(){var e;const{leverage:t,setLeverage:r,currentLeverageBracket:a,isLeverageGreaterThan:l,symbol:u}=(0,i.useContext)(Ji),{leveragePositionUnitField:d}=$i(),{isMobile:m}=(0,n.Fs)(),f=Gi(),{getI18n:g}=(0,p.yk)(),y=(0,n.iB)(),b=(0,p.Gf)(),h=(y[u]||Mi.oF)[d],{bracketSeq:v,bracketNotionalCap:x}=a,k=v===(null===b||void 0===b||null===(e=b[u])||void 0===e?void 0:e.length),{leverageData:{minVal:S,maxVal:P}}=(0,p.ho)({symbol:u,brackets:b}),T=(0,i.useMemo)((()=>function(e,t){let r=[];if(t<10){r=[];for(let e=1;e<=t;e++)r.push(e)}else{r=[e];for(let e=1;e<=5;e++)r.push(Math.floor(e/5*t))}return r}(S,P)),[P,S]),C=(0,i.useMemo)((()=>({min:S,max:P})),[P,S]),M=(0,i.useCallback)((e=>r(e)),[r]),Z=(0,i.useMemo)((()=>mo(o().Fragment,null,!k&&mo("div",{className:"slider-tip"},g("AvailablePositionsTip",{defaultValue:"Max position at current leverage:"}),mo("div",{className:"position-cap"},(0,Ii.kh)(x)," ",h)))),[x,g,k,l,h]),w=(0,i.useMemo)((()=>{var e;return mo(o().Fragment,null," ",!k&&mo(s.Z,{tx:"calculator.form",variant:"tip",justifyContent:"space-between",sx:null===f||void 0===f||null===(e=f.form)||void 0===e?void 0:e.tip,className:l?"active":""},mo(c.Z,{sx:{fontSize:"12px",lineHeight:"16px"}},g("AvailablePositionsTip")),mo(c.Z,null,mo(A.Z,{as:"span",sx:{color:"calculator.numberColor",fontWeight:500}},"\xa0",(0,Ii.kh)(x),"\xa0"),mo("span",null,h))))}),[x,g,k,f,h,l]);return m?mo(c.Z,{mb:"8px"},mo(Bt.Z,{progress:t,range:C,onChange:M,unit:"x",steppers:T,showScales:!0}),w):mo(c.Z,{sx:po},mo(Bt.Z,{progress:t,range:C,onChange:M,unit:"x",px:"0px",steppers:T,showScales:!0}),Z)}var go=o().createElement;const yo=({children:e,sx:t,overrideSx:r})=>{const a=Gi();return go(s.Z,{tx:"calculator.form",variant:"container",sx:(0,me.Z)((0,me.Z)((0,me.Z)({},t),null===a||void 0===a?void 0:a.form.container),r)},e)},bo=({children:e})=>{const t=Gi();return go(c.Z,{tx:"calculator.form",variant:"panel",sx:null===t||void 0===t?void 0:t.form.panel},e)};var ho=r("lvqx");function vo(e,t=2){try{if("number"!==typeof e&&!e)return"-";const r=(e="number"===typeof e?e:+e).toFixed(Math.max(0,~~t)),a=-1!==r.indexOf(".")?/\d(?=(\d{3})+\.)/g:/\d(?=(\d{3})+$)/g;return r.replace(a,"$&,")}catch(r){return Sentry.captureException(r),"-"}}function xo(e){return!Number.isNaN(e)&&!isNaN(e)&&Math.abs(e)!==1/0}var ko=o().createElement;function So({config:e}){const{value:t,max:r,precision:a,onChange:l,placeholder:u,asset:d,errorText:m="",negative:p=!1,testId:f,type:g="number",assetLabel:y=null,onAssetLabelClick:b,boxProps:h,mobileBoxProps:v}=e,x="rtl"===(0,n.gm)(),{isMobile:k}=(0,n.Fs)(),S=Gi(),P=null===S||void 0===S?void 0:S.custom.TextField,T=(0,i.useCallback)((()=>b()),[b]),C=(0,i.useCallback)((e=>{(p||+e>=0)&&+e<=+r&&l(e)}),[r,p,l]),M=(0,i.useCallback)((e=>function(e,{fn:t,filed:r,places:a,negative:i=!1}){let o=e.target.value;return(i?(n=Number(o),/[^\-?\d|.|,|\u3002]/.test(n)):function(e){return/[^\d|.|,|\u3002]/.test(e)}(Number(o)))?"":(/\u3002|,/.test(o)&&(o=o.replace(/[\u3002|,]/g,".")),/^0\d/.test(o)?o="0":/^\./.test(o)?o=0+o.substring(0,a+1):Number(o)>=0&&-1!==o.indexOf(".")&&o.split(".")[1].length>=a&&(o=o.replace(new RegExp(`^(\\d*\\.\\d{${a}})\\d*`),"$1")),Number.isNaN(Number(o))?"":void(r?t(r,o):t(o)));var n}(e,{fn:C,filed:null,places:a,negative:p})),[C,p,a]),Z=(0,i.useCallback)((e=>function(e){return!/\d*\.?\d+$/.test(e.target.value)&&(e.target.value="")}(e)),[]),w=(0,i.useMemo)((()=>u&&ko(A.Z,{fontSize:14,color:"t.third",sx:null===P||void 0===P?void 0:P.prefix},u)),[P,u]),I=(0,i.useMemo)((()=>d&&ko(s.Z,{justifyContent:"center",alignItems:"center"},y&&ko(c.Z,{sx:{fontSize:"12px",color:"t.yellow",mr:"4px",cursor:"pointer",padding:"3px 4px",borderRadius:"4px","&:hover":{bg:"calculator.inputAssetLabelBg"}},onClick:T},y),ko(A.Z,{color:"t.primary",fontSize:1,sx:null===P||void 0===P?void 0:P.suffix},d))),[d,y,P,T]),E=(0,i.useMemo)((()=>({sx:k?(0,me.Z)((0,me.Z)({},null===P||void 0===P?void 0:P.boxProps),v):(0,me.Z)({width:"100%",mt:"12px",border:"none",bg:"inputBg",height:"40px",input:{px:"8px"}},h)})),[h,k,v,P]),N=(0,i.useMemo)((()=>(0,me.Z)((0,me.Z)({style:x?{textAlign:"right"}:{}},null===P||void 0===P?void 0:P.props),f?{"data-test-id":f}:{})),[x,P,f]);return(0,i.useMemo)((()=>ko(o().Fragment,null,ko(ho.Z,Object.assign({type:g,variant:"inline",value:t,onChange:M,onBlur:Z,prefix:w,suffix:I,boxProps:E,placeholder:k?vo(0,a):null},N)),!!m&&ko(c.Z,{sx:{fontSize:"12px",color:"t.sell"}},m))),[m,E,w,N,I,k,Z,M,a,g,t])}function Po({inputs:e,boxProps:t}){return ko(o().Fragment,null,e.map(((e,r)=>ko(So,{key:r,config:e,boxProps:t}))))}var To=r("RkbI"),Co=o().createElement;function Mo({activeKey:e,data:t=[],onSelectChange:r=(()=>{}),sx:a,overlayBoxSx:o,itemSx:n}={}){const l=Gi(),{0:u,1:d}=(0,i.useState)(!1),m=(0,i.useMemo)((()=>Co(c.Z,{sx:(0,me.Z)({width:"143px",maxHeight:"250px",bg:"calculator.dropBoxBg",borderRadius:"4px",overflow:"auto",mt:"2px",boxShadow:"0px 0px 8px rgba(11, 14, 17, 0.15)"},o)},t.map((({key:e,value:t,disabled:a})=>{const i=a?{}:{color:"t.yellow",bg:"bg3"};return Co(s.Z,{justifyContent:"center",alignItems:"center",sx:(0,me.Z)({height:"35px",color:a?"#5E6673":"t.secondary",fontSize:"14px",cursor:a?"not-allowed":"pointer",bg:"popupBg","&:hover":(0,me.Z)({},i)},n),key:e,onClick:()=>{a||r(e)}},t)})))),[t,n,r,o]),p=(0,i.useMemo)((()=>(0,me.Z)((0,me.Z)({userSelect:"none",width:"100%",color:"t.primary",py:"4px",bg:"inputBg",fontSize:"sm",fontWeight:500,mr:"xs",borderRadius:"4px",cursor:"pointer","&:last-of-type":{mr:0}},null===l||void 0===l?void 0:l.DropBpx.sx),a)),[l,a]);return(0,i.useMemo)((()=>{var r;return Co(Z.ZP,{trigger:"click",overlay:m,sx:p,enablePortal:!0,onVisibleChange:d},Co(s.Z,{justifyContent:"center",alignItems:"center"},Co(c.Z,null,null===(r=Object.values(t).find((t=>t.key===e)))||void 0===r?void 0:r.value),Co(To.Z,{color:"#848E9C",sx:{transform:u?"rotate(180deg)":null,transition:"transform 100ms"}})))}),[e,t,p,m,u])}var Zo=o().createElement;function wo({sx:e}={}){const{marginType:t=Mi.Yl.CROSS,setMarginType:r,positionMode:a=Mi.Tw.ONEWAY,setPositionMode:o}=(0,i.useContext)(Ji),{isMobile:l}=(0,n.Fs)(),{getI18n:c}=(0,p.yk)();(0,i.useEffect)((()=>{t===Mi.Yl.ISOLATED&&o(Mi.Tw.ONEWAY)}),[t,a,o]);const u=(0,i.useMemo)((()=>[{key:Mi.Yl.CROSS,value:c("header-Cross",{defaultValue:"Cross"})},{key:Mi.Yl.ISOLATED,value:c("headerIsolated",{defaultValue:"Isolated"})}]),[c]),d=(0,i.useMemo)((()=>[{key:Mi.Tw.ONEWAY,value:c("OneWayPosition",{defaultValue:"One-way Mode"})},{key:Mi.Tw.HEDGE,value:c("TwoWayPosition",{defaultValue:"Hedge Mode"}),disabled:t===Mi.Yl.ISOLATED}]),[c,t]),m=(0,i.useMemo)((()=>({width:l?"45.5vw":"143px"})),[l]),f=(0,i.useMemo)((()=>(0,me.Z)({mb:"ls"},e)),[e]),g=(0,i.useCallback)((e=>r(e)),[r]),y=(0,i.useCallback)((e=>o(e)),[o]);return Zo(s.Z,{sx:f},Zo(Mo,{data:u,activeKey:t,onSelectChange:g,overlayBoxSx:m}),Zo(Mo,{data:d,activeKey:a,onSelectChange:y,overlayBoxSx:m}))}var Io=o().createElement;function Eo(){const{symbol:e,setSymbol:t}=(0,i.useContext)(Ji),r=(0,n.iB)(),a=Gi(),o=(0,p.G3)(),{getI18n:l}=(0,p.yk)(),c=(0,i.useMemo)((()=>Object.values(r).map((({symbol:e})=>({key:e,value:o?(0,Ii.lE)(e,l):e})))),[l,o,r]);return Io(s.Z,{sx:{mb:"ls"}},Io(Mo,{data:c,activeKey:e,onSelectChange:e=>t(e),overlayBoxSx:(0,me.Z)({width:"295px",maxHeight:"285px"},null===a||void 0===a?void 0:a.SymbolSelect.overlayBoxSx)}))}var No=o().createElement;const Ao=()=>{const{symbol:e,setIsLeverageGreaterThan:t,currentLeverageBracket:{bracketNotionalCap:r},setIsFormValid:a,positionDirection:o,leverage:l}=(0,i.useContext)(Ji),{getUnitChangeQty:s,getQuantityPrecision:c,getQuantityUnit:u,getNotionalValue:d,helper:m}=$i(),p=(0,n.iB)()[e]||Mi.oF,{quoteAsset:f,marginAsset:g,pricePrecision:y,contractVal:b=100}=p,{getI18n:h}=Ci(),{isMobile:v}=(0,n.Fs)(),{0:x,1:k}=(0,i.useState)(""),{0:S,1:P}=(0,i.useState)(""),{0:T,1:C}=(0,i.useState)(""),{0:M,1:Z}=(0,i.useState)(Mi.uf),{0:w,1:I}=(0,i.useState)(Mi.uf),{0:E,1:N}=(0,i.useState)(Mi.uf),A=(0,i.useCallback)((e=>s({quantity:e,entryPrice:x,contractVal:b})),[s,x,b]),R=(0,i.useMemo)((()=>[{value:x,max:Mi.nU,precision:y,onChange:k,placeholder:h("entryPrice",{defaultValue:"Entry Price"}),asset:f,testId:"EntryPrice"},{value:S,max:Mi.nU,precision:y,onChange:P,placeholder:h("exitPrice",{defaultValue:"Exit Price"}),asset:f,testId:"ExitPrice"},{value:T,max:Mi.nU,precision:c({product:p}),onChange:C,placeholder:h("quantity",{defaultValue:"Quantity"}),asset:u({product:p}),testId:"Quantity"}]),[x,S,h,u,y,p,T,c,f]),O=(0,i.useMemo)((()=>[{value:M,label:h("initialMargin",{defaultValue:"Initial Margin"}),labelTooltip:h("liqPriceTipText",{defaultValue:"Initial margin may not equal to actual margin required to place an order. Actual margin required = initial margin + open loss, where open loss reflects the additional cost due to the difference between order price and mark price."}),asset:g,testId:"InitialMaginValue"},{key:"PNL",value:w,label:h("PNL",{defaultValue:"PNL"}),asset:g,testId:"PNLValue"},{value:E,label:h("ROE",{defaultValue:"ROE"}),asset:"%",testId:"ROEValue"}]),[M,h,g,w,E]),L=(0,i.useCallback)((()=>{const e=A(T),t=m.initialMargin({entryPrice:x,quantity:e,leverage:l,contractVal:b}),r=m.PNL({positionDirection:o,quantity:e,entryPrice:x,exitPrice:S,contractVal:b}),a=m.ROE({PNL:r,quantity:e,leverage:l,entryPrice:x,contractVal:b});Z(m.initialMarginFormat(t)),I(xo(r)?m.PNLFormat(r):Mi.uf),N(xo(a)?m.ROEFormat(a):Mi.uf)}),[A,T,m,x,l,b,o,S]);return(0,i.useEffect)((()=>{a(!!(x&&S&&T))}),[x,S,T,a]),(0,i.useEffect)((()=>{t(d({quantity:T,entryPrice:x,contractVal:b})>r)}),[r,b,x,d,T,t]),(0,i.useEffect)((()=>{v&&(a(!1),k(""),P(""),C(""),Z(Mi.uf),I(Mi.uf),N(Mi.uf))}),[v,a,e]),No(yo,null,No(bo,null,No(Xi,null),No(fo,null),No(Po,{inputs:R}),v&&No(no,{results:O}),No(to,{onClick:L})),!v&&No(no,{results:O}))};function Ro(e){return No(uo,null,No(Ao,e))}var Oo=o().createElement;const Lo=()=>{const{symbol:e,setIsFormValid:t,positionDirection:r,leverage:a}=(0,i.useContext)(Ji),{helper:o}=$i(),l=(0,n.iB)()[e]||Mi.oF,{quoteAsset:s,pricePrecision:c}=l,{0:u,1:d}=(0,i.useState)(""),{0:m,1:f}=(0,i.useState)(""),{0:g,1:y}=(0,i.useState)(Mi.uf),{getI18n:b}=Ci(),{isMobile:h}=(0,n.Fs)(),{getI18n:v}=(0,p.yk)(),x=(0,i.useMemo)((()=>[{value:u,max:Mi.nU,precision:c,onChange:d,placeholder:b("entryPrice",{defaultValue:"Entry Price"}),asset:s,testId:"EntryPrice"},{value:m,max:"1999",precision:2,onChange:f,placeholder:b("ROE",{defaultValue:"ROE"}),asset:"%",errorText:g<0&&v("calculator-reachROETip",{defaultValue:"can't reach the ROE"}),negative:!0,testId:"ROEInput"}]),[u,c,b,s,m,g,v]),k=(0,i.useMemo)((()=>[{value:g<0?Mi.uf:g,label:b("targetPrice",{defaultValue:"Target Price"}),asset:s,testId:"TargetPriceValue"}]),[g,s,b]),S=(0,i.useCallback)((()=>{const e=o.targetPrice({ROE:m,leverage:a,positionDirection:r,entryPrice:u});var t;y((t=e)>0&&xo(t)?vo(e,c):-1/0)}),[o,m,a,r,u,c]);return(0,i.useEffect)((()=>{t(!(!u||!m))}),[u,m,t]),(0,i.useEffect)((()=>{h&&(t(!1),d(""),f(""),y(Mi.uf))}),[h,t,e]),Oo(yo,null,Oo(bo,null,Oo(Xi,null),Oo(fo,null),Oo(Po,{inputs:x}),h&&Oo(no,{results:k}),Oo(to,{onClick:S})),!h&&Oo(no,{results:k}))};function Vo(e){return Oo(uo,null,Oo(Lo,e))}var Fo=o().createElement;const Do=(0,i.forwardRef)(((e,t)=>{const{marginType:r,positionMode:a}=(0,i.useContext)(Ji);return r===Mi.Yl.CROSS&&a===Mi.Tw.HEDGE?Fo(zo,Object.assign({ref:t},e)):Fo(_o,Object.assign({ref:t},e))})),_o=(0,i.forwardRef)((({walletBalance:e,walletBalanceInput:t}={},r)=>{const{symbol:a,setIsLeverageGreaterThan:l,currentLeverageBracket:{bracketNotionalCap:s},isFormValid:c,setIsFormValid:u}=(0,i.useContext)(Ji),{getQuantityPrecision:d,getQuantityUnit:m,getUnitChangeQty:p,getNotionalValue:f}=$i(),{getI18n:g}=Ci(),y=(0,n.iB)()[a]||Mi.oF,{quoteAsset:b,pricePrecision:h,contractVal:v=100}=y,{0:x,1:k}=(0,i.useState)(""),{0:S,1:P}=(0,i.useState)(""),T=(0,i.useCallback)((({quantity:e})=>p({quantity:e,entryPrice:x,contractVal:v})),[v,x,p]);return(0,i.useImperativeHandle)(r,(()=>({getFormData:()=>({entryPrice:+x,quantity:T({quantity:S})})}))),(0,i.useEffect)((()=>{l(f({quantity:S,entryPrice:x,contractVal:v})>s)}),[s,v,x,f,S,l]),(0,i.useEffect)((()=>{const t=!!(x&&e&&S);c!==t&&u(t)}),[x,e,S,u,c]),Fo(o().Fragment,null,Fo(Po,{inputs:[{value:x,max:Mi.nU,precision:h,onChange:k,placeholder:g("entryPrice",{defaultValue:"Entry Price"}),asset:b},{value:S,max:Mi.nU,precision:d({product:y}),onChange:P,placeholder:g("quantity",{defaultValue:"Quantity"}),asset:m({product:y})}]}),Fo(Po,{inputs:t}))})),Bo=({color:e,text:t})=>Fo(s.Z,{alignItems:"center",sx:{fontSize:"14px",color:e,"&::before":{content:'""',display:"inline-block",width:"4px",height:"12px",mr:"8px",bg:e}}},t),zo=(0,i.forwardRef)((({walletBalance:e,walletBalanceInput:t}={},r)=>{const{isFormValid:a,setIsFormValid:l,setIsLeverageGreaterThan:s,currentLeverageBracket:{bracketNotionalCap:u}}=(0,i.useContext)(Ji),{getQuantityPrecision:d,getQuantityUnit:m,getUnitChangeQty:p,getNotionalValue:f}=$i(),{getI18n:g}=Ci(),[y]=(0,n.z4)(),b=(0,n.iB)()[y]||Mi.oF,{quoteAsset:h,pricePrecision:v,contractVal:x=100}=b,{0:k,1:S}=(0,i.useState)(""),{0:P,1:T}=(0,i.useState)(""),{0:C,1:M}=(0,i.useState)(""),{0:Z,1:w}=(0,i.useState)(""),I=(0,i.useCallback)((({quantity:e,entryPrice:t})=>p({quantity:e,entryPrice:t,contractVal:x})),[x,p]);return(0,i.useImperativeHandle)(r,(()=>({getFormData:()=>({[Mi.DD.LONG]:{entryPrice:k,quantity:I({quantity:C,entryPrice:k,contractVal:x})},[Mi.DD.SHORT]:{entryPrice:P,quantity:I({quantity:Z,entryPrice:P,contractVal:x})}})}))),(0,i.useEffect)((()=>{const t=!!(k&&P&&C&&Z&&e);a!==t&&l(t)}),[e,l,k,P,C,Z,a]),(0,i.useEffect)((()=>{s(Math.max(f({quantity:C,entryPrice:k,contractVal:x}),f({quantity:Z,entryPrice:P,contractVal:x}))>u)}),[u,x,f,k,C,s,P,Z]),Fo(o().Fragment,null,Fo(c.Z,{sx:{mb:"24px"}},Fo(Bo,{color:"buy",text:g("Long",{defaultValue:"Long"})}),Fo(Po,{inputs:[{value:k,max:Mi.nU,precision:v,onChange:S,placeholder:g("entryPrice",{defaultValue:"Entry Price"}),asset:h},{value:C,max:Mi.nU,precision:d({product:b}),onChange:M,placeholder:g("quantity",{defaultValue:"Quantity"}),asset:m({product:b})}]})),Fo(c.Z,{sx:{mb:"24px"}},Fo(Bo,{color:"sell",text:g("Short",{defaultValue:"Short"})}),Fo(Po,{inputs:[{value:P,max:Mi.nU,precision:v,onChange:T,placeholder:g("entryPrice",{defaultValue:"Entry Price"}),asset:h},{value:Z,max:Mi.nU,precision:d({product:b}),onChange:w,placeholder:g("quantity",{defaultValue:"Quantity"}),asset:m({product:b})}]})),Fo(Po,{inputs:t,boxProps:{mt:0}}))}));var Ko=o().createElement;const qo=()=>{var e,t,r,a;const{symbol:o,marginType:l,positionMode:s,positionDirection:c,leverage:u}=(0,i.useContext)(Ji),{helper:d,walletBalancePrecision:m,getUnitChangeQty:f}=$i(),{getI18n:g}=Ci(),y=(0,n._n)(),b=(0,n.iB)(),h=b[o]||Mi.oF,v=(0,p.KQ)(),x=(0,p.$J)()||{},k=(0,p.F)(),S=(0,p.Gf)()||{},{isMobile:P}=(0,n.Fs)(),{getI18n:T}=(0,p.yk)(),C=null===(e=(0,p.CE)()[o])||void 0===e?void 0:e.markPrice,M=s===Mi.Tw.ONEWAY,{quoteAsset:Z,marginAsset:w,pricePrecision:I,contractVal:E=100}=h,N=y?l===Mi.Yl.CROSS?null===v||void 0===v||null===(t=v[w])||void 0===t?void 0:t.crossWalletBalance:(null===(r=x[o])||void 0===r?void 0:r.isolatedWallet)||(null===v||void 0===v||null===(a=v[w])||void 0===a?void 0:a.crossWalletBalance):"",{0:A,1:R}=(0,i.useState)(0===Number(N)?"":(0,Pr.GW)(N,m)),{0:O,1:L}=(0,i.useState)(Mi.uf),{0:V,1:F}=(0,i.useState)(null),D=((0,i.useCallback)((({quantity:e,entryPrice:t})=>f({quantity:e,entryPrice:t,contractVal:E})),[E,f]),(0,i.useCallback)((()=>{L(Mi.uf),F(T("calculator-liqPriceIsVerifyTip",{defaultValue:"Insufficient wallet balance (initial margin) to open a position."}))}),[T])),_=(0,i.useRef)(),B=(0,i.useMemo)((()=>[{value:O,label:g("liqPrice",{defaultValue:"Liquidation Price"}),asset:Z,testId:"LiquidationPriceValue"},{description:g("liqPriceTip",{defaultValue:"Liquidation Price Tip"})}]),[O,Z,g]),z=(0,i.useMemo)((()=>M?{}:{mb:0}),[M]),K=(0,i.useCallback)((()=>{const e=_.current.getFormData(),t=c===Mi.DD.LONG?1:-1,r={symbol:o,brackets:S,positions:k,productMap:b,walletBalance:A,marginType:l,positionMode:s};let a;if(F(null),M){const{entryPrice:i,quantity:o}=e;a=d.liquidationPrice((0,me.Z)((0,me.Z)({},r),{},{curPosition:{entryPrice:i,positionSize:o*t,contractVal:E}})),d.isLiqPriceInValid({walletBalance:A,entryPrice:i,quantity:o,leverage:u,contractVal:E})?D():L(a<0?Mi.uf:vo(a,I))}else{const{entryPrice:t,quantity:i}=e[Mi.DD.LONG],{entryPrice:o,quantity:n}=e[Mi.DD.SHORT],l={entryPrice:t,positionSize:i,contractVal:E,markPrice:C},s={entryPrice:o,positionSize:n,contractVal:E,markPrice:C};a=d.liquidationPrice((0,me.Z)((0,me.Z)({},r),{},{curPosition:{markPrice:C},longPosition:l,shortPosition:s})),d.isLiqPriceInValidHEDGE({walletBalance:A,leverage:u,longPosition:(0,me.Z)({quantity:l.positionSize},l),shortPosition:(0,me.Z)({quantity:s.positionSize},s),contractVal:E})?D():L(a<0?Mi.uf:vo(a,I))}}),[S,E,d,M,u,l,C,c,s,I,b,D,o,k,A]);return(0,i.useEffect)((()=>{R((0,Pr.GW)(N,m))}),[N,m,l]),Ko(yo,null,Ko(bo,null,Ko(wo,{sx:z}),M&&Ko(Xi,null),Ko(fo,null),Ko(Do,{ref:_,walletBalance:A,walletBalanceInput:[{value:A,max:Mi.nU,precision:m,onChange:R,placeholder:g("walletBalance",{defaultValue:"Wallet Balance"}),asset:w,testId:"WalletBalanceInput",errorText:V}]}),P&&Ko(no,{results:B}),Ko(to,{onClick:K})),!P&&Ko(no,{results:B}))};function Uo(e){return Ko(uo,null,Ko(qo,e))}var Wo=r("W4bq"),Ho=o().createElement;function $o(e){return Ho(uo,null,Ho(jo,e))}function jo(){var e,t,r;const{symbol:a,setIsFormValid:o,currentLeverageBracket:{bracketNotionalCap:l},leverage:s}=(0,i.useContext)(Ji),{helper:c,walletBalancePrecision:u,getCoinUnitUnit:d}=$i(),{getI18n:m}=Ci(),{getI18n:f}=(0,p.yk)(),{isMobile:g}=(0,n.Fs)(),y=(0,n._n)(),b=(0,n.iB)()[a]||Mi.oF,{quoteAsset:h,pricePrecision:v,marginAsset:x}=b,k=(0,p.KQ)(),S=(null===(e=(0,Wo.Pj)().nextTickers)||void 0===e||null===(t=e.find((e=>e.symbol===a)))||void 0===t?void 0:t.lastPrice)||0,P=y?(0,Pr.GW)(null===k||void 0===k||null===(r=k[x])||void 0===r?void 0:r.crossWalletBalance,u):"",{0:T,1:C}=(0,i.useState)(""),{0:M,1:Z}=(0,i.useState)(0===Number(P)?"":P),{0:w,1:I}=(0,i.useState)(Mi.uf),{0:E,1:N}=(0,i.useState)(Mi.uf),A=(0,i.useMemo)((()=>[{value:T,max:Mi.nU,precision:v,onChange:C,placeholder:m("entryPrice",{defaultValue:"Entry Price"}),asset:h,assetLabel:f("lastPrice",{defaultValue:"Last Price"}),onAssetLabelClick(){var e;C((null===(e=+S)||void 0===e?void 0:e.toFixed(v))||0)}},{value:M,max:Mi.nU,precision:u,onChange:Z,placeholder:m("walletBalance",{defaultValue:"Wallet Balance"}),asset:x}]),[T,f,m,u,S,v,h,M,x]),R=(0,i.useMemo)((()=>[{value:w,label:`${m("maxOpen",{defaultValue:"Max Open"})} (${d({product:b})})`},{value:E,label:`${m("maxOpen",{defaultValue:"Max Open"})} (${x})`},{description:m("maxopentip",{defaultValue:"Max Open Tip"})}]),[E,m,d,b,w,x]),O=(0,i.useCallback)((()=>{const e=c.maxOpenQuantity({walletBalance:M,leverage:s,entryPrice:T,contractVal:b.contractVal,bracketNotionalCap:l}),t=c.maxOpenCoin({walletBalance:M,leverage:s,bracketNotionalCap:l});N(xo(t)?t:Mi.uf),I(xo(e)?e:Mi.uf)}),[c,M,s,T,b.contractVal,l]);return(0,i.useEffect)((()=>{o(!(!T||!M))}),[T,o,M]),(0,i.useEffect)((()=>{I(Mi.uf),N(Mi.uf),C(""),Z(P)}),[P,a]),Ho(yo,null,Ho(bo,null,!g&&Ho(Eo,null),Ho(Xi,null),Ho(fo,null),Ho(Po,{inputs:A}),g&&Ho(no,{results:R}),Ho(to,{onClick:O})),!g&&Ho(no,{results:R}))}var Go=r("k2W1"),Jo=r("ZaW8"),Yo=o().createElement;function Qo(e){setTimeout((()=>e&&e()),0)}const Xo=()=>({id:Date.now(),entryPrice:"",quantity:""}),en={height:"24px",borderRadius:"1px",width:"160px",mt:0,flex:1,"&.bn-input-status-focus input":{border:"1px solid",borderColor:"primary"},input:{textAlign:"left",height:"40px",borderRadius:"4px",color:"t.primary"}},tn={mt:0,"& input":{textAlign:"left !important",pl:"8px"}},rn=(0,i.forwardRef)(((e,t)=>{const{symbol:r,isFormValid:a,setIsFormValid:l}=(0,i.useContext)(Ji),{getQuantityPrecision:u,getQuantityUnit:d}=$i(),{getI18n:m}=Ci(),p=(0,n.iB)()[r]||Mi.oF,{quoteAsset:f,pricePrecision:g}=p,{isMobile:y}=(0,n.Fs)(),{0:b,1:h}=(0,i.useState)({}),v=e=>{Qo((()=>{delete b[e],h((0,me.Z)({},b))}))},x=(0,i.useCallback)((()=>{Qo((()=>{const e=Xo();b[e.id]=e,h((0,me.Z)({},b))}))}),[b]),k=(0,i.useCallback)(((e,t,r)=>{Qo((()=>{b[e][t]=r,h((0,me.Z)({},b))}))}),[b]);return(0,i.useEffect)((()=>{x()}),[]),(0,i.useEffect)((()=>{const e=Object.values(b),t=!!e.length&&!e.some((({entryPrice:e,quantity:t})=>!e||!t));t!==a&&l(t)}),[a,b,l]),(0,i.useImperativeHandle)(t,(()=>({getPositions:()=>b,resetPositions(){const e=Xo();h({[e.id]:e})}}))),Yo(o().Fragment,null,Yo(s.Z,{sx:{alignItems:"center",justifyContent:"space-between",fontSize:"12px",color:"t.third",mt:y?"24px":"40px",mb:"12px"}},!y&&Yo(c.Z,{width:"80px"},m("open",{defaultValue:"Open"})),Yo(s.Z,{flex:1},Yo(c.Z,{sx:{mr:y?"-16px":"0px",flex:1}},m("entryPrice",{defaultValue:"Entry Price"})," (",f,")"),Yo(c.Z,{sx:{flex:1}},m("quantity",{defaultValue:"Quantity"})," (",d({product:p}),")")),!y&&Yo(c.Z,{width:"40px",textAlign:"right"},m("action",{defaultValue:"Action"}))),Object.values(b).map((({id:e,entryPrice:t,quantity:r},a)=>Yo(s.Z,{alignItems:"center",justifyContent:"space-between",key:e,sx:y?{mb:"12px",bg:"inputBg",px:"8px"}:{height:"40px",bg:"inputBg",px:"8px",mb:"12px",borderRadius:"4px"}},!y&&Yo(c.Z,{fontSize:0,width:"80px",color:"t.primary"},a+1),Yo(s.Z,{justifyContent:"center",alignItems:"center",flex:1},Yo(So,{config:{value:t,max:Mi.nU,precision:g,onChange:t=>k(e,"entryPrice",t),asset:y?f:null,boxProps:en,mobileBoxProps:tn}}),y&&Yo(c.Z,{sx:{minWidth:"8px"}}),Yo(So,{config:{value:r,max:Mi.nU,precision:u({product:p}),onChange:t=>k(e,"quantity",t),asset:y?d({product:p}):null,boxProps:en,mobileBoxProps:tn}})),y?Yo(C.Z,{color:"#848E9C",ml:3,onClick:()=>v(e)}):Yo(Jo.Z,{ml:"20px",fontSize:"20px",textAlign:"right",color:"t.third",cursor:"pointer",onClick:()=>v(e)})))),Yo(s.Z,{sx:(0,me.Z)({margin:"0 auto",mt:"17px",color:"t.yellow",cursor:"pointer",alignItems:"center",justifyContent:"center",fontSize:"14px"},y&&{mb:"6px",ml:0,justifyContent:"left"}),onClick:x},Yo(Go.Z,{size:14,color:"t.yellow"})," \xa0",m("addPosition",{defaultValue:"Add Position"})))}));var an=o().createElement;function on(){const{symbol:e}=(0,i.useContext)(Ji),{helper:t}=$i(),{isMobile:r}=(0,n.Fs)(),{getI18n:a}=Ci(),o=(0,n.iB)()[e]||Mi.oF,{quoteAsset:l,pricePrecision:s}=o,{0:c,1:u}=(0,i.useState)(Mi.uf),d=(0,i.useRef)(),m=(0,i.useMemo)((()=>[{value:c,label:`${a("avgPrice",{defaultValue:"Avg Price"})} (${l})`}]),[c,a,l]),p=(0,i.useCallback)((()=>{const e=t.openPrice({positions:Object.values(d.current.getPositions()).map((({entryPrice:e,quantity:t})=>({entryPrice:+e,quantity:+t})))});u(xo(e)?e.toFixed(s):Mi.uf)}),[t,s]);(0,i.useEffect)((()=>{u(Mi.uf),d.current.resetPositions()}),[e]);return an(r?ln:nn,{results:m,positionsRef:d,onCalculator:p})}function nn(e){const{results:t,positionsRef:r,onCalculator:a}=e;return an(yo,{sx:{flexDirection:"column"},overrideSx:{pt:0,pr:0}},an(c.Z,{sx:{maxHeight:"324px",overflow:"auto"}},an(c.Z,{sx:{pr:"32px"}},an(s.Z,{sx:{pt:"24px"}},an(bo,null,an(Eo,null),an(Xi,null)),an(no,{results:t,sx:{py:"0px"},titleSx:{mt:"0px !important",mb:"28px !important"}})),an(rn,{ref:r}))),an(c.Z,{sx:{pr:"32px"}},an(to,{onClick:a})))}function ln(e){const{results:t,positionsRef:r,onCalculator:a}=e;return an(yo,{sx:{flexDirection:"column"}},an(s.Z,null,an(bo,null,an(Xi,null))),an(rn,{ref:r}),an(no,{results:t}),an(to,{onClick:a}))}function sn(e){return an(uo,null,an(on,e))}var cn=o().createElement;const un="PNL",dn="TARGET_PRICE",mn="LIQ",pn="MAX_OPEN",fn="OPEN_PRICE",gn={color:"t.third",fontSize:"16px","&:hover":{color:"t.primary",cursor:"pointer"}},yn={width:["calc(100vw - 32px)","680px","680px"],bg:"modalBg",".close-icon":{color:"t.third",cursor:"pointer",fontSize:"24px",":hover":{color:"t.primary"}},".tabs":{mx:5,width:"auto"}};function bn({title:e,testId:t,active:r}){return cn(c.Z,{tx:"tabs",variant:"trade-next.tab",sx:{padding:"18px 1px 12px 1px",fontSize:"14px",mr:"24px"},className:r?"active":"","data-testid":t},e)}const hn=()=>{const{0:e,1:t}=(0,i.useState)(!1),{0:r,1:a}=(0,i.useState)(un),{getI18n:o}=Ci(),{t:n}=(0,ae.yk)();(0,i.useEffect)((()=>{e||a(un)}),[e]);const l=(0,Xt.tZ)();return(0,i.useMemo)((()=>cn(s.Z,{alignItems:"center","data-testid":"Calculator"},cn(ba.Z,{visible:e,onMaskClick:()=>t(!1),sx:yn,contentClassName:"content"},cn(s.Z,{alignItems:"center",justifyContent:"space-between",p:"20px 32px"},cn(A.Z,{variant:"title6",color:"t.primary"},n("trd-calculator-title",{defaultValue:"Futures Calculator"})),cn(C.Z,{className:"close-icon",onClick:()=>t(!1)})),cn(V.Z,{defaultActiveKey:un,variant:"trade-next",tabsClassName:"tabs",onChange:e=>a(e)},cn(F.Z,{tab:e=>cn(bn,{title:o("PNL",{defaultValue:"PNL"}),testId:"PNL",active:e}),tabKey:un},r===un&&e&&cn(Ro,null)),cn(F.Z,{tab:e=>cn(bn,{title:o("targetPrice",{defaultValue:"Target Price"}),testId:"TargetPrice",active:e}),tabKey:dn},r===dn&&cn(Vo,null)),cn(F.Z,{tab:e=>cn(bn,{title:o("liqPrice",{defaultValue:"Liquidation Price"}),testId:"LiquidationPrice",active:e}),tabKey:mn},r===mn&&e&&cn(Uo,null)),cn(F.Z,{tab:e=>cn(bn,{title:o("maxOpen",{defaultValue:"Max Open"}),active:e}),tabKey:pn},r===pn&&e&&cn($o,null)),cn(F.Z,{tab:e=>cn(bn,{title:o("openPrice",{defaultValue:"Open Price"}),active:e}),tabKey:fn},r===fn&&e&&cn(sn,null))),cn(A.Z,{variant:"caption",color:"t.third",m:"-8px 32px 24px"},cn(Ti.c,{t:n,components:{Link:cn(ga.Z,{target:"_blank",href:(0,J.CN)(h.Wh.CALCULATOR,{locale:l})})},i18nKey:"trd-calculator-tip",defaults:"See what the potential risk and reward will be in monetary terms on any given trade. Use our Futures Calculator to establish your potential profit/loss on a future trade. Read <Link>tips</Link> on how to use."}))),cn(Pi.Z,{sx:gn,onClick:()=>t(!0)}))),[r,o,l,e,n])};var vn=o().createElement;const xn={px:"16px",pb:["80px","0px"],".description":{fontSize:"14px",mb:"40px",lineHeight:"20px",color:"t.secondary"}};function kn(){const{getI18n:e}=(0,p.yk)(),{getI18n:t}=H(),r=(0,n._n)(),a=(0,Xt.tZ)(),[i]=(0,n.z4)(),o=(0,J.CN)(ie.x.TWAP_LEARN_URL,{locale:a,symbol:i}),l=r?"login":"notLogin";return vn(c.Z,{sx:xn},vn("div",{className:"description"},e("twapEntry-description",{defaultValue:"Time-Weighted Average Price (TWAP) is the average price calculated over a period of time. TWAP trading algorithm aims to execute a trade over a user-specified period of time so that the average execution price is approximately in line with the time-weighted average price of that period."}),vn(We.dh,{link:(0,Ma.b)(`/${a}/support/faq/80655cc54d8a4b2bb8ea097001844fd1`),fontSize:14,ml:"4px","data-testid":`ordertype_twap_${l}_learnMore`})),r?vn(be.Z,{as:"a",width:1,py:"10px",variant:"primary",target:"__blank",href:o,"data-testid":"ordertype_twap_login_create"},e("create",{defaultValue:"Create"})):vn($e,{getI18n:t,registerTestId:"ordertype_twap_notLogin_register",loginTestId:"ordertype_twap_notLogin_login"}))}var Sn=o().createElement;const Pn=({onRemove:e})=>{const{isMobile:t}=(0,n.Fs)(),[r]=(0,p.K5)();return Sn(o().Fragment,null,!t&&Sn(ei,{onRemove:e}),Sn(di,null,t&&Sn(o().Fragment,null,Sn(de,null),Sn(Ga,{my:"16px",px:"16px"})),r===d.Jm.TWAP?Sn(kn,null):Sn(o().Fragment,null,Sn(s.Z,{px:"16px",justifyContent:"space-between",alignItems:"center"},Sn(T,null),Sn(hn,null)),Sn(c.Z,{px:"16px",pb:"16px"},Sn(da,{horizontal:!1,side:"both"})))),Sn(oi,null),Sn(o().Fragment,null,Sn(oe.Z,null),Sn(Si,null)))};var Tn=o().createElement;const Cn={bg:"popupBg",fontSize:"14px",".order-tabs-and-margin-type-container":{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",minHeight:"24px",pt:"10px",px:"16px",boxSizing:"border-box","&.hedge-mode":{pt:"0"},".fee-and-preference-container":{display:"flex",alignItems:"center",ml:"16px"}},".positions-tab-container":{display:"flex",flexDirection:"row",justifyContent:"space-between",bg:"moduleBg",".fee-and-preference-container":{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:"1",pr:"16px",borderBottom:"1px solid",borderBottomColor:"modalBg"}},".draggable-area":{pb:"20px"},".divider":{pt:"10px",borderBottom:"1px solid",borderBottomColor:"modalBg"}},Mn={flex:"1",ml:"8px",mr:0},Zn={width:"50%",pl:"16px",mr:0},wn=()=>{const[e]=(0,p.hN)(),[t]=(0,p.UI)();return Tn(c.Z,{sx:Cn},e&&Tn(o().Fragment,null,Tn("div",{className:"positions-tab-container"},Tn(U,{flex:1}),Tn("div",{className:"fee-and-preference-container"},Tn(la,null),Tn(La,null))),Tn("div",{className:"draggable-area draggableHandle"})),Tn("div",{className:_()({"order-tabs-and-margin-type-container":!0,"hedge-mode":e})},Tn(Ga,null),t&&Tn($.Z,{sx:e?Zn:Mn}),!e&&Tn("div",{className:"fee-and-preference-container"},Tn(la,null),Tn(La,null))),Tn("div",{className:"draggable-area draggableHandle"},!e&&Tn("div",{className:"divider"})))};var In=o().createElement;const En={".flex":{display:"flex",alignItems:"center",justifyContent:"space-between"},".form-subheader":{px:"16px"},".form-container":{px:"16px",pb:"16px",".buy-form, .sell-form":{width:"calc(50% - 15px)"}},".flex-row":{display:"flex",flexDirection:"row",alignItems:"center"},".reduce-only-checkbox":{mt:0,mr:"16px"},".tif-selector":{mr:"auto",mt:0},".balance-container":{flex:"1",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden","> div":{justifyContent:"flex-end"}}},Nn=()=>{const[e]=(0,p.K5)();return In(c.Z,{sx:En},In(wn,null),In(di,null,e===d.Jm.TWAP?In(kn,null):In(o().Fragment,null,In("div",{className:"flex-row form-subheader"},In(zr,{className:"reduce-only-checkbox"}),In(_r,{className:"tif-selector"}),In("div",{className:"balance-container"},In(T,null)),In(hn,null)),In("div",{className:"flex form-container"},In(da,{horizontal:!0,side:"buy",className:"buy-form"}),In(da,{horizontal:!0,side:"sell",className:"sell-form"})))),In(oi,null))};var An=r("sIpC"),Rn=o().createElement;const On={color:"t.yellow200",textDecoration:"none",flex:"0 0 auto"},Ln=({sx:e={}})=>{const{getI18n:t}=(0,p.yk)(),[r]=(0,n.z4)(),a=(0,n.tZ)(),o=(0,M.CN)(ie.x.GRID_TRADING_URL,{locale:a,symbol:r}),l=(0,n._n)(),s=(0,i.useCallback)((e=>{e.preventDefault(),l?window.open(o,"_blank"):(0,An.G)(a)}),[l,a,o]);return Rn(c.Z,{as:"a",target:"_blank",onClick:s,href:(0,M.CN)(ie.x.GRID_TRADING_URL,{locale:a,symbol:r}),sx:(0,me.Z)((0,me.Z)({},On),e)},t("grid-trading",{defaultValue:"Grid Trading"}))};var Vn=r("+yB+"),Fn=o().createElement;const Dn={flex:"none",display:"inline-block",width:"79px",height:"24px",p:0,mr:"5px",bg:"line",borderRadius:"2px",lineHeight:"24px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:"t.primary",fontSize:"12px",textAlign:"center",cursor:"pointer",":hover":{color:"t.yellow200"},"&.disabled":{bg:"bg3",color:"t.disabled",cursor:"not-allowed"}},_n=()=>{const{getI18n:e}=(0,p.yk)(),{marginAsset:t}=(0,n.j2)(),r=(0,n._n)();return Fn(Vn.Z,{as:"a",sx:Dn,className:r?"":"disabled",onClick:()=>{b.T.emit(b.F.OPEN_TRANSFER_MODAL,t)},"data-testid":"orderform-transfer-button"},e("transfer",{defaultValue:"Transfer"}))};var Bn=r("8Eqx"),zn=o().createElement;const Kn={bg:"popupBg",fontSize:"14px",".order-tabs-container":{display:"flex",flexDirection:"row",alignItems:"center",minHeight:"24px",pt:"10px",pl:"16px",boxSizing:"border-box",".order-tabs":{minWidth:"212px"},"&.hedge-mode":{pt:"0"}},".order-tabs-right-container":{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",width:"100%","> a, > div":{mr:"16px"}},".positions-tab-container":{display:"flex",flexDirection:"row",justifyContent:"space-between",bg:"moduleBg",".fee-and-preference-container":{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:"1",pr:"16px",borderBottom:"1px solid",borderBottomColor:"modalBg",".tooltip-label":{mr:"16px"}}},".space":{pb:"20px"},".divider":{pt:"10px",borderBottom:"1px solid",borderBottomColor:"modalBg"}},qn=()=>{const[e]=(0,p.hN)(),t=(0,p.G3)();return zn(c.Z,{sx:Kn},e&&zn(o().Fragment,null,zn("div",{className:"positions-tab-container"},zn(U,{flex:1}),zn("div",{className:"fee-and-preference-container"},zn(la,null),zn(La,null))),zn("div",{className:"space"})),zn("div",{className:_()({"order-tabs-container":!0,"hedge-mode":e})},zn(Ga,null),zn("div",{className:"order-tabs-right-container"},!t&&zn(Ln,{sx:{ml:"16px"}}),zn(Bn.U,{sx:{ml:"16px"}}),!h.Jg&&zn(_n,null),!e&&zn(la,null),!e&&zn("div",null,zn(La,null)))),zn("div",{className:"space"},!e&&zn("div",{className:"divider"})))};var Un=o().createElement;const Wn={".flex":{display:"flex",alignItems:"center",justifyContent:"space-between"},".form-subheader":{px:"16px"},".form-container":{px:"16px",pb:"16px",".buy-form, .sell-form":{width:"calc(50% - 15px)"}},".flex-row":{display:"flex",flexDirection:"row",alignItems:"center"},".reduce-only-checkbox":{mt:0,mr:"16px"},".tif-selector":{mr:"auto",mt:0},".balance-container":{flex:"1",mr:"4px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden","> div":{justifyContent:"flex-end"}}},Hn=()=>{const[e]=(0,p.K5)();return Un(c.Z,{sx:Wn},Un(qn,null),Un(di,null,e===d.Jm.TWAP?Un(kn,null):Un(o().Fragment,null,Un("div",{className:"flex-row form-subheader"},Un(zr,{className:"reduce-only-checkbox"}),Un(_r,{className:"tif-selector"}),Un("div",{className:"balance-container"},Un(T,{transfer:!1})),Un(hn,null)),Un("div",{className:"flex form-container"},Un(da,{horizontal:!0,side:"buy",className:"buy-form"}),Un(da,{horizontal:!0,side:"sell",className:"sell-form"})))),Un(oi,null),Un(o().Fragment,null,Un(oe.Z,null),Un(Si,null)))};var $n=r("Q9ZO"),jn=o().createElement;const Gn=(0,l.ck)("afterLogin",(()=>Promise.all([r.e(3712),r.e(7285)]).then(r.bind(r,"QKUR")))),Jn=({type:e=$n.C.Normal,onRemove:t})=>{const r=(0,n._n)(),a=(0,n.Pc)(),{isExistFutureAccount:i}=a;if(r&&!i)return jn(Gn,null);switch(e){case $n.C.Normal:return jn(Pn,{onRemove:t});case $n.C.Horizontal:return jn(Nn,null);case $n.C.FullScreen:return jn(Hn,null);default:return null}},Yn=o().memo(Jn)},"4m5F":(e,t,r)=>{"use strict";r.d(t,{SW:()=>a,AO:()=>i,ze:()=>o});const a={cont:"cont",coin:"coin"},i={usdt:"usdtFuturesUSDT",coin:"usdtFuturesCoin"},o=10},"8uyB":(e,t,r)=>{"use strict";r.d(t,{N3:()=>o,JX:()=>n,CN:()=>l,_p:()=>s});var a=r("0RPJ");const i=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function o(e){const t=`${e}`.match(i);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function n(e,t){return isNaN(+e)?"":(0,a.PD)(e).toFixed(t,1)}function l(e="",t={}){return Object.keys(t).reduce(((e,r)=>e.replace(new RegExp(`%${r}%`,"g"),t[r])),e)}const s=(e,t,r,a)=>{let i=e.target.value;return Number(i)<0&&(i="0"),o=Number(i),/[^\d|.|,|\u3002|e-]/.test(String(o))?"":(/\u3002|,/.test(i)&&(i=i.replace(/[\u3002|,]/g,".")),/^0\d/.test(i)?i="0":/^\./.test(i)?i=0+i.substring(0,a+1):Number(i)>=0&&-1!==i.indexOf(".")&&i.split(".")[1].length>=a&&(i=i.replace(new RegExp(`^(\\d*\\.\\d{${a}})\\d*`),"$1")),Number.isNaN(Number(i))?"":(r?t(r,i):t(i),i));var o}},EPGa:(e,t,r)=>{"use strict";let a,i,o;r.d(t,{xy:()=>a,g:()=>i,Jm:()=>o,OO:()=>n,HZ:()=>l,PR:()=>s,RS:()=>c}),function(e){e.SPOT="SPOT",e.CROSS="CROSS",e.ISOLATED="ISOLATED",e.FUTURES="FUTURES",e.DELIVERY="DELIVERY"}(a||(a={})),function(e){e.BUY="BUY",e.SELL="SELL"}(i||(i={})),function(e){e.LIMIT="LIMIT",e.MARKET="MARKET",e.STOP_LIMIT="STOP",e.STOP_MARKET="STOP_MARKET",e.TAKE_PROFIT_LIMIT="TAKE_PROFIT",e.TAKE_PROFIT_MARKET="TAKE_PROFIT_MARKET",e.TRAILING_STOP_MARKET="TRAILING_STOP_MARKET",e.POST_ONLY="POST_ONLY",e.LIQUIDATION="LIQUIDATION",e.TWAP="TWAP"}(o||(o={}));const n={STOP_LIMIT:"stopLimit",STOP_MARKET:"stopMarket",TRAILING_STOP_MARKET:"trailingStop",POST_ONLY:"postOnly"},l={LAST_PRICE:"CONTRACT_PRICE",MARK_PRICE:"MARK_PRICE"},s={LONG:"LONG",SHORT:"SHORT",BOTH:"BOTH"};let c;!function(e){e.OPEN="OPEN",e.CLOSE="CLOSE",e.BOTH="BOTH"}(c||(c={}))},JPsv:(e,t,r)=>{"use strict";r.d(t,{Z:()=>B});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("Oci4"),l=r("/yzf"),s=r("w7Tp"),c=r("a4Ug"),u=r("ka4r"),d=r("XVzo"),m=r("0RPJ"),p=r("szIg"),f=r("EPGa"),g=r("4m5F"),y=r("FOuV"),b=r("bmcq"),h=r("wby9"),v=r("klBV"),x=r("IOB8"),k=r("8Y2u"),S=r("Q2PN"),P=r("xGav"),T=r("wdcV"),C=r("cucV"),M=r("yxRq"),Z=r("2ynj");const w=({symbol:e,positionSide:t,orderPrice:r,assumePrice:i,triggerPrice:o,activationPrice:n,orderAmount:l,formType:s,side:c,cost:u,openLost:d,reduceOnly:m=!1})=>{l=Number(l);const f=(0,p.useSelector)(x.Y),g=(0,k.$J)(),y=(0,p.useSelector)(S._Y),b=(0,p.useSelector)(P.G),h=(0,v.iB)(),{marginAsset:w="USDT"}=(null===h||void 0===h?void 0:h[e])||{},I=(null===y||void 0===y?void 0:y[w])||{},E=(0,T._g)(e,t),N=g[E]||{},{entryPrice:A,positionSize:R,isolatedWallet:O,bidNotional:L,askNotional:V}=N,F=Math.abs(R),D=Number(R),_=1===c&&D<0||-1===c&&D>0,{takerCommission:B}=(0,Z.a)();if(_&&F&&(F===l||F<l&&m))return{liquidationPrice:0,currentPosition:N};const{estIsolatedWallet:z,estCrossWalletBalance:K}=(0,M.VX)({entryPrice:A,positionSize:R,orderPrice:r,assumePrice:i,triggerPrice:o,activationPrice:n,orderAmount:l,formType:s,side:c,isolatedWallet:O,crossWalletBalance:(null===I||void 0===I?void 0:I.crossWalletBalance)||0,cost:u,openLost:d,bidNotional:L,askNotional:V,takerCommission:(B||0)/1e6}),q=(0,a.Z)((0,a.Z)({},N),{},{entryPrice:(0,M.dK)({entryPrice:A,positionSize:R,orderPrice:r,assumePrice:i,triggerPrice:o,activationPrice:n,orderAmount:l,formType:s,side:c}),positionSize:(0,M.iZ)({positionSize:R,orderAmount:l,side:c}),isolatedWallet:z}),U=Object.values((0,a.Z)((0,a.Z)({},g),{},{[E]:(0,a.Z)({},q)})),W=(0,T.nn)({positions:(0,T.J9)(U),marginAsset:w}),H=(0,C.Zk)(f,[q],(0,a.Z)((0,a.Z)({},y),{[w]:(0,a.Z)((0,a.Z)({},y[w]),{},{crossWalletBalance:K})}),b,e,!0,!1,W),{liquidationPrice:$=0}=(null===H||void 0===H?void 0:H[0])||{};return{liquidationPrice:$,currentPosition:q}};var I=r("rdEq"),E=r("SJeZ"),N=r("SnVb");const A=({orderType:e,equalQtyPrecision:t,marketStepSize:r,limitStepSize:a,tickSize:o=2,unit:n})=>(0,i.useCallback)(((i=!0)=>{let l;return l=(0,y.Br)(e)?r:a,n===g.SW.coin&&(l=t),(void 0===i||i)&&n===g.AO.usdt&&(l=o),l}),[e,n,r,a,t,o]);var R=o().createElement;const O={position:"relative",padding:"20px 24px 24px 24px",width:["calc(100vw - 32px)","384px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{marginBottom:"28px",color:"t.primary"},".field":{fontFamily:"Binance PLEX",display:"flex",justifyContent:"space-between",mt:"12px",letterSpacing:"0.16px",fontSize:"14px",lineHeight:"20px",fontWeight:"normal",minHeight:"20px",".label":{color:"t.third","&.highlight":{color:"t.primary",fontWeight:"medium"}},".value":{color:"t.primary",textAlign:"right","&.buy":{color:"t.buy"},"&.sell":{color:"t.sell"},"&.highlight":{fontWeight:"medium"}}},".top-line":{pt:"4px",mt:"16px",borderTop:"0.5px solid",borderTopColor:"line"},".show-again":{display:"flex",mt:"22px",cursor:"pointer",color:"t.secondary",fontSize:"12px",lineHeight:"16px"}};const L=[f.Jm.STOP_LIMIT,f.Jm.STOP_MARKET,f.Jm.TAKE_PROFIT_LIMIT,f.Jm.TAKE_PROFIT_MARKET],V=[f.Jm.MARKET,f.Jm.STOP_MARKET,f.Jm.TAKE_PROFIT_MARKET],F=({label:e,value:t,unit:r,labelClassName:a="",valueClassName:i="",className:o=""})=>R("div",{className:`field ${o}`},R("div",{className:`label ${a}`},e),R("div",{className:`value ${i}`},t," ",r||"")),D={triggerPrice:0,price:0,buyQty:0,sellQty:0,side:f.g.BUY,callbackRate:0,activationPrice:0,oLastPrice:0,positionSide:y.PR.BOTH,buyCost:0,sellCost:0,availableBalance:0,tickSize:0,limitStepSize:0,marketStepSize:0,takeProfitStopPrice:0,stopLossStopPrice:0,takeProfitStopPriceWorkingType:"",stopLossStopPriceWorkingType:"",strategySide:1},_={orderType:f.Jm.LIMIT,placeOrder:()=>{},bCost:0,sCost:0,positionDirection:f.RS.OPEN,isDelivery:!1,Cont:null,buyOpenLost:0,sellOpenLost:0,contractVal:1,getAssumePrice:()=>0,orderForm:D},B=(0,i.forwardRef)((({symbol:e,quote:t,ticker:r,base:x,marginAsset:k},S)=>{var P;const{0:T,1:C}=(0,i.useState)(!1),{0:M,1:Z}=(0,i.useState)(_),D=(0,p.useSelector)(b.Lu),{getI18n:B}=(0,E.yk)(),z=(0,p.useDispatch)(),{unit:K="cont",orderConfirmation:q,positionMode:U,assetMode:W=!1}=(0,E.F7)(),[H]=(0,E.uD)(),{marketTakeBound:$}=(0,v.j2)(),j=100*+$,{orderType:G=f.Jm.LIMIT,placeOrder:J,bCost:Y=0,sCost:Q=0,positionDirection:X=f.RS.OPEN,isDelivery:ee=!1,Cont:te=null,buyOpenLost:re=0,sellOpenLost:ae=0,contractVal:ie=0,getAssumePrice:oe=(()=>0),orderForm:ne}=M,{triggerPrice:le=0,price:se=0,buyQty:ce=0,sellQty:ue=0,side:de=f.g.BUY,callbackRate:me,activationPrice:pe=0,positionSide:fe=y.PR.BOTH,buyCost:ge,sellCost:ye,availableBalance:be,tickSize:he,limitStepSize:ve,marketStepSize:xe,takeProfitStopPrice:ke,stopLossStopPrice:Se,takeProfitStopPriceWorkingType:Pe,stopLossStopPriceWorkingType:Te,strategySide:Ce}=ne,Me=1===Ce?f.g.BUY:f.g.SELL,{reduceOnly:Ze=!1}=D||{},{BuyText:we,SellText:Ie}=(0,E.x_)(X),Ee=Number(ke)||0,Ne=Number(Se)||0,Ae=!Ze&&X!==f.RS.CLOSE&&H&&!(!Ee&&!Ne)&&Me===de,Re=Number(null===(P=(0,E.CE)()[e])||void 0===P?void 0:P.markPrice),Oe=de===f.g.BUY,Le=Oe?"buy":"sell",Ve=Oe?"button.buyHover":"button.sellHover",Fe=Oe?we:Ie,{0:De,1:_e}=(0,i.useState)(!1),{equalQtyPrecision:Be=2}=r,ze=he,Ke=Oe?ce:ue,qe=Oe?ge:ye,Ue=Oe?Y:Q,We=B(Pe===f.HZ.LAST_PRICE?"lastPrice":"tradeHistory-positions-markPriceTitle",{defaultValue:"Last Price"}),He=B(Te===f.HZ.LAST_PRICE?"lastPrice":"tradeHistory-positions-markPriceTitle",{defaultValue:"Last Price"}),$e=Oe?re:ae,je=ee?h.C:w,Ge=A({orderType:G,equalQtyPrecision:Be,marketStepSize:xe,limitStepSize:ve,tickSize:he,unit:K})(),Je=(0,N.Z)({orderType:G,qty:Ke,triggerPrice:le,orderPrice:ne.price,contractVal:ie,activationPrice:pe,lastPrice:ne.oLastPrice,markPrice:Re,isDelivery:ee,precision:Ge}),Ye=K===g.SW.coin||K===g.AO.usdt?Je:Number(de===f.g.BUY?ce:ue||0),{currentPosition:Qe,liquidationPrice:Xe}=je({symbol:e,positionSide:fe,orderPrice:Number(se||0),assumePrice:oe(de===f.g.BUY?"bid":"ask")||0,triggerPrice:Number(le||0),activationPrice:Number(pe||0),orderAmount:Ye,formType:G,side:de===f.g.BUY?1:-1,cost:Ue,openLost:$e,contractVal:ie,reduceOnly:Ze}),{liquidationPrice:et,diff:tt}=(({currentPosition:e,liquidationPrice:t,markPrice:r,places:a})=>{const{positionSize:o,entryPrice:n}=e||{};return(0,i.useMemo)((()=>{if(t<=0)return{liquidationPrice:"--",diff:"--"};const e=t-r;return{liquidationPrice:(0,m.uf)(t,a),diff:e}}),[a,o,n,t,r])})({currentPosition:Qe,liquidationPrice:Xe,markPrice:Re,places:ze});let rt;const{shortName:at}=(0,E.oO)();rt=ee?K===g.SW.coin?x:te:K===g.AO.coin?x:k,(0,i.useImperativeHandle)(S,(()=>({showOrderConfirmPanel:e=>{Z(e),C(!0)}})));const{marginType:it}=(0,E.se)(),ot=Ze||U&&X===f.RS.CLOSE||it===y.Yl.ISOLATED||G===f.Jm.TRAILING_STOP_MARKET||Ue>be,nt=(0,i.useCallback)((async()=>{if(De){const e=(0,a.Z)((0,a.Z)({},q),{},{[G.toUpperCase()]:!1});z.preference.changeOrderConfirmation(e)}J(ne),C(!1)}),[De,J,ne,q,G,z]);return(0,i.useMemo)((()=>R(n.Z,{visible:T,tx:"orderForm.confirmPanel",variant:"container",sx:O,onMaskClick:()=>{C(!1)},onPressEnter:()=>{nt()},onPressEsc:()=>{C(!1)}},R(l.Z,{variant:"title6",className:"title"},B("order-confirmation",{defaultValue:"Order Confirmation"})),R(F,{labelClassName:"highlight",label:at,value:Fe,valueClassName:`${Le} highlight`}),L.includes(G)&&R(F,{label:B("stopPriceTitle",{defaultValue:"Stop Price"}),value:(0,m.uf)(le,ze),unit:t}),V.includes(G)&&R(F,{label:B("priceTitle",{defaultValue:"Price"}),value:B("market",{defaultValue:"Market"})}),!V.includes(G)&&(G===f.Jm.TRAILING_STOP_MARKET?R(o().Fragment,null,R(F,{label:B("callbackRate",{defaultValue:"Callback Rate"}),value:(0,m.uf)(me,1),unit:"%"}),Number(pe)?R(F,{label:B("activationPrice",{defaultValue:"Activation Price"}),value:(0,m.uf)(pe,ze),unit:t}):null):R(F,{label:B("priceTitle",{defaultValue:"Price"}),value:(0,m.uf)(se,ze),unit:t})),R(F,{label:B("orderQtyTitle",{defaultValue:"Order Qty"}),value:(0,m.Jp)(Ke).toFixed(Ge,1),unit:rt}),X===f.RS.OPEN&&R(F,{label:B("cost",{defaultValue:"Cost"}),value:qe,unit:k}),!ot&&!W&&R(o().Fragment,null,R(s.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line"},R(F,{label:B("markPrice",{defaultValue:"Mark Price"}),value:(0,m.uf)(Re,ze),unit:t})),R(s.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line"},R(F,{label:R(I.m,{tip:R(l.Z,{as:"div"},B("estLiquidationPriceTip",{defaultValue:""})),placement:"bottom"},B("estLiquidationPrice",{defaultValue:"Est. Liquidation Price"})),value:et,unit:t})),R(F,{label:R(I.m,{tip:R(l.Z,{as:"div"},B("estLiqMpDifferenceTip",{defaultValue:""})),placement:"bottom"},B("estLiqMpDifference",{defaultValue:"Est. Liquidation Price/Mark Price Difference"})),value:"--"===tt?tt:`${(0,m.uf)(100*(Re?Number(tt)/Re:0),2)}%`,unit:"--"===tt?"":`(${(0,m.uf)(tt,ze)})`})),Ae&&R("div",{className:"top-line"},Ee?R(F,{label:B("takeProfit",{defaultValue:"Take Profit"}),value:`${We} ${Oe?">=":"<="} ${Ee}`,unit:t}):null,Ne?R(F,{label:B("stopLoss",{defaultValue:"Stop Loss"}),value:`${He} ${Oe?"<=":">="} ${Ne}`,unit:t}):null),G===f.Jm.MARKET&&!Ae&&R(l.Z,{variant:"caption",mt:3,color:"t.sell"},B("orderFailHintV2",{value:j,defaultValue:`Your order will fail should the market price deviate from the marked price by more than ${j}%`})),R("label",{className:"show-again"},R(c.Z,{className:"checkbox",onChange:()=>{_e(!De)}}),B("dontAskAgain",{defaultValue:"Don\u2019t ask me again"})),R(u.Z,{mt:"24px",width:"100%"},R(d.Z,{colorStyle:"secondary",onClick:()=>{_e(!1),C(!1)},sx:{width:"164px",letterSpacing:"0.16px",mr:"8px",py:"10px"}},B("cancelBtnText",{defaultValue:"Cancel"})),R(d.Z,{colorStyle:Le,onClick:nt,sx:{width:"164px",letterSpacing:"0.16px",py:"10px"}},Fe)))),[W,T,Le,Fe,at,B,G,le,ze,t,me,pe,se,Ke,Ge,rt,X,qe,Ae,Ee,We,He,Oe,Ne,Re,ot,et,tt,De,nt,Ve,k])}))},c5N6:(e,t,r)=>{"use strict";r.r(t),r.d(t,{useConfirmStore:()=>H,AssetModeDialog:()=>j,default:()=>J,OrderConfirmationForm:()=>X,PositionSideForm:()=>ee,PriceProtectionForm:()=>te,NotificationForm:()=>oe,AssetModeFormComponent:()=>ne,AssetModeForm:()=>le,OrderAmendment:()=>se});var a=r("5vwO"),i=r("GpFh"),o=r("/SIk"),n=r.n(o),l=r("7nmT"),s=r("XtDi"),c=r("lt/A"),u=r("3wSK"),d=r("LHeJ"),m=r("szIg"),p=r("fi7b"),f=r("w7Tp"),g=r("Oci4"),y=r("ka4r"),b=r("/yzf"),h=r("MB7V"),v=r("XVzo"),x=r("1VTk"),k=r("0hOy"),S=r("ydHf"),P=r("yOio"),T=r("Llsn"),C=r("YDVe"),M=r("tQHD"),Z=r("XDgS"),w=r("lvqx"),I=r("w9Ve"),E=r("fglS"),N=r("klBV"),A=r("P2I6"),R=r("6u/I"),O=r("R+VW"),L=r("VM/Z"),V=r("1U9V"),F=r("FOuV"),D=r("k4WF"),_=r("k2tD"),B=r("SJeZ"),z=r("uH0D"),K=n().createElement;const q=(0,L.nM)(),U={LIMIT:"limit",MARKET:"market",STOP:"stopLimit",STOP_MARKET:"stopMarket",TRAILING_STOP_MARKET:"trailingStopMarket"},W=[{i18n:"order-confirmation",defaultI18n:"Order Confirmation",key:"oc"},{i18n:"position-mode",defaultI18n:"Position Mode",key:"pm"},{i18n:"priceProtection",defaultI18n:"Price Protection",key:"pp"},{i18n:"preferenceNotification",defaultI18n:"Notification",key:"pn"},q?{i18n:"orderAmendment",defaultI18n:"Order Amendment",key:"oa"}:{i18n:"assetMode",defaultI18n:"Asset Mode",key:"am"}],H=(0,d.Z)((e=>({visible:!1,setVisible:t=>e((()=>({visible:t}))),assetMode:!1,setAssetMode:t=>e((()=>({assetMode:t})))}))),$=(0,o.forwardRef)(((e,t)=>{const{getI18n:r}=(0,B.yk)(),{0:a,1:i}=(0,o.useState)({defaultActiveKey:"oc"}),{defaultActiveKey:l="oc"}=a,{0:s,1:c}=(0,o.useState)(!1),{0:u,1:d}=(0,o.useState)(l),p=(0,m.useDispatch)(),h=(0,o.useCallback)((()=>{c(!1)}),[c]),v=H((e=>e.visible)),x=H((e=>e.setVisible)),k=H((e=>e.setAssetMode)),P=(0,B.$J)(),{multiAssetMarginEnable:T=!1}=(0,B.F7)(),Z=new Set,w=Object.values(P).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:t}=e;return!Z.has(t)&&(Z.add(t),!0)}return!1})),I=Boolean(w.length),E=(0,o.useCallback)((e=>{p.preference.getFundingFeeNotify(),p.preference.getStopLimitOrderNotify(),c(!0),i(e)}),[p,c,i]);return(0,o.useImperativeHandle)(t,(()=>({showPreferencePanel:E}))),(0,o.useEffect)((()=>V.TB.on(V.FP.SHOW_PREFERENCE_PANEL,(e=>{E({defaultActiveKey:e})}))),[E]),(0,o.useEffect)((()=>V.TB.on(V.FP.CLOSE_PREFERENCE_PANEL,(()=>{h()}))),[h]),(0,o.useEffect)((()=>{const{defaultActiveKey:e="oc"}=a;d(e)}),[a]),(0,o.useEffect)((()=>{p.preference.getFungFeeRange()}),[p.preference]),(0,o.useMemo)((()=>s||v?K(f.Z,null,K(g.Z,{visible:s,tx:"preference.dialog",variant:"container",onMaskClick:h},K(y.Z,{alignItems:"center",justifyContent:"space-between",tx:"preference.header",variant:"container"},K(b.Z,{tx:"preference.header",variant:"title"},r("preference",{defaultValue:"Preference"})),K(S.Z,{tx:"preference.header",variant:"close",onClick:h})),K(y.Z,{sx:{height:"496px"}},K(C.Z,{size:"large",variant:"vertical",defaultActiveKey:u,controlledKey:u,onChange:e=>d(e)},W.map((({i18n:e,defaultI18n:t,key:a})=>"am"!==a||!q&&T?K(M.Z,{tab:K(b.Z,{variant:"subtitle2",marginRight:"24px",minWidth:"120px"},r(e,{defaultValue:t})),key:a,tabKey:a}):K(n().Fragment,null)))),K(f.Z,{sx:{borderLeft:"0.5px solid",borderColor:"line"},px:"24px",py:"24px",height:"100%",flex:"1"},K(G,{tabKey:u,hidePreferencePanel:h,setConfirmVisible:x,setAssetMode:k,isolatedPositionFlag:I})))),K(j,{confirmVisible:v,setConfirmVisible:x})):null),[T,I,k,x,v,s,h,u,r])})),j=({confirmVisible:e,setConfirmVisible:t})=>{const r=(0,m.useDispatch)(),{getI18n:a}=(0,B.yk)(),{t:i}=(0,B.$G)(),n=H((e=>e.assetMode)),{0:l,1:s}=(0,o.useState)(!1),{setMessageInfo:c}=(0,E.Y)(),u=(0,B.$J)(),d=(0,o.useRef)({});Object.values(u).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:t}=e;return!d.current[t]&&(d.current[t]=e,!0)}return!1}));const x=Boolean(Object.values(d.current).filter((e=>e.isolated&&"BOTH"===e.positionSide)).length),k=(0,o.useCallback)((e=>r.preference.changeAssetMode({joinMargin:e})),[r.preference]),S=(0,o.useCallback)(((e,t)=>r.marginType.changeMarginType({marginType:t?F.Yl.CROSSED:F.Yl.ISOLATED,symbol:e})),[r.marginType]);return K(g.Z,{visible:e,tx:"preference.confirmDialog",variant:"container"},K(b.Z,{tx:"preference.confirmDialog",variant:"desc"},K(p.c,{t:i,i18nKey:(0,B.Gv)("isolatedAssetModeDes"),defaults:"Isolated margin positions are not supported under the Multi-Assets Mode. Please adjust all USD\u24c8-M Futures positions to cross margin mode in order to activate Multi-Assets Mode.",components:{text:K(b.Z,null),jump:K(b.Z,{tx:"tradingRules.dialog",variant:"viewMore",sx:{mt:"0 !important",display:"inline"}})},values:{isolatedMode:a("isolatedMode",{defaultValue:"Isolated Mode"}),crossMode:a("crossMode",{defaultValue:"Cross Mode"})}})),K(f.Z,{mb:"24px",overflowY:"auto",maxHeight:"300px",width:"100%",pr:"12px"},Object.values(d.current).map((e=>{const{isolated:t,symbol:r,id:i}=e,o=t?a("headerIsolated",{defaultValue:"Isolated"}):a("Cross",{defaultValue:"Cross"});return K(y.Z,{mb:"8px",key:i,justifyContent:"space-between"},K(y.Z,{mb:0,tx:"preference.confirmDialog",variant:"desc"},r),K(y.Z,null,K(y.Z,{mb:0,mr:"8px",tx:"preference.confirmDialog",variant:"desc",fontSize:"12px"},o),K(h.Z,{sx:{"& div":{backgroundColor:"#FFFFFF"},"& input":{backgroundColor:"#C1C6CD"}},checked:!t,onChange:()=>{l||(s(!0),S(r,t).then((r=>{null!==r&&void 0!==r&&r.marginType&&(e.isolated=!t,c({header:a("changeMarginModeTitle",{defaultValue:"Adjust Margin"}),message:a("changeMarginModeSuccess",{defaultValue:"change margin mode success"}),variant:"success"})),s(!1)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})))},name:i,color:"t.buy",size:16})))})),K(y.Z,{fontSize:"12px",color:"t.sell"},a("switchCrossMode",{defaultValue:"*Please switch all positions to cross mode."}))),K(y.Z,{width:"100%",justifyContent:"space-around"},K(y.Z,{tx:"preference.confirmDialog",variant:"cancelButton"},K(v.Z,{variant:"default",colorStyle:"secondary",height:40,width:"100%",onClick:()=>{t(!1)}},a("cancelBtnText",{defaultValue:"Cancel"}))),K(y.Z,{tx:"preference.confirmDialog",variant:"confirm"},K(v.Z,{height:40,width:"100%",disabled:x,onClick:()=>{l||(s(!0),k(n).then((e=>{const{success:r}=e;r&&c({header:a("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:a("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"}),t(!1),s(!1)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})))}},a("PreferenceConfirm",{defaultValue:"Confirm"})))))},G=e=>{let{tabKey:t}=e,r=(0,i.Z)(e,["tabKey"]);switch(t){case"oc":return K(X,null);case"pm":return K(ee,null);case"pp":return K(te,null);case"pn":return K(oe,null);case"am":return K(le,r);case"oa":return K(se,r);default:return null}},J=$,Y=()=>{const{getI18n:e}=(0,B.yk)();return e(q?"settingDelivery":"settingPerpetual",{defaultValue:q?"This setting is only apply for Delivery Futures.":"This setting is only apply for Perpetual Futures."})},Q=e=>{let{name:t,label:r,checked:a,onChange:n,children:l=null}=e,s=(0,i.Z)(e,["name","label","checked","onChange","children"]);return(0,o.useMemo)((()=>K(y.Z,{tx:"preference.switch",variant:"container"},K(y.Z,{tx:"preference.switch",variant:"header"},K(b.Z,{tx:"preference.switch",variant:"label"},r),K(h.Z,Object.assign({checked:a,name:t,onChange:n,size:16},s))),l)),[a,l,r,t,n])},X=()=>{const e=(0,o.useRef)(["LIMIT","MARKET","STOP","STOP_MARKET","TRAILING_STOP_MARKET"]),{orderConfirmation:t}=(0,B.F7)(),{getI18n:r}=(0,B.yk)(),{setMessageInfo:i}=(0,E.Y)(),n=Y(),l=(0,m.useDispatch)(),s=(0,o.useCallback)((e=>l.preference.changeOrderConfirmation(e)),[l.preference]),c=(0,o.useCallback)((e=>{s(e).then((e=>{const{success:a}=e;a?i({header:r("changeOrderConfirmation",{defaultValue:"Change Order Confirmation"}),message:r("changeOrderConfirmationSuccess",{defaultValue:"Change Order Confirmation successfully."}),variant:"success"}):s(t)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[s,i,r,t]);return K(f.Z,null,e.current.map((e=>K(Q,{key:e,name:e,label:`${r(U[e],{defaultValue:""})}   ${r("Order",{defaultValue:"Order"})}`,checked:t[e]||!1,onChange:r=>{const{target:i}=r;c((0,a.Z)((0,a.Z)({},t),{},{[e]:i.checked}))}}))),K(y.Z,{tx:"preference.content",variant:"header",sx:{lineHeight:["20px","16px"]}},r("order-confirmation-content",{defaultValue:""}),"\xa0",n))},ee=()=>{const e=(0,m.useDispatch)(),{positionMode:t=!1}=(0,B.F7)(),{getI18n:r}=(0,B.yk)(),{enqueueNotification:a}=(0,Z.Z)(),i=Y(),n=(0,o.useCallback)((t=>e.preference.changePositionMode({dualSidePosition:t})),[e.preference]),l=(0,o.useCallback)((e=>{t!==e&&n(e).then((e=>{const{success:t}=e;t&&a({header:r("AdjustPositionMode",{defaultValue:"Adjust Position Mode"}),message:r("AdjustPositionModeSuccess",{defaultValue:"Position mode adjusted successfully."}),variant:"success"})})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[n,a,r,t]);return K(f.Z,null,K(f.Z,{mt:"27px","data-testid":"One-wayMode"},K(x.ZP,{name:"positionSide",value:"false",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!1===t,onCheckedChange:()=>{l(!1)}},K(f.Z,{tx:"preference.switch",variant:"label"},r("OneWayPosition",{defaultValue:"One-way Mode"}))),K(b.Z,{tx:"preference.radio",variant:"desc"},r("OneWayModeDes",{defaultValue:""}))),K(f.Z,{mt:"27px","data-testid":"HedgeMode"},K(x.ZP,{name:"positionSide",value:"true",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!0===t,onCheckedChange:()=>{l(!0)}},K(f.Z,{tx:"preference.switch",variant:"label"},r("TwoWayPosition",{defaultValue:"Hedge Mode"}))),K(b.Z,{tx:"preference.radio",variant:"desc"},r("TwoWayModeDes",{defaultValue:""}))),K(y.Z,{tx:"preference.content",variant:"header"},r("AdjustPositionModeDes",{defaultValue:""}),"\xa0",i))},te=()=>{const e=(0,N.tZ)(),t=(0,m.useDispatch)(),{getI18n:r}=(0,B.yk)(),{t:a}=(0,B.$G)(),{setMessageInfo:i}=(0,E.Y)(),{priceProtection:n}=(0,B.F7)(),l=Y(),s=(0,o.useCallback)((e=>{(0,A.P2)({[q?"deliveryPriceDifferSwitch":"perpetualPriceDifferSwitch"]:e}).then((a=>{const{data:o}=a;o&&(i({header:r("AdjustPriceProtection",{defaultValue:"Adjust Price Protection"}),message:r("AdjustPriceProtectionSuccess",{defaultValue:"Price protection adjusted successfully"}),variant:"success"}),t.preference.updateState({priceProtection:e}))})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[t.preference,r,i]);return K(f.Z,null,K(Q,{name:"priceProtection",label:r("priceProtection",{defaultValue:"Price Protection"}),checked:n,onChange:e=>s(e.target.checked)}),K(y.Z,{tx:"preference.content",variant:"header",flexDirection:"column"},K(p.c,{t:a,i18nKey:(0,B.Gv)("priceProtectionDes"),defaults:"<text>After enabling price protection, if the difference between the Last price and Mark price of the contract exceeds the set threshold when the stop loss / take profit orders reach the trigger price, the stop loss / take profit orders will not be triggered. View threshold in <jump>{{tradingRule}}</jump></text>",components:{text:K(b.Z,null),jump:K(k.Z,{href:`/${e}/futures/trading-rules/${q?"quarterly":"perpetual"}`,tx:"tradingRules.dialog",variant:"viewMore",sx:{mt:"0 !important",display:"inline"},target:"_blank"})},values:{tradingRule:r("trading-rules",{defaultValue:"Trading Rules"})}}),K(f.Z,{mt:10},l)))},re="priceProtection-switch",ae={pr:"54px","& .bn-input-tooltip":{minWidth:"238px",height:"32px",lineHeight:"32px",textAlign:"center",bg:"t.grey500",borderRadius:"4px",color:"t.grey0",fontSize:"sm",right:"-45px !important",bottom:"155% !important"},"& .bn-input-tooltip-arrow":{right:"63px !important"},"& .bn-input-tooltip-content":{padding:"7px 8px !important"},"& > div:nth-of-type(2)":{borderColor:"calculator.inputBorderColor"},"& .bn-input-status-error":{borderColor:"#D9304E !important"},"& input":{textAlign:"left !important",p:0,fontSize:0},"& .edit-btn-wrap":{display:"inline-flex",alignItems:"center"},"& .edit-input-wrap":{display:"inline-block"},"& .edit-suffix-wrap":{alignItems:"center",color:"t.primary"},"& .edit-confirm":{color:"t.buy",ml:"sm",mr:"xs",cursor:"pointer"},"& .edit-cancel":{color:"t.sell",cursor:"pointer"}},ie=()=>{const{cap:e,floor:t}=(0,B.I3)(),{getI18n:r}=(0,B.yk)(),{setMessageInfo:a}=(0,E.Y)(),i=(0,o.useRef)(null),n=(0,o.useRef)(null),{0:u,1:d}=(0,o.useState)(null),[m,p]=(0,s.Z)(!1),[g,h]=(0,B.aT)(),[{isEnableFundingFeeNotify:v,fundingFee:x},k]=(0,B.CJ)(),{0:C,1:M}=(0,o.useState)(x);(0,o.useEffect)((()=>{x!==C&&M(x)}),[x]),(0,o.useEffect)((()=>{var e;m&&(null===n||void 0===n||null===(e=n.current)||void 0===e||e.focus())}),[m]);const Z=(0,o.useCallback)((()=>{a({header:r("AdjustNotification",{defaultValue:"Adjust Notification"}),message:r("AdjustNotificationSuccess",{defaultValue:"Notification adjusted successfully."}),variant:"success"})}),[]),I=(0,o.useCallback)((()=>{v&&p(!0)}),[v]),N=(0,o.useCallback)((()=>{p(!1)}),[]),A=(0,o.useCallback)((async e=>{const{target:{checked:t}}=e;try{(await h(t)).success&&Z()}catch{}}),[Z]),R=(0,o.useCallback)((async e=>{try{d("");(await k({fundingFee:C,isEnable:e})).success&&(Z(),N())}catch(t){console.log(t)}}),[Z,C,k]),O=(0,o.useCallback)((()=>{R(!0)}),[R]),L=(0,o.useCallback)((()=>{(0,l.unstable_batchedUpdates)((()=>{M(x),N()}))}),[x]),V=(0,o.useCallback)((e=>{var t;const r=e.target;(null===r||void 0===r?void 0:r.id)!==re&&(null===r||void 0===r||null===(t=r.parentNode)||void 0===t?void 0:t.id)!==re&&m&&L()}),[m]),F=(0,o.useCallback)((a=>{M(a),d(a<t||a>e?r("fundingFeeTriggerTips",{min:t,max:e,defaultValue:"Trigger is limited to {{min}}%-{{max}}%."}):null)}),[e,t,r]);return(0,c.Z)(i,V,["click"]),K(f.Z,null,K(Q,{name:"priceProtection",label:r("TPSLTrigger",{defaultValue:"TP/SL Trigger"}),checked:g,onChange:A},K(f.Z,{tx:"preference.switch",variant:"desc"},r("TPSLTriggerDesc",{defaultValue:"TPSLTriggerDesc"}))),K(Q,{name:"priceProtection",label:r("fundingFeeTrigger",{defaultValue:"Funding Fee Trigger"}),checked:v,id:re,onChange:e=>R(e.target.checked)},K(y.Z,{tx:"preference.switch",variant:"desc",alignItems:"center",sx:ae},K(f.Z,{tx:"preference.switch",variant:"desc",sx:{pr:0}},r("fundingFeeTriggerDesc",{defaultValue:"You will be notified when funding fee reaches"}),m?K("div",{ref:i,className:"edit-input-wrap"},K(w.Z,{ref:n,variant:"inline",type:"number",step:(0,_.nH)(4),value:C,onChange:e=>(0,D._p)(e,F,"",4),onBlur:e=>{(0,D.Y5)(e)},errorText:u||"",error:!!u,suffix:K(y.Z,{className:"edit-suffix-wrap"},K(b.Z,{variant:"body2"},"%"),K(T.Z,{onClick:O,size:16,className:"edit-confirm"}),K(S.Z,{onClick:L,size:16,className:"edit-cancel"})),disabled:!v,boxProps:{width:145,minWidth:145,pl:"xs",ml:"minor",mt:0,bg:"inputBg"}})):K(y.Z,{className:"edit-btn-wrap"},K(b.Z,{variant:"subtitle2",color:"t.primary",mx:"minor"},Number(x).toFixed(4),"%"),K(P.Z,{size:24,sx:{color:v?"icon":"t.disabled",cursor:v?"pointer":"not-allowed"},onClick:I}))))),K(y.Z,{tx:"preference.content",variant:"header",flexDirection:"column"},r("preferenceNotificationDes",{defaultValue:"preferenceNotificationDes"})))},oe=n().memo(ie),ne=({setConfirmVisible:e,setAssetMode:t,isolatedPositionFlag:r=!1})=>{const a=(0,m.useDispatch)(),{enable:i}=(0,N.kC)(),{assetMode:n}=(0,B.F7)(),{hidePreferencePanel:l}=(0,B.r8)(),{getI18n:s}=(0,B.yk)(),{t:c}=(0,B.$G)(),{enqueueNotification:u}=(0,Z.Z)(),d=(0,N.tZ)(),{0:g,1:h}=(0,o.useState)(!1),v=(0,o.useCallback)((e=>a.preference.changeAssetMode({joinMargin:e})),[a.preference]),S=(0,o.useCallback)((a=>{if(!g)return r?(e(!0),void t(a)):void(a&&i?u({message:s("uniAccountChangeAssetModeTip",{defaultValue:"You cannot switch to Multi-Asset Mode under Portfolio Margin mode."}),variant:"error"}):(h(!0),v(a).then((e=>{const{success:r,code:i}=e;r?u({header:s("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:s("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"}):(t(a),i===L.gU&&(l(),!a&&(0,O.n)())),h(!1)})).catch((e=>{"undefined"!==typeof Sentry&&Sentry.captureException(e),h(!1),t(a)}))))}),[g,r,i,u,t,e,v,s,n]);return K(f.Z,null,K(f.Z,{mb:"27px"},K(x.ZP,{name:"assetMode",value:"false",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!1===n,onCheckedChange:()=>{S(!1)}},K(f.Z,{tx:"preference.switch",variant:"label"},s("singleAsset",{defaultValue:"Single-Asset Mode"}))),K(b.Z,{tx:"preference.radio",variant:"desc"},s("singleAssetDes",{defaultValue:"Supports USD\u24c8-M Futures trading by only using the single margin asset of the symbol. \n PNL of the same margin asset positions can be offset. \n Supports Cross Margin Mode and Isolated Margin Mode."}))),K(f.Z,{mb:"27px"},K(x.ZP,{name:"assetMode",value:"true",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!0===n,onCheckedChange:()=>{S(!0)}},K(f.Z,{tx:"preference.switch",variant:"label"},s("multiAssets",{defaultValue:"Multi-Assets Mode"}))),K(b.Z,{tx:"preference.radio",variant:"desc"},s("multiAssetsDes",{defaultValue:"USD\u24c8-M Futures trading across multiple margin assets. \n PNL can be offset among the different margin asset positions. \n Only supports Cross Margin Mode."}))),K(y.Z,{tx:"preference.content",variant:"header",flexDirection:"column"},K(p.c,{t:c,i18nKey:(0,B.Gv)("assetModeDes"),defaults:"<text>Multi-Assets Mode only applies to USD\u24c8-M Futures. Before activating Multi-Assets Mode, please read the <jump>{{guide}}</jump> in detail to better manage USD\u24c8-M Futures account risk accordingly when using Multi-Assets Mode.</text>",components:{text:K(b.Z,{mt:"8px"}),jump:K(k.Z,{href:(0,z.b)(`/${d}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`),tx:"tradingRules.dialog",variant:"viewMore",sx:{mt:"0 !important",display:"inline"},target:"_blank"})},values:{guide:s("guide",{defaultValue:"guide"})}})))},le=n().memo(ne),se=n().memo((({hidePreferencePanel:e})=>{const t=I.k.Store.createStore(R.O7),[,r]=t(I.k.Store.getShowLimitOrder),[,a]=t(I.k.Store.getShowPositionOrder),{getI18n:i}=(0,B.yk)(),[n,l]=(0,u.g)(F.Zv,F.Xd),{0:s,1:c}=(0,o.useState)(!(null===n||void 0===n||!n.kLine)),{0:d,1:m}=(0,o.useState)(!(null===n||void 0===n||!n.needConfirm)),p=(0,o.useCallback)((e=>{c(e.target.checked),r(e.target.checked),a(e.target.checked)}),[r,a]),g=(0,o.useCallback)((e=>m(e.target.checked)),[]);return K(f.Z,null,K(Q,{name:"kLineAmendment",label:i("KLineAmendment",{defaultValue:"KLine Amendment"}),checked:s,onChange:p},K(f.Z,{tx:"preference.switch",variant:"desc"},i("KLineAmendmentDesc",{defaultValue:"KLine Amendment Desc"}))),K(Q,{name:"amendmentConfirmation",label:i("amendmentConfirmation",{defaultValue:"Amendment Confirmation"}),checked:d,onChange:g},K(f.Z,{tx:"preference.switch",variant:"desc"},i("amendmentConfirmationDesc",{defaultValue:"Amendment Confirmation Desc"}))),K(y.Z,{tx:"preference.confirm",variant:"buttonConfirm"},K(v.Z,{height:40,width:"100%",onClick:()=>{l({kLine:s,needConfirm:d}),e()}},i("PreferenceConfirm",{defaultValue:"Confirm"}))))}))},Wx6g:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r("tS/l");const i=({children:e})=>{const{isMobile:t,isIPad:r}=(0,a.F)();return e&&e({isMobile:t,isIPad:r})}},cEEj:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("w7Tp"),l=r("sZZk"),s=o().createElement;const c=e=>{let{mediaQuery:t,children:r}=e,o=(0,a.Z)(e,["mediaQuery","children"]);const c=(0,l.useMediaQuery)({query:t||"(max-width: -1)"})||void 0===t;return(0,i.useMemo)((()=>c?s(n.Z,Object.assign({sx:{width:"100%",height:"100%",display:"none",[`@media ${t}`]:{display:"block"}}},o),r):null),[c,r,o,t])},u=e=>{let{children:t,mediaQuery:r,renderInSSR:i}=e,o=(0,a.Z)(e,["children","mediaQuery","renderInSSR"]);return s("div",{suppressHydrationWarning:!0},s(c,Object.assign({mediaQuery:r},o),t))},d=(0,i.memo)(u)},keMM:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r("5vwO"),i=r("/SIk"),o=r("Uqe+"),n=r("Gqy6"),l=r("vdqA"),s=r("3x5U"),c=r("szIg"),u=r("kO20"),d=r("S24M"),m=r("klBV"),p=r("SJeZ"),f=r("VM/Z"),g=r("1U9V"),y=r("ux7Q"),b=r("IewQ");const h=()=>{const[e]=(0,m.z4)(),[t]=(0,m.uT)(),{isLight:r}=(0,m.Fg)(),h=(0,c.useSelector)((e=>e.setting.color)),v=(0,p.C3)(),[x={}]=(0,o.Z)(f.Ze),{userId:k}=(0,m.Pc)();let{layout:S}=(0,m.lr)();return S=(0,g.XY)([f.UW,f.$f],S,f.$f),(0,i.useEffect)((()=>{try{const e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=u.Responsive.utils.getBreakpointFromWidth(y.j$,e),i=(x[t]||[]).map((e=>e.i)),o=JSON.parse(localStorage.getItem(b.w)||"null"),{sensors:n}=(0,l.Z)({sensorsConfig:{server_url:f.yB,staticHost:f.Xs,batch_send:!0,heatmap:{useCapture:!0,collect_elements:"all",scroll_notice_map:"default",clickmap:"default",track_attr:["data-testid"],custom_property(e){if(e){var t;const r={tag:"futuresng",pageName:"futuresng"},a=null===(t=e.dataset)||void 0===t?void 0:t.testid;return a&&(r.dataTestId=a),r}}},preset_properties:{url:!0},show_log:!1},ableGA:"test"!==f.vt});n.quick("autoTrack",(0,a.Z)((0,a.Z)({},{theme:r?f.rp:f.Py,tag:"futuresng",version:f.lO,chart:i.indexOf("chart")>-1,market:i.indexOf("market")>-1,depth:i.indexOf("verticalDepth")>-1,orderbook:i.indexOf("orderbook")>-1,trades:i.indexOf("trades")>-1,position:i.indexOf("userinfo")>-1,flashOrder:null===o||o,layout:v||S||f.$f,favorite:i.indexOf("favorite")>-1,assets:i.indexOf("assetsCard")>-1,marginRatio:i.indexOf("marginRatio")>-1,placeOrder:i.indexOf("orderForm")>-1,color:h}),f.jX?{channel:f.jX}:{})),(0,d.$0)(n)}catch(e){console.error("senor init error",e)}}),[t,e]),(0,i.useEffect)((()=>{k&&((0,s.Z)(k),(0,n.fs)(k),"undefined"!==typeof window.Sentry&&window.Sentry.setUser({id:k}))}),[k]),null}},"c1R+":(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var a=r("/SIk"),i=r.n(a),o=r("2HSj"),n=r("AsAT"),l=r("S24M"),s=r("SJeZ"),c=r("VM/Z"),u=r("5vwO"),d=r("kSVV"),m=r("w7Tp"),p=r("Oci4"),f=r("/yzf"),g=r("ka4r"),y=r("5+Lg"),b=r("a4Ug"),h=r("kNxe"),v=r("RO4H"),x=r("U0yl"),k=r("N081"),S=r("szIg"),P=r("BQ33"),T=r.n(P),C=r("1drL"),M=r("8Zi/"),Z=r.n(M),w=r("zBr4"),I=i().createElement;const E=()=>I(m.Z,{width:"1px",height:16,bg:o.BA[400]}),N=({showResult:e=!1,checkList:t=[],positionInfo:n})=>{const[l,s,c]=t,{getI18n:u,i18n:{language:d}}=(0,x.ZK)("","trade-ui"),{getI18n:p}=(0,x.ZK)("","futures-ui"),y=(0,S.useSelector)(w.vq),{isShort:b,leverage:h,pair:v,changePercent:k,pnlAmount:P,formatedPnl:M,entryPrice:N,markPrice:A}=n,R=P>=0,O=(0,a.useMemo)((()=>e?R?"win":"loss":"basic"),[e,R]),L=(0,a.useMemo)((()=>`${window.location.origin}/${d}/futures/ref/${y}`),[d,y]);return I(m.Z,{id:"share-position-poster",className:"share-poster",width:580,px:50,py:30,sx:{background:`url(${r("hhOR")(`./${O}.png`).default}), #171B20`,backgroundSize:"cover",canvas:{bg:"t.white",p:"2px"}}},I(g.Z,null,I(C.Z,{src:r("rIPn").Z,height:24})),I(g.Z,{mt:c?29:62,color:"t.white",alignItems:"center",sx:{gap:12}},I(f.Z,{variant:"subtitle2",color:b?"t.sell":"t.buy"},u(b?"trd-Position-psShort":"trd-Position-psLong")),l?I(i().Fragment,null,I(E,null),I(f.Z,{variant:"subtitle2"},h,"X")):null,I(E,null),I(f.Z,{variant:"subtitle2",width:.5},v)),I(g.Z,{color:R?"t.buy":"t.sell",alignItems:"baseline",my:1},I(f.Z,{variant:"headline1"},k),s?I(f.Z,{variant:"headline6",ml:1,width:.5},"(",M,")"):null),c?I(g.Z,{sx:{gap:3}},I(g.Z,{flexDirection:"column"},I(f.Z,{variant:"subtitle2",color:o.BA[200]},u("trd-Position-entryPrice")),I(f.Z,{variant:"subtitle2",color:o.BA[200],mt:1},u("trd-Position-markPrice"))),I(g.Z,{flexDirection:"column"},I(f.Z,{variant:"subtitle",color:o.er[200],sx:{lineHeight:"20px"}},N),I(f.Z,{variant:"subtitle",color:o.er[200],mt:"6px"},A))):null,I(g.Z,{mt:c?26:40,alignItems:"center"},I(m.Z,{mr:12},I(Z(),{value:L,size:64,level:"H"})),I(g.Z,{flexDirection:"column"},I(f.Z,{variant:"caption",color:o.BA[200],sx:{textTransform:"uppercase"}},p("futures-referral-Referral-code")),I(f.Z,{variant:"headline5",color:"t.white"},y))),I(f.Z,{variant:"caption",color:o.BA[200],width:.5,textAlign:"right",sx:{position:"absolute",right:10,mt:1}},`${u("trd-Cut-off-Time")}: ${T()().format("YYYY-MM-DD HH:mm")}`))};var A=i().createElement;const R=[{label:"trd-share-leverage",val:"leverage"},{label:"trd-share-PNL-amount",val:"pnlAmount"},{label:"trd-trades-price",val:"price"}],O=(0,c.nM)(),L=({isRight:e=!1,onClick:t,disabled:r})=>{const a={size:16,color:"t.third"},i=e?{right:-56}:{left:-56};return A(m.Z,{bg:"t.white",sx:(0,u.Z)({position:"absolute",borderRadius:"100%",mt:160,width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:r?"not-allowed":"pointer",opacity:r?.5:1,boxShadow:"0px 7px 14px rgba(0, 0, 0, 0.08), 0px 3px 6px rgba(0, 0, 0, 0.08), inset 0px 0px 1px rgba(94, 102, 115, 0.9)"},i),onClick:()=>!r&&t()},A(e?h.Z:v.Z,a))},V=({onClose:e,positionInfo:t})=>{const{0:r,1:o}=(0,a.useState)(0),{0:n,1:u}=(0,a.useState)(R.map((()=>!0))),h=(0,s.C3)()===c.UW,{getI18n:v}=(0,x.ZK)("","trade-ui"),S=(0,a.useCallback)((()=>{const e=h?O?"cm_full_trading":"um_full_trading":O?"cm_pro_trading":"um_pro_trading",a=0===r?"General":t.pnlAmount>=0?"Winning":"Losing";(0,l.j)("WebClick",{module:"oop",ElementID:"sharePosition_download",ElementContent:R.filter(((e,t)=>n[t])).map((e=>e.val)).join("_"),df_source:O?"cm":"um",pageName:e,title:a});const i=document.getElementById("share-position-poster"),{offsetWidth:o,offsetHeight:s}=i;(0,k.Z)({el:i,android:{width:2*o,height:2*s,style:{transform:"scale(2)",transformOrigin:"top left",width:`${o}px`,height:`${s}px`}},success(e){(0,k.L)(e,`share-poster-${Date.now()}`)}})}),[n,h,r,t.pnlAmount]);return A(p.Z,{visible:!0,sx:{borderRadius:8,".share-poster":{borderRadius:"8px 8px 0 0"}}},!!t.pnlAmount&&A(i().Fragment,null,A(L,{onClick:()=>o(0),disabled:0===r}),A(L,{isRight:!0,onClick:()=>o(1),disabled:1===r})),A(N,{checkList:n,showResult:1===r,positionInfo:t}),A(m.Z,{bg:"modalBg",px:4,pt:4},A(f.Z,{variant:"body2",color:"t.secondary"},v("trd-share-select-display")),A(g.Z,{mt:2,mb:4,sx:{gap:4}},R.map(((e,t)=>A(y.Z,{key:e.val},A(b.Z,{checked:n[t],onChange:e=>{const{checked:r}=e.currentTarget;u((e=>{const a=[...e];return a[t]=r,a}))}}),A(f.Z,{variant:"body2",color:"t.primary"},v(e.label)))))),A(d.Z.ModalFooter,{onOk:S,OkContent:v("trd-footer-download"),CancelContent:v("trd-Position-cancel"),onCancel:e})))};var F=i().createElement;const D=(0,c.nM)(),_=({positionInfo:e})=>{const{0:t,1:r}=(0,a.useState)(!1),u=(0,s.C3)()===c.UW;return F(i().Fragment,null,t&&F(V,{onClose:()=>r(!1),positionInfo:e}),F(n.Z,{color:o.BA[300],sx:{cursor:"pointer"},onClick:()=>{const e=u?D?"cm_full_trading":"um_full_trading":D?"cm_pro_trading":"um_pro_trading";(0,l.j)("WebClick",{module:"oop",ElementID:"sharePosition_entry",df_source:D?"cm":"um",pageName:e}),r(!0)}}))}},COVG:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var a=r("/SIk"),i=r.n(a),o=r("w7Tp"),n=r("aK2L"),l=r("NcRm"),s=i().createElement;const c={minWidth:"150px",backgroundColor:"rgba(255, 0, 0, .2)","& .sort-item":{boxShadow:"none !important"}},u={color:"t.primary",display:"flex",zIndex:1e4,backgroundColor:"popupBg",justifyContent:"space-between",alignItems:"center",padding:"8px 2px",fontSize:"12px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.3)","&:first-child":{marginTop:"16px"}},d=(0,l.W6)((()=>s(n.Z,{color:"t.third",size:20}))),m=(0,l.W8)((({value:e})=>s(o.Z,{sx:u,className:"sort-item"},e,s(d,null)))),p=(0,l.JN)((({children:e})=>s(o.Z,{sx:c},e))),f=({items:e,onSort:t})=>s(p,{transitionDuration:100,useDragHandle:!0,onSortEnd:({oldIndex:r,newIndex:a},i)=>{i.stopPropagation(),i.preventDefault();const o=e.map((e=>e.value)),[n]=o.splice(r,1);o.splice(a,0,n),t(o)}},e.map(((e,t)=>s(m,{key:e.value,value:e.label,index:t}))))},v2M8:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("/SIk"),i=r.n(a),o=r("ka4r"),n=i().createElement;function l(e){return n(o.Z,Object.assign({__css:{flexDirection:"column",height:"100%",px:"sm"}},e))}},rdEq:(e,t,r)=>{"use strict";r.d(t,{m:()=>g});var a=r("5vwO"),i=r("GpFh"),o=r("/SIk"),n=r.n(o),l=r("w7Tp"),s=r("/yzf"),c=r("fjQ4"),u=r("tS/l");const d={display:"flex",alignItems:"center",cursor:"help",color:"t.third",borderBottom:["1px dotted","1px dotted","none"],borderBottomColor:"t.third","&:hover":{color:"t.primary",borderBottomColor:"t.primary"}},m={maxWidth:"296px",margin:"-4px 0",lineHeight:"16px",color:"t.white",whiteSpace:"pre-line"};var p=r("vt3k"),f=n().createElement;const g=n().memo((e=>{let{children:t,tip:r,learnMoreLink:o,placement:g,hideUnderLine:y,sx:b,tipSx:h,labelSx:v,onTipClick:x}=e,k=(0,i.Z)(e,["children","tip","learnMoreLink","placement","hideUnderLine","sx","tipSx","labelSx","onTipClick"]);const{isIPad:S}=(0,u.F)(),P=f(l.Z,Object.assign({sx:(0,a.Z)((0,a.Z)({},m),h)},x&&{onClick:x}),r,o&&f(n().Fragment,null," ",f(p.dh,{link:o})));return f(c.Z,Object.assign({tip:P,delay:500,sx:b,bg:"bg4",placement:g,arrow:!0,enablePortal:!S},k),f(s.Z,{sx:(0,a.Z)((0,a.Z)((0,a.Z)({},d),v),y?{borderBottom:"none"}:{})},t))}))},"R+VW":(e,t,r)=>{"use strict";r.d(t,{n:()=>f,Z:()=>y});var a=r("/SIk"),i=r.n(a),o=r("Oci4"),n=r("/yzf"),l=r("XVzo"),s=r("x4OI"),c=r("D9MU"),u=r("LcTY"),d=r("SJeZ"),m=i().createElement;const p={display:"flex",width:360,flexDirection:"column",alignItems:"center","& .close-icon":{position:"absolute",right:"22px",top:"22px",cursor:"pointer"},"& .error-icon":{mt:"plus",mb:"sm"},"& .modal-title":{mb:"xs",color:"t.primary"},"& .modal-content":{maxHeight:"140px",mx:"md",color:"t.third",overflow:"auto","&::-webkit-scrollbar":{width:"3px",height:"3px"},"&::-webkit-scrollbar-thumb":{bg:"line"}},"& .modal-footer":{display:"flex",width:"100%",justifyContent:"space-between",p:"md",boxSizing:"border-box",button:{width:"50%"},".transfer-btn":{borderRadius:"4px"},".convert-btn":{mr:"xs"}}},f=()=>{u.T.emit(u.F.OPEN_SWITCH_SINGLE_MODE_REJECT_MODAL,{visible:!0})},g=()=>{const{getI18n:e}=(0,d.yk)(),{0:t,1:r}=(0,a.useState)(!1),i=(0,a.useCallback)((()=>{r(!1)}),[]),f=(0,a.useCallback)((()=>{u.T.emit(u.F.OPEN_TRANSFER_MODAL),i()}),[i]),g=(0,a.useCallback)((()=>{u.T.emit(u.F.OPEN_CONVERT_MODAL),i()}),[i]);return(0,a.useEffect)((()=>u.T.on(u.F.OPEN_SWITCH_SINGLE_MODE_REJECT_MODAL,(({visible:e})=>{r(e)}))),[]),m(o.Z,{visible:t,onMaskClick:i,sx:p},m(s.Z,{className:"close-icon",onClick:i}),m(c.Z,{className:"error-icon",size:96}),m(n.Z,{variant:"headline6",className:"modal-title"},e("switchSingleAssetModeModalTitle",{defaultValue:"Switch to Single-Asset Mode"})),m(n.Z,{className:"modal-content",variant:"body2"},e("switchSingleAssetModeModalContent",{defaultValue:"To switch to Single-Asset Mode,\n        you need to eliminate the negative balance of BUSD/USDT in your UM wallet.\n        Please transfer BUSD/USDT to your UM account or manually convert other assets to BUSD/USDT.\n        "})),m("div",{className:"modal-footer"},m(l.Z,{sz:"normal",variant:"default",colorStyle:"secondary",className:"convert-btn",onClick:g},e("convert")),m(l.Z,{sz:"normal",variant:"default",colorStyle:"flatprimary",className:"transfer-btn",onClick:f},e("transfer"))))},y=i().memo(g)},MMVH:(e,t,r)=>{"use strict";r.d(t,{p:()=>c});var a=r("GpFh"),i=r("klBV"),o=r("/yzf"),n=r("/SIk"),l=r.n(n);r("DDYV"),l().createElement;r("zZ5f");var s=l().createElement;const c=e=>{let{children:t=null,i18nKey:r="nodata",i18nDefault:n="no data"}=e,l=(0,a.Z)(e,["children","i18nKey","i18nDefault"]);const{getI18n:c}=(0,i.ZK)("trd-common",u);var u;return s(o.Z,Object.assign({variant:"columns.emptyLine",__css:{height:"100%",width:"100%",minHeight:"20px",display:"flex",alignItems:"center",justifyContent:"center"}},l),t||c(r,{defaultValue:n}))}},Qkkg:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("Y6Da"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("klBV"),s=r("ZJL0"),c=o().createElement;const u=({children:e})=>{const t=(0,l.gm)(),{isMobile:r}=(0,l.Fs)(),i=(0,l.Om)(),o=(0,n.useSelector)((e=>e.setting.color));return c(a.Z,r?{theme:(0,s.gh)(!1,o)}:{dir:t,theme:i},e)},d=o().memo(u)},AhZU:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("/SIk"),i=r.n(a),o=r("XdEc"),n=r("SJeZ"),l=i().createElement;function s(){const{getI18n:e}=(0,n.yk)(),t=(0,n.gN)(),r=(0,n.d0)();return l(o.Z,{i18n:e,contractInfo:t,changeSymbol:r,isDeliveryColumn:!1})}},gNzA:(e,t,r)=>{"use strict";r("kXC2"),r("8Kyu");var a=r("/SIk"),i=r.n(a);r("rdEq"),r("+m74"),r("hTQS"),i().createElement;i().createElement;r("SJeZ"),r("AhZU"),r("6cKY"),r("VM/Z"),i().createElement},zgli:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var a=r("5vwO"),i=r("w7Tp"),o=r("ka4r"),n=r("/SIk"),l=r.n(n),s=r("szIg"),c=r("VM/Z"),u=r("klBV"),d=r("kXC2"),m=r("y5Ng"),p=r("3szt"),f=r("wGPX"),g=r("CE5Z"),y=r("cN65"),b=r("/yzf"),h=r("SJeZ"),v=l().createElement;const x={padding:"16px",bg:"popupBg",boxShadow:"elevation2",borderRadius:"4px","& .name":{color:"t.secondary"}},k=({list:e=[],operate:t})=>{const{getI18n:r}=(0,h.yk)();return v(i.Z,{__css:x},v(b.Z,{variant:"captionSub",className:"name"},r("ticker-preference-title",{defaultValue:"Ticker Preference"})),v("div",{className:"list"},v(y.Z,{options:e,getValue:t})))},S=(0,n.memo)(k),P={fundingFee:!0,mark:!0,index:!0,change:!0,mode:!0,high:!0,low:!0,volume:!0,transaction:!0};var T=r("3wSK"),C=l().createElement;const M=({type:e})=>{const t=function(){const[e,[t,r]]=(0,u.z4)(),{getI18n:a}=(0,u.ZK)("trd-ticker","");return(0,n.useMemo)((()=>[{value:"high",label:a("high",{defaultValue:"24h High"}),defaultChecked:!1},{value:"low",label:a("low",{defaultValue:"24h Low"}),defaultChecked:!1},{value:"volume",label:`${a("volume")}(${t})`,defaultChecked:!1},{value:"transaction",label:`${a("transaction")}(${r})`,defaultChecked:!1}]),[a,t,r])}(),[r,o]=(0,T.g)("TickerPreference",P),l=(0,n.useMemo)((()=>t.length&&t.map((e=>(0,a.Z)((0,a.Z)({},e),{},{defaultChecked:r[e.value]})))),[t,r]);return C(i.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",minWidth:"18px"}},C(f.ZP,{trigger:"click",enablePortal:!0,overlay:C(S,{list:l,operate:e=>{o((0,a.Z)((0,a.Z)({},r),e))}})},C(g.Z,{fontSize:"20px",mt:"5px",sx:{color:"icons.close",cursor:"pointer","&:hover path":{fill:"t.third"}}})))};var Z=r("8Kyu"),w=r("AhZU"),I=r("6cKY"),E=l().createElement;const N={flex:1,flexWrap:"nowrap",display:"flex",alignItems:"center",position:"relative"},A=({type:e,layout:t})=>{const{list:r,dataSource:a}=(0,I.L8)({type:e}),i=(0,h.oD)(),o=(0,h.BF)(c.UW),[l]=(0,T.g)("TickerPreference",P),s=(0,n.useMemo)((()=>r.filter((e=>l&&!1!==l[e.key]))),[l,r]),u=(0,n.useMemo)((()=>!!i&&E(w.Z,null)),[i]);return E(d.Ar,{sx:N},E(Z.Z,{layout:t,list:s,dataSource:a,isFullScreen:o},u))};var R=l().createElement;const O={ml:"0px",mr:"16px"},L=({type:e,sx:t={},children:r})=>{const{isScreenDesk:n}=(0,u.Fs)(),l=(0,s.useSelector)((e=>e.setting.layout))===c.UW,f=((0,h.BF)(c.UW),l),[g]=(0,h.UI)(),y=f||!g;return c.sk?R(i.Z,{sx:(0,a.Z)({display:"flex",justifyContent:"space-between",cursor:"default"},t),as:"span",className:"ticker-wrap"}):R(i.Z,{sx:(0,a.Z)({display:"flex",justifyContent:"space-between",pr:f?"12px":"16px",ml:f?"16px":"0px"},t),className:"ticker-wrap",suppressHydrationWarning:!0},R(o.Z,{mr:f?"0px":"12px",flex:1},R(i.Z,{sx:{display:"flex"}},R(d.Ar,{sx:{mr:["xs","0"],flex:"none"}},R(i.Z,{sx:{display:"flex",alignItems:"center",flex:1}},r),R(i.Z,null,y&&R(p.Z,{sx:{ml:f||n?"16px":"24px",mr:f?"16px":0}})),R(m.Z,{className:f?"":"draggableHandle",sx:f?O:void 0}))),R(A,{layout:"default",type:e})),R(M,{type:e}))},V=(0,n.memo)(L)},kXC2:(e,t,r)=>{"use strict";r.d(t,{Ar:()=>n});var a=r("ka4r"),i=r("/SIk"),o=r.n(i)().createElement;const n=(0,i.memo)((e=>o(a.Z,Object.assign({__css:{flexDirection:["column","row"],justifyContent:"space-between",alignItems:["flex-start","center"]}},e))))},"+m74":(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("frZ3"),s=r("/yzf"),c=r("1U9V"),u=o().createElement;const d=(0,i.forwardRef)(((e,t)=>{let{timer:r}=e,o=(0,a.Z)(e,["timer"]);const d=(0,n.useDispatch)(),{0:m,1:p}=(0,i.useState)(r),{0:f,1:g}=(0,i.useState)(0),y=f?5e3*f:1e3;(0,l.Z)((()=>{const e=m-1e3;p(e),(!e||e<=0)&&(g(f+1),d.markPrice.queryMarkPrice().then((()=>{r&&(p(r),g(0))})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})))}),y);const b=(0,c.Ej)(m);return u(s.Z,Object.assign({ref:t,__css:{wordBreak:"break-word",whiteSpace:"nowrap",color:"t.primary"}},o),b)}));d.displayName="Counter";const m=(0,i.forwardRef)(((e,t)=>{let{time:r}=e,i=(0,a.Z)(e,["time"]);if(null===r)return null;const o=r-Date.now();return Number.isInteger(o)?u(d,Object.assign({timer:o,ref:t},i)):null}));m.displayName="CountDown";const p=m},tjpQ:(e,t,r)=>{"use strict";r.d(t,{C:()=>u});var a=r("/SIk"),i=r.n(a),o=r("0hOy"),n=r("869M"),l=r("viQn"),s=i().createElement;const c={display:"inline-block",textDecoration:"none",borderBottom:"1px solid",borderColor:"t.third",color:"t.third","&:hover":{borderColor:"t.yellow",color:"t.yellow"}},u=({symbol:e})=>{const{getI18n:t}=(0,n.yk)(),r=(0,l.I)(e);return s(o.Z,{href:r,target:"_blank",sx:c},t("header-index",{defaultValue:"Index"}))}},hTQS:(e,t,r)=>{"use strict";r.d(t,{oB:()=>c,j7:()=>u,U1:()=>d,D9:()=>p});var a=r("/SIk"),i=r.n(a),o=r("ka4r"),n=r("rdEq"),l=r("+m74"),s=i().createElement;const c={".label":{fontSize:"10px",mr:["minor",0],mb:[0,"2px"],color:"t.third",lineHeight:"16px",fontWeight:"normal",textAlign:"left",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",borderBottom:"1px solid transparent"},".price-text":{fontSize:"12px",color:"t.primary"},".emphasize":{color:"t.emphasize"},".flex":{display:"flex"},".countdown":{ml:"8px"}},u=(0,a.memo)((({label:e,price:t,className:r})=>s("div",{className:r},s("div",{className:"label"},e),s("div",{className:"price-text"}," ",t," ")))),d=(0,a.memo)((({time:e,timeTips:t,label:r,price:a,className:i})=>s("div",{className:i},s("div",{className:"label"}," ",r),s("div",{className:"flex"},s("div",{className:"price-text emphasize"},a),s("div",{className:"price-text countdown"},s(n.m,{tip:t},s("div",{className:"flex"},s(l.Z,{time:e})))))))),m={fontSize:"12px",".label":{color:"t.third",mr:"4px"},".price-text":{color:"t.primary"}},p=(0,a.memo)((({label:e,children:t})=>s(o.Z,{sx:m},s("div",{className:"label"}," ",e),s("div",{className:"price-text"},t))))},"8Kyu":(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var a=r("5vwO"),i=r("ka4r"),o=r("5Jk8"),n=r("LL18"),l=r("/SIk"),s=r.n(l),c=r("+ByA"),u=r("hTQS"),d=r("HkAn"),m=s().createElement;const p=(0,a.Z)((0,a.Z)({position:"relative"},u.oB),{},{".left-arrow":(0,a.Z)((0,a.Z)({},c.U5),{},{background:e=>`linear-gradient(to right, ${e.colors.moduleBg} 42.24%, transparent 95.69%)`,svg:{"&:hover":{color:"t.third"}}}),".right-arrow":(0,a.Z)((0,a.Z)({},c.eE),{},{background:e=>`linear-gradient(to left, ${e.colors.moduleBg} 42.24%, transparent 95.69%)`,svg:{"&:hover":{color:"t.third"}}}),".default-market-list-container":c.$j,".tablet-market-list-container":c.Wb,".mobile-market-list-container":c.o0,".multiChart-market-list-container":c.dk}),f=({layout:e,list:t,isFullScreen:r,children:a,dataSource:s})=>{const c=(0,l.useRef)(null),{0:f,1:g}=(0,l.useState)(!1),{0:y,1:b}=(0,l.useState)(!1),h=(0,d.zE)((()=>{const{scrollWidth:e=0,clientWidth:t=0,scrollLeft:r=0}=c.current||{};g(e>t+r),b(Boolean(r))}),[g,b,c],1e3);(0,l.useEffect)((function(){h()}),[h]),(0,l.useEffect)((function(){if("ResizeObserver"in window){const e=new ResizeObserver(h);return c.current&&e.observe(c.current),()=>e.disconnect()}return window.addEventListener("resize",h,{capture:!1,passive:!0}),()=>{window.removeEventListener("resize",h)}}),[h,c.current]);const v=(0,l.useCallback)((()=>{var e;"number"===typeof(null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.scrollLeft)&&(c.current.scrollLeft-=100,c.current.scrollLeft<0&&(c.current.scrollLeft=0),h())}),[h]),x=(0,l.useCallback)((()=>{var e;"number"===typeof(null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.scrollLeft)&&(c.current.scrollLeft+=100,h())}),[h]);return m(i.Z,{sx:p},y&&m("div",{onClick:v,className:"left-arrow "+(r?"fullscreen":"")},m(o.Z,{size:20,color:"icons.close"})),m("div",{className:`${e}-market-list-container`,ref:c,onScroll:h},t&&t.map((({label:e,key:t,timeKey:r,render:a,timeTips:i})=>{const o=a?a(s[t],s):s[t],n=s[r];return n?m(u.U1,{label:e,price:o,key:t,time:n,timeTips:i}):m(u.j7,{label:e,price:o,key:t})})),a),f&&m("div",{className:"right-arrow "+(r?"fullscreen":""),onClick:x},m(n.Z,{size:20,color:"icons.close"})))},g=(0,l.memo)(f)},y5Ng:(e,t,r)=>{"use strict";r.d(t,{A:()=>m,Z:()=>f});var a=r("GpFh"),i=r("/yzf"),o=r("/SIk"),n=r.n(o),l=r("ji/5"),s=r("nJ+u"),c=r("h0ui"),u=n().createElement;const d={fontSize:["32px","24px"],display:"flex",alignItems:"center",mx:"30px"},m=e=>{let{priceColor:t,price:r}=e,o=(0,a.Z)(e,["priceColor","price"]);return u(n().Fragment,null,r&&u(i.Z,Object.assign({__css:d,color:t},o),r))},p=e=>{const t=(0,c.p)(),r=(0,l.u)(!0),a=(0,s.Z)({lastPrice:r});return u(n().Fragment,null,r&&u(m,Object.assign({priceColor:a,price:t(r)},e)))},f=(0,o.memo)(p)},XdEc:(e,t,r)=>{"use strict";r.d(t,{A:()=>m,Z:()=>f});var a=r("/SIk"),i=r.n(a),o=r("klBV"),n=r("frZ3"),l=r("1U9V"),s=r("VM/Z"),c=r("hTQS"),u=r("/1uR"),d=i().createElement;const m=({timer:e,i18n:t})=>{const{0:r,1:i}=(0,a.useState)(e);return(0,n.Z)((()=>{i(r-1e3)}),1e3),e<=0||r<0?t("inDelivering",{defaultValue:"in Delivering"}):(0,l.Ej)(r)},p=({i18n:e,contractInfo:t,changeSymbol:r,isDeliveryColumn:i=!0})=>{const[n]=(0,o.z4)(),p=(0,o.iB)(),f=p[n]||{},{deliveryDate:g,contractType:y="",pair:b}=f,{isMobile:h}=(0,o.Fs)();(0,a.useEffect)((()=>{const{symbol:e,contractStatus:a,deliveryDate:o}=t;if(n===e&&"DELIVERED"===(null===a||void 0===a?void 0:a.toUpperCase())){var s,c;const e=Object.values(p).filter(l.gU),t=(null===(s=e.filter((e=>e.pair===b&&e.deliveryDate>o)))||void 0===s?void 0:s[0])||(null===(c=e.filter((e=>e.deliveryDate>o)))||void 0===c?void 0:c[0]);t&&(r({stateSymbol:t.symbol,isDeliveryColumn:i}),window.location.reload())}}),[r,t,i,b,p,n]);const{loading:v,value:x}=(0,u.s)(g),k=e("TimeLeftForDelivery",{defaultValue:"Time left for delivery"}),S=(0,a.useMemo)((()=>v||!x?"00:00:00":x>24?`${Math.ceil(x/24)} ${e("daysLeft",{defaultValue:"days left"})}`:d(m,{timer:3600*x*1e3,i18n:e})),[x,e,v]);return y.toUpperCase()===s.Yp.PERPETUAL?null:h?d(c.D9,{label:k},S):d(c.j7,{label:k,price:S})},f=(0,a.memo)(p)},"+ByA":(e,t,r)=>{"use strict";r.d(t,{$j:()=>a,Wb:()=>i,o0:()=>o,dk:()=>n,U5:()=>l,eE:()=>s});const a={whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden","& >div":{display:"inline-block",paddingRight:"16px"},"&::-webkit-scrollbar":{display:"none",width:"0",height:"0"}},i={whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden","& >div":{display:"inline-block",paddingRight:"10px"},"&::-webkit-scrollbar":{display:"none",width:"0",height:"0"}},o={display:"grid",width:"100%",height:"100%",gridGap:"8px",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"32px 32px 32px",gridTemplateAreas:'"mark index"\n                    "high low"\n                    "volume transaction"'},n={display:"flex",flexWrap:"wrap","&>div":{mr:"8px"}},l={position:"absolute",left:"-1px",height:"100%",cursor:"pointer",width:"58px",display:"flex",alignItems:"center",justifyContent:"flex-start",zIndex:10},s={position:"absolute",cursor:"pointer",width:"58px",right:"-1px",height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end",zIndex:10}},"/1uR":(e,t,r)=>{"use strict";r.d(t,{s:()=>l});var a=r("/SIk"),i=r("RCKr"),o=r("klBV"),n=r("SJeZ");const l=e=>{const[t]=(0,o.z4)(),r=!(0,n.G3)(),{value:l,loading:s}=(0,i.N)((()=>async function(e){try{const{serverTime:t}=await(0,o.bp)(e);return t}catch(t){return Date.now()}}(r)),[t]);return(0,a.useMemo)((()=>e?{value:(e-l)/1e3/3600,loading:s}:{value:0,loading:!1}),[e,l,s])}},"nJ+u":(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r("/SIk"),i=r("z/Z1");const o=({lastPrice:e})=>{const t=(0,i.Fg)(),r=(0,a.useRef)(0),{current:o}=r;r.current=e;return(0,a.useMemo)((()=>o===e?t.colors.t.primary:o<e?t.colors.t.buy:t.colors.t.sell),[e,o,t.colors.t.buy,t.colors.t.sell,t.colors.t.primary])}},"6cKY":(e,t,r)=>{"use strict";r.d(t,{L8:()=>k});var a=r("VM/Z"),i=r("klBV"),o=(r("+ByA"),r("nJ+u")),n=r("GA2I"),l=r("tjpQ"),s=r("rdEq"),c=r("TeNm"),u=r("1U9V"),d=r("mE5e"),m=r("z/Z1"),p=r("0RPJ"),f=r("/SIk"),g=r.n(f),y=r("ca2E"),b=r("SJeZ"),h=g().createElement;const v=({type:e})=>{var t;const r=(0,n.X)(e),{tickProps:l}=(0,c.k)((0,a.l6)(r)),{lastPrice:s=0,tickSize:u=1e-7,highPrice:d,lowPrice:g,volume:y,quoteVolume:h,diffPrice:v,difference:x,bigThan:k}=l,[S,[P,T]]=(0,i.z4)(),C=(0,m.Fg)(),M=(0,i.j2)(),Z=(0,o.Z)({lastPrice:s}),w=(0,i.U1)(u),{markPrice:I,lastFundingRate:E,nextFundingTime:N}=(0,b.CE)()[S]||{},A=null===(t=(0,b.m8)()[S])||void 0===t?void 0:t.indexPrice,{formatTk:R}=(0,i.mC)(),O=(0,f.useMemo)((()=>(0,p.uf)(s,w)),[s,w]),L=isNaN(x)?"0.00":x;return{symbol:S,volume:y,quoteVolume:h,info:M,priceColor:Z,currentPrice:O,change:(0,f.useMemo)((()=>[(0,p.uf)(v||0,w),`${L}%`].join(" ")),[v,L,w]),changeColor:(0,f.useMemo)((()=>k?C.colors.t.buy:C.colors.t.sell),[k,C.colors.t.buy,C.colors.t.sell]),baseAsset:P,nextFundingTime:N,quoteAsset:T,low:(0,f.useMemo)((()=>(0,p.uf)(g,w)),[g,w]),high:(0,f.useMemo)((()=>(0,p.uf)(d,w)),[d,w]),fundingFee:(0,f.useMemo)((()=>(0,n.Y)(E)),[E]),index:(0,f.useMemo)((()=>R(A)),[R,A]),mark:(0,f.useMemo)((()=>R(I)),[R,I])}},x=()=>{var e;const[t]=(0,i.z4)(),{getI18n:r}=(0,b.yk)(),a=null===(e=(0,b.m8)()[t])||void 0===e?void 0:e.indexPrice,{formatTk:o}=(0,i.mC)(),n=(0,f.useMemo)((()=>o(a)),[o,a]);return h(s.m,{tip:r("header-mark-markPriceTip",{indexPrice:n,defaultValue:"Latest mark price for this contract. To prevent price manipulation, the mark price is used for unrealized PNL and margin calculations, and may differ from the last price. \n Mark Price is calculated based on the index price. The Price Index is a bucket of prices from the major Spot market exchanges, weighted by their relative volume. The latest index price is {{indexPrice}}."}).replaceAll("\\n","\n")},r("header-mark",{defaultValue:"mark"}))},k=({type:e})=>{const{symbol:t,volume:r,quoteVolume:o,info:n,priceColor:c,currentPrice:m,change:g,changeColor:k,baseAsset:S,nextFundingTime:P,quoteAsset:T,low:C,high:M,fundingFee:Z,index:w,mark:I}=v({type:e}),E=(0,b.G3)(),N=(0,b.oD)(),{isCoinUnit:A}=(0,y.QV)(),{getI18n:R,i18n:{language:O}}=(0,b.yk)(),{getI18n:L}=(0,i.ZK)("trd-ticker",""),{quantityPrecision:V,equalQtyPrecision:F,contractVal:D,baseVolume:_}=n,B=(0,f.useMemo)((()=>{const e=A?o||_:r,t=A?F:V;return E?(0,p.uf)(e,t||0):(0,d.kI)(r,{digits:V||2,isUnit:!1})}),[E,V,o,_,r,A,F]),z=(0,f.useMemo)((()=>{const e=Number(D)*Number(r);return E?(0,p.uf)(e):(0,d.kI)(o,{digits:2,isUnit:!1})}),[E,o,D,r]),K=(0,f.useMemo)((()=>[{label:h(x,null),key:"mark"},{label:h(l.C,{symbol:t}),key:"index"},{label:h(s.m,{learnMoreLink:(0,u.CN)(a.Wh.FUNDING,{locale:O}),tip:R("header-mark-fundingTip")},R("header-funding",{defaultValue:"Funding/8h"})),timeKey:"nextFundingTime",timeTips:R("header-mark-countdownTimeTip"),key:"fundingFee"},{label:L("change",{defaultValue:"24h Change"}),key:"change",render:(e,t)=>h("span",{style:{color:t.changeColor}},e)},{label:L("high",{defaultValue:"24h High"}),key:"high"},{label:L("low",{defaultValue:"24h Low"}),key:"low"},{label:`${L("volume")}(${!E||A?S:R("Cont")})`,key:"volume"},{label:`${L("transaction")}(${T})`,key:"transaction"}]),[t,E,A,S,T,R,L,O]);return{list:(0,f.useMemo)((()=>N?K.filter((e=>"fundingFee"!==e.key)):K),[N,K]),dataSource:{symbol:t,volume:B,quoteVolume:o,info:n,priceColor:c,currentPrice:m,change:g,changeColor:k,baseAsset:S,nextFundingTime:P,quoteAsset:T,low:C,high:M,fundingFee:Z,index:w,mark:I,transaction:z}}}},GA2I:(e,t,r)=>{"use strict";r.d(t,{X:()=>i,Y:()=>o});var a=r("0RPJ");const i=e=>{let t=!1;return"futures"===e&&(t=!0),t},o=e=>e||0===e?`${(0,a.uf)(100*e,4)}%`:null},UdzU:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var a=r("5vwO"),i=r("wgY5"),o=r.n(i),n=r("/SIk"),l=r.n(n),s=r("ka4r"),c=r("wGPX"),u=r("/0Tg"),d=r("/yzf"),m=r("w7Tp"),p=r("XVzo"),f=r("Ozh7"),g=r("JPFK"),y=r("OhB/"),b=r("KsIl"),h=r("klBV"),v=r("SJeZ"),x=l().createElement;const k=o()().add(1,"day"),S=o()().subtract(2,"year"),P={alignItems:"center",justifyContent:"center",color:"t.third",cursor:"pointer",fontSize:0,minWidth:"48px",p:"minor",borderRadius:"2px",height:"24px",lineHeight:"24px","&:hover":{color:"t.primary",bg:"bg3"}},T={bg:"line",color:"t.yellow"},C=({withReset:e=!1,type:t,onSearch:r,loadMore:i=(()=>{}),onReset:o=(()=>{}),children:l=null})=>{const C=(0,b.hf)(),{getI18n:M}=(0,h.ZK)("trd-tableSearch",Z);var Z;const{getI18n:w}=(0,v.yk)(),{isMobile:I,isIPad:E}=(0,h.Fs)(),{0:N,1:A}=(0,n.useState)((0,y.OQ)(t)),R={"1d":M("day",{defaultValue:"1 Day"}),"1w":M("week",{defaultValue:"1 Week"}),"1m":M("month",{defaultValue:"1 Month"}),"3m":M("quarter",{defaultValue:"3 Months"})},O=Object.keys(R).map((e=>{const a=e===t,i={onClick:a?()=>!1:()=>{const t=(0,y.OQ)(e);r(t),A(t)},sx:a?T:{},children:R[e]};return x(s.Z,Object.assign({key:e,__css:P},i))})),L=R[t];return x(s.Z,{sx:{alignItems:"center"}},x(c.ZP,{enablePortal:!0,trigger:"click",overlay:x(u.Z,{sx:{bg:"popupBg",p:0,borderRadius:0},"data-testid":"QuickDateFilter"},O),placement:"bottom-start"},!I&&E&&x(s.Z,{__css:(0,a.Z)((0,a.Z)({},P),{},{mr:"minor",color:"t.primary",bg:"bg3"})},x(d.Z,null,L||R["1d"]),x(f.Z,{sx:{transform:"scale(1.8)"},size:12}))),!I&&!E&&x(s.Z,{sx:{alignItems:"center",display:"flex","> div":{mr:"minor"}}},O),x(s.Z,{sx:{alignItems:"center",ml:"sm",".ant-input":{fontSize:0,pb:"minor",color:"t.third",lineHeight:"14px",borderBottom:"1px solid",borderBottomColor:"lines.light"}}},x(m.Z,{fontSize:"12px",color:"t.third",mr:"8px"},w("range-date",{defaultValue:"Date"})),x(g.Z,{locale:null===C||void 0===C?void 0:C.toLowerCase(),variant:"phantom",sz:"tiny",containerSx:{color:"t.primary",minWidth:"auto"},separator:w("range-to",{defaultValue:"to"}),"data-testid":"DateFilter",disabledDate:e=>e>k||e<S,onChange:(e,[t,r])=>{const a=new Date(t).setHours(0,0,0,0),i=new Date(r).setHours(24,0,0,0);A({startTime:a,endTime:i,type:"custom"})}}),x(s.Z,null,l),x(p.Z,{variant:"default",colorStyle:"secondary",sz:"s",ml:["sm","8px","sm"],bg:"line","data-testid":"Search",onClick:()=>{N&&(r((0,a.Z)({},N)),i())}},M("searchBtn",{defaultValue:"Search"}))),e&&x(p.Z,{variant:"default",colorStyle:"secondary",sz:"s",ml:["sm","8px","sm"],bg:"line",onClick:()=>{A(null),o()}},M("resetBtn",{defaultValue:"Reset"})))},M=l().memo(C)},zMc9:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var a=r("5vwO"),i=r("BQ33"),o=r.n(i),n=r("/SIk"),l=r.n(n),s=r("O94r"),c=r.n(s),u=r("KsIl"),d=r("m8wC"),m=r("w7Tp"),p=r("ka4r"),f=r("wGPX"),g=r("/yzf"),y=r("Oci4"),b=r("XVzo"),h=r("JPFK"),v=r("ydHf"),x=r("RkbI"),k=r("4OuY"),S=r("SJeZ"),P=r("klBV"),T=r("LvN6"),C=l().createElement;const M={px:"16px",width:"100vw",height:"100vh",borderRadius:"4px 4px 0 0",".header":{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",height:"52px",mb:"20px",".header-title":{fontSize:"20px",lineHeight:"28px",color:"t.primary"}},".column":{mb:"32px"},".column-title":{color:"t.secondary",fontSize:"14px",lineHeight:"20px",mb:"4px"},".range-picker > div":{"> div > div":{p:"14px 12px",fontSize:"14px",bg:"inputBg",color:"t.primary"},"> p":{color:"t.primary"}},".footer":{position:"absolute",bottom:"50px",height:"40px",display:"flex",justifyContent:"space-between",left:"16px",right:"16px",button:{minWidth:"168px"}}},Z={bg:"popupBg",px:"16px",fontSize:"16px",lineHeight:"24px",".header":{display:"flex",justifyContent:"space-between",alignItems:"center",height:"52px",color:"t.primary"},".items":{display:"flex",justifyContent:"space-between",alignItems:"center",height:"48px",color:"t.primary","&.active":{color:"t.yellow"}}},w={mb:"32px",".drop-down":{width:"100%",height:"48px",bg:"inputBg",color:"t.primary",alignItems:"center",justifyContent:"space-between",flexDirection:"row",px:"12px",border:"1px solid",borderColor:"line"}},I=({title:e,data:t,visible:r,activeKey:a,setVisible:i,onChange:o})=>C(d.Z,{childProps:{maxHeight:"50vh"},visible:r,direction:"bottom",outerClick:()=>i(!1),maskBg:"rgba(0,0,0,.3)"},C(m.Z,{sx:Z},C(p.Z,{justifyContent:"space-between",alignItems:"center"},C("div",{className:"header"},e),C(v.Z,{size:20,onClick:()=>i(!1)})),Object.keys(t).map((e=>C("div",{key:e,className:c()({items:!0,active:e===a}),onClick:()=>o(e)},t[e]))))),E=({title:e,data:t,defaultKey:r,onChange:a})=>{const{0:i,1:o}=(0,n.useState)(!1),{0:l,1:s}=(0,n.useState)(r),c=(0,n.useCallback)((e=>{s(e),a(e)}),[s,onchange]);return C(m.Z,{sx:w},C(f.ZP,{trigger:"click",overlay:C(I,{visible:i,setVisible:o,title:e,data:t,activeKey:l,onChange:c}),enablePortal:!0,onVisibleChange:o,sx:{width:"100%"}},C(p.Z,{className:"drop-down"},C(g.Z,{variant:"subtitle2"},t[l]),C(x.Z,{color:"t.third",size:16,sx:{transformOrigin:"center center",transform:`rotate(${i?"180deg":"0deg"})`,transition:"transform .3s"}}))))},N=[o()().subtract(2,"year").format("YYYY-MM-DD"),o()().format("YYYY-MM-DD")],A=({onSearch:e,isTransaction:t,onTransactionFilterChange:r})=>{const{0:i,1:s}=(0,n.useState)(!1),c=(0,n.useCallback)((()=>s((e=>!e))),[s]),d=(0,u.hf)(),{getI18n:f}=(0,P.ZK)(),{getI18n:g}=(0,S.yk)(),x=(0,n.useRef)({startTime:new Date(o()().subtract(1,t?"day":"week").format("YYYY-MM-DD")).setHours(0,0,0,0),endTime:Date.now()}),Z=(0,n.useCallback)((()=>{const{startTime:t,endTime:a,filter:i}=x.current;null===r||void 0===r||r(i),e({type:"custom",startTime:t,endTime:a}),s(!1)}),[e,s]),w=(0,n.useMemo)((()=>[e=>{x.current.startTime=new Date(e).setHours(0,0,0,0)},e=>{x.current.endTime=new Date(e).setHours(24,0,0,0)}]),[]);return C(l().Fragment,null,C(k.Z,{size:20,onClick:c,sx:{position:"absolute",right:"0",top:"15px"}}),i&&C(y.Z,{visible:!0,sx:M,onMaskClick:()=>s(!1)},C(p.Z,{className:"header"},C("div",{className:"header-title"},g("Filter")),C(v.Z,{size:20,onClick:()=>s(!1)})),C("div",{className:"column"},C("div",{className:"column-title"},g("range-date")),C(m.Z,{className:"range-picker"},C(h.Z,{isResponsive:!0,format:"YYYY-MM-DD",locale:null===d||void 0===d?void 0:d.toLowerCase(),allowClear:!1,separator:"-",mOnChange:w,mValue:[o()(x.current.startTime).format("YYYY-MM-DD"),o()(x.current.endTime).format("YYYY-MM-DD")],mStartDateRange:N,mEndDateRange:N}))),t&&C("div",{className:"column"},C("div",{className:"column-title"},f("trd-openOrder-type")),C(E,{title:f("trd-openOrder-type"),data:T.Wm.reduce(((e,t)=>(0,a.Z)((0,a.Z)({},e),{},{[t]:"ALL"===t?f("trd-tradeTransaction-ALL",{defaultValue:"All"}):f(`trd-tradeTransaction-bt-${t}`,{defaultValue:t})})),{}),defaultKey:x.current.filter||"ALL",onChange:e=>x.current.filter=e})),C(p.Z,{className:"footer"},C(b.Z,{variant:"default",colorStyle:"secondary",onClick:()=>s(!1)},g("cancelBtnText")),C(b.Z,{variant:"primary",onClick:Z},f("trd-tableSearch-searchBtn")))))}},ofts:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R,l:()=>N});var a=r("/SIk"),i=r.n(a),o=r("/yzf"),n=r("xfzF"),l=r("Wt2Q"),s=r("Jj8e"),c=r("EaXC"),u=r("GyCk"),d=r("Uqe+"),m=r("klBV"),p=r("SJeZ"),f=r("pBBP"),g=r("VM/Z"),y=r("XVzo"),b=r("ka4r"),h=r("Ic3k"),v=r("3aob"),x=r("S24M"),k=i().createElement;const S=({isQuiz:e,openModal:t,closeModal:r,track:i})=>{const{t:n,getI18n:l}=(0,p.yk)();let s=null;const c=(0,a.useCallback)((e=>{r(),(0,v.F)(!0,{type:e,afterClose:t}),i(e===g.g3?"newbieTour_tutorial":"newbieTour_test")}),[r,t,i]),u=(0,a.useCallback)((()=>{r(),i("newbieTour_trading")}),[r,i]),d=(0,a.useCallback)((()=>{c(g.Nz),(0,x.j)("$WebClick",{eventName:"futures_quiz",$element_id:"start_quiz",source:"welcome_tutorial_popup"})}),[c]);return e?s=k(y.Z,{sz:"l",onClick:u},l("StartTrading",{defaultValue:"Start Trading"})):!1===e&&(s=k(y.Z,{sz:"l",onClick:d},l("TakeQuiz",{defaultValue:"Take Quiz"}))),k(b.Z,{className:"modal-footer"},k(b.Z,{className:"tutorial",onClick:()=>c(g.g3)},k(h.Z,null),k(o.Z,{variant:"subtitle2",ml:"6px"},n("futures-quiz-tutorial"))),s)},P=i().memo(S);var T=i().createElement;const C=(e,t,r,a="png")=>`static/images/futures/assets/guide_${t}_${r?"light":"dark"}_${"zh-CN"===e?"cn":"en"}.${a}`,M=(e,t,r,a="png")=>`static/images/futures/assets/guide-${t}-${r?"light":"dark"}-${"zh-CN"===e?"cn":"en"}.${a}`,Z={minWidth:["100%",640,720],maxWidth:["100%",640,720]},w={height:["100%","500px"],py:18,px:24,bg:"modalBg",borderRadius:"6px","& .main-container":{height:["100%","auto"],display:"flex",flexDirection:"column"},"& .content-wrapper":{display:"flex",flex:1,minHeight:0},"& .overflow-container":{display:"flex",flexDirection:"column",flex:1},"& .modal-footer":{justifyContent:"space-between",alignItems:"center","& .tutorial":{alignItems:"center",color:"t.third",cursor:"pointer",":hover":{color:"t.primary"}}}};var I=i().createElement;let E;const N=({title:e="",showFooter:t=!0,afterClose:r=(()=>{})}={})=>{c.Y.emit(g.ik,{visible:!0,title:e,showFooter:t,afterClose:r})},A=()=>{const{i18n:{language:e},getI18n:t}=(0,p.yk)(),{isLight:r}=(0,m.Fg)(),{isLoggedIn:i}=(0,u.f0)(),{isExistFutureAccount:y}=(0,u.Pc)(),{trackWebClick:b}=(0,f.v)(),h=(0,a.useMemo)((()=>((e,t,r)=>[{title:t("TransferMargin",{defaultValue:"Transfer Margin"}),desc:{i18nKey:"TransferMarginDesc",defaultValue:"<transferFundsLink>Transfer Funds</transferFundsLink> to Futures account as margin for your futures trades to begin with. Transfer Funds to Future account as margin for your futures trades to begin with. We support\xa0USD\u24c8-M Futures trading across multiple margin assets",components:{transferFundsLink:T("a",{href:`/${e}/support/faq/360033773532`,target:"_blank",rel:"noreferrer"})},values:{transferFunds:t("TransferFunds",{defaultValue:"Transfer Funds"})}},imgPath:M(e,"transfermargin",r)},{title:t("LeverageMargin",{defaultValue:"Leverage & Margin"}),desc:{i18nKey:"LeverageMarginDesc",defaultValue:"You can adjust <leverageLink>Leverage</leverageLink> and switch between cross/isolated <marginModeLink>Margin Mode</marginModeLink> for different symbols.",components:{leverageLink:T("a",{href:`/${e}/support/faq/360034946672`,target:"_blank",rel:"noreferrer"}),marginModeLink:T("a",{href:`/${e}/support/faq/360038075852`,target:"_blank",rel:"noreferrer"})}},imgPath:C(e,"leveragemargin",r)},{title:t("position-mode"),desc:{i18nKey:"PositionModeDesc",defaultValue:"Set One-way or Hedge <positionModeLink>Position Mode</positionModeLink> in Preference.",components:{positionModeLink:T("a",{href:`/${e}/support/faq/360041513552`,target:"_blank",rel:"noreferrer"})}},imgPath:C(e,"positionmode",r,"gif")},{title:t("tradeHistory-orderTypeTitle"),desc:{i18nKey:"OrderTypeDesc",defaultValue:"Choose an <orderTypeLink>Order Type</orderTypeLink> that best suits your trading strategy under different situations.",components:{orderTypeLink:T("a",{href:`/${e}/support/faq/360033779452`,target:"_blank",rel:"noreferrer"})}},imgPath:C(e,"ordertype",r)},{title:t("ClosePosition",{defaultValue:"Close position"}),desc:{i18nKey:"ClosePositionDesc",defaultValue:"<closeThePositionLink>Close the Position</closeThePositionLink> based on your exit strategy, or by setting <TPAndSLLink>TP/SL</TPAndSLLink>. Also learn more about <liqLink>Liquidation</liqLink> / <counterpartyLiqLink>Counterparty Liquidation</counterpartyLiqLink>.",components:{closeThePositionLink:T("a",{href:`/${e}/support/articles/360041515312-How-to-Open-or-Close-Position-in-Hedge-Mode`,target:"_blank",rel:"noreferrer"}),TPAndSLLink:T("a",{href:`/${e}/support/faq/e1ee1738141c49718550fa9061be4bf3`,target:"_blank",rel:"noreferrer"}),liqLink:T("a",{href:`/${e}/support/faq/360033525271`,target:"_blank",rel:"noreferrer"}),counterpartyLiqLink:T("a",{href:`/${e}/support/faq/360033525471`,target:"_blank",rel:"noreferrer"})}},imgPath:C(e,"closeposition",r)}])(e,t,r)),[e,t,r]),[v,x]=(0,d.Z)(g.Gs),{0:k,1:S}=(0,a.useState)(),{0:A,1:R}=(0,a.useState)(!1),{0:O,1:L}=(0,a.useState)({title:"",showFooter:!0}),{title:V,showFooter:F}=O,D=!V,_=!1===k,B=(0,a.useCallback)((()=>{R(!1)}),[]),z=(0,a.useCallback)((e=>{D&&b({module:"futures_newbieTour",elementId:e})}),[D,b]),K=(0,a.useCallback)((()=>{B(),"function"===typeof E&&E(),z("newbieTour_close")}),[B,z]),q=(0,a.useCallback)((e=>{b({module:D?"futures_newbieTour":"futures_helpCenter_tradeTour",elementId:`${D?"newbieTour":"tradeTour"}_step${e}`})}),[D,b]);return(0,a.useEffect)((()=>c.Y.on(g.ik,(({visible:e,afterClose:t,title:r,showFooter:a})=>{R(e),r&&L({title:r,showFooter:a}),E=t}))),[]),(0,a.useEffect)((()=>{i&&y&&!1===k&&!v&&(R(!0),x(!0))}),[i,y,k,v,x]),(0,a.useEffect)((()=>{i&&y&&(0,s.o)().then((({data:e})=>{S(e)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[i,y]),(0,f.E)(A,D?"futures_newbieTour":"futures_helpCenter_tradeTour"),I(n.Z,{open:A,onCloseIconClick:K,sx:Z,contentSx:w},I("div",{className:"main-container"},I(o.Z,{variant:"headline6",color:"t.primary"},V||t("Welcome",{defaultValue:"Welcome to Binance Futures!"})),_&&I(o.Z,{variant:"body2",color:"t.third",mt:"minor"},t("QuizTip",{defaultValue:"You need to pass the quiz before trading Futures."})),I("div",{className:"content-wrapper"},I("div",{className:"overflow-container"},I(l.Z,{steps:h,staticHost:g.Xs,track:q,sx:{height:_?302:324}}))),F&&I(P,{isQuiz:k,track:z,openModal:N,closeModal:B})))},R=i().memo(A)},CWkv:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("/SIk"),i=r.n(a),o=r("Gqy6");const n={};var l=i().createElement;const s=({type:e,condition:t,children:r})=>{const{ref:s}=function(e,t){const r=(0,a.useRef)(null);return(0,a.useEffect)((()=>{const a=r.current;if(n[e]||!a||"undefined"===typeof performance||"undefined"===typeof MutationObserver)return;const i=new MutationObserver(((r,a)=>{const i=t(r,a);!n[e]&&i&&((0,o.gp)({t:e,duration:performance.now()}),a.disconnect(),n[e]=!0)}));return i.observe(a,{attributes:!0,subtree:!0,childList:!0}),()=>null===i||void 0===i?void 0:i.disconnect()}),[r,t,e]),{ref:r}}(e,t);return l(i().Fragment,null,i().Children.map(r,(e=>i().cloneElement(e,{ref:s}))))}},LhSs:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("w7Tp"),s=r("/yzf"),c=r("C5+Z"),u=r("XDgS"),d=r("57js"),m=r("/MJE"),p=r("VM/Z"),f=r("S24M"),g=r("klBV");const y={display:"flex",position:["absolute","relative","relative"],flex:"0 0 auto",minWidth:"100px",borderLeft:"1px solid",borderColor:"newLine",alignItems:"center",bg:"moduleBg",color:"t.secondary",px:"16px",borderTop:"1px solid",borderTopColor:"primary",cursor:"pointer",">svg":{mx:"5px"},".title":{fontSize:"12px",lineHeight:"16px",p:"0 3px"},":hover":{".title":{color:"primary"},">svg path":{fill:"primary"}}};(0,a.Z)((0,a.Z)({},y),{},{borderTop:"none"});var b=o().createElement;function h(){const{enqueueNotification:e}=(0,u.Z)(),{isMobile:t,isIPad:r}=(0,g.Fs)(),o=(0,n.useDispatch)(),h=(0,g.Pc)(),v=(0,g._n)(),x=(0,g.Fg)().isLight,{getI18n:k}=(0,g.ZK)("","chatroom-mp-ui"),{0:S,1:P}=(0,i.useState)(!1),T=(0,i.useMemo)((()=>!t&&!r),[r,t]),C=(0,i.useCallback)((()=>{T?(P(!S),S||(0,f.j)("PopupView",{title:"chat",eventName:"chatroom_web_pv",useGrafana:!1})):e({message:k("entrance-app-hint"),variant:"error"})}),[e,k,T,S]),M=(0,i.useCallback)((async()=>{m.Z.updateUserInfo((0,a.Z)((0,a.Z)({},h),{},{isExistFutureAccount:!0})),o.userCenter.updateState({userInfo:(0,a.Z)((0,a.Z)({},h),{},{isExistFutureAccount:!0})}),await o.preference.getPositionMode()}),[o.preference,o.userCenter,h]),Z=(0,i.useMemo)((()=>b(l.Z,{sx:y,onClick:C,id:"Chatroom_entrance"},b(c.Z,{size:16,fill:"t.secondary"}),b(s.Z,{className:"title"},k("ChatRoom")))),[k,C]);return b(d.E,{isLoggedIn:v,visible:S,onClose:C,isLightTheme:x,userInfo:h,STATIC_HOST:p.Xs,WS_HOST:p.Vl,onOpenFuturesAccount:M},Z)}const v=o().memo(h)},it8U:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r("/SIk"),i=r.n(a),o=r("EWW5"),n=r("xxGv"),l=r("VM/Z"),s=i().createElement;const c=function({sx:e={},chatroomVisible:t=!1}){const{isLight:r}=(0,n.Fg)(),a=i().useMemo((()=>({STATIC_HOST:l.Xs,API_HOST:l.H,WS_HOST:l.B_,CHAT_WS_HOST:l.Vl,DELIVERY_WS_HOST:l.hX,FUTURES_WS_HOST_GZIP:l.dr,MARGIN_STREAM_HOST:l.yH})),[]);return s(o.y,{ctxValue:a,isLightTheme:r,sx:e,chatroomVisible:t})}},LTcb:(e,t,r)=>{"use strict";r.d(t,{GK:()=>Z,ZP:()=>E,Rk:()=>P});var a=r("/SIk"),i=r.n(a),o=r("ka4r"),n=r("/yzf"),l=i().createElement;const s={pl:0,px:["0","sm"],py:"8px",width:"100%",alignItems:"center",justifyContent:"space-between","& .left":{textAlign:"left",justifyContent:"flex-start"},"& .right":{textAlign:"right",justifyContent:"flex-end"},"> div":{textAlign:"center",alignItems:"center",justifyContent:"center"}},c=({headers:e})=>l(o.Z,{sx:s},e.map((({text:e,area:t},r)=>l(o.Z,{key:r,className:t,sx:{userSelect:"none",height:"24px",flex:1}},l(n.Z,{title:e,variant:"layouts.ellipsis",sx:{fontSize:0,color:"t.third"}},e))))),u=i().memo(c);var d=r("sZZk"),m=r("k1bI"),p=r("z+x3"),f=i().createElement;const g=Math.floor((p.FA-44-31)/20),y={cursor:"pointer",fontSize:0,fontWeight:"normal",".trade-list-item":{padding:"0 12px 0 16px","& .left":{textAlign:"left",justifyContent:"flex-start"},"& .right":{textAlign:"right",justifyContent:"flex-end",color:"t.grey300"},"&-buy .price":{color:"buy"},"&-sell .price":{color:"sell"},"& .text":{color:"orderBook.rowColor"},"& .time":{color:"t.grey300"}}},b=({trades:e,loading:t,tradeItem:r,itemHeight:i=18})=>{const o=(0,d.useMediaQuery)({query:p.is}),n=(0,a.useMemo)((()=>o?e.reverse().slice(0,g):e.reverse()),[e,o]);return f(m.a,{sx:y,dataSource:n,loading:t,itemElement:r,itemHeight:i})},h=i().memo(b),v=({price:e})=>{console.info(e)},x=e=>`${e}`,k=(0,a.createContext)({formatTk:x,formatMi:x,onItemClick:v});var S=r("klBV");const P=()=>(0,S.ZK)("trd-trades");var T=r("HDtI"),C=i().createElement;const M=({price:e,buyerIsMaker:t,quantity:r,tradeTime:i,formatPrice:o=!0,formatQty:n=!0,formatDate:l=!0})=>{const{formatMi:s,formatTk:c,onItemClick:u}=(0,a.useContext)(k),d=t?"sell":"buy";return C(m.H,{className:`trade-list-item trade-list-item-${d}`,onClick:()=>{u({price:e,side:d})}},C("div",{className:"price left",style:{flex:1}},o?c(e):e),C("div",{className:"text right",style:{flex:1}},n?s(r):r),C("div",{className:"text right",style:{flex:1}},l?(0,T.v)(new Date(i),"hh:mm:ss"):i))},Z=i().memo(M);var w=i().createElement;const I=({headers:e,trades:t,loading:r,tradeItem:a,itemHeight:o,formatMi:n,formatTk:l,onItemClick:s=v})=>w(i().Fragment,null,w(u,{headers:e}),w(k.Provider,{value:{formatMi:n,formatTk:l,onItemClick:s}},w(h,{trades:t,loading:r,tradeItem:a,itemHeight:o}))),E=i().memo(I)},Dvpw:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("PcQm"),l=o().createElement;const s=e=>{let{onRemove:t}=e,r=(0,a.Z)(e,["onRemove"]);return l(n.Z,Object.assign({onClick:t,className:"trading-page-close-button",size:16,sx:{cursor:"pointer",position:"absolute",color:"icons.close",top:0,right:0,zIndex:1,"&:hover":{color:"t.third"}}},r))}},xpNn:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I,O:()=>Z});var a=r("/SIk"),i=r.n(a),o=r("Oci4"),n=r("/yzf"),l=r("w7Tp"),s=r("XVzo"),c=r("ydHf"),u=r("EaXC"),d=r("VM/Z"),m=r("W2gp"),p=r("mE5e"),f=r("klBV"),g=r("SJeZ"),y=r("GpFh"),b=r("ka4r"),h=r("rdEq"),v=i().createElement;const x=e=>{let{label:t,tip:r,value:a,hasTip:i=!0}=e,o=(0,y.Z)(e,["label","tip","value","hasTip"]);return v(b.Z,Object.assign({className:"rules"},o),i?v(h.m,{tip:r},t):v(n.Z,{className:"label"},t),a)},k=i().memo(x),S={position:"relative",px:"24px",width:["100%","488px"],height:["100%","unset"],bg:"modalBg",borderRadius:"6px",boxShadow:"elevation3",".title":{py:"20px",color:"t.primary"},".content":{pt:"14px",pb:"30px"},".rules":{alignItems:"center",justifyContent:"space-between",fontSize:1,pb:"ls",color:"t.primary"},".label":{color:"t.third"},".viewMore":{fontSize:1,px:"2px",py:"4px"}};var P=r("uH0D"),T=i().createElement;let C;const M="%",Z=({afterClose:e}={})=>{u.Y.emit(d.Dg,{visible:!0,afterClose:e})},w=()=>{const e=(0,f.tZ)(),{getI18n:t}=(0,g.yk)(),r=(0,f.gm)(),i=(0,g.G3)(),{shortName:y}=(0,g.oO)(),{baseAsset:b,quoteAsset:h,filters:v=[],liquidationFee:x=0,contractVal:Z=0,triggerProtect:w=0,maxMoveOrderLimit:I=0}=(0,f.j2)()||{},E=(0,m.FB)(v,"filterType"),N=((e,t,r,a)=>{const i=[{labelKey:"minimumTradeAmount",defaultLabel:"Minimum Trade Amount",filterType:"LOT_SIZE",field:"minQty",tipKey:"minimumTradeAmountTip",defaultTip:"The minimum Limit Order amount for the contract.",unit:e},{labelKey:"minPriceMovement",defaultLabel:"Min Price Movement",filterType:"PRICE_FILTER",field:"tickSize",tipKey:"minPriceMovementTip",defaultTip:"The minimum change in the unit price of the contract.",unit:t},{labelKey:"orderPriceCapRatio",defaultLabel:"Order Price Cap Ratio",filterType:"PERCENT_PRICE",field:"multiplierUp",tipKey:"orderPriceCapRatioTip",defaultTip:"The upper limit ratio of the order price to current Mark Price of the contract.",unit:r,shouldFormat:!0},{labelKey:"orderPriceFloorRatio",defaultLabel:"Order Price Floor Ratio",filterType:"PERCENT_PRICE",field:"multiplierDown",tipKey:"orderPriceFloorRatioTip",defaultTip:"The lower limit ratio of the order price to current Mark Price of the contract.",unit:r,shouldFormat:!0},{labelKey:"maximumMarketOrderAmount",defaultLabel:"Maximum Market Order Amount",filterType:"MARKET_LOT_SIZE",field:"maxQty",tipKey:"maximumMarketOrderAmountTip",defaultTip:"The minimum Market Order amount for the contract.",unit:e},{labelKey:"maximumOpenOrderAmount",defaultLabel:"Maximum Open Order Amount",filterType:"MAX_NUM_ORDERS",field:"limit",tipKey:"maximumOpenOrderAmountTip",defaultTip:"The maxium Open Orders for the contract."}];return a||i.push({labelKey:"minNotional",defaultLabel:"Min. Notional Value",filterType:"MIN_NOTIONAL",field:"notional",tipKey:"minNotionalTip",defaultTip:"The minimum notional value for the contract order.",unit:t}),i})(i?t("Cont",{defaultValue:"Cont"}):b,h,M,i),{0:A,1:R}=(0,a.useState)(!1),O=(0,a.useCallback)((()=>{R(!1),"function"===typeof C&&C()}),[]);return(0,a.useEffect)((()=>u.Y.on(d.Dg,(({visible:e,afterClose:t})=>{R(e),C=t}))),[]),T(o.Z,{visible:A,sx:S},T(n.Z,{variant:"headline6",className:"title"},t("trading-rules",{defaultValue:"Trading Rules"})),T(c.Z,{sx:{position:"absolute",top:"22px",right:"24px",cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},onClick:O}),T(l.Z,{className:"content"},T(k,{hasTip:!1,label:t("symbol",{defaultValue:"Symbol"}),value:y}),N.map((({labelKey:e,defaultLabel:a,filterType:i,field:o,tipKey:n,defaultTip:l,unit:s="",shouldFormat:c=!1})=>{var u;let d=null===E||void 0===E||null===(u=E[i])||void 0===u?void 0:u[o];d=s===M?100*("multiplierUp"===o?d-1:1-d):d;const m=c?(0,p.uf)(d,0):d,f="rtl"===r?`${s} ${m}`:`${m} ${s}`;return T(k,{key:e,label:t(e,{defaultValue:a}),tip:t(n,{defaultValue:l}),value:f})})),i&&T(k,{label:t("contractSize",{defaultValue:"Contract Multiplier"}),tip:t("contractSizeTip"),value:`${Z} ${h}`}),T(k,{label:t("triggerProtect",{defaultValue:"Price Protection Rate"}),tip:t("triggerProtectTip"),value:100*+w+" %"}),T(k,{label:t("liquidationFee",{defaultValue:"Insurance Clearance Fee"}),tip:t("liquidationFeeTip"),value:`${(100*+x).toFixed(2)} %`}),i&&T(k,{label:t("maxAmendAmount",{defaultValue:"Max Amend Amount"}),tip:t("maxAmendAmountTip"),value:(0,p.uf)(I,0)}),T(s.Z,{as:"a",variant:"text",href:(0,P.b)(`/${e}/futures/trading-rules/${i?"quarterly":"perpetual"}`),target:"_blank",className:"viewMore"},t("viewMore",{defaultValue:"View More"}))))},I=i().memo(w)},nS2e:(e,t,r)=>{"use strict";r.d(t,{i:()=>d});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("w7Tp"),l=r("DCFU"),s=r("zZ5f"),c=r("MMVH"),u=o().createElement;const d=e=>{let{className:t,data:r,renderItem:i,hasMore:d,loadMore:m,loading:p=!1,emptyText:f,onClick:g,sx:y}=e,b=(0,a.Z)(e,["className","data","renderItem","hasMore","loadMore","loading","emptyText","onClick","sx"]);const h=null===r||void 0===r?void 0:r.length;return u(n.Z,Object.assign({className:t,onClick:g,sx:y},b),u(s.Z,{fullScreen:!0,inner:!0,show:p}),h?u(o().Fragment,null,r.map(i),d&&m?u(l.Z,{showMore:m,check:{offset:200},loading:p}):null):u(c.p,null,f||null))}},y6Jw:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("w7Tp"),l=r("2HSj"),s=o().createElement;const c=l.BA[400],u=({filled:e})=>{const t=e?c:"transparent";return s(n.Z,{__css:{display:"inline-block",width:"4px",height:"14px",mx:"1px",border:`1px solid ${c}`,bg:t}})},d=e=>{let{adl:t=0,dashed:r=!1}=e,i=(0,a.Z)(e,["adl","dashed"]);return s(n.Z,Object.assign({},i,{sx:{borderBottom:r?`1px dashed ${c}`:"none"}}),Array(t).fill(0).map(((e,t)=>s(u,{key:t,filled:!0}))),Array(4-t).fill(0).map(((e,t)=>s(u,{key:t,filled:!1}))))}},bbFg:(e,t,r)=>{"use strict";r.d(t,{ak:()=>_,ZP:()=>z,s$:()=>F});var a=r("/SIk"),i=r.n(a),o=r("0RPJ"),n=r("ka4r"),l=r("XVzo"),s=r("wGPX"),c=r("XDgS"),u=r("Ai07"),d=r("V9FD"),m=r("U7ms"),p=r("klBV"),f=r("jQmP"),g=r("k4WF"),y=r("SJeZ"),b=r("EPGa"),h=r("shek"),v=r("k/nb"),x=r("Lr13"),k=r("ZaW8"),S=r("w7Tp"),P=r("/yzf"),T=r("U0yl"),C=r("ca2E"),M=r("H3aL"),Z=r("GG68"),w=r("uefD"),I=i().createElement;function E({orders:e=[],symbol:t,handleCancel:r}){const i=(0,p.iB)(),{isDelivery:l}=(0,a.useContext)(v.Z),s=i[t]||{},{marginAsset:c,pricePrecision:u,quantityPrecision:d,equalQtyPrecision:m,contractVal:f}=s,{getI18n:g}=(0,y.yk)(),{getI18n:b}=(0,T.ZK)("trd-openOrder",h);var h;const{isCoinUnit:x}=(0,C.QV)(),{getFormatedQuantity:E}=(0,Z.s7)(s);return e.length?I(S.Z,{sx:w.y_},e.map((e=>I(n.Z,{key:e.orderId,className:"order"},I(P.Z,{sx:{mr:"43px",color:"position.limitOrdersColor"}},l?x?(0,M.unitChangeCoinQty)({quantity:e.origQty,contractVal:f,price:e.price,precision:m}):(0,o.uf)(e.origQty,d):E({quantity:e.origQty,price:e.price,qtyPrecision:d}),"\xa0",l?x?c:g("Cont",{defaultValue:"Cont"}):"","\xa0",g("toBeClosedAt",{defaultValue:"to be closed at"}),"\xa0",(0,o.uf)(e.price,u)),I(k.Z,{className:"order-icon",size:20,onClick:()=>{r(e.orderId)}}))))):null}var N=r("IpC4"),A=r("k2tD"),R=r("ebof"),O=r("NQFm"),L=i().createElement;const V=({sideKey:e,qty:t,isDelivery:r,isCoinUnit:a,isUsdtFuturesUSDTUnit:i,positionSize:n,stepSizePrecision:l,tickSizePrecision:s,equalQtyPrecision:c})=>{const{quantityAmount:u}=(0,R.v_)({sideKey:e}),d=Math.abs(Number(u.replace("-",""))),m=Number(t)/Math.abs(n)*d;let p=l;return r&&a?p=c:!r&&i&&(p=s),(0,o.yd)(m,p,1)},F=e=>{var t,r;const{getI18n:i}=(0,h.Z)(),{getI18n:n}=(0,y.yk)(),{enqueueNotification:l}=(0,c.Z)(),{orderConfirmation:s}=(0,y.F7)(),{isCoinUnit:u}=(0,C.QV)(),{isUSDTUnit:d}=(0,N.Q)(),{actionPlaceOrder:x,actionOrderConfirmModal:k,isDelivery:S}=(0,a.useContext)(v.Z),P=(0,a.useRef)(null),T=(0,y.t2)(e,"symbol"),M=(0,y.t2)(e,"positionSize"),Z=(0,y.t2)(e,"positionSide"),w=(0,y.t2)(e,"initialMarkPrice"),I=(0,y.t2)(e,"selectPrice"),E=(0,p.iB)()[T]||{},{filters:R=[],baseAsset:L,tickSize:V=.01,limitStepSize:F=.001,equalQtyPrecision:D}=E,_=R&&(null===(t=R.find(O.W4))||void 0===t?void 0:t.maxQty),B=R&&(null===(r=R.find(O.vr))||void 0===r?void 0:r.maxQty),z=(0,f.p)(V),{0:K,1:q}=(0,a.useState)(Number(w).toFixed(z)),U=0===Number(K),W=(0,f.p)(F),{0:H,1:$}=(0,a.useState)(!1),j=S?0:W,G=(0,o.yd)(Math.abs(M),j,1),{0:J,1:Y}=(0,a.useState)(G),Q=Number(J)>Math.abs(M),X=S?n("Cont"):L,ee=V,te=(0,A.nH)(j);(0,a.useEffect)((()=>{I&&q(String(I))}),[I]),(0,a.useEffect)((()=>{H||Y(G)}),[H,G]);const re=(0,m.D)((({orderType:t})=>{var r;const a=Number(J);if(null===P||void 0===P||!P.current||!a)return;const i=()=>{const e={symbol:T,type:t,side:M>0?b.g.SELL:b.g.BUY,quantity:a,price:K,positionSide:Z};x(e)},o={orderType:t,limitPrice:K,qty:Number(null===P||void 0===P||null===(r=P.current)||void 0===r?void 0:r.preferredUnitQty),quantity:a};s[t]?k(e,o,i):i()})),ae=(0,m.D)((()=>{if(B&&Number(J)>Number(B))return l({header:i("maxPromptTitle",{defaultValue:"Quantity Failed"}),message:`${i("maxMarketQty",{defaultValue:"Maximum Market Order Quantity"})}: ${B} ${X}`,autoHideDuration:1e4}),"";re({orderType:b.Jm.MARKET})})),ie=(0,m.D)((()=>U?"":_&&Number(J)>Number(_)?(l({header:i("maxPromptTitle",{defaultValue:"Quantity Failed"}),message:`${i("maxLimitQty",{defaultValue:"Maximum Limit Order Quantity"})}: ${_} ${X}`,autoHideDuration:1e4}),""):void re({orderType:b.Jm.LIMIT})));return{symbol:T,initialMarkPrice:w,defaultQty:G,qty:J,qtyError:Q,qtyStep:te,priceError:U,price:K,priceStep:ee,nullRef:P,handlePriceChange:e=>(0,g._p)(e,(e=>q(e)),null,z),handleAmountChange:e=>{(0,g._p)(e,(e=>Y(e)),null,j),$(!0)},handlePercentageClick:e=>{Y((0,o.yd)(e*Math.abs(M),j,1)),$(!0)},onMarketClick:ae,onLimitClick:ie,quantityObj:{sideKey:e,isDelivery:S,isCoinUnit:u,isUsdtFuturesUSDTUnit:d,qty:J,positionSize:M,stepSizePrecision:W,tickSizePrecision:z,equalQtyPrecision:D}}},D=({sideKey:e})=>{const{getI18n:t}=(0,h.Z)(),{getI18n:r}=(0,y.yk)(),{symbol:i,initialMarkPrice:o,defaultQty:c,qty:m,qtyError:f,qtyStep:g,priceError:k,price:S,priceStep:P,nullRef:T,quantityObj:C,handlePriceChange:M,handleAmountChange:Z,handlePercentageClick:I,onMarketClick:N,onLimitClick:A}=F(e),{handleCancel:R,placedOrdersLength:O,placedOrders:V}=(e=>{const t=(0,y.t2)(e,"symbol"),r=(0,y.t2)(e,"positionSize"),i=(0,y.t2)(e,"positionSide"),{preOrders:o}=(0,p.E)(),n=o.filter((e=>e.reduceOnly&&e.type===b.Jm.LIMIT&&e.symbol===t&&e.positionSide===i&&e.side===(r>0?b.g.SELL:b.g.BUY))),l=n.length,{actionCancelOrder:s}=(0,a.useContext)(v.Z);return{handleCancel:e=>{e&&s(e)},placedOrdersLength:l,placedOrders:n}})(e);return L(n.Z,{alignItems:"center",width:"100%",sx:{flexGrow:2}},L(l.Z,{variant:"text",sx:{pl:0,pr:"8px",fontSize:"12px"},onClick:N},t("market",{defaultValue:"Market"})),L(s.ZP,{trigger:"hover",enablePortal:!0,placement:"top",sx:{minWidth:"auto"},overlay:L(E,{orders:V,symbol:i,handleCancel:R})},L(l.Z,{variant:"text",sx:{px:"8px",fontSize:"12px",borderRadius:"0",borderLeft:"1px solid",borderLeftColor:"newLine"},onClick:A},`${t("limit",{defaultValue:"Limit"})}${O>0?`(${O})`:""}`)),L(u.Z,{enablePortal:!0,placement:"top",arrow:!0,tip:L("div",null,k?r("invalid-price",{defaultValue:"Invalid Price"}):t("price",{defaultValue:"Price"}))},L(d.Z,{variant:"filled",boxProps:{sx:w.Do},type:"number",value:S,step:P,error:k,onChange:M,defaultValue:o})),L(s.ZP,{trigger:"click",enablePortal:!0,placement:"bottom-end",sx:{mx:"4px"},overlay:L(x.Z,{sx:{width:"230px"},onChange:I})},L(u.Z,{enablePortal:!0,placement:"top",arrow:!0,tip:L(B,Object.assign({},C,{symbol:i}))},L(d.Z,{variant:"filled",boxProps:{sx:w.Do},value:m,error:f,onChange:Z,defaultValue:c,step:g}))),L(_,Object.assign({ref:T},C)))},_=(0,a.forwardRef)((({sideKey:e,isDelivery:t,isCoinUnit:r,isUsdtFuturesUSDTUnit:i,qty:o,positionSize:n,stepSizePrecision:l,tickSizePrecision:s,equalQtyPrecision:c},u)=>{const d=V({sideKey:e,qty:o,isDelivery:t,isCoinUnit:r,isUsdtFuturesUSDTUnit:i,positionSize:n,stepSizePrecision:l,tickSizePrecision:s,equalQtyPrecision:c});return(0,a.useImperativeHandle)(u,(()=>({preferredUnitQty:d}))),null})),B=({qty:e,symbol:t,positionSize:r,isUsdtFuturesUSDTUnit:a,isCoinUnit:o,isDelivery:n,sideKey:l,stepSizePrecision:s,tickSizePrecision:c,equalQtyPrecision:u})=>{const{getI18n:d,t:m}=(0,y.yk)(),f=Math.abs(r),g=(0,p.iB)()[t]||{},{baseAsset:b,quoteAsset:h}=g,v=n?d("Cont",{defaultValue:"Cont"}):b,x=n?b:h,k=e,S=V({sideKey:l,qty:e,isDelivery:n,isCoinUnit:o,isUsdtFuturesUSDTUnit:a,positionSize:r,stepSizePrecision:s,tickSizePrecision:c,equalQtyPrecision:u});return n&&o||!n&&a?L(i().Fragment,null,L("div",null,m("closePosition-qtyTip-positionSize",{defaultValue:"Position Size: {{positionSize}} {{orderUnit}}",positionSize:f,orderUnit:v})),L("div",null,m("closePosition-qtyTip-unitConversion",{defaultValue:"Qty: {{orderQty}} {{orderUnit}} \u2248 {{preferredUnitQty}} {{preferredUnit}}",orderQty:k,orderUnit:v,preferredUnitQty:S,preferredUnit:x}))):L(i().Fragment,null,m("closePosition-qtyTip-unit",{defaultValue:"Qty: {{orderUnit}}",orderUnit:v}))},z=i().memo(D)},"k/nb":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r("/SIk");const i=(0,a.createContext)({actionAdjustMarginModal:e=>{},actionOrderConfirmModal:(e,t,r)=>{},actionTpslModal:e=>{},actionPlaceOrder:e=>{},actionCancelOrder:e=>{},actionTpslConfirmModal:e=>{},changeSymbol:e=>{},isDelivery:!1,headers:[]})},QUrc:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ie});var a=r("zZ5f"),i=r("DCFU"),o=r("ka4r"),n=r("/SIk"),l=r.n(n),s=r("shek"),c=r("+tqa"),u=r("VDPE"),d=l().createElement;const m=()=>{const{getI18n:e}=(0,s.Z)();return d("div",{className:"action-bar"},d(c.Z,null),d(u.vR,{btnText:e("closePosition")||""}))},p=l().memo(m);var f=r("w7Tp"),g=r("xfzF"),y=r("YDVe"),b=r("tQHD"),h=r("EPGa"),v=r("klBV"),x=r("mE5e"),k=r("XVzo"),S=r("SJeZ"),P=r("k/nb"),T=r("V9FD"),C=r("k4WF"),M=l().createElement;const Z=e=>{const{getI18n:t}=(0,s.Z)(),{qty:r,qtyError:a,defaultQty:i,qtyStep:n,handleAmountChange:l,onConfirm:c,baseAsset:u="BTC",positionSize:d}=e,m=Math.abs(d),p=M(o.Z,{sx:{mr:"6px",color:"t.yellow200"}},M(f.Z,null,u));return M(f.Z,null,M(T.Z,{variant:"outline",value:r,defaultValue:i,step:n,onChange:l,onKeyDown:e=>(0,C.f5)(e,c),onBlur:e=>(0,C.Y5)(e),error:a,placeholder:String(m),prefix:M(f.Z,{sx:{ml:2,color:"t.grey300"}},t("Amount",{defaultValue:"Amount"})),suffix:p,sx:{textAlign:"right"},boxProps:{width:"100%",mt:"8px",borderRadius:"2px"}}))};var w=l().createElement;const I=e=>{const{getI18n:t}=(0,s.Z)(),{isMarket:r,price:a,priceError:i,handlePriceChange:n,initialMarkPrice:l,quoteAsset:c="USDT",priceStep:u}=e,d=r?"":l,m=t("price",{defaultValue:"Price"}),p=w(o.Z,{sx:{mr:1,width:r?"95px":"auto"}},r&&w(o.Z,{flex:1},t("Market",{defaultValue:"Market"})),w(f.Z,null,c));return w(f.Z,null,w(T.Z,{variant:"outline",labelFixed:!0,disabled:r,value:a,step:u,error:i,onChange:n,placeholder:d,defaultValue:l,prefix:w(f.Z,{sx:{ml:2,color:"t.grey300"}},m),suffix:p,sx:{textAlign:"right"},boxProps:{width:"100%",mt:"8px",borderRadius:"2px"}}))};var E=r("Lr13"),N=r("LwXq"),A=r("bbFg"),R=l().createElement;const O=({sideKey:e,panelType:t,onClose:r})=>{var a;const{symbol:i,initialMarkPrice:o,defaultQty:l,qtyError:c,qty:u,qtyStep:d,priceError:m,price:p,priceStep:g,nullRef:y,quantityObj:b,handlePriceChange:T,handleAmountChange:C,handlePercentageClick:M,onMarketClick:w,onLimitClick:O}=(0,A.s$)(e),{getI18n:L}=(0,s.Z)(),{getI18n:V}=(0,S.yk)(),{isDelivery:F}=(0,n.useContext)(P.Z),D=(0,S.t2)(e,"positionSize"),_=(0,S.t2)(e,"entryPrice"),B=(null===(a=(0,v.iB)())||void 0===a?void 0:a[i])||{},{baseAsset:z,quoteAsset:K,contractVal:q}=B,U=t===h.Jm.MARKET,{marketPNL:W,limitPNL:H}=(0,N.F)({symbol:i,quantity:Number(u),isBuy:D>0,entryPrice:_,closedPrice:p||o,contractVal:q,isDelivery:F}),$=U?W:H,j=()=>{r(),U?w():O()};return R(f.Z,{mt:"md"},R(A.ak,Object.assign({ref:y},b)),R(I,{isMarket:U,price:p,priceError:m,priceStep:g,handlePriceChange:T,initialMarkPrice:o,quoteAsset:K}),R(Z,{qty:u,qtyError:c,defaultQty:l,qtyStep:d,positionSize:D,baseAsset:F?V("Cont",{defaultValue:"Cont"}):z,handleAmountChange:C,onConfirm:j}),R(E.Z,{sx:{bg:"transparent",px:0},percentSx:{height:"32px",mr:"8px"},onChange:M}),R(f.Z,{sx:{mt:"plus",mb:"24px",lineHeight:"34px"}},R(f.Z,{color:"t.third",as:"span"},L("estimatedPNL",{defaultValue:"Estimated PNL"}),":"),R(f.Z,{sx:{float:"right"}},isNaN(Number($))?"-":(0,x.uf)($,F?4:2),"\xa0",K)),R(k.Z,{disabled:!1,sz:"l",width:1,onClick:j},L("confirm",{defaultValue:"Confirm"})))},L=l().memo(O);var V=l().createElement;const{LIMIT:F,MARKET:D}=h.Jm,_=({active:e,title:t})=>{const r=V(f.Z,{sx:{width:"100%",height:"2px",bg:"primary",position:"absolute",bottom:"-1px"}});return V(f.Z,{sx:{position:"relative",mr:"16px",pt:"2px",pb:"14px",fontSize:"16px",fontWeight:"medium"},color:e?"t.primary":"t.grey300"},t," ",e?r:null)},B=({open:e,curSideKey:t,onClose:r})=>{const{0:a,1:i}=(0,n.useState)(D),{getI18n:o}=(0,s.Z)(),l=(0,n.useCallback)((e=>{i(e)}),[i]);return V(g.Z,{open:e,onCloseIconClick:r,containerSx:{alignItems:"flex-end"},sx:{width:["100%","464px"],height:"auto",position:["relative","absolute"],top:["auto","50%"],transform:["none","translateY(-50%)"]}},V(y.Z,{lazy:!0,defaultActiveKey:a,onChange:l,tabsSx:{borderBottom:"1px solid",borderBottomColor:"lines.primary",overflow:"visible"}},V(b.Z,{tab:e=>V(_,{active:e,title:o("MarketClose",{defaultValue:"Market Close"})}),tabKey:D},V(L,{panelType:D,sideKey:t,onClose:r})),V(b.Z,{tab:e=>V(_,{active:e,title:o("LimitClose",{defaultValue:"Limit Close"})}),tabKey:F},V(L,{panelType:F,sideKey:t,onClose:r}))))},z=l().memo(B);var K=r("1U9V"),q=r("VM/Z"),U=r("/yzf"),W=r("IHQX"),H=r("rdEq"),$=r("y6Jw"),j=r("9am+"),G=r("ebof"),J=r("Sdhy"),Y=l().createElement;const Q=["size","notionalSize","entryPrice","markPrice","liquidationPrice","marginRatio","margin","pnl","tpsl"],X=({children:e})=>Y(U.Z,{variant:"caption",color:"t.third"},e),ee=({color:e,children:t})=>Y(U.Z,{variant:"captionSub",color:e||"t.primary"},t),te=({children:e,sx:t})=>Y(o.Z,{className:"row-item",sx:t},e),re=({sideKey:e,actionPlaceOrderModal:t})=>{const{getI18n:r}=(0,s.Z)(),{color:a,symbolText:i,symbolName:o,leverage:l}=(0,G.iA)({sideKey:e}),c=(0,S.t2)(e,"positionSize"),u=(0,S.t2)(e,"adl"),d=(0,n.useCallback)((()=>{t(e)}),[t,e]);return Y(te,{sx:{pb:"10px !important"}},Y("div",{className:`symbol-wrap ${a}`},o?Y("div",{className:"symbolText"},Y("div",{className:"symbol"},o.symbol),Y("div",null,`${o.contractTypeI18n} ${o.deliveryDateFormat}`)):Y("div",{className:"symbolText"},i),Y("div",{className:"leverage"},`${l}x`),Y($.Z,{adl:u})),0===Number(c)?null:Y(U.Z,{className:"close-position",onClick:d},r("closePositionSingle",{defaultValue:"Close Position"})))},ae=({sideKey:e})=>{const{getI18n:t}=(0,s.Z)(),{color:r,formatedQuantityAmount:a,unit:i}=(0,G.v_)({sideKey:e});return Y(l().Fragment,null,Y(H.m,{tip:t("uSizeDes",{defaultValue:"Trading units using stable coins in USD\u24c8-M Futures such as USDT, open position amounts shown are calculated based on the actual coin quantity. Values change with the last price of the symbol."})},t("size",{defaultValue:"Size"})),Y(ee,{color:r},a," ",i))},ie=({sideKey:e})=>{const{getI18n:t}=(0,S.yk)(),{formattedNotionalSize:r,unit:a}=(0,G.jK)({sideKey:e});return Y(l().Fragment,null,Y(X,null,t("notionalSize",{defaultValue:"Notional Size"})),Y(ee,null,r," ",a))},oe=({sideKey:e})=>{const{getI18n:t}=(0,s.Z)(),{useLastPrice:r}=(0,S.F7)(),a=r?"lastPrice":"markPrice",{formatedPnl:i,pnlColor:o,ROEVal:n}=(0,G.qU)({sideKey:e});return Y(l().Fragment,null,Y(H.m,{tip:t(`unrealizedPnlTip-${a}`)},t("m-unrealizedPnl",{defaultValue:"Unrealized PNL(ROE %)"})),Y(ee,{color:o},`${i}(${n})`))},ne=({sideKey:e})=>{const{getI18n:t}=(0,s.Z)(),{formatedEntryPrice:r}=(0,G.A4)({sideKey:e});return Y(l().Fragment,null,Y(H.m,{tip:t("entryPriceTip",{defaultValue:"Average executed buy/sell price for your current long/short position."})},t("entryPrice",{defaultValue:"Entry Price"})),Y(ee,null,r))},le=({sideKey:e})=>{const{getI18n:t,i18n:{language:r}}=(0,s.Z)(),{formatedMarkPrice:a}=(0,G.PH)({sideKey:e});return Y(l().Fragment,null,Y(H.m,{tip:t("markPriceTip",{defaultValue:"The latest mark price for this contract. This is the price used for PNL and margin calculations, and may differ from the last price for the purposes of avoiding price manipulation."}),learnMoreLink:(0,K.CN)(q.Wh.UM_MARK_PRICE,{locale:r})},t("markPrice",{defaultValue:"Mark Price"})),Y(ee,null,a))},se=({liquidationPrice:e,formatedLiqPrice:t})=>{const{showLiqRefresh:r,handleLiqRefresh:a}=(0,j.l)(),{getI18n:i,i18n:{language:o}}=(0,s.Z)(),{getI18n:n}=(0,S.yk)();return Y(l().Fragment,null,Y(H.m,{tip:i("liquidationPriceTip",{defaultValue:"If the mark price of the contract reaches below this price (when long) or above this price(when short), your position will be liquidated."}),learnMoreLink:(0,K.CN)(q.Wh.LIQ_PRICE,{locale:o})},i("m-liquidationPrice",{defaultValue:"Liquidation Price"})),Y(ee,{color:"t.emphasize"},r?Y("div",{onClick:a},n("refresh",{defaultValue:"Refresh"})):e>0?t:"-"))},ce=({sideKey:e})=>{const{liquidationPrice:t,formatedLiqPrice:r}=(0,G.Mx)({sideKey:e});return Y(se,{liquidationPrice:t,formatedLiqPrice:r})},ue=({sideKey:e})=>{const{liquidationPrice:t,formatedLiqPrice:r}=(0,J.e)({sideKey:e});return Y(se,{liquidationPrice:t,formatedLiqPrice:r})},de=({ratioColor:e,riskRatio:t})=>{const{getI18n:r}=(0,s.Z)();return Y(l().Fragment,null,Y(H.m,{tip:r("marginRatioTip",{defaultValue:"The lower the Margin Ratio, the lower your liquidation level will be relative to your position size. Your positions will be liquidated once Margin Ratio reaches 100%."})},r("marginRatio",{defaultValue:"Margin Ratio"})),Y(ee,{color:e},t,"%"))},me=({sideKey:e})=>{const{ratioColor:t,riskRatio:r}=(0,G.ek)({sideKey:e});return Y(de,{ratioColor:t,riskRatio:r})},pe=({sideKey:e})=>{const{ratioColor:t,riskRatio:r}=(0,J.U)({sideKey:e});return Y(de,{ratioColor:t,riskRatio:r})},fe=({sideKey:e})=>{const{getI18n:t}=(0,s.Z)(),{actionAdjustMarginModal:r}=(0,n.useContext)(P.Z),a=(0,S.t2)(e,"positionSize"),i=(0,S.t2)(e,"isolated"),{formatedMargin:c}=(0,G.Yq)({sideKey:e}),u=i?t("Isolated",{defaultValue:"Isolated"}):t("Cross",{defaultValue:"Cross"}),d=(0,n.useCallback)((()=>{r(e)}),[r,e]);return Y(l().Fragment,null,Y(H.m,{tip:t("marginTip",{defaultValue:"The margin allocated to the current position."})},t("margin",{defaultValue:"Margin"})),Y(o.Z,Object.assign({alignItems:"center"},i&&{onClick:d}),Y(U.Z,{variant:"captionSub",color:"t.primary"},`${c} (${u})`),0===Number(a)?null:i?Y(W.Z,{size:16,color:"t.third",ml:"4px"}):null))},ge=({sideKey:e})=>{const{getI18n:t}=(0,s.Z)(),{isDelivery:r,actionTpslModal:a}=(0,n.useContext)(P.Z),{formatedTPPrice:i,formatedSLPrice:c}=(0,G.Mn)({sideKey:e}),u=(0,n.useCallback)((()=>{a(e)}),[a,e]);return r?null:Y(l().Fragment,null,Y(H.m,{tip:t("tpSlTip")},t("tpSl",{defaultValue:"TP/SL"})),Y(o.Z,{display:"inline-flex",alignItems:"center",justifyContent:"flex-end",onClick:u},Y(U.Z,{variant:"captionSub",color:"t.primary"},i," / ",c),Y(W.Z,{size:16,color:"t.third",ml:"4px"})))},ye=({sideKey:e,actionPlaceOrderModal:t})=>{const{assetMode:r}=(0,S.F7)(),a=(0,n.useCallback)((t=>{switch(t){case"size":return Y(ae,{sideKey:e});case"notionalSize":return Y(ie,{sideKey:e});case"pnl":return Y(oe,{sideKey:e});case"tpsl":return Y(ge,{sideKey:e});case"entryPrice":return Y(ne,{sideKey:e});case"markPrice":return Y(le,{sideKey:e});case"liquidationPrice":return Y(r?ue:ce,{sideKey:e});case"marginRatio":return Y(r?pe:me,{sideKey:e});case"margin":return Y(fe,{sideKey:e});default:return null}}),[r,e]);return Y("div",{className:"row-wrap"},Y(re,{sideKey:e,actionPlaceOrderModal:t}),Q.map((e=>Y(te,{key:e},a(e)))))},be=(0,n.memo)(ye);var he=r("c1R+"),ve=l().createElement;const xe=["pnl","tpsl","size","notionalSize","marginRatio","margin","entryPrice","markPrice","liquidationPrice"],ke=({sideKey:e})=>{const{getI18n:t}=(0,s.Z)(),{formatedPnl:r,pnlColor:a,ROEVal:i,unrealizedPnl:o}=(0,G.qU)({sideKey:e}),n=(0,S.cO)(e),{formatedEntryPrice:l}=(0,G.A4)({sideKey:e}),{formatedMarkPrice:c}=(0,G.PH)({sideKey:e}),{symbolName:u,leverage:d}=(0,G.iA)({sideKey:e});return ve("div",{className:"pnl"},ve("span",null,ve(X,null,t("m-unrealizedPnl",{defaultValue:"Unrealized PNL(ROE %)"})),ve(U.Z,{variant:"subtitle1",color:a},`${r}(${i})`)),ve(he.Z,{positionInfo:{isShort:Number(n.positionSize)<=0,leverage:d,pair:(null===u||void 0===u?void 0:u.fullName)||n.symbol,changePercent:i,pnlAmount:o,formatedPnl:r,entryPrice:l,markPrice:c}}))},Se=({sideKey:e,actionPlaceOrderModal:t})=>{const{assetMode:r}=(0,S.F7)(),a=(0,n.useCallback)((t=>{switch(t){case"size":return ve(ae,{sideKey:e});case"notionalSize":return ve(ie,{sideKey:e});case"pnl":return ve(ke,{sideKey:e});case"tpsl":return ve(ge,{sideKey:e});case"entryPrice":return ve(ne,{sideKey:e});case"markPrice":return ve(le,{sideKey:e});case"liquidationPrice":return ve(r?ue:ce,{sideKey:e});case"marginRatio":return ve(r?pe:me,{sideKey:e});case"margin":return ve(fe,{sideKey:e});default:return null}}),[r,e]);return ve("div",{className:"row-wrap"},ve(re,{sideKey:e,actionPlaceOrderModal:t}),ve("div",{className:"row-grid"},xe.map((e=>ve("div",{key:e,className:e},a(e))))))},Pe=(0,n.memo)(Se),Te={position:"relative",flexDirection:"column",flex:"1 0",".action-bar":{display:"flex",justifyContent:"space-between",alignItems:"center",height:32,pt:10,label:{width:"auto"}},".empty":{display:"flex",minHeight:120,alignItems:"center",justifyContent:"center",color:"t.secondary",fontSize:0},".row-wrap":{fontSize:"12px",color:"t.primary",py:15,borderBottom:"1px solid",borderColor:"line","&:last-of-type":{mb:102,borderBottom:"none"},"& .row-item":{justifyContent:"space-between",alignItems:"center",py:"minor"},"& .symbol-wrap":{display:"flex",alignItems:"center",fontSize:0,"&.buy":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"buy"}},"&.sell":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"sell"}},"& .symbolText":{display:"flex",alignItems:"center",mx:"minor"},"& .symbol":{mr:"minor",fontSize:1,fontWeight:"medium"},"& .leverage":{px:"minor",mr:"6px",fontSize:0,color:"t.yellow",bg:"rgba(240, 185, 11, .15)",borderRadius:"2px"}},"& .close-position":{py:"minor",px:"xs",fontSize:0,color:"t.primary",bg:"line",borderRadius:"3px"}}},Ce={position:"relative",flexDirection:"column",height:"100%",".action-bar":{display:"flex",justifyContent:"space-between",alignItems:"center",height:32,pt:0,label:{width:"auto"}},".empty":{display:"flex",minHeight:120,alignItems:"center",justifyContent:"center",color:"t.secondary",fontSize:0},".row-list":{height:"calc(100% - 32px)",overflow:"auto","&::-webkit-scrollbar":{display:"none"},"&::-webkit-scrollbar-thumb":{bg:"transparent"}},".row-wrap":{fontSize:"12px",color:"t.primary",py:"ls",borderBottom:"1px solid",borderColor:"line","&:last-of-type":{mb:15,borderBottom:"none"},".pnl":{display:"flex",alignItems:"center"},".row-grid":{display:"grid",alignItems:"center",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(4, 1fr)",gridGap:"12px 16px",gridTemplateAreas:'"pnl pnl tpsl"\n        "size notionalSize marginRatio"\n        "margin entryPrice markPrice"\n        "liquidationPrice . ."',"& .pnl":{gridArea:"pnl"},"& .tpsl":{gridArea:"tpsl"},"& .tpsl, & .marginRatio, & .markPrice":{textAlign:"right"},"& .right-title":{justifyContent:"flex-end"}},"& .row-item":{justifyContent:"space-between",alignItems:"center"},"& .symbol-wrap":{display:"flex",alignItems:"center",fontSize:0,"&.buy":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"buy"}},"&.sell":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"sell"}},"& .symbolText":{display:"flex",alignItems:"center",mx:"minor"},"& .symbol":{mr:"minor",fontSize:1,fontWeight:"medium"},"& .leverage":{px:"minor",mr:"6px",fontSize:0,color:"t.yellow",bg:"rgba(240, 185, 11, .15)",borderRadius:"2px"}},"& .close-position":{py:"minor",px:"xs",fontSize:0,color:"t.primary",bg:"line",borderRadius:"3px"}}};var Me=l().createElement;const Ze=()=>{const{getI18n:e}=(0,s.Z)();return Me("div",{className:"empty"},e("nodata",{defaultValue:"You have no position."}))},we=({isMobile:e,isEmpty:t,hasMore:r,loadMore:l,loading:s,data:c=[]})=>{const{0:u,1:d}=(0,n.useState)(!1),{0:m,1:f}=(0,n.useState)(""),g=(0,n.useMemo)((()=>c.map((e=>({sideKey:e})))),[c]);(0,n.useEffect)((()=>{r&&l()}),[r,l]);const y=(0,n.useCallback)((()=>{d(!1)}),[]),b=(0,n.useCallback)((e=>{d(!0),f(e)}),[d,f]);return Me(o.Z,{sx:e?Te:Ce},Me(a.Z,{fullScreen:!0,show:s}),Me(p,null),t?Me(Ze,null):e?g.map((({sideKey:e})=>Me(be,{key:e,sideKey:e,actionPlaceOrderModal:b}))):Me("div",{className:"row-list"},g.map((({sideKey:e})=>Me(Pe,{key:e,sideKey:e,actionPlaceOrderModal:b})))),r&&Me(i.Z,{showMore:l,check:{offset:200},loading:s}),Me(z,{open:u,curSideKey:m,onClose:y}))},Ie=l().memo(we)},TigS:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Je});var a=r("k1bI"),i=r("ka4r"),o=r("/SIk"),n=r.n(o),l=r("h+3y"),s=r("5vwO"),c=r("szIg"),u=r("/yzf"),d=r("BrOe"),m=r("Uqe+"),p=r("O94r"),f=r.n(p),g=r("NcRm"),y=r("rdEq"),b=r("HQAl"),h=r("V+9V"),v=r("Tik5"),x=n().createElement;const k=({type:e})=>x("default"===e?b.Z:"desc"===e?h.Z:"asc"===e?v.Z:b.Z,{className:"rank-icon",size:10}),S=n().memo(k);var P=r("GpFh"),T=r("aK2L"),C=r("w7Tp"),M=r("HkAn"),Z=r("1U9V"),w=r("VM/Z"),I=n().createElement;const E={fontSize:0,color:"t.secondary",zIndex:9,whiteSpace:"nowrap",".rank-icon":{width:"10px",ml:"2px",transform:"scale(1.6)"}},N=(0,g.JN)((({style:e,children:t})=>I("div",{className:"position-row header",style:e},t))),A=(0,g.W8)((({value:e,className:t,itemKey:r,rankingType:a,isRankingEnable:i,onRanking:n})=>{const{pageName:l,dfSource:s}=(0,M.Vn)(),c=(0,o.useCallback)((e=>()=>{let t=w.rV.indexOf(e);t<2?t++:t=0,n({rankingKey:r,rankingType:w.rV[t]}),(0,Z.wZ)({module:"oop",elementId:"position_sorting",dfSource:s,pageName:l})}),[s,l,r,n]);return I(C.Z,Object.assign({className:t,sx:E},i&&{onClick:c(a)}),e)})),R=I(T.Z,{className:"drag-icon",size:12}),O=(0,g.W6)((e=>{let{showTip:t=!1,tip:r=""}=e,a=(0,P.Z)(e,["showTip","tip"]);return t?I(y.m,Object.assign({tip:r},a),R):R}));var L=r("/8mO"),V=r("1VTk"),F=r("+dPF"),D=r("shek"),_=n().createElement;const B={flexDirection:"column",padding:"4px",fontSize:"12px",".radio-title":{my:"10px",color:"t.white",opacity:"0.5"},".radio-row":{display:"flex",alignItems:"center"},svg:{color:"t.yellow"},".unchecked svg":{color:"t.white",cursor:"pointer"},".radio-label":{mr:"24px",fontSize:"12px",color:"t.white",cursor:"pointer"}};function z({tipText:e}){const t=(0,c.useDispatch)(),{getI18n:r}=(0,D.Z)(),{useLastPrice:a}=(0,F.F7)(),o=e=>{(0,L.yN)({pnlPriceBasis:e},{}),t.preference.updateState({useLastPrice:"lastPrice"===e})};return _(i.Z,{sx:B},e,_("div",{className:"radio-title"},r("selectPriceBasis",{defaultValue:"Select Price Basis"})),_("div",{className:"radio-row"},["markPrice","lastPrice"].map((e=>{const t=a?"lastPrice"===e:"markPrice"===e;return _(V.ZP,{className:f()({unchecked:!t}),key:e,value:e,checked:t,onChange:o},_("div",{className:"radio-label"},r(e)))}))))}var K=r("VDPE"),q=r("SJeZ"),U=r("9am+");const W={fontSize:0,whiteSpace:"normal",lineHeight:"14px",maxHeight:"28px",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden"},H={maxWidth:"330px"},$={cursor:"pointer"};var j=n().createElement;const G=({headers:e,onSort:t,style:r})=>{const a=(0,c.useDispatch)(),{getI18n:l}=(0,q.yk)(),{pageName:p,dfSource:b}=(0,M.Vn)(),{showLiqRefresh:h,handleLiqRefresh:v}=(0,U.l)(),x=(0,o.useMemo)((()=>e.filter((({defaultChecked:e,unCheckedComponents:t})=>e||!e&&t))),[e]),k=(0,o.useMemo)((()=>e.filter((({key:e})=>!w.N3.includes(e))).reduce(((e,{key:t})=>(Object.assign(e,{[t]:!1}),e)),{})),[e]),[P,T]=(0,m.Z)(w.Nj,!1),[C,I]=(0,m.Z)(w.nK),[E,R]=(0,m.Z)(w.tC,k),L=(0,c.useSelector)((e=>e.position.rankingInfo)),{rankingKey:V,rankingType:F}=L,D=(0,o.useCallback)((e=>a.position.updateState({rankingInfo:e})),[a.position]),_=(0,o.useCallback)((e=>{const{rankingKey:t,rankingType:r}=e,a=null===E||void 0===E?void 0:E[t];D(e),I(e),!a&&R((0,s.Z)((0,s.Z)((0,s.Z)({},E),V?{[V]:!1}:{}),{},{[t]:!0})),"default"===r&&R((0,s.Z)((0,s.Z)({},E),{},{[t]:!1}))}),[V,I,E,R,D]),B=(0,o.useCallback)((e=>{e.stopPropagation()}),[]),G=(0,o.useCallback)((({name:e,tip:t,title:r,learnMoreLink:a,rankingIcon:o,isRankingEnable:n})=>{const l=(0,s.Z)((0,s.Z)({},W),n?$:{});switch(e){case"pnl":return j(y.m,{onTipClick:B,tip:j(z,{tipText:t}),tipSx:H,labelSx:l},r,o);case"closePosition":return j(K.ZP,{tip:t,title:r});case"liquidationPrice":return t?j(y.m,{onTipClick:B,tip:t,learnMoreLink:a,labelSx:l},j(u.Z,null,r,o),h&&j(d.Z,{ml:"3px",cursor:"pointer",size:12,flexShrink:0,onClick:v})):j(i.Z,{alignItems:"center"},j(u.Z,{sx:l,color:"t.third"},r,o),h&&j(d.Z,{ml:"3px",cursor:"pointer",size:12,flexShrink:0,onClick:v}));default:return t?j(y.m,{onTipClick:B,tip:t,learnMoreLink:a,labelSx:l},r,o):j(i.Z,{alignItems:"center"},j(u.Z,{sx:l,color:"t.third"},r,o))}}),[v,h]);return(0,o.useEffect)((()=>{C&&D(C)}),[C,D]),j(N,{axis:"x",transitionDuration:100,useDragHandle:!0,onSortEnd:({oldIndex:e,newIndex:r})=>{var a;const i=x.map((e=>e.key));if(null===(a=x[r])||void 0===a||!a.sortable)return!1;t((0,g.Rp)(i,e,r)),(0,Z.wZ)({module:"oop",elementId:"position_title_order",dfSource:b,pageName:p})},style:r},x.map(((e,t)=>{const{key:r,className:a,title:i,tip:o,sortable:s,learnMoreLink:c,unCheckedComponents:u,defaultChecked:d}=e,m=!d&&u?u.title:i,p=!d&&u?u.tip:o,g=V===r?F:"default",y=!w.N3.includes(r),b=j(n().Fragment,null,G({name:r,tip:p,title:m,learnMoreLink:c,isRankingEnable:y,rankingIcon:y?j(S,{type:g}):null}),s&&j(O,{showTip:!P,onMouseLeave:()=>{!P&&T(!0)},tip:l("dragToMove",{defaultValue:"Drag to Move"})}));return j(A,{key:r,index:t,value:b,className:f()(a,{"header-item":!0,"show-ranking":null===E||void 0===E?void 0:E[r]}),itemKey:r,rankingType:g,isRankingEnable:y,onRanking:_})})))},J=n().memo(G);var Y=r("wGPX"),Q=r("CE5Z"),X=r("+tqa"),ee=r("cN65"),te=r("COVG"),re=r("0hOy"),ae=r("N4Xh"),ie=n().createElement;const oe={padding:"16px",bg:"popupBg",boxShadow:"elevation2",borderRadius:"4px",".check-header":{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"14px","& .name":{color:"t.secondary",marginRight:"16px"}},".sort-header":{color:"t.third",display:"flex",justifyContent:"flex-start",alignItems:"center","& .back":{marginLeft:"8px",cursor:"pointer",fontSize:"12px"}}},ne=["notionalSize","adl","tpSl","closePosition"],le=({headers:e=[],onSort:t,onCheck:r})=>{const a=e.map((e=>(0,s.Z)((0,s.Z)({},e),{},{value:e.key,label:e.title}))),i=a.filter((e=>e.sortable&&(e.defaultChecked||e.alwaysShowInColumn))).map((e=>(0,s.Z)((0,s.Z)({},e),{},{label:e.sortingTitle||e.title}))),n=a.filter((e=>e.checkable));n.sort(((e,t)=>ne.indexOf(e.value)-ne.indexOf(t.value)));const{getI18n:l}=(0,q.yk)(),{0:c,1:d}=(0,o.useState)("check"),m=e=>{const a=Object.keys(e)[0],o=e[a];r&&r(n.map((e=>e.value===a?(0,s.Z)((0,s.Z)({},e),{},{defaultChecked:o}):e)).filter((e=>e.defaultChecked)).map((e=>e.value)));let l=i.map((e=>e.value));o?l.push(a):l=l.filter((e=>e!==a)),t&&t(l.concat(a))};return"check"===c?ie(C.Z,{__css:oe,onClick:e=>e.stopPropagation()},ie("div",{className:"check-header"},ie(u.Z,{variant:"captionSub",className:"name"},l("positions-preferenceTitle")),ie("div",{className:"action"},ie(re.Z,{variant:"defaultLink",__css:{cursor:"pointer"},onClick:e=>{e.stopPropagation(),d("sort")}},l("positions-preferenceSort")))),ie("div",{className:"list"},ie(ee.Z,{options:n,getValue:m}))):ie(C.Z,{__css:oe,onClick:e=>e.stopPropagation()},ie("div",{className:"sort-header"},ie(ae.Z,{size:16,onClick:()=>{d("check")}}),ie("div",{className:"back",onClick:()=>{d("check")}},l("positions-preferenceBack"))),ie("div",{className:"list"},ie(te.Z,{items:i,onSort:e=>{t&&t(e)}})))},se=(0,o.memo)(le);var ce=n().createElement;const ue=({headers:e,onCheck:t,onSort:r})=>{const a=(0,q.BF)(w.$f);return ce("div",{className:a?"action-bar":"action-bar fullscreen"},ce(X.Z,null),ce(Y.ZP,{trigger:"click",sx:{marginLeft:16,marginTop:"4px"},overlay:ce(se,{headers:e,onCheck:t,onSort:r}),overlayProps:{marginBottom:"8px"},placement:"top",enablePortal:!0},ce(Q.Z,{mr:"8px",fontSize:"20px",sx:{color:"icons.close",cursor:"pointer","&:hover path":{fill:"t.third"}}})))},de=n().memo(ue);var me=r("LL18"),pe=r("yOio"),fe=r("2kM9"),ge=r("S24M"),ye=r("BcM3"),be=r("c1R+"),he=r("ebof"),ve=r("Sdhy"),xe=r("y6Jw"),ke=r("bbFg"),Se=r("k/nb"),Pe=n().createElement;const Te=(0,w.nM)(),Ce=({sideKey:e})=>{const{changeSymbol:t}=(0,o.useContext)(Se.Z),r=(0,q.t2)(e,"symbol"),{color:a,symbolText:i,symbolName:n,leverage:l}=(0,he.iA)({sideKey:e});return Pe("div",{className:"symbol",onClick:()=>t({stateSymbol:r})},Pe("div",{className:`bar bar-${a}`}),Pe(ye.O,{symbolName:n,fallbackText:i}),Pe("div",{className:"leverage"},`${l}x`),Pe(me.Z,{size:16,color:"t.yellow",className:"symbolRightArrow"}))},Me=({columnKey:e,sideKey:t})=>{const{color:r,formatedQuantityAmount:a,unit:i}=(0,he.v_)({sideKey:t,columnKey:e});return Pe("div",{className:`size size-${r}`},`${a} ${i}`)},Ze=({columnKey:e,sideKey:t})=>{const{formattedNotionalSize:r,unit:a}=(0,he.jK)({sideKey:t,columnKey:e});return Pe("div",{className:"notionalSize"},`${r} ${a}`)},we=({sideKey:e})=>{const{formatedEntryPrice:t}=(0,he.A4)({sideKey:e});return Pe("div",{className:"entryPrice"},t)},Ie=({sideKey:e})=>{const{formatedMarkPrice:t}=(0,he.PH)({sideKey:e});return Pe("div",{className:"markPrice"},t)},Ee={color:"t.emphasize","&:hover":{color:"t.emphasize"}},Ne=(0,o.memo)((({validLiq:e,formatedLiqPrice:t})=>{const{showLiqRefresh:r,handleLiqRefresh:a}=(0,U.l)(),{getI18n:i}=(0,D.Z)(),{getI18n:o}=(0,q.yk)();return Pe("div",{className:"liquidationPrice"},r?Pe(y.m,{tip:i("liquidationPriceRefreshTip",{defaultValue:""}),labelSx:Ee},Pe("div",{className:"liqRefresh",onClick:a},o("refresh",{defaultValue:"Refresh"}))):e?t:Pe(y.m,{tip:i("liquidationPriceLowRiskTip",{defaultValue:""}),labelSx:Ee},"- -"))})),Ae=({columnKey:e,sideKey:t})=>{const{liquidationPrice:r,formatedLiqPrice:a}=(0,he.Mx)({sideKey:t,columnKey:e});return Pe(Ne,{validLiq:r>0,formatedLiqPrice:a})},Re=({columnKey:e,sideKey:t})=>{const{liquidationPrice:r,formatedLiqPrice:a}=(0,ve.e)({sideKey:t,columnKey:e});return Pe(Ne,{validLiq:r>0,formatedLiqPrice:a})},Oe=({ratioColor:e,riskRatio:t})=>Pe("div",{className:`marginRatio marginRatio-${e}`},t,"%"),Le=({columnKey:e,sideKey:t})=>{const{ratioColor:r,riskRatio:a}=(0,he.ek)({sideKey:t,columnKey:e});return Pe(Oe,{ratioColor:r,riskRatio:a})},Ve=({columnKey:e,sideKey:t})=>{const{ratioColor:r,riskRatio:a}=(0,ve.U)({sideKey:t,columnKey:e});return Pe(Oe,{ratioColor:r,riskRatio:a})},Fe=({columnKey:e,sideKey:t})=>{const{0:r,1:a}=(0,o.useState)(!1),{assetMode:i}=(0,q.F7)(),{actionAdjustMarginModal:l}=(0,o.useContext)(Se.Z),c=(0,q.t2)(t,"positionSize"),u=(0,q.t2)(t,"isolated"),d=(0,q.t2)(t,"isolatedWallet"),{getI18n:m}=(0,D.Z)(),p=u?m("Isolated",{defaultValue:"Isolated"}):m("Cross",{defaultValue:"Cross"}),{formatedMargin:f}=(0,he.Yq)({sideKey:t,columnKey:e}),g=(0,o.useCallback)(((e,t)=>{(0,ge.j)(e,(0,s.Z)({module:"oop",df_source:Te?"cm":"um",pageName:Te?"cm_trading":"um_trading"},t))}),[]),y=(0,o.useCallback)((()=>{u&&(!w.Jg&&0===Number(c)&&d<0?(g("$WebClick",{$element_id:"isolated_negative_balance_entry"}),fe.ee.emit("SHOW_NEG_BALANCE_CLEAR_MODAL",{isJoinMargin:i,isolated:u,isCM:Te,sensorsTrack:g})):l(t))}),[l,i,u,d,c,g,t]),b=(0,o.useMemo)((()=>Pe(pe.Z,{size:16,color:r?"t.primary":"t.third"})),[r]);return Pe(n().Fragment,null,u?Pe("div",{className:"margin",style:{minWidth:"auto",cursor:"pointer"},onClick:y,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},Pe("div",{className:"margin-text"},Pe("div",null,f),Pe("div",null,`(${p})`)),Pe("div",{className:"margin-icon-container"},b,d<0&&Pe("div",{className:"red-point"}))):Pe("div",{className:"margin"},Pe("div",{className:"margin-text"},Pe("div",null,f),Pe("div",null,`(${p})`))))},De=({columnKey:e,sideKey:t})=>{const{unrealizedPnl:r,formatedPnl:a,pnlColor:i,ROEVal:o}=(0,he.qU)({sideKey:t,columnKey:e}),n=(0,q.cO)(t),{formatedEntryPrice:l}=(0,he.A4)({sideKey:t}),{formatedMarkPrice:s}=(0,he.PH)({sideKey:t}),{symbolName:c,leverage:u}=(0,he.iA)({sideKey:t}),d=(0,q.t2)(t,"isolatedWallet"),m=Number(n.positionSize),p=d<0&&0===m;return Pe("div",{className:`pnl pnl-${i}`},Pe("span",null,Pe("div",null,a),Pe("div",null,`(${o})`)),!p&&Pe(be.Z,{positionInfo:{isShort:m<=0,leverage:u,pair:(null===c||void 0===c?void 0:c.fullName)||n.symbol,changePercent:o,pnlAmount:r,formatedPnl:a,entryPrice:l,markPrice:s}}))},_e=({sideKey:e})=>{const t=(0,q.t2)(e,"adl");return Pe("div",{className:"adl"},Pe(xe.Z,{adl:t}))},Be=({sideKey:e})=>{const t=(0,q.t2)(e,"positionSize");return Pe("div",{className:"closePosition"},t?Pe(ke.ZP,{sideKey:e}):Pe(n().Fragment,null))},ze=({columnKey:e,sideKey:t})=>{const{actionTpslModal:r}=(0,o.useContext)(Se.Z),{formatedTPPrice:a,formatedSLPrice:i}=(0,he.Mn)({sideKey:t,columnKey:e}),n=(0,o.useMemo)((()=>Pe(pe.Z,{size:16,sx:{cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},onClick:()=>r(t)})),[t,r]);return Pe("div",{className:"tpSl"},Pe("div",{className:"tpSl-text"},Pe("div",null,a," /"),Pe("div",null,i)),n)},Ke=({sideKey:e})=>{const{assetMode:t}=(0,q.F7)(),{headers:r}=(0,o.useContext)(Se.Z),a=(0,o.useCallback)((({key:r})=>{switch(r){case"symbol":return Pe(Ce,{key:r,sideKey:e,columnKey:r});case"size":return Pe(Me,{key:r,sideKey:e,columnKey:r});case"notionalSize":return Pe(Ze,{key:r,sideKey:e,columnKey:r});case"entryPrice":return Pe(we,{key:r,sideKey:e,columnKey:r});case"markPrice":return Pe(Ie,{key:r,sideKey:e,columnKey:r});case"liquidationPrice":return Pe(t?Re:Ae,{key:r,sideKey:e,columnKey:r});case"marginRatio":return Pe(t?Ve:Le,{key:r,sideKey:e,columnKey:r});case"margin":return Pe(Fe,{key:r,sideKey:e,columnKey:r});case"pnl":return Pe(De,{key:r,sideKey:e,columnKey:r});case"adl":return Pe(_e,{key:r,sideKey:e,columnKey:r});case"closePosition":return Pe(Be,{key:r,sideKey:e,columnKey:r});case"tpSl":return Pe(ze,{key:r,sideKey:e,columnKey:r});default:return Pe("div",null)}}),[t,e]);return Pe("div",{className:"position-row body"},r.filter((e=>e.defaultChecked||e.alwaysShowInColumn)).map(a))},qe=(0,o.memo)(Ke);var Ue=r("uefD"),We=r("8LtS"),He=n().createElement;const $e=e=>He(qe,e),je=(e,t)=>t[e].sideKey,Ge=({loading:e,headers:t,onCheckHeader:r,onSortHeader:n,data:s=[]})=>{const c=(0,We.jZ)(),u=(0,o.useMemo)((()=>c(s).map((e=>({sideKey:e})))),[s,c]),d=(0,o.useMemo)((()=>{let e=0;return t.filter((e=>e.defaultChecked||!e.defaultChecked&&e.unCheckedComponents)).forEach((({key:t})=>{e+=Ue.G4[t]||0})),{minWidth:e}}),[t]),{getI18n:m}=(0,q.yk)(),{apiError:p,onRefresh:f}=(0,We.Nl)(),g=(0,K.yN)({hideOtherSymbol:!1});return He("div",{id:"position-pc",style:{height:"100%"}},He(i.Z,{sx:Ue.w_},He(de,{headers:t,onSort:n,onCheck:r}),He(J,{headers:t,onSort:n,style:d}),He(l.v,{apiError:p,confirmTip:m("positionErrorConfirmTip",{defaultValue:"Cancel all open orders and close all positions here."}),onRefresh:f,onConfirm:g},He(a.a,{direction:"xxx",dataSource:u,loading:e,loadWithContent:!0,listSx:d,itemElement:$e,itemKey:je,itemHeight:40}))))},Je=n().memo(Ge)},VDPE:(e,t,r)=>{"use strict";r.d(t,{vR:()=>A,ZP:()=>O,yN:()=>E});var a=r("/SIk"),i=r.n(a),o=r("w7Tp"),n=r("ka4r"),l=r("XVzo"),s=r("/yzf"),c=r("fjQ4"),u=r("fi7b"),d=r("ogBT"),m=r("vlsm"),p=r("szIg"),f=r("8RC1"),g=r("rdEq"),y=r("klBV"),b=r("SJeZ"),h=r("k/nb"),v=r("D9MU"),x=r("Y+MU"),k=r("shek"),S=i().createElement;const P={pt:"xs",flexDirection:"column",alignItems:"center",textAlign:"center","& .title":{mt:"md",color:"t.primary"},"& .fail-info":{pt:"xs",mb:"md",width:"100%",maxHeight:304,overflowY:"auto","& .fail-order":{flexDirection:"column",mb:10},"& .symbol-wrap":{justifyContent:"center",alignItems:"center",mb:"2px","&.buy":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"buy"}},"&.sell":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"sell"}}},"& .symbolText":{display:"flex",alignItems:"center",mx:"minor"},"& .symbol":{mr:"minor"}}},T=({variant:e,className:t,children:r,color:a,whiteSpace:i="pre-wrap"})=>S(s.Z,{variant:e,className:t,color:a,sx:{whiteSpace:i}},r),C=({orders:e,productMap:t,isCoinFutures:r})=>{const{getI18n:a}=(0,k.Z)(),{getI18n:o}=(0,b.yk)();return S(n.Z,{sx:P},S(v.Z,{size:80}),S(s.Z,{variant:"headline6",className:"title"},o("ClosePositionsFailed")),S("div",{className:"fail-info"},Object.values(e).map((({symbol:e,positionSide:l,amount:c,color:u,messages:d},m)=>{let p,f=e;const g=null===t||void 0===t?void 0:t[e],{baseAsset:y=""}=g||{},b=r?o("Cont",{defaultValue:"Cont"})||"Cont":y;return g&&(p=(0,x.H)(g,o)),S(n.Z,{key:m,className:"fail-order"},S(n.Z,{className:`symbol-wrap ${u}`},S("div",{className:"symbolText"},p?S(i().Fragment,null,S(T,{variant:"subtitle1",className:"symbol"},p.symbol),S(T,{variant:"body1"},p.contractTypeI18n," ",p.deliveryDateFormat)):S(T,{variant:"subtitle1"},f)),S(T,{variant:"subtitle1",color:u},"LONG"===l?a("psLong",{defaultValue:"Long"}):a("psShort",{defaultValue:"Short"}))),d.map(((e="")=>S(s.Z,{key:e,variant:"body2",color:"t.primary",mt:"3px"},e.replace(/%unit%/,b)))))}))),S(l.Z,{sz:"large",width:"100%",onClick:()=>f.ZP.close()},o("OK")))},M=i().memo(C);var Z=r("COFI"),w=r("wdcV"),I=i().createElement;const E=({hideOtherSymbol:e=!1})=>{const{isLight:t}=(0,y.Fg)(),r=(0,y.rd)(),i=(0,y.iB)(),[s]=(0,y.z4)(),{isDelivery:c}=(0,a.useContext)(h.Z),{getI18n:u}=(0,k.Z)(),{getI18n:p}=(0,y.ZK)("trd-openOrder"),g=(0,a.useMemo)((()=>e?{symbolList:[s],newOrderRespType:"RESULT"}:{newOrderRespType:"RESULT"}),[e,s]),b=(0,a.useCallback)((()=>{try{(0,m.F)(g).then((e=>{const{success:a,data:{failedOrderRespList:o=[]}}=e||{};if(a&&o.length){const e=(0,w.QN)(o);f.ZP.show({isLight:t,color:r,sx:{minWidth:"360px",maxWidth:"360px"},onPressEnter:b,onPressEsc:()=>f.ZP.close(),children:I(M,{orders:e,productMap:i,isCoinFutures:c})})}f.ZP.close()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}catch(e){f.ZP.close()}}),[g,t,i,c,r]),v=(0,a.useCallback)((()=>{f.ZP.close()}),[]);return(0,a.useCallback)((a=>{var i;null===a||void 0===a||null===(i=a.stopPropagation)||void 0===i||i.call(a),f.ZP.show({isLight:t,color:r,showCloseIcon:!1,sx:{width:["300px","360px"],height:"auto"},onPressEnter:()=>f.ZP.close(),onPressEsc:()=>f.ZP.close(),children:I(o.Z,null,I(o.Z,{px:1,pt:[0,"16px"],sx:{textAlign:"center"}},I(d.Z,{size:[60,96]}),I("div",null,e?u("closePositionTextPartial",{symbol:s,defaultValue:"Are you sure you want to close all positions of {{symbol}} at market price?"}):u("closePositionText",{defaultValue:"Are you sure you want to close all your positions at market price?"}))),I(n.Z,{mt:"24px"},I(l.Z,{sx:{width:.5,mr:3},sz:"l",flexGrow:1,colorStyle:"secondary",onClick:v},p("dialog-cancel",{defaultValue:"Cancel"})),I(l.Z,{sx:{width:.5},sz:"l",flexGrow:1,onClick:b},p("dialog-confirm",{defaultValue:"Confirm"}))))})}),[p,u,b,e,t,s,r,v])},N=({canPlaceOrder:e,closeTip:t})=>{const{t:r}=(0,b.$G)(),{getI18n:i}=(0,b.yk)(),n=E({hideOtherSymbol:!1}),c=(0,a.useMemo)((()=>({width:"231px",color:"#1E2329",".btn-area":{mt:"4px",display:"flex",justifyContent:"flex-end",alignItems:"center",".text":{fontSize:"14px",fontWeight:500,cursor:"pointer"},".white":{ml:"18px",backgroundImage:"none","&:hover":{backgroundImage:"none"}}}})),[]);return I(o.Z,{sx:c},I("div",{className:"text"},i("service-abnormal",{defaultValue:"The service is currently overloaded or malfunctioning. "})," ","\xa0",e&&I(u.c,{t:r,i18nKey:(0,b.Gv)("abnormal-close-all"),components:{bold:I("span",{style:{fontWeight:"bold"}})},defaults:"<bold>Cancel all open orders</bold> and <bold>close all positions</bold> here."})),e?I("div",{className:"btn-area"},I(s.Z,{className:"text",onClick:t},i("cancelBtnText",{defaultValue:"Cancel"})),I(l.Z,{className:"white",onClick:()=>{n(null),t()}},i("confirmBtn",{defaultValue:"Confirm"}))):I("div",{className:"btn-area"},I(l.Z,{className:"white",onClick:t},i("OK",{defaultValue:"OK"}))))},A=({btnText:e})=>{const t=(0,b.Xb)(),r=E({hideOtherSymbol:t});return(0,a.useEffect)((()=>(0,Z.GY)((async({name:e})=>{switch(e){case Z.IS:r(null)}}))),[r]),I(l.Z,{onClick:r,variant:"quiet",sz:"s",pl:"0"},e)},R=({tip:e,title:t})=>{const{headers:r}=(0,a.useContext)(h.Z),i=(0,b.C3)(),{0:o,1:n}=(0,a.useState)(document.getElementById("position-pc"));(0,a.useEffect)((()=>{n(null)}),[r]),(0,a.useEffect)((()=>{n(document.getElementById("position-pc"))}),[i,o]);const l=(0,b.Dj)(),u=(null===l||void 0===l?void 0:l.length)||0,d=(0,y.zk)("abnormal"),m=(0,y.zk)("openTip"),f=(0,y.zk)("placeOrder"),v=(0,p.useDispatch)(),x=(0,a.useCallback)((()=>v.serviceStatus.updateStateImmutable({openTip:!1})),[]),{activeTab:k}=(0,y.jV)();return"0"!==k?null:d?I("div",{style:{width:"fit-content",position:"relative"}},I(c.Z,{container:o,open:m,arrow:!0,boundary:document.body,bg:"primary",placement:"top-start",tip:I(N,{canPlaceOrder:f,closeTip:x})},e?I(A,{btnText:t}):I(s.Z,{sx:{fontSize:0,color:"t.secondary"}},t))):e?I(g.m,{tip:e},u?I(A,{btnText:t}):t):I(s.Z,{sx:{fontSize:0,color:"t.secondary"}},t)},O=i().memo(R)},"+tqa":(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r("5+Lg"),i=r("a4Ug"),o=r("/yzf"),n=r("/SIk"),l=r.n(n),s=r("szIg"),c=r("klBV"),u=r("SJeZ"),d=l().createElement;const m=()=>{const{getI18n:e}=(0,u.yk)(),[t]=(0,c.z4)(),r=(0,s.useDispatch)(),l=(0,u.Xb)(),m=(0,n.useRef)(l),p=(0,n.useCallback)((e=>{const{checked:a}=e.currentTarget;r.position.hideOtherSymbol({hideOtherSymbol:a,onlySymbol:t})}),[t,r.position]);return(0,n.useEffect)((()=>{m.current=l}),[l]),(0,n.useEffect)((()=>{m.current&&r.position.hideOtherSymbol({hideOtherSymbol:!0,onlySymbol:t})}),[t]),d(a.Z,{sx:{fontSize:[1,0],color:"t.third",cursor:["auto","auto","pointer"],lineHeight:["unset","24px","24px"]}},d(i.Z,{checked:l,onChange:p}),d(o.Z,{sx:{userSelect:"none"}},e("hideOtherSymbol",{defaultValue:"Hide Other Symbol"})))},p=l().memo(m)},Lr13:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("ka4r"),l=o().createElement;const s=({onClick:e,sx:t,children:r})=>l(n.Z,{justifyContent:"center",alignItems:"center",sx:(0,a.Z)({display:"flex",flex:"1",minWidth:"40px",height:"24px",border:"1px solid",borderColor:"position.percentInputBorderColor",borderRadius:"2px",cursor:"pointer",mr:"4px",color:"t.third",bg:"bg3",textAlign:"center",":hover":{color:["t.yellow","t.yellow","t.primary"],bg:["bg3","bg3","line"],borderColor:"currentColor"},":last-of-type":{mr:0}},t),onClick:e},r),c=({percents:e=[.1,.25,.5,.75,1],onChange:t=(e=>{}),sx:r={},percentSx:i={}})=>l(n.Z,{variant:"dropdown",justifyContent:"space-between",sx:(0,a.Z)({width:"100%",bg:"popupBg",borderRadius:"4px",p:"8px"},r)},e.map((e=>l(s,{key:e,sx:i,onClick:()=>t(e)},100*e,"%"))))},shek:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o,G:()=>n});var a=r("klBV");const i="trd-Position",o=e=>(0,a.ZK)(i,e),n=e=>`${i}-${e}`},"8LtS":(e,t,r)=>{"use strict";r.d(t,{g4:()=>f,Nl:()=>w,jZ:()=>Z});r("LwXq"),r("ebof");var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("Uqe+"),l=r("klBV"),s=r("1U9V"),c=r("VM/Z"),u=r("+dPF"),d=r("SJeZ"),m=o().createElement;const p=({getFutI18n:e})=>{var t;const[r]=(0,l.z4)(),a=null===(t=(0,d.m8)()[r])||void 0===t?void 0:t.indexPrice,{formatTk:i}=(0,l.mC)();return m(o().Fragment,null,e("markPriceTip",{defaultValue:"Latest mark price for this contract. To prevent price manipulation, the mark price is used for unrealized PNL and margin calculations, and may differ from the last price. \n Mark Price is calculated based on the index price. The Price Index is a bucket of prices from the major Spot market exchanges, weighted by their relative volume. The latest index price is {{indexPrice}}.",indexPrice:i(a)}).replaceAll("\\n","\n"))},f=({getFutI18n:e})=>{const{useLastPrice:t}=(0,u.F7)(),{i18n:{language:r}}=(0,l.ZK)(),o=t?"lastPrice":"markPrice",[d,f]=(0,n.Z)(c.Zt,["closePosition","tpSl"]),[g,y]=(0,n.Z)(c.o5,["symbol","size","entryPrice","markPrice","liquidationPrice","marginRatio","margin","pnl","closePosition","tpSl"]),b=(0,c.nM)();return[(0,i.useMemo)((()=>{const t=[{key:"symbol",className:"symbol",title:e("symbol",{defaultValue:"Symbol"}),checkable:!1,sortable:!1},{key:"size",className:"size",title:e("size",{defaultValue:"Size"}),tip:b?e("cSizeDes",{defaultValue:"Trading units using coins in COIN-M Futures such as BTC, open position amounts shown are calculated based on the actual cont quantity. Values change with the\xa0last price of the symbol."}):e("uSizeDes",{defaultValue:"Trading units using stable coins in USD\u24c8-M Futures such as USDT, open position amounts shown are calculated based on the actual coin quantity. Values change with the last price of the symbol."}),checkable:!1,sortable:!0},{key:"notionalSize",className:"notionalSize",title:e("notionalSize",{defaultValue:"Notional Size"}),checkable:!0,sortable:!0},{key:"entryPrice",className:"entryPrice",title:e("entryPrice",{defaultValue:"Entry Price"}),tip:e("entryPriceTip",{defaultValue:"Average executed buy/sell price for your current long/short position."}),checkable:!1,sortable:!0},{key:"markPrice",className:"markPrice",title:e("markPrice",{defaultValue:"Mark Price"}),tip:m(p,{getFutI18n:e}),checkable:!1,sortable:!0},{key:"liquidationPrice",className:"liquidationPrice",title:e("liquidationPrice",{defaultValue:"Liq.Price"}),tip:e("liquidationPriceTip",{defaultValue:"If the mark price of the contract reaches below this price (when long) or above this price(when short), your position will be liquidated."}),learnMoreLink:(0,s.CN)(c.Wh.LIQ_PRICE,{locale:r}),checkable:!1,sortable:!0},{key:"marginRatio",className:"marginRatio",title:e("marginRatio",{defaultValue:"Margin Ratio"}),tip:e("marginRatioTip",{defaultValue:"The lower the Margin Ratio, the lower your liquidation level will be relative to your position size. Your positions will be liquidated once Margin Ratio reaches 100%."}),checkable:!1,sortable:!0},{key:"margin",className:"margin",title:e("margin",{defaultValue:"Margin"}),tip:e("marginTip",{defaultValue:"The margin allocated to the current position."}),checkable:!1,sortable:!0},{key:"pnl",className:"pnl",title:e("unrealizedPnl",{defaultValue:"PNL(ROE %)"}),tip:e(`unrealizedPnlTip-${o}`),checkable:!1,sortable:!0},{key:"adl",className:"adl",title:e("adl",{defaultValue:"ADL"}),tip:e("adlTip",{defaultValue:"This indicator shows your position in the auto-deleverage queue. If all lights are lit, in the event of a liquidation, your position may be reduced."}),checkable:!0,sortable:!0},{key:"closePosition",className:"closePosition",title:e("closePosition",{defaultValue:"Close All Position"}),tip:e("closePositionTip",{defaultValue:"Closing all positions cancels all open orders under {{futuresType}} and close all positions under {{futuresType}} by market order.",futuresType:b?"COIN-M":"USD\u24c8-M"}),alwaysShowInColumn:!0,unCheckedComponents:{title:e("positions-action",{defaultValue:"Action"}),tip:null},sortingTitle:e("positions-preferenceAction",{defaultValue:"Action (Market/Limit)"}),checkable:!0,sortable:!0},{key:"tpSl",className:"tpSl",title:e("tpSlV2",{defaultValue:"TP/SL for position"}),tip:e("tpSlTip"),checkable:!0,sortable:!0}].map((e=>(0,a.Z)((0,a.Z)({},e),{},{defaultChecked:!e.checkable||(null===d||void 0===d?void 0:d.includes(e.key))||!1})));return t.sort(((e,t)=>g?g.indexOf(e.key)-g.indexOf(t.key):0)),t}),[e,b,r,o,d,g]),{onCheckHeader:f,onSortHeader:y}]};var g=r("GpFh"),y=r("szIg"),b=r("LaZo"),h=r("dMPp"),v=r("8lq6"),x=r("M3F1");const k=(e,t)=>e.localeCompare(t),S=(0,b.Z)(k),P=(e,t)=>+e-+t,T=(0,b.Z)(P),C=["size","notionalSize","liquidationPrice","marginRatio","margin","pnl"],M=(e,t)=>null===t||void 0===t?void 0:t[e],Z=()=>{const e=(0,l.iB)(),t=(0,y.useSelector)((e=>e.position.positionMap)),r=(0,x.ZP)(x.ME),{rankingKey:o,rankingType:n}=(0,y.useSelector)((e=>e.position.rankingInfo)),s=(0,i.useCallback)(((e,a,i=!1)=>{var o;return null===(o=M(e,i?r:t))||void 0===o?void 0:o[a]}),[r,t]),u=(0,i.useCallback)((r=>{const{symbol:i=""}=M(r,t)||{},o=null===e||void 0===e?void 0:e[i],{pair:n="",baseAsset:l="",quoteAsset:s=""}=o,c=(0,g.Z)(o,["pair","baseAsset","quoteAsset"]);return(0,a.Z)({symbolName:n||`${l}${s}`},c)}),[t,e]);return(0,i.useMemo)((()=>{const e=[],t=C.includes(o);return("entryPrice"===o||"markPrice"===o||t)&&("asc"===n?e.push(((e,r)=>T(s(e,o,t),s(r,o,t)))):"desc"===n&&e.push(((e,r)=>P(s(e,o,t),s(r,o,t))))),"symbol"===o&&"default"!==n&&("asc"===n?e.push(((e,t)=>S(u(e).symbolName,u(t).symbolName))):"desc"===n&&e.push(((e,t)=>k(u(e).symbolName,u(t).symbolName))),e.push(((e,t)=>{const{symbolName:r,contractType:a}=u(e),{symbolName:i,contractType:o}=u(t);return r!==i?0:P((0,h.Z)(a,c.IR),(0,h.Z)(o,c.IR))})),e.push(((e,t)=>P((0,h.Z)("positionSide",s(e,o)),(0,h.Z)("positionSide",s(t,o)))))),(0,v.Z)(e)}),[o,n,s,u])},w=()=>{const[e]=(0,l.z4)(),t=(0,y.useSelector)((e=>e.loading.effects.position.queryPosition)),r=(0,y.useSelector)((e=>e.position.apiError)),a=(0,y.useDispatch)(),o=(0,i.useCallback)((()=>{t||a.position.queryPosition({symbol:e})}),[t,a.position]);return(0,i.useMemo)((()=>({loading:t,apiError:r,onRefresh:o})),[t,r,o])}},M3F1:(e,t,r)=>{"use strict";r.d(t,{ME:()=>i,hZ:()=>o,ZP:()=>n});var a=r("7uiG");const i=e=>e.posCalcData,o=e=>e.setPosCalcData,n=a.Gt},ebof:(e,t,r)=>{"use strict";r.d(t,{A4:()=>_,Mx:()=>Q,Yq:()=>ee,PH:()=>B,jK:()=>Y,qU:()=>te,ek:()=>X,v_:()=>J,iA:()=>D,Mn:()=>K});var a=r("VM/Z"),i=r("5vwO"),o=r("szIg"),n=r("Y+MU"),l=r("0RPJ"),s=r("klBV"),c=r("EPGa"),u=r("SJeZ"),d=r("NRGp");const{calculation:{abacus:{future:{model:m,calculateUmLiquidationPriceForSingleAssetMode:p},model:f,base:g}}}=d.com,{KotlinArrayList:y}=g,b=m.FutureBalance,h=m.FutureBracket,v=m.RiskBracket,x=f.FuturePosition;var k=r("tN1Z"),S=r("nFk2");const P=(0,k._)((e=>Object.values(e).map((e=>{const{asset:t,marginAvailable:r,initialMargin:a,maintenanceMargin:i,marginBalance:o,unrealizedProfit:n,walletBalance:l,crossWalletBalance:s}=e;return new b(t,Boolean(r),String(a),String(i),String(o),String(n),String(l),String(s))}))));var T=r("4c8F");const C=(0,k._)((e=>{const t=[];return Object.entries(e).forEach((([e,r])=>{if("boolean"===typeof r)return;const a=r.map((e=>new v(e.bracketMaintenanceMarginRate,e.bracketNotionalCap,e.bracketNotionalFloor,e.bracketSeq,e.cumFastMaintenanceAmount,e.maxOpenPosLeverage,e.minOpenPosLeverage))),i=new h(e,a);t.push(i)})),t}));var M=r("eXOl"),Z=r("wdcV");function w(e,t){const{askNotional:r,bidNotional:a,collateral:i=(null===t||void 0===t?void 0:t.marginAsset)||"",cumRealized:o,entryPrice:n,id:l,leverage:s,notionalValue:c,positionSize:u,symbol:d,markPrice:m,unrealizedProfit:p,isolated:f,isolatedWallet:g,adl:y,positionSide:b}=e;return new x(String(r),String(a),i,String(o),String(n),l,s,String(c),String(u),d,String(m),String(p),f,String(g),y,b)}const I=(0,k._)(((e,t)=>(0,Z.J9)(e).map((e=>w(e,t[e.symbol])))));var E=r("M3F1"),N=r("FOuV"),A=r("IpC4"),R=r("GG68"),O=r("JlsY"),L=r("74Of");const{leverageInfo:V}=N.Fy,F={long:"buy",short:"sell"},D=({sideKey:e})=>{const t=(0,u.t2)(e,"symbol"),r=(0,u.t2)(e,"isolated"),a=(0,u.t2)(e,"isolatedWallet"),i=(0,u.t2)(e,"positionSize"),o=0===Number(i)&&r&&Number(a)<0,l=Number(i)>0?"long":"short",c=o?"liq":F[l],{leverageList:d={}}=(0,u.rf)()||{},m=d[t]||V.defaultVal,p=(0,s.iB)()[t],{getI18n:f}=(0,u.yk)();let g,y=t;return p&&(g=(0,n.H)(p,f),y=g.fullName),{color:c,symbolText:y,symbolName:g,leverage:m}},_=({sideKey:e})=>{const t=(0,u.t2)(e,"symbol"),r=(0,u.t2)(e,"entryPrice"),a=(0,s.iB)()[t]||{},{pricePrecision:i}=a;return{formatedEntryPrice:(0,l.uf)(r,i)}},B=({sideKey:e})=>{const t=(0,u.t2)(e,"symbol"),r=(0,u.t2)(e,"markPrice"),a=(0,s.iB)()[t]||{},{pricePrecision:i}=a;return{formatedMarkPrice:(0,l.uf)(r,i)}},z=({sideKey:e,columnKey:t=""})=>{const r=function(){const e=(0,S.s)();return P(e)}(),a=function(){const e=(0,T.G)();return C(e)}(),i=(()=>{const e=(0,o.useSelector)((e=>e.position.positionMap)),t=(0,M.Vh)();return I(e,t)})(),n=(e=>{const t=(0,o.useSelector)((e=>e.position.positionMap))[e],r=(0,M.Vh)();return t?w(t,r[t.symbol]):null})(e),c=(0,u.t2)(e,"symbol"),d=(0,E.ZP)(E.hZ),m=(0,s.iB)()[c]||{},{pricePrecision:f}=m;let g=0;const y=(0,o.useSelector)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),b=(0,o.useSelector)((e=>e.loading.effects.preference.getAssetMode));y||b||!n||(g=((...e)=>{let t=0;try{t=p(...e)}catch(r){console.log(r)}return t})(n,i,r,a));const h=g>0?(0,l.uf)(g,f):"-";return t&&d(e,t,g),{liquidationPrice:g,formatedLiqPrice:h}},K=({sideKey:e})=>{var t,r;const a=(0,u.t2)(e,"symbol"),i=(0,u.t2)(e,"positionSize"),o=(0,u.t2)(e,"positionSide"),n=(0,s.iB)()[a]||{},{pricePrecision:d}=n,{preOrders:m}=(0,s.E)(),p=Number(i),f={};m.forEach((e=>{const t=!0===e.closePosition,r=a===e.symbol,i=o===e.positionSide,n=p<0&&"BUY"===e.side||p>0&&"SELL"===e.side;t&&r&&i&&n&&(e.type===c.Jm.TAKE_PROFIT_MARKET&&(f.tp=e),e.type===c.Jm.STOP_MARKET&&(f.sl=e))}));const g=null!==f&&void 0!==f&&null!==(t=f.tp)&&void 0!==t&&t.stopPrice?(0,l.uf)(f.tp.stopPrice,d):"--",y=null!==f&&void 0!==f&&null!==(r=f.sl)&&void 0!==r&&r.stopPrice?(0,l.uf)(f.sl.stopPrice,d):"--";return{strategyOrders:f,formatedTPPrice:g,formatedSLPrice:y}};var q=r("Tfqf"),U=r("H3aL"),W=r("DCTW");const{leverageInfo:H}=N.Fy,$={long:"buy",short:"sell"},j=()=>{const e=(0,u.F)(),t=(0,s.iB)()||{};return e.map((e=>{var r;return(0,i.Z)((0,i.Z)({},e),{},{contractVal:null===(r=t[e.symbol])||void 0===r?void 0:r.contractVal})}))},G=(0,a.nM)(),J=e=>G?(({sideKey:e,columnKey:t=""})=>{const{getI18n:r}=(0,u.yk)(),a=(0,u.t2)(e,"symbol"),i=(0,u.t2)(e,"isolated"),o=(0,u.t2)(e,"isolatedWallet"),n=(0,u.t2)(e,"positionSize"),c=(0,u.cO)(e)||{},{lastPrice:d}=(0,u.zZ)({symbol:null===c||void 0===c?void 0:c.symbol}),m=(0,E.ZP)(E.hZ),p=Number(n),f=p>0?"long":"short",g=0===p&&i&&Number(o)<0?"liq":$[f],y=(0,s.iB)()[a]||{},{quantityPrecision:b,marginAsset:h="",equalQtyPrecision:v,contractVal:x=100}=y,{isCoinUnit:k}=(0,q.Q)(),S=p>0?"":"-",P=k?(0,U.unitChangeCoinQty)({quantity:Math.abs(p),contractVal:x,price:d,precision:v,format:!1}):p.toFixed(b),T=k?`${S}${P}`:(0,l.uf)(p,b),C=k?h:r("Cont",{defaultValue:"Cont"});return t&&m(e,t,Math.abs(k?Number(P):p)),{color:g,quantityAmount:P,formatedQuantityAmount:T,unit:C}})(e):(({sideKey:e,columnKey:t=""})=>{const r=(0,u.t2)(e,"symbol"),a=(0,u.t2)(e,"isolated"),i=(0,u.t2)(e,"isolatedWallet"),o=(0,u.t2)(e,"positionSize"),n=(0,u.cO)(e)||{},{lastPrice:c}=(0,u.zZ)({symbol:null===n||void 0===n?void 0:n.symbol}),d=(0,E.ZP)(E.hZ),m=Number(o),p=m>0?"long":"short",f=0===m&&a&&Number(i)<0?"liq":F[p],g=(0,s.iB)()[r]||{},{baseAsset:y="",pricePrecision:b=2,quantityPrecision:h=8,marginAsset:v=""}=g,{isCoinUnit:x}=(0,A.Q)(),k=m>0?"":"-",S=x?m.toFixed(h):(0,R.WA)({quantity:Math.abs(m),price:c,precision:b,format:!1}),P=x?(0,l.uf)(m,h):`${k}${S}`,T=x?y:v;return t&&d(e,t,Math.abs(x?m:Number(S))),{color:f,quantityAmount:S,formatedQuantityAmount:P,unit:T}})(e),Y=e=>G?(({sideKey:e,columnKey:t=""})=>{const r=(0,u.t2)(e,"symbol"),a=(0,u.t2)(e,"positionSize"),i=(0,E.ZP)(E.hZ),o=(0,s.iB)()[r]||{},{contractVal:n}=o,c=Math.abs(a)*Number(n),d=n?(0,l.uf)(c,2):"-";return t&&i(e,t,c),{notionalSize:c,formattedNotionalSize:d,unit:"USD"}})(e):(({sideKey:e,columnKey:t=""})=>{const r=(0,u.t2)(e,"symbol"),a=(0,u.t2)(e,"positionSize"),i=(0,u.t2)(e,"markPrice"),o=(0,E.ZP)(E.hZ),n=(0,s.iB)()[r]||{},{quoteAsset:c=""}=n,d=Math.abs(a)*i,m=(0,l.uf)(d,2);return t&&o(e,t,d),{notionalSize:d,formattedNotionalSize:m,unit:c}})(e),Q=e=>G?(({sideKey:e,columnKey:t=""})=>{const r=(0,u.KQ)(),a=(0,u.Gf)(),o=j(),n=(0,u.cO)(e)||{},c=(0,E.ZP)(E.hZ),{symbol:d,isolated:m,isolatedWallet:p=0,positionSide:f}=n,g=(0,s.iB)()[d]||{},{marginAsset:y,pricePrecision:b,contractVal:h}=g,v=(0,i.Z)((0,i.Z)({},n),{},{contractVal:h}),x=r[y]||{},{crossWalletBalance:k=0}=x,S=(null===a||void 0===a?void 0:a[d])||[],P=!m&&f&&"BOTH"!==f,T=m?p:k;let C=0;if(!m){const e=o.filter((e=>e.marginAsset===y)).filter((e=>!(null!==e&&void 0!==e&&e.isolated))).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==d));C=(0,W.zW)(e,a)-(0,W.ot)(e)}let M,Z,w=0;if(P){const e=o.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===d&&"BOTH"!==r&&r!==f}))[0]||{positionSize:0,entryPrice:0};M="LONG"===f?v:e,Z="SHORT"===f?v:e}w=P&&M.positionSize&&Z.positionSize?(0,W.ST)(S,T,C,M,Z,v):(0,W.W8)(S,T,C,v),w=w<0?0:w;const I=w>0?(0,l.uf)(w,b):"-";return t&&c(e,t,w),{liquidationPrice:w,formatedLiqPrice:I}})(e):z(e),X=e=>G?(({sideKey:e,columnKey:t=""})=>{const r=(0,u.KQ)(),a=(0,u.Gf)(),o=j(),n=(0,u.cO)(e)||{},{symbol:l,isolated:c}=n,d=(0,s.iB)()[l]||{},m=(0,E.ZP)(E.hZ),{marginAsset:p,contractVal:f}=d;let g;if(c){const{isolatedWallet:e=0,symbol:t}=n,r=(null===a||void 0===a?void 0:a[t])||[],o=(0,W.SH)(r,(0,i.Z)((0,i.Z)({},n),{},{contractVal:f})),l=(0,W.nn)((0,i.Z)((0,i.Z)({},n),{},{contractVal:f}));g=(0,W.Vo)(o,e,l)}else{const e=r[p]||{},{crossWalletBalance:t=0}=e,i=o.filter((e=>e.marginAsset===p)).filter((e=>!(null!==e&&void 0!==e&&e.isolated))),n=(0,W.zW)(i,a),l=(0,W.ot)(i);g=(0,W.Vo)(n,t,l)}const y=Number(g)>80?"negative":"";return t&&m(e,t,Number(g)),{ratioColor:y,riskRatio:g}})(e):(({sideKey:e,columnKey:t=""})=>{const r=(0,u.KQ)(),a=(0,u.Gf)(),i=(0,u.F)(),n=(0,u.cO)(e)||{},{symbol:l,isolated:c}=n,d=(0,s.iB)()[l]||{},m=(0,E.ZP)(E.hZ),{marginAsset:p}=d;let f;if(c){const{isolatedWallet:e=0,symbol:t}=n,r=(null===a||void 0===a?void 0:a[t])||[],i=(0,L.SH)(r,n),o=(0,L.nn)(n);f=(0,L.Vo)(i,e,o)}else{const e=r[p]||{},{crossWalletBalance:t=0}=e,o=i.filter((e=>e.marginAsset===p)).filter((e=>!(null!==e&&void 0!==e&&e.isolated))),n=(0,L.zW)(o,a),l=(0,L.ot)(o);f=(0,L.Vo)(n,t,l)}const g=(0,o.useSelector)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),y=(0,o.useSelector)((e=>e.loading.effects.preference.getAssetMode));(g||y)&&(f="0.00");const b=Number(f)>80?"negative":"";return t&&m(e,t,Number(f)),{ratioColor:b,riskRatio:f}})(e),ee=e=>G?(({sideKey:e,columnKey:t=""})=>{const r=(0,O.c)(),a=(0,u.cO)(e)||{},i=(0,E.ZP)(E.hZ),{symbol:o,isolated:n,isolatedWallet:c=0,positionSize:d,markPrice:m}=a,{leverageList:p={}}=(0,u.rf)()||{},f=p[o]||H.defaultVal,g=(0,s.iB)()[o]||{},{marginAsset:y="",contractVal:b=100}=g,h=(0,W.fS)({positionSize:d,markPrice:m,contractVal:b})*(0,W.yh)(f),v=n?c:h,x=`${(0,l.GW)(v,r,!0)} ${y}`;return t&&i(e,t,v),{margin:v,formatedMargin:x}})(e):(({sideKey:e,columnKey:t=""})=>{const r=(0,O.c)(),a=(0,u.cO)(e)||{},i=(0,E.ZP)(E.hZ),{symbol:o,isolated:n,isolatedWallet:c=0}=a,{leverageList:d={}}=(0,u.rf)()||{},m=d[o]||V.defaultVal,p=(0,s.iB)()[o]||{},{marginAsset:f=""}=p,g=(0,L.fS)(a)*(0,L.yh)(m),y=n?c:g,b=`${(0,l.uf)(y,r)} ${f}`;return t&&i(e,t,y),{margin:y,formatedMargin:b}})(e),te=e=>G?(({sideKey:e,columnKey:t=""})=>{const{useLastPrice:r}=(0,u.F7)(),a=(0,O.c)(),o=(0,u.cO)(e)||{},n=(0,E.ZP)(E.hZ),{symbol:c,positionSize:d,markPrice:m}=o,{leverageList:p={}}=(0,u.rf)()||{},f=p[c]||H.defaultVal,{lastPrice:g}=(0,u.zZ)({symbol:c}),y=(0,s.iB)()[c]||{},{marginAsset:b="",contractVal:h=100}=y,v=(0,W.fS)({positionSize:d,markPrice:m,contractVal:h})*(0,W.yh)(f),x=(0,W.nn)((0,i.Z)((0,i.Z)({},o),{},{contractVal:h,lastPrice:g}),r),k=0===Number(x)?"":Number(x)>0?"buy":"sell",S=0===Number(x)?"":Number(x)>0?"+":"",P=`${S}${(0,l.GW)(x,a,!0)} ${b} `,T=100*(x/v||0),C=`${S}${T.toFixed(2)}%`;return t&&n(e,t,T),{unrealizedPnl:x,formatedPnl:P,pnlColor:k,ROEVal:C}})(e):(({sideKey:e,columnKey:t=""})=>{const{useLastPrice:r}=(0,u.F7)(),a=(0,O.c)(),o=(0,u.cO)(e)||{},n=(0,E.ZP)(E.hZ),{leverageList:c={}}=(0,u.rf)()||{},d=c[null===o||void 0===o?void 0:o.symbol]||V.defaultVal,{lastPrice:m}=(0,u.zZ)({symbol:null===o||void 0===o?void 0:o.symbol}),p=(0,s.iB)()[null===o||void 0===o?void 0:o.symbol]||{},{marginAsset:f=""}=p,g=(0,L.fS)(o)*(0,L.yh)(d),y=(0,L.nn)((0,i.Z)((0,i.Z)({},o),{},{lastPrice:m}),r),b=0===Number(y)?"":Number(y)>0?"buy":"sell",h=Number(y)>0?"+":"",v=`${h}${(0,l.GW)(y,a,!0)} ${f}`,x=100*(y/g||0),k=`${h}${x.toFixed(2)}%`;return t&&n(e,t,x),{unrealizedPnl:y,formatedPnl:v,pnlColor:b,ROEVal:k}})(e)},LwXq:(e,t,r)=>{"use strict";r.d(t,{F:()=>n});var a=r("/SIk"),i=r("SJeZ"),o=r("lbaD");function n({symbol:e,quantity:t,isBuy:r,entryPrice:n=0,closedPrice:l=0,contractVal:s=100,isDelivery:c}){const u=(0,i.Wr)({symbol:e,isDelivery:c}),{askPrice:d=0,bidPrice:m=0}=u;return(0,a.useMemo)((()=>(0,o.k)({quantity:t,isBuy:r,entryPrice:n,closedPrice:l,contractVal:s,isDelivery:c,askPrice:d,bidPrice:m})),[d,m,l,s,n,r,c,t])}},Sdhy:(e,t,r)=>{"use strict";r.d(t,{e:()=>u,U:()=>d});var a=r("0RPJ"),i=r("klBV"),o=r("wdcV"),n=r("SJeZ"),l=r("M3F1"),s=r("74Of"),c=r("H8fa");const u=({sideKey:e,columnKey:t=""})=>{const r=(0,n.KQ)(),u=(0,n.Gf)(),d=(0,n.F)(),m=(0,n.cO)(e)||{},p=(0,l.ZP)(l.hZ),{symbol:f,positionSide:g}=m,y=(0,i.iB)()[f]||{},{marginAsset:b,pricePrecision:h}=y,v=r[b]||{},{crossWalletBalance:x=0}=v,k=(null===u||void 0===u?void 0:u[f])||[],{assetsRateEquity:S,assetsMM:P}=(0,n.Nx)(),T=(0,n.G8)(),C=T[b]||{},M=((0,o.L6)(d)[b]||[]).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==f)),Z=(0,s.zW)(M,u),w=(0,s.ot)(M);let I=0;Object.entries(S).forEach((([e,t])=>{e!==b&&(I+=t)})),Object.entries(P).forEach((([e,t])=>{const r=T[e]||{},{askRate:a=0}=r;I-=e!==b?t*a:Z*a}));let E=0;if(g&&"BOTH"!==g){const e=d.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===f&&"BOTH"!==r&&r!==g}))[0]||{positionSize:0,entryPrice:0},t="LONG"===g?m:e,r="SHORT"===g?m:e;E=(0,c._O)({accEquityAndMMs:I,assetIndex:C,bracket:k,crossWalletBalance:x,smdsUPNL:w,longPosition:t,shortPosition:r,curPosition:m})}else E=(0,c.Dj)({accEquityAndMMs:I,assetIndex:C,bracket:k,crossWalletBalance:x,smdsUPNL:w,curPosition:m});const N=E>0?(0,a.uf)(E,h):"-";return t&&p(e,t,E),{liquidationPrice:E,formatedLiqPrice:N}},d=({sideKey:e,columnKey:t=""})=>{const r=(0,l.ZP)(l.hZ),{riskRatio:a}=(0,n.Nx)(),i=Number(a)>80?"negative":"";return t&&r(e,t,Number(a)),{ratioColor:i,riskRatio:a}}},"9am+":(e,t,r)=>{"use strict";r.d(t,{l:()=>s});var a=r("/SIk"),i=r("szIg"),o=r("SJeZ"),n=r("VM/Z"),l=r("IOB8");const s=()=>{const{0:e,1:t}=(0,a.useState)(!1),r=(0,i.useDispatch)(),s=(0,n.nM)(),{isError:c}=(0,i.useSelector)(l.Y),u=(0,o.Kc)("isError"),d=c||u,m=(0,a.useCallback)((async()=>{if(!e){t(!0);try{await r.balance.getBalance(s),await r.bracket.getBrackets()}catch(a){t(!1)}t(!1)}}),[r.balance,r.bracket,s,e]);return(0,a.useMemo)((()=>({showLiqRefresh:d,handleLiqRefresh:m})),[m,d])}},HIvd:(e,t,r)=>{"use strict";r.d(t,{Z:()=>nt});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("uZih"),s=r.n(l),c=r("m92i"),u=r("JWru"),d=r("U36K"),m=r("ka4r"),p=r("klBV"),f=r("6Afj"),g=r("VM/Z"),y=r("ckLu"),b=r("EPGa"),h=r("Wx6g"),v=r("FOuV"),x=r("SJeZ"),k=r("3ZO7"),S=r("lbaD"),P=r("k/nb"),T=r("B+lg"),C=o().createElement;const M=({visible:e,position:t,onClose:r})=>{const{sideKey:o,closeParams:l={},onConfirm:s}=t,{getI18n:c}=(0,x.yk)(),{orderConfirmation:u}=(0,x.F7)(),d=(0,n.useDispatch)(),m=(0,x.t2)(o,"symbol"),f=(0,x.t2)(o,"positionSize"),g=(0,x.t2)(o,"entryPrice"),{orderType:y,limitPrice:h,qty:v,quantity:M}=l,Z=(0,p.iB)()[m]||{},{isDelivery:w}=(0,i.useContext)(P.Z),I=f>0?"SELL":"BUY",E="BUY"===I?"buy":"sell",N=c(f>0?"CloseLong":"CloseShort"),A=y===b.Jm.MARKET,{contractVal:R}=Z,{0:O,1:L}=(0,i.useState)(0);(0,i.useEffect)((()=>{if(e){(w?k.u:k.x)(m).then(((e={})=>{const{marketPNL:t,limitPNL:r}=(0,S.k)((0,a.Z)((0,a.Z)({},e),{},{quantity:M,isBuy:f>0,entryPrice:g,closedPrice:h,contractVal:R,isDelivery:w}));L(A?t:r)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}}),[R,g,w,A,h,f,M,m,e]);const V=(0,i.useCallback)((()=>{const e=(0,a.Z)((0,a.Z)({},u),{},{[y.toUpperCase()]:!1});d.preference.changeOrderConfirmation(e)}),[d.preference,u,y]);return C(T.Z,{symbol:m,title:N,color:E,isMarket:A,limitPrice:h,qty:v,isClose:!0,epnl:O,onClose:r,onConfirm:s,closeTip:V,orderSide:I})},Z=o().memo(M);var w=r("Oci4"),I=r("/yzf"),E=r("XVzo"),N=r("ydHf"),A=r("XDgS"),R=r("0ExJ"),O=r("shek"),L=r("JlsY"),V=r("w7Tp"),F=r("P3ur"),D=r("PYOp"),_=r("V9FD"),B=r("k4WF"),z=r("k2tD"),K=o().createElement;const q=({type:e,setType:t,maxAppend:r,maxRemovable:a,amount:o,setAmount:n,onConfirm:l,marginAsset:s})=>{const{getI18n:c}=(0,O.Z)(),{getI18n:u}=(0,x.yk)(),d=(0,L.c)(),m=(0,z.nH)(d),p="ADD"===e?u("maxAddable",{defaultValue:"Max addable"}):u("maxRemovable",{defaultValue:"Max removable"}),f="ADD"===e?r:a,g=`${c("amount",{defaultValue:"Amount"})}(${s})`,y=K(V.Z,{as:"span"},p,K(I.Z,{as:"span",color:"t.primary"},"\xa0",(0,z.GW)(f,d,!0),"\xa0",s)),b=(0,z.GW)(f,d,!1),h=Number(o)>Number(b),v=(0,i.useMemo)((()=>[{value:"ADD",text:u("add",{defaultValue:"Add"})},{value:"REMOVE",text:u("remove",{defaultValue:"Remove"})}]),[u]),k=K(V.Z,{sx:{position:"relative"}},K(V.Z,{bg:"line",width:"1px",height:"24px",sx:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"}}),K(V.Z,{width:"120px"},K(F.Z,{hideSearch:!0,variant:"clear",size:"lg",value:e,renderValue:e=>{const t=v.find((t=>t.value===e));if(t)return K(I.Z,{as:"span"},t.text)},onChange:e=>t(e)},v.map(((e,t)=>K(D.W,{key:t,value:e.value},e.text)))))),S=K(E.Z,{variant:"quiet",onClick:()=>n(b)},c("Max",{defaultValue:"Max"}));return K(_.Z,{variant:"filled",type:"number",label:g,extraInfo:y,prefix:k,suffix:S,step:m,value:o,error:h,onChange:e=>(0,B._p)(e,n,"",d),onKeyDown:e=>(0,B.f5)(e,l),onBlur:e=>(0,B.Y5)(e)})};var U=r("0hOy"),W=r("j4Sa"),H=r("fi7b"),$=r("QlFx"),j=r("rdEq"),G=o().createElement;const J=({label:e="",labelSuffix:t="",value:r="",unit:a="",labelClassName:i="",valueClassName:o="",className:n=""})=>G("div",{className:`field ${n}`},G("div",{className:`label ${i}`},e,t),G("div",{className:`value ${o}`},r," ",a)),Y=({children:e})=>G(V.Z,{sx:{width:"282px",fontSize:"12px",lineHeight:"16px",fontFamily:"BinancePlex"}},e),Q=({panelType:e,data:t})=>{const r=(0,p.tZ)(),{t:a}=(0,x.$G)(),{getI18n:i}=(0,x.yk)(),{symbol:o,isolatedWallet:n,maxAppend:l,maxRemovable:s,liquidationPrice:c,quoteAsset:u,marginAsset:d="USDT",pricePrecision:m}=t,f=(0,L.c)(),g=G(U.Z,{sx:{color:"t.yellow"},href:`/${r}/support/faq/360038447311`,target:"_blank"});return"ADD"===e?(()=>{const e=`${i("currentlyMarginFor",{defaultValue:"Currently Margin for"})} ${(0,$.lE)(o,i)}`,t=(0,z.GW)(n,f,!0),r=i("maxAddable",{defaultValue:"Max addable"}),s=`${(0,z.GW)(l,f,!0)}`,p=G(j.m,{tip:G(Y,null,G(H.c,{t:a,i18nKey:(0,x.Gv)("maxAddableTip"),components:{jump:g},defaults:"Isolated position max addable amount is different from the available for order amount. More details are available on the <jump>Isolated transferrable margin calculations</jump>."})),hideUnderLine:!0,sx:{verticalAlign:"middle"},delay:1e3,placement:"top",arrow:!0},G(W.Z,{ml:"4px",size:16})),y=i("liqPriceAfterAdujst",{defaultValue:"Liq. Price after increase"}),b=c?(0,z.GW)(c,m,!0):"-";return G(V.Z,{mt:"md"},G(J,{label:e,value:t,unit:d}),G(J,{label:r,labelSuffix:p,value:s,unit:d}),G(J,{label:y,value:b,unit:u}))})():(()=>{const e=i("assignedMargin",{defaultValue:"Currently Assigned Margin"}),t=(0,z.GW)(n,f,!0),r=i("maxRemovable",{defaultValue:"Max removable"}),o=(0,z.GW)(s,f,!0),l=G(j.m,{tip:G(Y,null,G(H.c,{t:a,i18nKey:(0,x.Gv)("maxRemovableTip"),components:{jump:g},defaults:"Unrealized profit cannot be transferred from the isolated position. More details are available on <jump>Isolated transferrable margin calculations</jump>."})),hideUnderLine:!0,sx:{verticalAlign:"middle"},delay:1e3,placement:"top",arrow:!0},G(W.Z,{ml:"4px",size:16})),p=i("liqPriceAfterReduction",{defaultValue:"Liquidation Price after reduction"}),y=c?(0,z.GW)(c,m,!0):"-";return G(V.Z,{mt:"md"},G(J,{label:e,value:t,unit:d}),G(J,{label:r,labelSuffix:l,value:o,unit:d}),G(J,{label:p,value:y,unit:u}))})()},X=o().memo(Q);var ee=o().createElement;const te={position:"relative",padding:"0px 24px 24px 24px",width:["calc(100vw - 32px)","384px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{fontSize:"20px",height:"64px",py:"20px",color:"t.primary"},".field":{fontFamily:"Binance PLEX",display:"flex",justifyContent:"space-between",mt:"12px",letterSpacing:"0.16px",fontSize:"14px",lineHeight:"20px",fontWeight:"normal",minHeight:"20px",".label":{color:"t.third",flex:"auto"},".value":{color:"t.primary",textAlign:"right",flex:"none"}}},re={ADD:1,REMOVE:2},ae=({visible:e,position:t,onClose:r})=>{var o;const{enqueueNotification:n}=(0,A.Z)(),{sideKey:l}=t,{getI18n:s}=(0,O.Z)(),{getI18n:c}=(0,x.yk)(),u=(0,x.G3)(),{0:d,1:m}=(0,i.useState)("ADD"),{0:f,1:g}=(0,i.useState)(""),y="ADD"===d?Number(f):-Number(f),b=(0,x.t2)(l,"symbol"),h=(0,x.t2)(l,"positionSide"),v=(null===(o=(0,p.iB)())||void 0===o?void 0:o[b])||{},{marginAsset:k="",contractVal:S=100}=v,P=(0,i.useMemo)((()=>u?{symbol:b,marginAsset:k,contractVal:S,positionSide:h}:{symbol:b,marginAsset:k,positionSide:h}),[u,b,k,S,h]);(0,i.useEffect)((()=>{l||g("")}),[l]);const T=(0,x.Qd)((0,a.Z)((0,a.Z)({},P),{},{delta:y})),C=async()=>{if(!f)return;const e={type:re[d],symbol:b,amount:f,positionSide:h};(0,R.c)(e,{}).then((e=>{const{success:t}=e;t&&n({message:c("changeMarginSuccess",{defaultValue:"Position margin adjustment failed"}),variant:"success"})})).catch((()=>{})).finally((()=>r())).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))};return ee(w.Z,{visible:!!l&&e,sx:te,onMaskClick:()=>r()},ee(I.Z,{variant:"title6",className:"title"},s("adjust-margin",{defaultValue:"Adjust Margin"})),ee(N.Z,{color:"t.third",sx:{position:"absolute",top:"20px",right:"24px",cursor:"pointer"},onClick:r}),ee(q,{type:d,setType:m,maxAppend:T.maxAppend,maxRemovable:T.maxRemovable,amount:f,setAmount:g,onConfirm:C,marginAsset:k}),ee(X,{panelType:d,data:T}),ee(E.Z,{sz:"l",mt:"24px",width:1,onClick:C},c("confirmBtn",{defaultValue:"Confirm"})))},ie=o().memo(ae);var oe=r("MwrP"),ne=r.n(oe),le=r("NQFm"),se=r("xpNn"),ce=r("ebof"),ue=o().createElement;const de=({label:e,children:t})=>ue(m.Z,{sx:{justifyContent:"space-between",fontSize:"14px",lineHeight:"16px",height:"24px",alignItems:"center"}},ue(I.Z,{color:"t.third"},e),ue(m.Z,null,t)),me=o().memo(de);var pe=o().createElement;const fe=({sideKey:e})=>{const{getI18n:t}=(0,O.Z)(),{symbolText:r,leverage:a}=(0,ce.iA)({sideKey:e}),i=(0,x.t2)(e,"positionSize"),o=(0,x.t2)(e,"positionSide"),n=i>0?"buy":"sell";let l="";return"LONG"===o?l=t("psLong",{defaultValue:"Long"}):"SHORT"===o&&(l=t("psShort",{defaultValue:"Short"})),pe(me,{label:t("symbol",{defaultValue:"Symbol"})},pe(I.Z,{color:n},r," ",l," ",a,"x"))},ge=o().memo(fe);var ye=o().createElement;const be=({sideKey:e,quoteAsset:t})=>{const{getI18n:r}=(0,O.Z)(),{formatedEntryPrice:a}=(0,ce.A4)({sideKey:e});return ye(me,{label:r("entryPrice",{defaultValue:"Entry Price"})},ye(I.Z,{sx:{color:"t.primary"}},a," ",t))},he=o().memo(be);var ve=o().createElement;const xe=({sideKey:e,quoteAsset:t})=>{const{getI18n:r}=(0,O.Z)(),{formatedMarkPrice:a}=(0,ce.PH)({sideKey:e});return ve(me,{label:r("markPrice",{defaultValue:"Mark Price"})},ve(I.Z,{sx:{color:"t.primary"}},a," ",t))},ke=o().memo(xe);var Se=r("wGPX"),Pe=r("O94r"),Te=r.n(Pe),Ce=r("4wBm"),Me=r("RkbI"),Ze=r("0RPJ"),we=r("8uyB"),Ie=r("jQmP"),Ee=r("7Q68");var Ne=o().createElement;const{LAST_PRICE:Ae}=v.gu,{TAKE_PROFIT_MARKET:Re,STOP_MARKET:Oe}=b.Jm,Le=o().memo((({i18nType:e,stopIndex:t})=>{const{getI18n:r}=(0,x.yk)();return Ne(m.Z,{alignItems:"center",color:"t.third",pl:"8px"},e,"QUOTE"!==t&&Ne(j.m,{tip:r("roe-stop-tip")},Ne(Ce.Z,{size:16,ml:"4px"})))})),Ve={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",".filter-option":{padding:"10px 16px",color:"t.primary","&:hover":{bg:"line"},"&.active":{color:"t.yellow"},fontSize:"14px"}},Fe=o().memo((({quoteAsset:e,stopIndex:t,changeStopIndex:r})=>{var a;const{getI18n:i}=(0,x.yk)(),o=[{label:e,value:"QUOTE"},{label:`%${i("calculate-ROE")}`,value:"ROE"}];return Ne(Se.ZP,{trigger:"hover",overlay:Ne(V.Z,{sx:Ve},o.map((({label:e,value:a})=>Ne("div",{className:Te()({"filter-option":!0,active:a===t}),key:a,onClick:()=>{a!==t&&r(a)}},e))))},Ne(m.Z,{alignItems:"center",color:"t.third"},null===(a=o.find((e=>e.value===t)))||void 0===a?void 0:a.label,Ne(Me.Z,{ml:"4px",color:"t.third",size:16})))})),De=({sideKey:e,order:t,type:r,cancelOrder:a,price:o,changePrice:n,workingType:l,changeWorkingType:s})=>{var c;const{getI18n:u}=(0,O.Z)(),{getI18n:d}=(0,x.yk)(),f=(0,L.c)(),g=(0,x.t2)(e,"symbol"),y=Number((0,x.t2)(e,"positionSize")),b=(0,x.NJ)(g),h=y>0?1:-1,v=(0,x.t2)(e,"entryPrice"),k=(null===(c=(0,p.iB)())||void 0===c?void 0:c[g])||{},{quoteAsset:S,marginAsset:T="",tickSize:C,pricePrecision:M,contractVal:Z=100}=k,w=t?t.workingType:l,E=t?t.stopPrice:o,{isDelivery:N}=(0,i.useContext)(P.Z),A=(0,Ie.p)(C),R=C,F=(0,Ze.uf)(E,M),D=u(w===Ae?"lastPrice":"markPrice"),B=Ne(H.c,{i18nKey:(0,O.G)("takeProfitNodeTip"),defaults:"When <text>{{workingType}}</text> reaches <text>{{stopPrice}}</text>, it will trigger Take Profit Market order to close this position. Estimated PNL will be",values:{workingType:D,stopPrice:F},components:{text:Ne(I.Z,{as:"span",color:"t.primary"})}}),z=Ne(H.c,{i18nKey:(0,O.G)("stopLossNodeTip"),defaults:"When <text>{{workingType}}</text> reaches <text>{{stopPrice}}</text>, it will trigger Stop Market order to close this position. Estimated PNL will be",values:{workingType:D,stopPrice:F},components:{text:Ne(I.Z,{as:"span",color:"t.primary"})}}),K=u("takeProfit"===r?"takeProfit":"stopLoss"),q="takeProfit"===r?B:z,U=t&&(y>0&&t.type===Re||y<0&&t.type===Oe)?">=":"<=";let W="\u2014\u2014",$="takeProfit"===r?"buy":"sell",j="";if(""!==E){const e=(({stopPrice:e,entryPrice:t,positionSize:r,contractVal:a,isDelivery:i})=>i?r*a*(1/t-1/e):r*(e-t))({stopPrice:Number(E),entryPrice:v,positionSize:y,contractVal:Z,isDelivery:N});Number.isFinite(e)&&(W=(0,Ze.uf)(e,f)),$=e>0?"buy":"sell",j=e>0?"buy":e<0?"sell":""}const{0:G,1:J}=(0,i.useState)("QUOTE"),{0:Y,1:Q}=(0,i.useState)(""),X=(0,i.useCallback)((e=>{J(e),Q(""),n("")}),[]),ee="QUOTE"===G?o:Y,te=(0,i.useCallback)((e=>/[^\d|.|,|\u3002|e]/.test(e.key)&&e.preventDefault()),[]),re=(0,i.useCallback)((e=>{if("QUOTE"===G)(0,we._p)(e,n,"",A);else{const t=(0,Ze.GW)(Math.abs(e.target.value),2),a="takeProfit"===r?Number(t):-Number(t),i=(({roe:e,entryPrice:t,side:r,leverage:a,isDelivery:i})=>i?t*e/100/(r*a)+t:t*r*a/(r*a-e/100))({roe:a,entryPrice:v,side:h,leverage:b,isDelivery:N});Q(a?String(a):""),n(i.toFixed(A))}}),[G,n,A,r,v,h,b,N]),ae=(0,i.useCallback)((()=>!!t&&a(t,r)),[a,t,r]),ie="ROE"===G&&(({type:e,side:t,roe:r,leverage:a,isDelivery:i})=>!i&&"takeProfit"===e&&1===t&&r/100>=a||!i&&"takeProfit"!==e&&-1===t&&r/100<=-a||!!(i&&"takeProfit"===e&&-1===t&&r/100>=a)||!!(i&&"takeProfit"!==e&&1===t&&r/100<=-a))({type:r,side:h,roe:Number(Y),leverage:b,isDelivery:N}),oe="takeProfit"===r?d("less-than-reo",{defaultValue:"The ROE% must be less than {{leveragedRoe}}%",leveragedRoe:100*b}):d("greater-than-reo",{defaultValue:"The ROE% must be greater than {{leveragedRoe}}%",leveragedRoe:-100*b});return Ne(V.Z,{py:"16px"},ne()(t)?Ne(m.Z,null,Ne(_.Z,{type:"number",step:"QUOTE"===G?R:.01,variant:"filled",textAlign:"right",prefix:Ne(Le,{i18nType:K,stopIndex:G}),placeholder:Number(0).toFixed(M),suffix:Ne(Fe,{stopIndex:G,changeStopIndex:X,quoteAsset:S}),value:ee,error:ie,onKeyPress:te,onChange:re,size:"md",boxProps:{sx:{flex:"auto",input:{pr:0}}}}),Ne(Ee.Z,{workingType:l,changeWorkingType:s})):Ne(me,{label:K},Ne(m.Z,{justifyContent:"end"},Ne(I.Z,{color:"t.primary"},`${D} ${U} ${F} ${S}`),Ne(I.Z,{sx:{ml:"sm",cursor:"pointer",color:"t.yellow200","&:hover":{color:"t.yellow300"}},onClick:ae},u("cancel")))),ie?Ne(V.Z,{sx:{mt:"xs",color:"sell",minHeight:"40px"}},oe):Ne(V.Z,{sx:{mt:"xs",width:"100%",fontSize:"12px",lineHeight:"20px",color:"t.third"}},q,Ne(I.Z,{as:"span",color:j}," ",W," ",T)))},_e=o().memo(De);var Be=o().createElement;const{MARK_PRICE:ze}=v.gu,{TAKE_PROFIT_MARKET:Ke,STOP_MARKET:qe}=b.Jm,Ue={position:"relative",padding:"20px 24px 24px 24px",width:["100%","464px"],height:["100%","auto"],maxHeight:["100%","600px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{fontSize:["16px","20px"],pb:"16px",color:"t.primary"},".info-block":{mt:"8px",".tpsl-max-qty-tip":{color:"t.primary",lineHeight:"20px",fontSize:"14px",".learn-more":{cursor:"pointer"}},".line":{height:"1px",bg:"line"}},".tpsl-tip":{color:"t.secondary",mt:"xs",fontSize:"12px"},".footer":{mt:"24px",display:"flex",position:["absolute","static"],bottom:["24px",null],width:["calc(100% - 48px)","100%"]}},We=({visible:e,position:t,onClose:r})=>{var a;const{sideKey:n=""}=t,l=(0,x.G3)(),{actionTpslConfirmModal:s}=(0,i.useContext)(P.Z),m=(0,x.t2)(n,"symbol"),f=(0,x.t2)(n,"positionSize"),g=(0,x.t2)(n,"positionSide"),h=(0,p.iB)()[m]||{},{quoteAsset:v,filters:k}=h,S=null===(a=k.find(le.vr))||void 0===a?void 0:a.maxQty,{strategyOrders:T}=(0,ce.Mn)({sideKey:n}),[C]=(0,x.kN)(),{0:M,1:Z}=(0,i.useState)(T.tp),{0:A,1:R}=(0,i.useState)(T.sl),{0:L,1:V}=(0,i.useState)(""),{0:F,1:D}=(0,i.useState)(ze),{0:_,1:B}=(0,i.useState)(""),{0:z,1:K}=(0,i.useState)(ze);(0,i.useEffect)((()=>{e&&(Z(T.tp),R(T.sl),V(""),D(ze),B(""),K(ze))}),[e]);const{getI18n:q,i18n:{language:U}}=(0,O.Z)(),{getI18n:W}=(0,x.yk)(),{setMessageInfo:H}=(0,p.YT)(),{delOpenOrders:$}=(0,d.W)(),j=(0,i.useCallback)((async(e,t)=>{const{success:r,data:a,message:i}=await $(e);r&&null!==a&&void 0!==a&&a.orderId&&("takeProfit"===t&&Z(void 0),"stopLoss"===t&&R(void 0)),r&&H({message:i||"success",variant:"success"})}),[$,H]),G=(0,i.useCallback)((async(e,t)=>{const r={symbol:m,side:f>0?"SELL":"BUY",positionSide:g,type:t,timeInForce:"GTE_GTC",quantity:0,stopPrice:e.stopPrice,workingType:e.workingType,closePosition:!0,placeType:"position"},a=Date.now(),{success:i,message:o,data:n}=await(0,u.cG)(r,{language:U});if(i)(0,y.jl)(l,null===n||void 0===n?void 0:n.clientOrderId,a),(0,y.MO)(l,null===n||void 0===n?void 0:n.clientOrderId);else{const e=(0,c.Z)();(0,y.jl)(l,e,a),(0,y.fS)(l,e)}i&&H({message:o||"success",variant:"success"})}),[l,m,U,f,g,H]),J=(0,i.useCallback)((()=>{const e=()=>{const e=ne()(M)&&L&&F,t=ne()(A)&&_&&z,a=[];e&&a.push(G({stopPrice:L,workingType:F},Ke)),t&&a.push(G({stopPrice:_,workingType:z},qe)),Promise.all(a).finally(r)};C[b.Jm.STOP_MARKET]&&(L||_)?s({tpStopPrice:L,tpWorkingType:F,slStopPrice:_,slWorkingType:z,placeOrder:e}):e()}),[r,G,A,_,z,M,L,F,C]);return Be(w.Z,{visible:!!n&&e,sx:Ue,onMaskClick:()=>r()},Be(I.Z,{variant:"headline6",className:"title"},q("tpSl",{defaultValue:"TP/SL for entire position"})),Be(N.Z,{sx:{position:"absolute",top:"22px",right:"24px",cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},onClick:r}),Be("div",{className:"info-block"},Math.abs(f)>Number(S)?Be("div",{className:"tpsl-max-qty-tip"},W("tpslMaxQty-tip",{defaultValue:"Due to the position size exceeds the maximum limit of market order, the Position Take-profit and Stop-loss will not be executed. Please use Limit order or TP/SL limit order."}),Be(I.Z,{variant:"addressLink",color:"t.yellow",mt:"5px",className:"learn-more",onClick:()=>(0,se.O)()},W("tpslMaxQty-learnMore",{defaultValue:"Learn more trading rules"}))):Be(o().Fragment,null,Be(ge,{sideKey:n}),Be(he,{sideKey:n,quoteAsset:v}),Be(ke,{sideKey:n,quoteAsset:v})),Be(_e,{sideKey:n,order:M,cancelOrder:j,type:"takeProfit",price:L,changePrice:V,workingType:F,changeWorkingType:D}),Be("div",{className:"line"}),Be(_e,{sideKey:n,order:A,cancelOrder:j,type:"stopLoss",price:_,changePrice:B,workingType:z,changeWorkingType:K})),Be("div",{className:"tpsl-tip"},"\xb7 ",q("tpSlTip")),Be("div",{className:"footer"},Be(E.Z,{flex:"auto",onClick:J,height:"40px"},q("confirm",{defaultValue:"Confirm"}))))},He=o().memo(We);var $e=r("a4Ug"),je=r("m8wC"),Ge=r("BcM3"),Je=o().createElement;const Ye={position:"relative",padding:"20px 24px 24px 24px",width:["100%","384px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{marginBottom:"28px",color:"t.primary"},".field":{fontFamily:"Binance PLEX",display:"flex",justifyContent:"space-between",mt:"12px",letterSpacing:"0.16px",fontSize:"14px",lineHeight:"20px",fontWeight:"normal",minHeight:"20px",".label":{color:"t.third"},".value":{color:"t.primary",textAlign:"right"}},".symbol-value":{flexDirection:"row",".extra":{ml:"4px"}},".hint-block":{color:"t.secondary",mt:"16px",py:"16px",fontSize:"12px",lineHeight:"16px",borderTop:"0.5px solid",borderTopColor:"line",".show-again-hint":{display:"flex",mt:"16px",cursor:"pointer"}},".footer":{display:"flex",".cancel":{flex:1,letterSpacing:"0.16px",mr:"8px",py:"10px"},".confirm":{flex:1,width:"164px",letterSpacing:"0.16px",py:"10px"}}},Qe=({label:e,value:t})=>Je("div",{className:"field"},Je("div",{className:"label"},e),Je("div",{className:"value"},t)),Xe=({sideKey:e,tpStopPrice:t,slStopPrice:r,tpWorkingType:a,slWorkingType:n,placeOrder:l,onClose:s,afterConfirm:c,visible:u})=>{const{0:d,1:m}=(0,i.useState)(!1),{isMobile:f}=(0,p.Fs)(),g=(0,x.IV)(),{getI18n:y}=(0,x.yk)(),h=y("tradeHistory-positions-markPriceTitle"),k=y("lastPrice"),S=a===v.gu.LAST_PRICE?k:h,P=n===v.gu.LAST_PRICE?k:h,T=(0,x.t2)(e,"symbol"),C=(0,x.t2)(e,"positionSize"),M=(0,p.iB)()[T]||{},Z=C>0,{quoteAsset:N}=M,A=`${S} ${Z?">=":"<="} ${t} ${N}`,R=`${P} ${Z?"<=":">="} ${r} ${N}`,{symbolText:O,symbolName:L}=(0,ce.iA)({sideKey:e}),F=(0,i.useCallback)((async()=>{d&&g({[b.Jm.STOP_MARKET]:!1}),l(),c(),s()}),[d,l,g,c]),D=Je(o().Fragment,null,Je(I.Z,{variant:"title6",className:"title"},y("confirm-position-tpsl",{defaultValue:"Confirm Position TP/SL"})),Je(Qe,{label:y("symbol",{defaultValue:"Symbol"}),value:Je(Ge.O,{className:"symbol-value",symbolName:L,fallbackText:O})}),t&&Je(Qe,{label:y("takeProfit",{defaultValue:"Take Profit"}),value:A}),r&&Je(Qe,{label:y("stopLoss",{defaultValue:"Stop Loss"}),value:R}),Je("div",{className:"hint-block"},"\xb7 ",y("tpsl-confirm-hint",{defaultValue:"The order will be rejected if the amount of position exceeds the limit of the Max Market Order Qty."}),Je("label",{className:"show-again-hint"},Je($e.Z,{onChange:()=>{m(!d)}}),y("dontAskAgain",{defaultValue:"Don\u2019t ask me again"}))),Je("div",{className:"footer"},Je(E.Z,{colorStyle:"secondary",onClick:()=>{m(!1),s()},className:"cancel"},y("cancelBtnText",{defaultValue:"Cancel"})),Je(E.Z,{colorStyle:"primary",className:"confirm",onClick:F},y("confirmBtn"))));return f?Je(je.Z,{direction:"bottom",visible:u,outerClick:s,maskBg:"dialog.mask"},Je(V.Z,{sx:Ye},D)):Je(w.Z,{visible:u,sx:Ye,onMaskClick:s},D)};var et=r("8LtS"),tt=o().createElement;const rt=(0,f.ck)("mobile",(()=>Promise.all([r.e(6374),r.e(3712),r.e(162)]).then(r.bind(r,"QUrc")))),at=(0,f.ck)("pc",(()=>Promise.all([r.e(6374),r.e(3712),r.e(5773)]).then(r.bind(r,"TigS")))),it=(0,g.nM)(),ot=()=>{const e=(0,n.useSelector)((e=>e.loading.effects.position.queryPosition)),{getI18n:t,i18n:r}=(0,O.Z)(),l=(0,n.useDispatch)(),{getI18n:f}=(0,x.yk)(),[k,{onCheckHeader:S,onSortHeader:T}]=(0,et.g4)({getFutI18n:f}),{preOrders:C=[]}=(0,p.E)(),{delOpenOrders:M}=(0,d.W)(),{assetMode:w}=(0,x.F7)(),I=(0,x.Dj)(),{setMessageInfo:E}=(0,p.YT)(),[N]=(0,p.z4)(),{0:A,1:R}=(0,i.useState)(""),{0:L,1:V}=(0,i.useState)(!1),{0:F,1:D}=(0,i.useState)({}),{0:_,1:B}=(0,i.useState)({tpWorkingType:v.gu.MARK_PRICE,tpStopPrice:"",slWorkingType:v.gu.MARK_PRICE,slStopPrice:"",placeOrder:()=>{}}),{curLeverage:z}=(0,x.rf)(),{language:K="en"}=r,q=(0,x.d0)(it),U=!e&&0===I.length;(0,i.useEffect)((()=>{if(w&&!it)return l.assetIndex.getAssetIndex(),(0,g.l6)(!0).getAssetIndexAllStream().subscribe((e=>{l.assetIndex.mergeState(e)}))}),[l.assetIndex,w]);const W=(0,i.useCallback)((()=>{R(""),D({})}),[R,D]),H=(0,i.useCallback)((e=>{R("ADJUST_MARGIN"),D({sideKey:e})}),[R,D]),$=(0,i.useCallback)((e=>{R("TP_SL"),D({sideKey:e})}),[R,D]),j=(0,i.useCallback)(((e,t,r)=>{R("ORDER_CONFIRM"),D({sideKey:e,closeParams:t,onConfirm:r})}),[R,D]),G=(0,i.useCallback)((e=>{V(!0),B(e)}),[R,B]),J=(0,x.h5)(),Y=(0,i.useCallback)((e=>{const{price:t,positionSide:r,type:i,quantity:o,symbol:n}=e,l=i===b.Jm.MARKET;if(!l&&!t)return Promise.resolve();const{valid:d,message:m}=J(o,{reduceOnly:!0,price:t,symbol:n,messageType:"position-toast"});if(!d)return void E({message:m,variant:"error"});const p={leverage:z,timeInForce:v.rb.GTC,reduceOnly:!0};let g=(0,a.Z)((0,a.Z)({},e),p);s()(g,"buyQty","sellQty"),l&&(g.newOrderRespType="RESULT",g=s()(g,"price","timeInForce")),"LONG"!==r&&"SHORT"!==r||(g=s()(g,"reduceOnly"));const h=Date.now();return(0,u.cG)((0,a.Z)((0,a.Z)({},g),{},{placeType:"position"}),{language:K}).then((e=>{const{success:t,message:r,data:a}=e||{};if(t&&!r)(0,y.jl)(it,null===a||void 0===a?void 0:a.clientOrderId,h),(0,y.MO)(it,null===a||void 0===a?void 0:a.clientOrderId),E({message:f("order-submitted",{defaultValue:""}),variant:"success"});else{const e=(0,c.Z)();(0,y.jl)(it,e,h),(0,y.fS)(it,e)}return Promise.resolve(a)})).catch((e=>{"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[z,K,E,f,J]),Q=(0,i.useCallback)((e=>{const t=C.filter((t=>(null===t||void 0===t?void 0:t.orderId)===e));return 1===t.length?M(t[0]):Promise.resolve()}),[M,C]),X=(0,i.useMemo)((()=>({actionAdjustMarginModal:H,actionTpslModal:$,actionOrderConfirmModal:j,actionCancelOrder:Q,actionPlaceOrder:Y,actionTpslConfirmModal:G,changeSymbol:q,isDelivery:it,headers:k})),[H,$,j,Q,Y,G,q,k]);return tt(P.Z.Provider,{value:X},tt(m.Z,{sx:{flexDirection:"column",height:"100%",pb:[0,0,"xs"],px:"sm"}},tt(h.Z,null,(({isMobile:t,isIPad:r})=>tt(o().Fragment,null,r?tt(rt,{isMobile:t,isEmpty:U,loading:e,data:I}):tt(at,{headers:k,onCheckHeader:S,onSortHeader:T,data:I,loading:e}),"ADJUST_MARGIN"===A&&tt(ie,{visible:!0,position:F,onClose:W}),"ORDER_CONFIRM"===A&&tt(Z,{visible:!0,position:F,onClose:W}),"TP_SL"===A&&tt(He,{visible:!0,position:F,onClose:W}),tt(Xe,Object.assign({visible:L,sideKey:null===F||void 0===F?void 0:F.sideKey},_,{onClose:()=>V(!1),afterConfirm:W})))))))},nt=o().memo(ot)},uefD:(e,t,r)=>{"use strict";r.d(t,{G4:()=>i,w_:()=>n,y_:()=>l,Do:()=>s});var a=r("5vwO");const i={symbol:130,size:90,notionalSize:110,entryPrice:100,markPrice:100,liquidationPrice:90,marginRatio:110,margin:90,pnl:145,adl:75,closePosition:235,tpSl:130},o=e=>({width:`${e}px`,flex:`1 0 ${e}px`}),n={flexDirection:"column",height:"100%",flex:"1 0",overflowX:"auto",overflowY:"hidden",".action-bar":{display:"flex",alignItems:"center",justifyContent:"flex-end",position:"absolute",top:0,right:"16px",zIndex:"999",height:"40px","&.fullscreen":{right:"12px"}},".position-row":{my:0,py:0,display:"flex",alignItems:"center",flex:"none",color:"t.secondary",fontSize:[0],cursor:"auto",width:"100%",height:"40px",boxSizing:"border-box",borderBottom:"1px solid",borderBottomColor:"newLine","&.header":{height:"32px"},"& .header-item":{display:"flex",alignItems:"center","& .drag-icon":{display:"none",ml:"4px",color:"t.third",cursor:"move","&:hover":{color:"t.primary"}},"& .rank-icon":{display:"none",ml:"2px",transform:"scale(1.6)",pointerEvents:"none",flex:"none"},"&:hover .drag-icon, &:hover .rank-icon":{display:"inline"},"&.show-ranking .rank-icon":{display:"inline"}},"&.body":{":hover":{backgroundColor:"bg3",".symbol":{color:"t.yellow",".symbolRightArrow":{display:"block"}}},".symbol":{display:"flex",alignItems:"center",cursor:"pointer",".symbolRightArrow":{display:"none"},".bar":{width:4,height:"39px",mr:"4px","&-buy":{bg:"buy"},"&-sell":{bg:"sell"},"&-liq":{bg:"t.secondary"}},".leverage":{color:"t.yellow",bg:"tagBg",fontSize:"12px",ml:"4px",borderRadius:"2px",px:"minor"}},".size":{"&-buy":{color:"t.buy"},"&-sell":{color:"t.sell"},"&-liq":{color:"t.secondary"}},".liquidationPrice":{color:"t.emphasize",".liqRefresh":{cursor:"pointer"}},".marginRatio":{"&-negative ":{color:"negative"}},".margin":{display:"flex",alignItems:"center","&-text":{whiteSpace:"nowrap",mr:"4px"},"&-icon-container":{position:"relative",".red-point":{width:"6px",height:"6px",bg:"sell",borderRadius:"50%",top:"-3px",right:"-3px",position:"absolute"}}},".pnl":{display:"flex",alignItems:"center","&-buy ":{color:"t.buy"},"&-sell ":{color:"t.sell"}},".tpSl":{display:"flex",alignItems:"center","&-text":{mr:"4px"}}},".symbol":(0,a.Z)({},o(i.symbol)),".size":(0,a.Z)({},o(i.size)),".notionalSize":(0,a.Z)({},o(i.notionalSize)),".entryPrice":(0,a.Z)({},o(i.entryPrice)),".markPrice":(0,a.Z)({},o(i.markPrice)),".liquidationPrice":(0,a.Z)({},o(i.liquidationPrice)),".marginRatio":(0,a.Z)({},o(i.marginRatio)),".margin":(0,a.Z)({},o(i.margin)),".pnl":(0,a.Z)({},o(i.pnl)),".adl":(0,a.Z)({},o(i.adl)),".closePosition":(0,a.Z)({},o(i.closePosition)),".tpSl":(0,a.Z)({},o(i.tpSl))}},l={minWidth:"228px",bg:"popupBg",borderRadius:"4px",px:"16px",py:"4px",maxHeight:"138px",overflow:"auto",boxShadow:"0px 0px 10px rgba(0,0,0,0.3)",".order":{color:"t.primary",fontSize:"12px",lineHeight:"16px",height:"32px",borderBottom:"solid 1px",borderColor:"line",justifyContent:"space-between",alignItems:"center","&:last-of-type":{border:"none"},".order-icon":{cursor:"pointer",color:"t.third","&:hover path":{fill:"t.primary"}}},".cancel":{color:"t.yellow200",cursor:"pointer",":hover":{color:"t.yellow300"}}},s={height:"24px",mt:0,input:{p:"4px",fontSize:"12px"}}},"h+3y":(e,t,r)=>{"use strict";r.d(t,{v:()=>m});var a=r("/SIk"),i=r.n(a),o=r("klBV"),n=r("SJeZ"),l=r("ogBT"),s=r("ka4r"),c=r("XVzo"),u=i().createElement;const d={margin:"28px auto 0",flexDirection:"column",alignItems:"center",".tip":{fontSize:"14px",lineHeight:"20px",color:"t.primary"}},m=({apiError:e=!1,confirmTip:t="",onRefresh:r=(()=>{}),onConfirm:a=(()=>{}),children:i})=>{const m=(0,o.zk)("abnormal"),{getI18n:p}=(0,n.yk)();return m||!e?i:u(s.Z,{sx:d},u(l.Z,{size:48}),u("div",{className:"tip"},p("apiErrorRefreshTip",{defaultValue:"Data lost due to service malfunction, please refresh the page."}),u(c.Z,{variant:"quiet",onClick:r},p("refresh",{defaultValue:"Refresh"}))),u("div",{className:"tip"},t,u(c.Z,{variant:"quiet",onClick:a},p("confirmBtn",{defaultValue:"Confirm"}))))}},gDJg:(e,t,r)=>{"use strict";r.d(t,{G:()=>l});var a=r("/SIk"),i=r.n(a),o=r("ogBT"),n=i().createElement;const l=i().memo((()=>n("div",{style:{width:0,height:0,overflow:"hidden"}},n(o.Z,null))))},"B+lg":(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var a=r("Oci4"),i=r("/yzf"),o=r("a4Ug"),n=r("ka4r"),l=r("XVzo"),s=r("/SIk"),c=r.n(s),u=r("Y+MU"),d=r("0RPJ"),m=r("klBV"),p=r("jQmP"),f=r("4m5F"),g=r("SJeZ"),y=r("VM/Z"),b=r("FOuV"),h=c().createElement;const v={position:"relative",padding:"20px 24px 24px 24px",width:["calc(100vw - 32px)","384px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{marginBottom:"28px",color:"t.primary"},".field":{display:"flex",justifyContent:"space-between",mt:"12px",letterSpacing:"0.16px",fontSize:"14px",lineHeight:"20px",fontWeight:"normal",minHeight:"20px",".label":{color:"t.third","&.highlight":{color:"t.primary",fontWeight:"medium"}},".value":{color:"t.primary",textAlign:"right","&.buy":{color:"t.buy"},"&.sell":{color:"t.sell"},"&.highlight":{fontWeight:"medium"}}},".top-line":{pt:"4px",mt:"16px",borderTop:"0.5px solid",borderTopColor:"line"},".show-again":{display:"flex",mt:"22px",cursor:"pointer",color:"t.secondary",fontSize:"12px",lineHeight:"16px"}},x=({labelExtra:e="",label:t="",value:r="",unit:a="",labelClassName:i="",valueClassName:o="",className:n=""})=>h("div",{className:`field ${n}`},h("div",{className:`label ${i}`},t,e),h("div",{className:`value ${o}`},r," ",a||"")),k=(0,y.nM)(),S=({symbol:e,title:t,color:r,orderSide:c,amendedField:y,isMarket:S,limitPrice:P,qty:T,isClose:C,epnl:M,onClose:Z,onConfirm:w=(()=>{}),closeTip:I})=>{const{getI18n:E}=(0,g.yk)(),N=(0,m.iB)()[e]||{},{shortName:A}=(0,u.H)(N,E),{baseAsset:R,quoteAsset:O,marginAsset:L,quantityPrecision:V,pricePrecision:F,equalQtyPrecision:D=2,tickSize:_,marketTakeBound:B}=N,z=(0,p.p)(Number(_)),K=100*+B,{unit:q}=(0,g.F7)(),U=q===f.SW.coin,W=q===f.AO.usdt;let H,$=V;k?U?(H=R,$=D):H=E("Cont"):W?(H=L,$=z):H=R;const{0:j,1:G}=(0,s.useState)(!1),J=(0,s.useCallback)((async()=>{j&&I(),w(),Z()}),[j,I,w,Z]),Y=`(${E("amended",{defaultValue:"Amended"})})`;return h(a.Z,{visible:!0,onMaskClick:()=>Z(),sx:v},h(i.Z,{variant:"title6",className:"title"},E("order-confirmation",{defaultValue:"Order Confirmation"})),h(x,{labelClassName:"highlight",label:A,value:t,valueClassName:r}),h(x,S?{label:E("priceTitle",{defaultValue:"Price"}),value:E("market",{defaultValue:"Market"})}:{label:E("priceTitle",{defaultValue:"Price"}),labelExtra:y===b.y3.PRICE||y===b.y3.BOTH?Y:"",value:(0,d.uf)(P,z),unit:O}),h(x,{label:E("orderQtyTitle",{defaultValue:"Order Qty"}),labelExtra:y===b.y3.QUANTITY||y===b.y3.BOTH?Y:"",value:(0,d.uf)(T,$),unit:H}),C&&h(x,{label:E("estimatedPNL",{defaultValue:"Estimated PNL"}),className:"top-line",value:(0,d.uf)(M,F),unit:L}),S&&h(i.Z,{variant:"caption",mt:3,color:"t.sell"},E("orderFailHintV2",{value:K,defaultValue:`Your order will fail should the market price deviate from the marked price by more than ${K}%`})),h("label",{className:"show-again"},h(o.Z,{defaultChecked:j,onChange:()=>{G(!j)}}),E("dontAskAgain",{defaultValue:"Don\u2019t ask me again"})),h(n.Z,{mt:"19px",width:"100%"},h(l.Z,{colorStyle:"secondary",onClick:()=>Z(),sx:{width:"164px",letterSpacing:"0.16px",mr:"8px",py:"10px"}},E("cancelBtnText",{defaultValue:"Cancel"})),h(l.Z,{colorStyle:r,onClick:J,sx:{width:"164px",letterSpacing:"0.16px",py:"10px"}},t)))},P=c().memo(S)},BcM3:(e,t,r)=>{"use strict";r.d(t,{O:()=>c});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("w7Tp"),l=o().createElement;const s={display:"flex",flexDirection:"column",".pair":{fontWeight:"semibold"},".extra":{fontWeight:"normal"}},c=e=>{let{symbolName:t,fallbackText:r=""}=e,i=(0,a.Z)(e,["symbolName","fallbackText"]);return l(n.Z,Object.assign({__css:s},i),t?l(o().Fragment,null,l("div",{className:"pair"},t.symbol),l("div",{className:"extra"},`${t.contractTypeI18n} ${t.deliveryDateFormat}`)," "):r)}},C28W:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("4wBm"),i=r("/SIk"),o=r.n(i),n=r("EPGa"),l=r("rdEq"),s=r("SJeZ"),c=o().createElement;const u=({type:e,workingType:t,activatePrice:r,priceRate:i})=>{const{getI18n:o,i18n:{language:u}}=(0,s.yk)();if(e!==n.Jm.TRAILING_STOP_MARKET)return null;const d=o("trailing-stop-market-tip",{defaultValue:"Activation Price: {{activatePrice}}, Trigger Type: {{workingType}}, Callback Rate: {{priceRate}}%. ",activatePrice:Number(r)?Number(r):o("advancedStrategy-marketPrice"),workingType:t===n.HZ.LAST_PRICE?o("lastPrice"):o("tradeHistory-positions-markPriceTitle"),priceRate:i});return c(l.m,{hideUnderLine:!0,sx:{flex:"none"},learnMoreLink:`/${u}/support/faq/360042299292`,tip:d},c(a.Z,{size:16}))},d=o().memo(u)},HkAn:(e,t,r)=>{"use strict";r.d(t,{Xw:()=>s,Vr:()=>y,r5:()=>h,TG:()=>c,mz:()=>w,Vn:()=>T,aD:()=>S,zE:()=>p,iP:()=>v.i});r("TeNm");var a=r("szIg"),i=r("ZJL0"),o=r("VM/Z"),n=r("klBV");function l(){const e=(0,a.useSelector)((e=>e.setting.color));return{[o.Pe]:[i.Wb,i.$_],[o.Qq]:[i.ZF,i.JR],[o.qo]:[i.fh,i.Xk]}[e]}function s(){const{isLight:e}=(0,n.Fg)(),[t,r]=l();return e?t:r}function c(){const[{kline:e},{kline:t}]=l();return[e,t]}var u=r("Bcqe"),d=r.n(u),m=r("/SIk");const p=(e,...t)=>{const r=(0,m.useRef)(((...e)=>{}));return r.current=e,(0,m.useCallback)(d()((function(...e){return r.current.apply(this,e)}),...t),[])};var f=r("XDgS"),g=r("LcTY");const y=()=>{const{enqueueNotification:e}=(0,f.Z)();(0,m.useEffect)((()=>g.T.on(g.F.NOTIFICATION,e)))};var b=r("xErM");function h(){const e=(0,n.tZ)();(0,m.useEffect)((()=>{(0,b.Wg)(e)}),[e])}var v=r("shUZ"),x=r("Gqy6");const k="reConnected";function S(){(0,m.useEffect)((()=>((0,o.nM)()?(0,o.RU)():(0,o.BN)()).getSocketEventsStream().subscribe((({event:e,data:t})=>{e===k&&(0,x.gp)({t:"WS_attemptReconnect",attempts:t})}))),[])}r("UpqR");var P=r("SJeZ");const T=()=>{const e=(0,o.nM)()?"cm":"um";return{dfSource:e,pageName:`${e}_${(0,P.C3)()===o.UW?"full":"pro"}_trading`}};r("l4n0");var C=r("S24M");const M=(0,o.nM)(),Z={PERPETUAL:"perp",CURRENT_QUARTER:"qtr"},w=()=>{const e=M?"cm":"um",{contractType:t="PERPETUAL",marginAsset:r="USDT"}=(0,n.j2)()||{},a=Z[t],i="BUSD"===r?"_busd":"";(0,m.useEffect)((()=>{(0,C.j)("$pageview",{pageName:`${e}_trading_${a}${i}`})}),[a,e,i])}},TeNm:(e,t,r)=>{"use strict";r.d(t,{k:()=>m});var a=r("5vwO"),i=r("GpFh"),o=r("/SIk"),n=r("PVSG"),l=r("xAl0"),s=r("0RPJ"),c=r("klBV"),u=r("jQmP"),d=r("VM/Z");const m=(e=(0,d.l6)(!1),t,r,m)=>{const[p,f]=(0,c.z4)(),g=t||p,y=r||f,{loading:b,product:h}=(0,c.mC)(m),{tickers:v}=(0,n.s)(e),{low:x,close:k,high:S,open:P,quoteVolume:T,tickSize:C,volume:M}=h,Z=(0,o.useMemo)((()=>(0,u.p)(C)),[C]),w=v[g]||{},{lowPrice:I=x,lastPrice:E=k,highPrice:N=S,openPrice:A=P,volume:R=M,quoteVolume:O=T}=w,L=(0,i.Z)(w,["lowPrice","lastPrice","highPrice","openPrice","volume","quoteVolume"]),{trades:V}=(0,l.y)({symbol:g,stream:e,limit:1}),{price:F=E}=V[0]||{},D=+F-+A,_=[D>0?"+":"",(A?D/+A*100:0).toFixed(2)].join("");return{loading:b,tickProps:(0,a.Z)((0,a.Z)({lowPrice:I,lastPrice:F,showPrice:(0,s.uf)(F,Z),tk:Z,highPrice:N,openPrice:A,quoteVolume:O,volume:R},L),{},{diffPrice:D,difference:_,tickSize:C,symbols:y,bigThan:(B=F,z=A,+B>=+z)})};var B,z}},shUZ:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});var a=r("/SIk");const i=()=>{const e=!0;function t(){return{width:window.innerWidth,height:window.innerHeight}}const{0:r,1:i}=(0,a.useState)(t);return(0,a.useEffect)((()=>{function e(){i(t())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[t,e]),r}},"7uiG":(e,t,r)=>{"use strict";r.d(t,{Nu:()=>y,Qy:()=>g,zz:()=>p,PH:()=>d,Lb:()=>m,kH:()=>f,Gt:()=>h,xG:()=>u});var a=r("LHeJ"),i=r("w9Ve"),o=r("5vwO"),n=r("1U9V");new Set;const l={setItem(e,t,r){const a="object"===typeof t?JSON.stringify(t):t;if("function"!==typeof r)return new Promise(((t,r)=>{try{window.localStorage.setItem(e,a),t()}catch(i){r(i)}}));try{window.localStorage.setItem(e,a),r(null)}catch(i){r(i)}},getItem(e,t){if("function"!==typeof t)return new Promise((t=>{t((0,n.As)(window.localStorage.getItem(e)))}));t(null,(0,n.As)(window.localStorage.getItem(e)))},removeItem(e,t){if("function"!==typeof t)return new Promise((t=>{window.localStorage.removeItem(e),t()}));window.localStorage.removeItem(e),t(null)},clear(e){if("function"!==typeof e)return new Promise((e=>{window.localStorage.clear(),e()}));window.localStorage.clear(),e(null)},create(){return Object.create(this)}};function s(e){const t=new Map;return function(r,...a){if(t.has(r))return t.get(r);const i=e(r,...a);return t.set(r,i),i}}function c({stateKey:e,storageKey:t=e,defaultValue:r,validator:i,storage:s}){const c="undefined"!==typeof(u=s)?u:l.create();var u;return(0,a.Z)((d=(t,a)=>({[e]:r,[`set${(0,n.kC)(e)}`]:r=>t({[e]:r}),[`toggle${(0,n.kC)(e)}`]:()=>t({[e]:!a()[e]})}),(a,l,s)=>{const u=d((r=>{a(r);const i=l()[e];c.setItem(t,i)}),l,s);let m={};return c.getItem(t,((t,a)=>{let o;o="function"===typeof i?i(a)?a:r:null!==a&&void 0!==a?a:r,m={[e]:o}})),(0,o.Z)((0,o.Z)((0,o.Z)({},u),m),{},{[`clear${(0,n.kC)(e)}`](){c.removeItem(t),a(u)}})}));var d}const u=(0,a.Z)((e=>({disableMouse:!1,setDisableMouse:t=>e({disableMouse:t})})));const d=s((function(e){return c({stateKey:"miniMultiChartType",storageKey:`${e}-chart-miniMultiChartType`,defaultValue:i.k.Store.ChartMode.Single})})),m=s((function(e){return c({stateKey:"miniMultiChartWindows",storageKey:`${e}-chart-miniMultiChartWindows`,defaultValue:["","","",""]})})),p=s((function(e){return c({stateKey:"lastSelectedMiniMultiChartWindow",storageKey:`${e}-chart-lastSelectedMiniMultiChartWindow`,defaultValue:0})})),f=s((function(e){return c({stateKey:"priceType",storageKey:`${e}-chart-priceType`,defaultValue:i.k.Store.PriceType.Last})})),g=s((function(e){return c({stateKey:"interval",storageKey:`${e}-chart-interval`,defaultValue:i.k.Store.DisplayIntervals["1d"]})})),y=s((function(e){return c({stateKey:"chartType",storageKey:`${e}-chart-type`,defaultValue:i.k.Store.OriginalChartStyle.CandleBar})}));var b=r("rfrl");const h=(0,a.Z)((e=>({posCalcData:{},setPosCalcData:(t,r,a)=>e((0,b.ZP)((e=>{if(e.posCalcData[t]||(e.posCalcData[t]={}),t&&r){e.posCalcData[t][r]!==a&&(e.posCalcData[t][r]=a)}})))})))},"d/ge":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});const a=r.p+"static/media/basic.d60eae70.png"},rIPn:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});const a=r.p+"static/media/logo-en.35f45b25.svg"},JPJJ:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});const a=r.p+"static/media/loss.c828dc1f.png"},ZSN8:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});const a=r.p+"static/media/win.7dae4d1a.png"}}]);