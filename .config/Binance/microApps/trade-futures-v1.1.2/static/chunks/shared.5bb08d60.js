(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[3712],{F4Cb:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetsContent:()=>q,Label:()=>D,default:()=>U});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("O94r"),s=r.n(l),c=r("Zl10"),u=r.n(c),d=r("J81Z"),m=r("APA6"),p=r("w2aK"),f=r("TKP4"),g=r("71uP"),y=r("cm/A"),b=r("Rdst"),h=r("S0Ie"),v=r("LBXE"),x=r("kf0l"),S=r("9h1+"),k=r("8uyB"),P=r("VM/Z"),T=r("LcTY"),C=r("S24M"),Z=r("FOuV"),M=r("8Eqx"),I=r("SJeZ"),w=r("rdEq"),E=r("hfnl"),A=r("z4Ks"),N=r("UIpo");const O={position:"absolute",zIndex:999,top:`-${N.Jy}px`,display:"inline-flex",alignItems:"center",justifyContent:"flex-end",height:`${N.Jy}px`,mr:"24px",cursor:"pointer",right:"-10px"},R={position:"absolute",zIndex:999,top:`-${N.Jy}px`,right:"16px",display:"flex",alignItems:"center",justifyContent:"flex-end",height:`${N.Jy}px`,cursor:"pointer"},L={".asset-label":{display:"flex",alignItems:"center",color:"t.primary"}},V={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",overflowY:"auto",maxHeight:"193px",".asset-option":{padding:"4px 16px",color:"t.primary","&:hover":{bg:"line"},"&.active":{color:"t.yellow"},fontSize:"12px"}};var F=o().createElement;const D=(0,i.forwardRef)(((e,t)=>{let{children:r}=e,i=(0,a.Z)(e,["children"]);return F(d.Z,Object.assign({variant:"default",colorStyle:"secondary",sz:"tiny",sx:{flex:1,mr:"8px",fontWeight:"normal",":last-of-type":{mr:"0"}},ref:t},i),r)})),_=({balance:e,onChange:t,curAsset:r})=>{const a=Object.values(e);return F(m.Z,{sx:L},F(p.ZP,{trigger:"hover",enablePortal:!0,overlay:F(m.Z,{sx:V},a.map((e=>{const{asset:a}=e||{};return F("div",{className:s()({"asset-option":!0,active:a===r}),key:a,onClick:()=>{t(a)}},a)})))},F("div",{className:"asset-label"},r,F(b.Z,{ml:"4px",color:"t.third",size:16}))))},B=o().memo((({curAsset:e,balance:t,setCurAsset:r,showSelector:a})=>{const i=(0,I.C3)()===P.UW,{isIPad:o}=(0,S.Fs)();return F(m.Z,{sx:o?R:O},a&&F(_,{curAsset:e,balance:t,onChange:r}),i&&F(h.Z,{sx:{color:"t.yellow200",border:"1px solid",borderColor:"t.yellow200",cursor:"pointer",borderRadius:"2px",fontSize:"16px",ml:"16px"},onClick:()=>{T.T.emit(T.F.OPEN_TRANSFER_MODAL,e)}}))}),(function(e,t){const{curAsset:r,balance:a,setCurAsset:i}=e,{curAsset:o,balance:n,setCurAsset:l}=t,s=Object.keys(a).join(),c=Object.keys(n).join();return r===o&&i===l&&s===c})),z=o().memo((({getFutI18n:e,futUrlConfig:t,locale:r,disabled:a,curAsset:i})=>F(f.Z,{sx:{justifyContent:"space-between",pt:"6px"}},F(D,{onClick:()=>{let e=(0,k.CN)(t.BUYING_URL,{locale:r,crypto:i});e=(0,k.CN)(t.BUYING_URL_ELECTRON,{crypto:i}),window.open(e)},disabled:a},e("buy-crypto",{defaultValue:"Buy Crypto"})),F(D,{onClick:()=>T.T.emit(T.F.OPEN_CONVERT_MODAL),disabled:a,"data-testid":"orderform-convert-button"},e("convert",{defaultValue:"Convert"})),F(D,{onClick:()=>T.T.emit(T.F.OPEN_TRANSFER_MODAL,i),disabled:a,"data-testid":"orderform-transfer-button"},e("transfer",{defaultValue:"Transfer"}))))),K=o().memo((({marginPrecision:e,marginAsset:t})=>{const r=(0,I.Gb)(t);return F(g.Z,{color:"t.primary"},(0,y.GW)(r||0,e,!0)," ",t)})),q=o().memo((({isEmptyBalance:e,loading:t,getFutI18n:r,walletBalance:a,marginPrecision:n,quoteAsset:l})=>{const s=(0,i.useMemo)((()=>F(f.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},F(w.m,{tip:r("tradeHistory-positions-walletBalanceTip",{defaultValue:""})},r("tradeHistory-positions-walletBalanceLabel",{defaultValue:"Wallet Balance"})),F(g.Z,{color:"t.primary"},(0,y.GW)(a||0,n,!0)," ",l))),[r,l,n,a]);return F(o().Fragment,null,!e&&!t&&F(m.Z,{mt:"16px"},s,F(f.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},F(w.m,{tip:r("tradeHistory-positions-unrealizedPnlTip",{defaultValue:""})},r("tradeHistory-positions-unrealizedPNLLabel",{defaultValue:"Unrealized PNL"})),F(K,{marginPrecision:n,marginAsset:l}))),e&&!t&&F(v.Z,{showIcon:!0,mt:"12px",flexDirection:"row",variant:"warning"},r("TransferAssetToTrading",{defaultValue:"Please transfer assets into futures account to start trading."})))})),W=({noButtons:e})=>{var t,r;const{getI18n:a,i18n:{language:o}}=(0,I.yk)(),l=(0,S._n)(),{assetMode:s=!1}=(0,I.F7)(),{isExistFutureAccount:c}=(0,S.Pc)(),d=(0,n.useDispatch)(),p=(0,S.Oh)(),f=(0,I.KQ)(),g=(0,I.Kc)("loading"),[,[y,b]]=(0,S.z4)(),{0:h,1:v}=(0,i.useState)(b),{isMobile:k}=(0,S.Fs)(),w=Object.values(f),N=w.every((({walletBalance:e})=>!e)),O=!s&&w.some((({walletBalance:e})=>e<0)),[R,L]=u()(w,(({asset:e})=>"BUSD"===e||"USDT"===e)),V=s&&R.some((({walletBalance:e})=>e<0))&&w.every((({walletBalance:e})=>e<=0));return(0,i.useEffect)((()=>{v(b),d.transferAssets.updateState({transferAsset:b})}),[b,d]),k?null:F(m.Z,{fontSize:"12px",px:"16px",sx:{position:"relative"}},F(B,{getFutI18n:a,curAsset:h,balance:f,setCurAsset:v,showSelector:l}),F(M.U,null),e||!P.Jg&&F(z,{getFutI18n:a,futUrlConfig:Z.x,locale:o,base:y,curAsset:h,disabled:!l||!c}),(O||V)&&F(A.Z,null),F(x.Z,{isJoinMargin:s,walletBalanceList:w,autoAssetExchangeInfo:p,onTransfer:()=>T.T.emit(T.F.OPEN_TRANSFER_MODAL,h),onConvert:()=>T.T.emit(T.F.OPEN_CONVERT_MODAL),pageName:"um_trading",sensorsTrack:C.j}),F(q,{isEmptyBalance:N,loading:g,getFutI18n:a,walletBalance:null===(t=f[h])||void 0===t?void 0:t.walletBalance,marginPrecision:4,quoteAsset:h,bnbWalletBalance:null===(r=f.BNB)||void 0===r?void 0:r.walletBalance,locale:o}),l&&!N&&!g&&F(E.Z,null))},U=o().memo(W)},"wkn/":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r("/SIk"),i=r.n(a),o=r("9h1+"),n=r("BLcC"),l=r("LBXE"),s=r("U0yl"),c=r("SJeZ"),u=i().createElement;const d=()=>{const{0:e,1:t}=(0,a.useState)(!1),[,[r,i]]=(0,o.z4)(),d={root:{borderRadius:0,marginTop:"1px",padding:"8px 16px"},link:{color:(0,o.Fg)().isLight?"t.yellow300":"t.yellow200",marginLeft:2}};const{getI18n:m}=(0,s.ZK)("futures-battle","futures-ui"),p=`/${(0,o.tZ)()}/futures-activity/battle/um/${r}_${i}`;(0,c.d2)();const f=(0,c.E5)();(0,a.useEffect)((()=>{t(f.inBattle)}),[f.inBattle]);const g=(0,a.useCallback)((()=>{t(!1)}),[]);return e&&u(l.Z,{variant:"warning",closable:!0,onClose:g,sx:d.root},m("You-Are-In-A-Battle"),u(n.Z,{sx:d.link,href:p},m("View-Battle-Page")))}},BkSH:(e,t,r)=>{"use strict";r.d(t,{oF:()=>a,DD:()=>i,uf:()=>o,Yl:()=>n,Tw:()=>l,nU:()=>s});const a={baseAsset:"BTC",quoteAsset:"USDT",pricePrecision:2,quantityPrecision:2,tickSizePrecision:2},i={LONG:"LONG",SHORT:"SHORT"},o="-",n={ISOLATED:"ISOLATED",CROSS:"CROSS"},l={ONEWAY:"ONEWAY",HEDGE:"HEDGE"},s=1e10},dDuV:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var a=r("9h1+"),i=r("APA6"),o=r("zXNn"),n=r("/SIk"),l=r.n(n);const s=Math.round(window.devicePixelRatio||1),c=240*s,u=140*s,d=5*s,m=5*s,p=5*s,f=25*s,g=230*s,y=110*s;function b({ref:e,name:t,fg:r,bg:a,min:i,value:o,max:l,limit:b}){const h=(0,n.useRef)();(0,n.useEffect)((()=>{if(!e.current)return;e.current.width=c,e.current.height=u;const t=e.current.getContext("2d");t&&(t.font=`bold ${16*s}px Helvetica,Arial,sans-serif`,t.textBaseline="top",t.fillStyle=a,t.fillRect(0,0,c,u),t.fillStyle=r,t.fillText("FPS",d,m),t.fillRect(p,f,g,y),t.fillStyle=a,t.globalAlpha=.9,t.fillRect(p,f,g,y),h.current=t)}),[e,r,a]),(0,n.useEffect)((()=>{if(!h.current||!e.current)return;const n=h.current;n.fillStyle=a,n.globalAlpha=1,n.fillRect(0,0,c,f),n.fillStyle=r,n.fillText(`${o||"--"} ${t} (${Math.round(i||0)}-${Math.round(l||0)})`,d,m),n.drawImage(e.current,p+s,f,g-s,y,p,f,g-s,y),n.fillRect(p+g-s,f,s,y),n.fillStyle=a,n.globalAlpha=.9,n.fillRect(p+g-s,f,s,Math.round((1-(o||0)/b)*y))}),[e,t,r,a,i,o,l,b])}const h={min:void 0,value:void 0,max:void 0},v=()=>(window.performance||Date).now(),x=v();function S(){const{0:e,1:t}=(0,n.useState)(h),{0:r,1:a}=(0,n.useState)(h),i=(0,n.useRef)(x),o=(0,n.useRef)(x),l=(0,n.useRef)(0);return(0,n.useEffect)((()=>{let e;const r=()=>{i.current=v(),(()=>{l.current++;const e=v();if(e>=o.current+1e3){const r=Math.round(1e3*l.current/(e-o.current));if(a((e=>({min:e.min?Math.min(e.min,r):r,max:e.max?Math.max(e.max,r):r,value:r}))),o.current=e,l.current=0,window.performance&&window.performance.memory){const{memory:e}=window.performance,r=Math.round(e.usedJSHeapSize/1048576);t((e=>({min:e.min?Math.min(e.min,r):r,max:e.max?Math.max(e.max,r):r,value:r})))}}})(),e=requestAnimationFrame(r)};return e=requestAnimationFrame(r),()=>{e&&cancelAnimationFrame(e)}}),[]),{memory:e,fps:r}}var k=l().createElement;const P=1048576;const T=function(){const e=(0,n.useRef)(null),t=(0,n.useRef)(null),{fps:r,memory:a}=S();return b({ref:e,name:"FPS",fg:"#0ff",bg:"#002",min:r.min,value:r.value,max:r.max,limit:100}),b({ref:t,name:"MB",fg:"#f08",bg:"#201",min:a.min,value:a.value,max:a.max,limit:window.performance&&window.performance.memory?window.performance.memory.jsHeapSizeLimit/P:4294967296}),k(i.Z,{pt:"md"},k(o.Z,{columns:[1,3],gap:24},k("canvas",{ref:e,id:"fpsCanvas",style:{width:"240px",height:"140px"}}),k("canvas",{ref:t,id:"memoryCanvas",style:{width:"240px",height:"140px"}})))};var C=r("TKP4"),Z=r("8CM1"),M=l().createElement;function I(){const{isLight:e}=(0,a.Fg)(),{0:t,1:r}=(0,n.useState)(!1);return M(C.Z,{sx:{width:"fit-content",minHeight:"40px",position:"fixed",bottom:"140px",right:"24px",zIndex:9999}},M(i.Z,{sx:{display:"grid",placeItems:"center",width:"40px",height:"40px",borderRadius:"50%",color:"primary",backgroundColor:"button.downloadBg",cursor:"pointer",overflow:"hidden",boxShadow:e?"0px 0px 3px rgba(0, 0, 0, 0.05), 0px 1px 10px rgba(0, 0, 0, 0.08)":"0px 0px 1px rgba(20, 21, 26, 0.1), 0px 3px 6px rgba(71, 77, 87, 0.04), 0px 1px 2px rgba(20, 21, 26, 0.04)"},onClick:()=>r((e=>!e))},M(Z.Z,{sx:{width:"100%",height:"100%"}})),t&&M(i.Z,{sx:{position:"absolute",right:"24px",bottom:"-120px"}},M(T,null)))}},OhiR:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var a=r("5vwO"),i=r("GpFh"),o=r("APA6"),n=r("TKP4"),l=r("nJf+"),s=r("ockm"),c=r("TVE9"),u=r("6eV+"),d=r("GbrZ"),m=r("/SIk"),p=r.n(m),f=r("XtDi"),g=r("9h1+"),y=r("2rU8"),b=r("jgBC"),h=r("SJeZ");function v(e,t,r,a){const i=e/a-1;return Math.round(r*(i**3+1)+t)}const x=[];function S(e,t,r,a,i){let o=x.filter((({el:t})=>t===e))[0];if(o||(o={el:e,done:!0},x.push(o)),o.t=1,o.d=Math.ceil(a/1e3*60),o.originX=e===window?window.scrollX:e.scrollLeft,o.offsetX=t,o.originY=e===window?window.scrollY:e.scrollTop,o.offsetY=r,!o.done)return;const n=()=>{const{t:e,d:t,originX:r,originY:a,offsetX:l,offsetY:s,el:c}=o;if(e<t){const i=v(e,r,l,t),u=v(e,a,s,t);o.t+=1,c===window?window.scrollTo(i,u):(c.scrollLeft=i,c.scrollTop=u),window&&window.requestAnimationFrame(n)}else o.done=!0,c===window?window.scrollTo(r+l,a+s):(c.scrollLeft=r+l,c.scrollTop=a+s),i&&window&&window.requestAnimationFrame(i)};o.done=!1,n()}var k=r("W4bq"),P=r("Dvpw"),T=r("EZ8p"),C=p().createElement;const Z=({height:e,width:t,children:r})=>C(o.Z,{__css:{position:"relative",height:`${e}px`,width:t?`${t}px`:"100%","> div::-webkit-scrollbar":{width:"0",height:"0"}}},r),M=(0,m.memo)((function({symbol:e,change:t,delivery:r=!1,symbolText:a,deliveryDateFormat:i}){const o=(0,h.G3)(),n=(0,h.d0)(),l=(0,m.useCallback)((()=>{n({isBlank:o!==r,stateSymbol:e,isDeliveryColumn:r})}),[n,r,o,e]);return C("div",{className:"favorite-item",onClick:l},C("div",{className:"favorite-item-symbol"},C("span",null,a,!!i&&C("span",{className:"favorite-item-date"},i))),C(y.PH,{className:"favorite-item-change "+(Number(t>0)?"buy":"sell")},`${t}%`))})),I=(0,m.memo)((()=>C(n.Z,{className:"draggableHandle",sx:{pl:"16px",pr:"16px",color:"primary"}},C(l.Z,{size:16,color:"primary"})))),w=({onRemove:e,sx:t})=>{const{nextTickers:r}=(0,k.Pj)(),l=(0,b.FB)(r,"symbol"),p=(0,h.s4)(),{getI18n:y}=(0,h.yk)(),v=p.map((e=>{const{symbol:t}=e,r=l[t]||{},o=(0,a.Z)((0,a.Z)({},e),r),{difference:n=0}=o,s=(0,i.Z)(o,["difference"]);return(0,a.Z)({symbol:t,change:n},s)})),{ref:x,setScroll:w,scrollLeft:E,scrollRight:A}=(()=>{const e=(0,m.useRef)(null),{0:t,1:r}=(0,m.useState)(!1),{0:a,1:i}=(0,m.useState)(!1),o=(0,m.useCallback)((()=>{var t,a;e.current&&(r(!(null===(t=e.current)||void 0===t||!t.scrollLeft)),i(e.current.scrollWidth>e.current.clientWidth+(null===(a=e.current)||void 0===a?void 0:a.scrollLeft)))}),[e]);return(0,m.useMemo)((()=>({ref:e,setScroll:o,scrollLeft:t,scrollRight:a})),[t,a,o])})();(0,m.useEffect)((()=>{w()}),[v,w]);const N="rtl"===(0,g.gm)(),O=(0,m.useCallback)((()=>S(x.current,-300,0,300,w)),[x,w]),R=(0,m.useCallback)((()=>S(x.current,300,0,300,w)),[x,w]),[L,V]=(0,f.Z)(!1),F=(0,m.useCallback)((()=>{V(!0)}),[V]),D=(0,m.useCallback)((()=>{V(!1)}),[V]);return C(n.Z,{sx:(0,a.Z)({pr:3,alignItems:"center",justifyContent:"center",mb:"4px",bg:"moduleBg",height:"100%","& .favorite-item":{display:"flex",cursor:"pointer",position:"relative",minWidth:"unset",px:"8px",py:"10px",flexShrink:0,height:"100%",whiteSpace:"nowrap",color:"t.secondary",justifyContent:"space-around",alignItems:"center","&:hover":{bg:"bg3",color:"t.primary"},"& .favorite-item-symbol":{fontSize:"14px",lineHeight:"16px"},"& .favorite-item-date":{ml:"4px"},"& .favorite-item-change":{marginLeft:"4px",fontSize:"12px","&.buy":{color:"t.buy"},"&.sell":{color:"t.sell"}}}},t)},C(I,null),C(Z,null,!N&&E&&C(n.Z,{sx:{position:"absolute",left:"-8px",cursor:"pointer",width:"58px",height:"100%",background:e=>`linear-gradient(to right, ${e.colors.moduleBg} 42.24%,  transparent 95.69%)`,zIndex:"999",alignItems:"center",justifyContent:"flex-start"},onClick:O},C(s.Z,{color:"icons.close",size:20,sx:{"&:hover":{color:"t.third"}}})),C(n.Z,{ref:x,__css:{overflowX:"auto"}},v.map((e=>{const{symbol:t,change:r,isDelivery:a}=e,{symbol:i,deliveryDateFormat:o}=(0,d.H)(e,y);return C(M,{key:t,symbol:t,change:r,delivery:a,symbolText:i,deliveryDateFormat:o})}))),!N&&A&&C(n.Z,{sx:{position:"absolute",top:"0px",right:"-1px",cursor:"pointer",width:"58px",height:"100%",alignItems:"center",justifyContent:"flex-end",pr:"1px",background:e=>`linear-gradient(to left, ${e.colors.moduleBg} 42.24%,  transparent 95.69%)`},onClick:R},C(c.Z,{color:"icons.close",size:20,sx:{"&:hover":{color:"t.third"}}}))),C(o.Z,{sx:{display:"flex",alignItems:"center",height:"100%",ml:"16px"}},C(u.Z,{size:20,onClick:F,sx:{cursor:"pointer",flexShrink:0,alignItem:"flex-end",color:"icons.close",zIndex:1,"&:hover":{color:"t.third"}}})),e&&C(P.Z,{onRemove:e}),C(T.default,{visible:L,onClose:D}))},E=p().memo(w)},EZ8p:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var a=r("/SIk"),i=r.n(a),o=r("71uP"),n=r("TKP4"),l=r("APA6"),s=r("J81Z"),c=r("cIsc"),u=r("GbrZ"),d=r("eIfy"),m=r.n(d),p=r("SJeZ"),f=r("NcRm"),g=r("2fVk"),y=r("WbDF"),b=i().createElement;const h=(0,f.W6)((()=>b(g.Z,{color:"t.third",sx:{":hover":{color:"t.primary"},":active":{cursor:"grabbing"},cursor:"grab"}}))),v=(0,f.W8)((({symbol:e,contractTypeI18n:t,deliveryDateFormat:r,onPlaceToTop:a})=>b(n.Z,{key:`${e}-${t}`,sx:{gap:1,zIndex:1300},alignItems:"center"},b(l.Z,{flex:1},b(o.Z,{as:"span"},e)," ",b(o.Z,{as:"span",color:"t.third"},t," ",r)),b(l.Z,{flexBasis:"40px",textAlign:"center"},b(y.Z,{onClick:a,color:"t.third",sx:{cursor:"pointer",":hover":{color:"t.primary"}}})),b(l.Z,{flexBasis:"40px",textAlign:"center"},b(h,null))))),x=(0,f.JN)((({children:e})=>b(n.Z,{sx:{gap:3},flexDirection:"column"},e)));var S=r("UGwn"),k=i().createElement;const P=e=>{const{onClose:t,visible:r}=e,{getI18n:i}=(0,p.yk)(),d=(0,a.useRef)(),f=(0,a.useCallback)((()=>d.current),[]),g=(0,p.s4)(),{0:y,1:b}=(0,a.useState)(),h=(0,S.X)(),P=(0,a.useCallback)((({newIndex:e,oldIndex:t})=>{y&&b(m()(y,t,e))}),[y]),T=e=>()=>{y&&b(m()(y,e,0))},C=(0,a.useCallback)((()=>{y&&(h(y),null===t||void 0===t||t())}),[t,h,y]),Z=(0,a.useCallback)((()=>{b(g),null===t||void 0===t||t()}),[g,t]);(0,a.useEffect)((()=>(r&&!y&&b(g),()=>{r||b(void 0)})),[g,y,r]);const M=(0,a.useMemo)((()=>null===y||void 0===y?void 0:y.map((e=>{const{symbol:t,contractTypeI18n:r,deliveryDateFormat:a}=(0,u.H)(e,i);return{symbol:t,contractTypeI18n:r,deliveryDateFormat:a}}))),[i,y]);return k(c.Z,{open:r,mask:!1,title:k(o.Z,{variant:"heading6",as:"h2"},i("favorite-dialog-edit-favorite")),showTitleBottomLine:!1,onCloseIconClick:Z,sx:{width:["100%","384px","384px"]},contentSx:{pt:2,px:4,pb:"24px"}},k(n.Z,{flexDirection:"column",height:["auto","440px"],sx:{gap:3}},k(n.Z,{sx:{gap:1,pr:1}},k(o.Z,{color:"t.third",flex:1},i("favorite-dialog-symbol")),k(o.Z,{color:"t.third",flexBasis:"40px",textAlign:"center"},i("favorite-dialog-top")),k(o.Z,{color:"t.third",flexBasis:"40px",textAlign:"center"},i("favorite-dialog-sort"))),k(l.Z,{flex:1,sx:{overflowY:"auto"},ref:d},k(x,{helperContainer:f,onSortEnd:P,useDragHandle:!0},null===M||void 0===M?void 0:M.map(((e,t)=>k(v,Object.assign({index:t,key:`${e.symbol}-${e.contractTypeI18n}`},e,{onPlaceToTop:T(t)})))))),k(n.Z,{sx:{gap:2}},k(l.Z,{flex:1},k(s.Z,{sz:"l",sx:{width:"100%"},variant:"default",colorStyle:"secondary",onClick:Z},i("favorite-dialog-cancel"))),k(l.Z,{flex:1},k(s.Z,{sz:"l",sx:{width:"100%"},variant:"default",colorStyle:"primary",onClick:C},i("favorite-dialog-confirm"))))))},T=i().memo(P)},iyIH:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r("/SIk"),i=r.n(a),o=r("TKP4"),n=r("a1YN"),l=r("vZcz"),s=i().createElement;const c=({onRemove:e})=>s(o.Z,{sx:l._3},s(n.Z,{className:"icon",size:8,onClick:e}))},WSil:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("TKP4"),l=r("qFNo"),s=r("9h1+"),c=r("EPGa"),u=r("b2zI"),d=r("JPsv"),m=r("YkKT"),p=r("FOuV"),f=r("3pJj"),g=r("cBv1"),y=r("SJeZ"),b=r("iyIH"),h=r("aBAi"),v=r("IewQ"),x=o().createElement;const S=({onRemove:e})=>{const{0:t,1:r}=(0,i.useState)(""),[S]=(0,y.hN)(),{0:k,1:P}=(0,i.useState)(!1),{0:T,1:C}=(0,i.useState)(""),{0:Z,1:M}=(0,i.useState)(!1),I=(0,i.useRef)(null),{0:w,1:E}=(0,i.useState)(0),A=(0,s._n)(),{isExistFutureAccount:N}=(0,s.Pc)(),{placeOrderReducer:O}=(0,y.b9)(),[R,[L,V]]=(0,s.z4)(),F=(0,s.j2)(),{marginAsset:D}=F,{0:_,1:B}=(0,i.useReducer)(O,{isFetching:!1,tradeCont:0,buyCont:0,buyQty:0,sellCont:0,sellQty:0,side:1,positionSide:c.PR.LONG}),{precision:z}=(0,y.ql)({quantity:t}),K=(0,i.useCallback)((()=>{r(""),E(0),M(!1),C("")}),[]),{side:q,tradeCont:W}=_,U=S?c.RS.OPEN:c.RS.BOTH,j=1===q?p.hp.BUY:p.hp.SELL,$=(0,i.useCallback)((()=>{e&&e()}),[e]),{setMessageInfo:H}=(0,s.YT)(),G=(0,y.h5)(),J=(0,m.F)({afterSubmit:K,overrides:{positionDirection:U,timeInForce:p.rb.GTC,orderType:c.Jm.MARKET,reduceOnly:!1}});return(0,i.useEffect)((()=>{if(k){const{valid:e,message:r}=G(+W);if(!e)return C(r),H({message:r,variant:"error"}),void P(!1);J((0,a.Z)((0,a.Z)({},u.U),{},{buyOrderAmount:+W,sellOrderAmount:+W,side:j,unitAmount:t})),P(!1)}}),[J,j,t,W,k]),(0,i.useEffect)((function(){K()}),[R,K]),(0,i.useEffect)((function(){C("")}),[t]),x(o().Fragment,null,x(n.Z,{sx:{flexDirection:"column"}},x(n.Z,{justifyContent:"center"},x(n.Z,{height:"40px",justifyContent:"stretch",bg:"popupBg",sx:{position:"relative"}},x(l.ZP,{isExistFutureAccount:N,isLoggedIn:A,sz:"small",bg:"popupBg"}),x(f.Z,{positionDirection:U,handleClick:()=>{B({type:v.z,payload:{tradeCont:(null===_||void 0===_?void 0:_.buyCont)||(null===_||void 0===_?void 0:_.buyQty)}}),P(!0)},type:"bid",dispatch:B}),x(g.Z,{quantity:t,setQuantity:e=>{Z&&!~e.indexOf("%")&&E(0),r(e)},dispatch:B,onFocus:()=>M(!0),submitError:T}),x(f.Z,{positionDirection:U,handleClick:()=>{B({type:v.z,payload:{tradeCont:(null===_||void 0===_?void 0:_.sellCont)||(null===_||void 0===_?void 0:_.sellQty)}}),P(!0)},type:"ask",dispatch:B})),x(b.Z,{onRemove:$})),Z&&x(h.Z,{percent:w,setPercent:E,precision:z,onChange:e=>{r(`${e}%`)},onClose:()=>{M(!1),E(0),r("")}})),x(d.Z,{symbol:R,base:L,quote:V,ticker:F,ref:I,marginAsset:D}))};function k({onRemove:e}){const t=(0,s.Pc)(),{isExistFutureAccount:r}=t,{isLoggedIn:a}=(0,s.f0)();return(0,i.useMemo)((()=>r&&a?x(S,{onRemove:e}):null),[e,r,a])}},cBv1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var a=r("/SIk"),i=r.n(a),o=r("TKP4"),n=r("4m5F"),l=r("GpFh"),s=r("WZQH"),c=r("9h1+"),u=r("O94r"),d=r.n(u),m=r("BzR9"),p=r("8uyB"),f=i().createElement;const g=/^\d+\.?\d*|%$/,y=/^0+(?=\d)/,b=e=>{let{name:t,value:r,error:i,disabled:o=!1,precision:n,errorText:u,infoText:b,placeholder:h,onChange:v,maxLength:x,autoZero:S=!1,onFocus:k,onBlur:P}=e,T=(0,l.Z)(e,["name","value","error","disabled","precision","errorText","infoText","placeholder","onChange","maxLength","autoZero","onFocus","onBlur"]);const C="rtl"===(0,c.gm)()?d()(m.Z["alb-text-align"]):"",Z=(0,a.useCallback)((e=>{let t=e.target.value;if(!0===S&&"string"===typeof t&&0===t.indexOf(".")&&(t=`0${t}`),!g.test(t)&&""!==t||isNaN(t))return void e.stopPropagation();t=t.replace(y,"");(0,p.N3)(t)>n&&(t=t.replace(new RegExp(`^(\\d*\\.\\d{${n}})\\d*`),"$1")),x&&t.split(".")[0].length>x&&(t=r),0===n&&(t=t.replace(".","")),v&&(t=v(t)),e.target.value=t}),[v,x,n,r,S]),M=(0,a.useCallback)((e=>{const t=e.target.value;g.test(t)||(e.target.value=""),null===P||void 0===P||P(e)}),[P]),I=(0,a.useCallback)((e=>{e.target.value||(e.target.value="")}),[]);return f(s.Z,Object.assign({name:t,variant:"inline",className:C,type:"text",value:r,placeholder:h,disabled:o,onClick:I,onChange:Z,onBlur:M,onFocus:k,error:i,infoText:b,errorText:u},T))},h=i().memo(b);var v=r("SJeZ"),x=r("IewQ"),S=r("vZcz"),k=i().createElement;const P=({submitError:e,quantity:t="",setQuantity:r,dispatch:i,onFocus:l})=>{const{getI18n:s}=(0,v.yk)(),[c]=(0,v.eY)(),{cUnit:u,precision:d,helperText:m,ticker:p,minContQty:f,placeholder:g,buyCont:y,buyQty:b,sellCont:P,sellQty:T}=(0,v.ql)({quantity:t}),{minQty:C}=p,Z=`${s("quantity")} (${u})`;return(0,a.useEffect)((()=>{i({type:x.z,payload:{minContQty:f,buyQty:b,sellQty:T,buyCont:y,sellCont:P}})}),[t,f,c]),k(o.Z,{sx:S.TH},k("div",null,Z),k("div",{className:"amount"},k(h,{id:"flashOrderQuantity",min:C,step:C,precision:d,value:t,placeholder:g,maxLength:n.ze,error:Boolean(e),errorText:e,infoText:m,autoZero:!0,onChange:r,onFocus:l})))}},aBAi:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r("/SIk"),i=r.n(a),o=r("TKP4"),n=r("71uP"),l=r("cm/A"),s=r("SJeZ"),c=r("vZcz"),u=i().createElement;const d=[25,50,75,100],m=({onClose:e,onChange:t,percent:r,setPercent:i,precision:m})=>{const{curMaxBuyAmount:p,curMaxSellAmount:f,cUnit:g,unitAmountPrecision:y}=(0,s._k)(),b=(0,a.useMemo)((()=>(0,l.Jp)((0,l.Jp)(r/100,p).toFixed(y,1),1).toFixed(m,1)),[y,r,m]),h=(0,a.useMemo)((()=>(0,l.Jp)((0,l.Jp)(r/100,f).toFixed(y,1),1).toFixed(m,1)),[y,r,m]),v=(0,a.useCallback)((a=>{var o;const n=+(null===(o=a.currentTarget.dataset)||void 0===o?void 0:o.stepper);n!==r?(i(n),null===t||void 0===t||t(n)):null===e||void 0===e||e()}),[t,e,r,i]);return u(o.Z,{sx:c.u8},u(o.Z,{className:"position-value",justifyContent:"flex-end"},r?u(n.Z,null,b,"\xa0",g):null),u(o.Z,{mx:"6px"},d.map((e=>u(o.Z,{key:e,"data-stepper":e,onClick:v,className:r>=e?"container active":"container"},u(o.Z,{className:"stepper"}),u(n.Z,{className:"value"},e,"%"))))),u(o.Z,{className:"position-value",justifyContent:"flex-start"},r?u(n.Z,null,h,"\xa0",g):null))},p=i().memo(m)},"3pJj":(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("/SIk"),i=r.n(a),o=r("TKP4"),n=r("EPGa"),l=r("SJeZ"),s=r("IewQ"),c=r("vZcz"),u=i().createElement;const d=({positionDirection:e,type:t="bid",handleClick:r=(()=>{}),dispatch:i=(()=>{})})=>{const{BuyText:d,SellText:m}=(0,l.x_)(e);let p,f,g,y,b=n.PR.BOTH;const{bidPrice:h,askPrice:v}=(0,l.he)(),{positionMode:x}=(0,l.F7)();"bid"===t?(f=d,g=v,p="buy-button",y=1,x&&(e===n.RS.OPEN?b=n.PR.LONG:e===n.RS.CLOSE&&(b=n.PR.SHORT))):(f=m,g=h,p="sell-button",y=-1,x&&(e===n.RS.OPEN?b=n.PR.SHORT:e===n.RS.CLOSE&&(b=n.PR.LONG)));const S=(0,a.useCallback)((e=>{e.preventDefault(),i({type:s.z,payload:{side:y,positionSide:b}}),r(!0)}),[b,i,y,r]);return(0,a.useMemo)((()=>u(o.Z,{onClick:S,sx:c.t7,className:p},u("div",{className:"title"},f),u("div",{className:"text"},g))),[S,p,f,g])}},IewQ:(e,t,r)=>{"use strict";r.d(t,{z:()=>a,w:()=>i});const a="PLACE_ORDER_TYPE",i="futures-flash-order-visible"},"7XkF":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>L});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("TKP4"),l=r("9h1+"),s=r("EPGa"),c=r("b2zI"),u=r("qFNo"),d=r("JPsv"),m=r("YkKT"),p=r("FOuV"),f=r("3pJj"),g=r("cBv1"),y=r("SJeZ"),b=r("Uqe+"),h=r("FoWR"),v=r("7uiG"),x=r("VM/Z"),S=r("HQDa"),k=r("vZcz"),P=o().createElement;const T={l:15,t:65,b:x.sk?0:window.innerHeight-55,r:x.sk?0:window.innerWidth-340},C={l:15,t:15,b:x.sk?0:window.innerHeight-55,r:x.sk?0:window.innerWidth-340},Z={l:15,t:250},M=({children:e,visible:t,draggableRef:r})=>{const{isIPad:o}=(0,l.Fs)(),[s,c]=(0,b.Z)("flash-order-position",Z),u=C,d=(0,h.Z)(s),m=(0,i.useRef)(!0),p=(0,i.useRef)(!1),f=(0,v.xG)((e=>e.setDisableMouse)),g=(0,i.useRef)({x:0,y:0}),y=(0,i.useCallback)((e=>{p.current=!0,f(!0),g.current={x:e.screenX,y:e.screenY}}),[f]);(0,i.useEffect)((()=>{var e,t;return null===(e=r.current)||void 0===e||e.addEventListener("mousedown",y),null===(t=r.current)||void 0===t||t.addEventListener("touchstart",y),()=>{const{current:e}=r;null===e||void 0===e||e.removeEventListener("mousedown",y),null===e||void 0===e||e.removeEventListener("touchstart",y)}}),[r,y]);const x=(0,i.useCallback)((e=>{e.preventDefault(),p.current=!1,f(!1)}),[f]),M=(0,i.useCallback)((e=>{setTimeout((()=>{if(e.preventDefault(),!p.current)return;const t=g.current,r=e.screenX-t.x,a=e.screenY-t.y;if(o){const t=window.innerWidth-e.changedTouches[0].clientX,r=window.innerWidth-e.changedTouches[0].clientY;return c({l:Math.min(T.r,Math.max(t,T.l)),t:Math.min(T.b,Math.max(r,T.t))})}const i=d.current;if(!i)return;const{l:n,t:l}=i,s=n+r,m=l+a;c({l:Math.min(u.r,Math.max(s,u.l)),t:Math.min(u.b,Math.max(m,u.t))}),g.current={x:e.screenX,y:e.screenY}}),15)}),[c,o,d]);return(0,i.useEffect)((()=>{if(m.current)return window.addEventListener(o?"touchmove":"mousemove",M),window.addEventListener(o?"touchend":"mouseup",x),m.current=!1,()=>{window.removeEventListener(o?"touchmove":"mousemove",M),window.removeEventListener(o?"touchend":"mouseup",x)}}),[x,M,o]),P(n.Z,{sx:(0,a.Z)((0,a.Z)({},k.IF),{},{transform:`translate(${s?Math.max(s.l,T.l):Z.l}px, ${s?Math.max(s.t,T.t):Z.t}px)`,zIndex:p.current?S.Z.flashOrder:9}),className:""+(t?"":"drag-hide")},e)},I=({draggableRef:e})=>(0,i.useMemo)((()=>P(n.Z,{ref:e,sx:k.l0},P("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P("rect",{width:"2",height:"2",fill:"currentColor"}),P("rect",{y:"5",width:"2",height:"2",fill:"currentColor"}),P("rect",{y:"10",width:"2",height:"2",fill:"currentColor"}),P("rect",{x:"4",width:"2",height:"2",fill:"currentColor"}),P("rect",{x:"4",y:"5",width:"2",height:"2",fill:"currentColor"}),P("rect",{x:"4",y:"10",width:"2",height:"2",fill:"currentColor"})))),[e]),w=o().memo(M);var E=r("iyIH"),A=r("aBAi"),N=r("IewQ"),O=o().createElement;const R=()=>{const{0:e,1:t}=(0,i.useState)(""),[r]=(0,y.hN)(),{0:o,1:b}=(0,i.useState)(!1),{0:h,1:v}=(0,i.useState)(""),{0:x,1:S}=(0,i.useState)(!1),k=(0,i.useRef)(null),P=(0,i.useRef)(null),{0:T,1:C}=(0,i.useState)(0),Z=(0,l._n)(),{isExistFutureAccount:M}=(0,l.Pc)(),{placeOrderReducer:R}=(0,y.b9)(),[L,[V,F]]=(0,l.z4)(),D=(0,l.j2)(),{marginAsset:_}=D,{0:B,1:z}=(0,i.useReducer)(R,{isFetching:!1,tradeCont:0,buyCont:0,buyQty:0,sellCont:0,sellQty:0,side:1,positionSide:s.PR.LONG}),{precision:K}=(0,y.ql)({quantity:e}),q=(0,i.useCallback)((()=>{t(""),C(0),S(!1),v("")}),[]),{side:W,tradeCont:U}=B,j=r?s.RS.OPEN:s.RS.BOTH,$=1===W?p.hp.BUY:p.hp.SELL,[,H]=(0,y.e5)(),G=(0,i.useCallback)((()=>{H(!1)}),[H]),{setMessageInfo:J}=(0,l.YT)(),Y=(0,y.h5)(),Q=(0,m.F)({afterSubmit:q,overrides:{positionDirection:j,timeInForce:p.rb.GTC,orderType:s.Jm.MARKET,reduceOnly:!1}});return(0,i.useEffect)((()=>{if(o){const{valid:t,message:r}=Y(+U);if(!t)return v(r),J({message:r,variant:"error"}),void b(!1);Q((0,a.Z)((0,a.Z)({},c.U),{},{buyOrderAmount:+U,sellOrderAmount:+U,side:$,unitAmount:e})),b(!1)}}),[Q,$,e,U,o]),(0,i.useEffect)((function(){q()}),[L,q]),(0,i.useEffect)((function(){v("")}),[e]),O(w,{visible:!0,draggableRef:k},O(n.Z,{sx:{flexDirection:"column"}},O(n.Z,{justifyContent:"center"},O(I,{draggableRef:k}),O(n.Z,{height:"40px",justifyContent:"stretch",bg:"popupBg",sx:{position:"relative"}},O(u.ZP,{isExistFutureAccount:M,isLoggedIn:Z,sz:"small",bg:"popupBg"}),O(f.Z,{positionDirection:j,handleClick:()=>{z({type:N.z,payload:{tradeCont:(null===B||void 0===B?void 0:B.buyCont)||(null===B||void 0===B?void 0:B.buyQty)}}),b(!0)},type:"bid",dispatch:z}),O(g.Z,{quantity:e,setQuantity:e=>{x&&!~e.indexOf("%")&&C(0),t(e)},dispatch:z,onFocus:()=>S(!0),submitError:h}),O(f.Z,{positionDirection:j,handleClick:()=>{z({type:N.z,payload:{tradeCont:(null===B||void 0===B?void 0:B.sellCont)||(null===B||void 0===B?void 0:B.sellQty)}}),b(!0)},type:"ask",dispatch:z})),O(E.Z,{onRemove:G})),x&&O(A.Z,{percent:T,setPercent:C,precision:K,onChange:e=>{t(`${e}%`)},onClose:()=>{S(!1),C(0),t("")}})),O(d.Z,{symbol:L,base:V,quote:F,ticker:D,ref:P,marginAsset:_}))};function L(){const e=(0,l.Pc)(),{isExistFutureAccount:t}=e,{isLoggedIn:r}=(0,l.f0)(),[a]=(0,y.e5)();return(0,i.useMemo)((()=>t&&r&&a?O(R,null):null),[a,t,r])}},vZcz:(e,t,r)=>{"use strict";r.d(t,{t7:()=>o,u8:()=>n,IF:()=>l,l0:()=>s,TH:()=>c,_3:()=>u});var a=r("0tOJ"),i=r("HQDa");const o={userSelect:"none",fontSize:"12px",height:"40px",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,minWidth:"100px",borderTop:"2px solid",cursor:"pointer",lineHeight:"16px","&.buy-button":{":hover":{bg:e=>(0,a.D)(e.colors.buy,.7)},bg:e=>(0,a.D)(e.colors.buy,.15),borderColor:"buy"},"&.sell-button":{":hover":{bg:e=>(0,a.D)(e.colors.sell,.7)},bg:e=>(0,a.D)(e.colors.sell,.15),borderColor:"sell"},padding:"2px 0 3px",".title":{color:"t.secondary"},".text":{color:"t.primary"}},n={bg:"bg1",pt:"xs",".container":{width:"25px",mx:"2px",flexDirection:"column",alignItems:"center",cursor:"pointer",color:"t.third","&.active":{"& > div:first-of-type":{bg:"t.secondary"},color:"t.secondary"}},".stepper":{height:"10px",mb:"2px",width:"23px",bg:"bg3"},".value":{fontSize:"12px",transform:"scale(calc(10/12))",color:"t.third"},".position-value":{flex:1,fontSize:"12px",color:"t.secondary"}},l={minWidth:"312px",width:"auto",position:"absolute",zIndex:i.Z.flashOrder,color:"white",minHeight:"40px",alignItems:"center",justifyContent:"space-between",bg:"popupBg","&.drag-hide":{display:"none"}},s={minWidth:"16px",width:"16px",justifyContent:"center",display:"flex",height:"40px",alignItems:"center",cursor:"grab",color:"icons.close",userSelect:"none",bg:"popupBg"},c={fontSize:"12px",flexDirection:"column",justifyContent:"center",minWidth:"100px",padding:"3px 4px 4px 4px",maxWidth:"150px",textAlign:"center",".amount":{"div.bn-input-tooltip":{bottom:"47px",width:"fit-content",left:"50%",transform:"translateX(-50%)","& .bn-input-tooltip-arrow":{left:"50%"},"& .bn-input-tooltip-content":{p:"7px 12px",width:"fit-content",whiteSpace:"nowrap"}},"div:not(.bn-input-tooltip):not(.bn-input-tooltip-arrow):not(.bn-input-tooltip-content)":{border:"none",margin:"0",height:"20px",input:{fontSize:"12px",textAlign:"center"}},".bn-input-prefix":{display:"none"}},"div:first-of-type":{color:"t.secondary"},input:{minWidth:"80px",maxWidth:"100px",width:"auto",bg:"popupBg",color:"t.primary"}},u={userSelect:"none",minWidth:"16px",width:"16px",height:"40px",justifyContent:"center",display:"flex",alignItems:"center",bg:"popupBg",".icon":{cursor:"pointer",flexShrink:0,color:"icons.close","&:hover":{color:"primary"}}}},"/Lmb":(e,t,r)=>{"use strict";var a=r("/SIk"),i=r.n(a),o=(r("szIg"),r("sZZk"),r("HkAn"),r("jgBC"));r("9h1+"),r("VM/Z"),r("z+x3"),r("SJeZ"),r("uH0D"),i().createElement;(0,o._x)((()=>Promise.all([r.e(3712),r.e(3335)]).then(r.bind(r,"eVjR")))),(0,o._x)((()=>Promise.all([r.e(3712),r.e(7340)]).then(r.bind(r,"pV8G"))))},OjEc:(e,t,r)=>{"use strict";r.d(t,{mA:()=>u,JO:()=>d,ZP:()=>m,yK:()=>p});var a=r("VM/Z"),i=r("9h1+"),o=r("APA6"),n=r("NUIZ"),l=r("iVn9"),s=r("/SIk"),c=r.n(s)().createElement;const u="INDEX_SYMBOL",d=({isChina:e,cnDoc:t,enDoc:r})=>{const i=e?`${a.$g}${t}`:`${a.$g}${r}`;window.open(i)};function m({config:e={},sx:t={}}={}){const r=(0,i.hd)();return(0,s.useMemo)((()=>{const{underlyingType:a,cnDoc:i,enDoc:l}=e;return"INDEX"===a?c(o.Z,{className:u,sx:t,onClick:e=>{e.preventDefault(),d({isChina:r,cnDoc:i,enDoc:l})}},c(n.Z,{color:"t.yellow200",size:15,sx:{cursor:"pointer"}})):null}),[e,r,t])}const p=({url:e})=>(0,s.useMemo)((()=>e?c(o.Z,{onClick:t=>{t.preventDefault(),window.open(e,"_blank")},sx:{background:"rgba(240, 185, 11, 0.15)",borderRadius:"2px",ml:"2px"}},c(l.Z,{fontSize:"14px",color:"t.yellow"})):null),[e])},T50r:(e,t,r)=>{"use strict";r.d(t,{q1:()=>o,oH:()=>n,fb:()=>l});var a=r("5vwO"),i=r("/Kmz");const o=()=>(0,a.Z)((0,a.Z)({},i.O),{},{overflow:"hidden",display:"grid",width:"100vw",minHeight:"100vh",gridGap:"1px",gridTemplateColumns:"minmax(auto, auto) 1fr 280px 288px",gridTemplateRows:"minmax(64px, auto) 1.1fr auto 289px",gridTemplateAreas:'"header header header header"\n    "chart chart orderbook trades"\n    "chart chart orderform orderform"\n    "assets userinfo orderform orderform"\n    "tradefooter tradefooter tradefooter tradefooter"'}),n=(0,a.Z)((0,a.Z)({},i.O),{},{gridTemplateColumns:"100%",gridTemplateRows:"100%",gridTemplateAreas:'"chart"',overflow:"hidden"}),l=(0,a.Z)((0,a.Z)({},i.O),{},{gridTemplateColumns:"100vw",gridTemplateRows:"100vh",gridTemplateAreas:'"content"',overflow:"hidden"})},"7KZG":(e,t,r)=>{"use strict";r.d(t,{Lx:()=>u,DT:()=>m,Et:()=>f,Uv:()=>y});var a=r("/SIk"),i=r.n(a),o=r("RfYP"),n=r("8Y2u"),l=r("869M"),s=i().createElement;const c=i().memo((({active:e,i18nKey:t="trd-layout-tabPositions"})=>{const r=(0,n.kD)();return s(o.KP,{i18nKey:t,defaultValue:"Positions",active:e,testId:"Positions",suffix:`(${r})`})})),u=e=>s(c,{active:e}),d=i().memo((({active:e,i18nKey:t="trd-layout-tabTransactionHistory"})=>s(o.KP,{i18nKey:t,defaultValue:"Transaction History",active:e,testId:"transactionHistory"}))),m=e=>s(d,{active:e}),p=i().memo((({active:e,i18nKey:t="trd-layout-tabAssets"})=>s(o.KP,{i18nKey:t,defaultValue:"Assets",active:e,testId:"assetsTableTitle"}))),f=e=>s(p,{active:e}),g=i().memo((({active:e})=>{const{getI18n:t}=(0,l.yk)(),r=t("tradeHistory-APIKeyLabel",{defaultValue:"API Key"});return s(o.KP,{i18nKey:"futures-trade-tradeHistory-APIKeyLabel",defaultValue:r,active:e,testId:"apiTableTitle"})})),y=e=>s(g,{active:e})},PLw3:(e,t,r)=>{"use strict";r.d(t,{c:()=>S});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("APA6"),l=r("PMF4"),s=r("zZ5f"),c=r("RfYP"),u=r("HIvd"),d=r("VM/Z"),m=r("7KZG"),p=o().createElement;const f=({sx:e={},testId:t,children:r})=>p(n.Z,{"data-testid":t,sx:(0,a.Z)({width:"100%",height:"100%"},e)},r),g=o().lazy((()=>Promise.all([r.e(3712),r.e(8306)]).then(r.bind(r,"7cvD")))),y=o().lazy((()=>r.e(3870).then(r.bind(r,"pVqC")))),b=o().lazy((()=>Promise.all([r.e(6374),r.e(3806)]).then(r.bind(r,"HX21")))),h=o().lazy((()=>Promise.all([r.e(6374),r.e(5311)]).then(r.bind(r,"6Zi0")))),v=o().lazy((()=>Promise.all([r.e(6374),r.e(3712),r.e(9847)]).then(r.bind(r,"r8hx")))),x=o().lazy((()=>r.e(9753).then(r.bind(r,"M6wx")))),S=[[m.Lx,p(f,{testId:"positionTableInfo",key:"futuresPosition"},p(l.u,null,p(u.Z,null)))],[c.rr,p(f,{testId:"openOrdersTableInfo",key:"futuresOpenOrder"},p(l.u,null,p(i.Suspense,{fallback:p(s.Z,null)},p(g,null))))],[c.S9,p(f,{testId:"orderHistoryTableInfo",key:"futuresOrderHistory"},p(l.u,null,p(i.Suspense,{fallback:p(s.Z,null)},p(y,null))))],[c.Tc,p(f,{testId:"tradeHistoryTableInfo",key:"futuresTradeHistory"},p(l.u,null,p(i.Suspense,{fallback:p(s.Z,null)},p(b,null))))],[m.DT,p(f,{testId:"transactionHistoryTableInfo",key:"futuresTransactionHistory"},p(l.u,null,p(i.Suspense,{fallback:p(s.Z,null)},p(h,null))))],[m.Et,p(f,{testId:"assetsTableInfo",key:"futuresAssets"},p(l.u,null,p(i.Suspense,{fallback:p(s.Z,null)},p(v,null))))]];d.Jg&&S.push([m.Uv,p(l.u,null,p(i.Suspense,{fallback:p(s.Z,null)},p(x,{key:"APIKeyPanel"})))])},oMBe:(e,t,r)=>{"use strict";r.d(t,{sN:()=>V,P_:()=>F,cE:()=>D,k3:()=>_,wK:()=>B,Eu:()=>z,kc:()=>K,sb:()=>W,tW:()=>U,MY:()=>j,SJ:()=>$});var a=r("P8Ci"),i=r("/SIk"),o=r.n(i),n=r("qFNo"),l=r("fYqI"),s=r("XtDi"),c=r("6u/I"),u=r("a9vC"),d=r("9h1+"),m=r("Dvpw"),p=r("UIpo"),f=(r("z+x3"),r("JwA9")),g=(r("96Xb"),r("LxGj")),y=r("CWkv"),b=r("6Afj"),h=r("f09/"),v=r("Q9ZO"),x=r("gDJg"),S=(r("gNzA"),r("zgli")),k=(r("Qkkg"),r("/Lmb"),r("PLw3")),P=r("lKaM"),T=o().createElement;(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(6034)]).then(r.bind(r,"OhiR"))));const C=(0,b.SA)((()=>Promise.resolve().then(r.bind(r,"lKaM")))),Z=(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(9305)]).then(r.bind(r,"GnZy")))),M=(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(3175)]).then(r.bind(r,"X2Id")))),I=(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(8682)]).then(r.bind(r,"EUwT")))),w=(0,b.SA)((()=>r.e(3712).then(r.bind(r,"+Eiz")))),E=(0,b.SA)((()=>Promise.all([r.e(3712),r.e(6391)]).then(r.bind(r,"F4Cb")))),A=(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(7791)]).then(r.bind(r,"7XkF")))),N=(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(4726)]).then(r.bind(r,"uSdY")))),O=(0,b.ck)("afterLogin",(()=>Promise.all([r.e(3712),r.e(7285)]).then(r.bind(r,"tXWo")))),R=((0,b.ck)("afterLogin",(()=>Promise.all([r.e(3712),r.e(7285)]).then(r.bind(r,"LhSs")))),(0,b.ck)("afterLogin",(()=>Promise.all([r.e(3712),r.e(7285)]).then(r.bind(r,"wkn/")))),(0,b.ck)("afterLogin",(()=>Promise.all([r.e(3712),r.e(7285)]).then(r.bind(r,"c5N6"))))),L=(0,b.SA)((()=>Promise.resolve().then(r.bind(r,"EZ8p")))),V=(0,i.memo)((({isMarketChange:e,w:t})=>{const[r,a]=(0,s.Z)(!1),o=(0,i.useCallback)((()=>{a(!1)}),[a]),n=(0,i.useCallback)((()=>{a(!0)}),[a]);return T(f.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"market"},name:"market"},T(N,{isGridWidget:!0,isMarketChange:e,w:t,openEditFavoriteDialog:n}),T(L,{visible:r,onClose:o}))})),F=(0,i.memo)((({onRemove:e,isElectronPro:t=!1,isPro:r})=>{const[a]=(0,d.z4)();return T(y.Z,{type:"CHART_LOADED",condition:()=>!!document.querySelector('div[data-testid="kline-trace"]')},T(f.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"chart"},name:"chart"},T(C,{symbol:a,useMiniTicker:!1,namespace:c.sy,globalNamespace:c.A4,generateToolbar:(0,P.createMainToobar)({headerSlot:null,closeButton:T(m.Z,{onRemove:e}),isPro:r||t||!1,showFullscreenIcon:!0,showChartModeDropdown:!0,tabKeys:[l.k.Store.Tabs.Origin,l.k.Store.Tabs.TradingView,l.k.Store.Tabs.Depth]})})))})),D=(0,i.memo)((({type:e})=>{const t=()=>{const e=document.querySelector('div[name="orderForm"]')||document.querySelector('div[name="horizontalOrderForm"]');return!!e&&Boolean(e.querySelector("button#buy")||e.querySelector('div[data-testid="register-and-login-buttons"]'))},r=(0,d._n)(),{isExistFutureAccount:a}=(0,d.Pc)(),{isMobile:i}=(0,d.Fs)();return e===v.C.FullScreen||e===v.C.Horizontal?T(y.Z,{type:"FULL_SCREEN_ORDER_FORM_LOADED",condition:t},T(f.Z,{sx:{width:"100%",position:"relative",height:"100%",bg:"popupBg",gridArea:"orderform",overflowY:e===v.C.Horizontal?"scroll":"auto",overflowX:"hidden"},name:"horizontalOrderForm"},T(n.ZP,{isLoggedIn:r,isExistFutureAccount:a,bg:i?"popupBg":void 0,sz:i?"small":void 0}),T(g.a,{height:"auto"}),T(I,{type:e}),r&&!i&&T(R,null))):T(y.Z,{type:"ORDER_FORM_LOADED",condition:t},T(f.Z,{sx:{width:"100%",overflowY:["initial","scroll"],overflowX:["visible","hidden"],position:["fixed","relative"],bottom:["0"],height:["102px","100%","100%"],bg:"popupBg",gridArea:"orderform"},name:"orderForm"},T(n.ZP,{isLoggedIn:r,isExistFutureAccount:a,bg:i?"popupBg":void 0,sz:i?"small":void 0}),T(I,{type:e}),r&&!i&&T(R,null)))})),_=(0,i.memo)((({onRemove:e})=>{const{isMobile:t,isIPad:r}=(0,d.Fs)(),a=t||r?T(O,null):null;return T(y.Z,{type:"POSITION_LOADED",condition:()=>!!document.querySelector('div[data-testid="positionTableInfo"]')},T(x.G,null),T(p.oZ,{area:"userinfo",onRemove:e,panes:k.c,extra:a}))})),B=(0,i.memo)((()=>{const e=(0,d._n)(),{0:t,1:r}=(0,i.useState)(!1);return e?T(f.Z,{sx:{width:t?"260px":"24px",position:"relative",zIndex:2,height:"100%",bg:"moduleBg",gridArea:"assets"},name:"assets"},t?T("div",{style:{padding:"12px 16px",height:"100%",boxSizing:"border-box",overflow:"auto"}},T(h.Z,{handleShowAssets:()=>r(!1)})):T("div",{style:{height:"100%",width:"24px",paddingTop:"16px",paddingLeft:"2px"}},T(a.Z,{color:"t.grey500",size:20,onClick:()=>r(!0),sx:{cursor:"pointer"}}))):null})),z=(0,i.memo)((({withMb:e=!1})=>T(f.Z,{sx:{width:"100%",height:"100%",pb:e?16:0,bg:"moduleBg",gridArea:"trades"},name:"trades"},T(M,null)))),K=(0,i.memo)((()=>T(f.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"orderbook",position:"relative"},py:"xs",name:"orderbook"},T(Z,null)))),q=()=>T(f.Z,{sx:{width:"100%",height:"100%",gridArea:"subheader"},name:"subheader"},T(S.default,{type:"futures",sx:{height:"100%",bg:"moduleBg",pl:"16px"}},T(u.default,{showRightBorderLine:!0}))),W=(0,i.memo)((()=>T(A,null))),U=(0,i.memo)((()=>T(f.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"marginRatio"},name:"marginRatio"},T(w,null)))),j=(0,i.memo)((()=>T(f.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"assetsCard"},name:"assetsCard"},T(E,null)))),$=(0,i.memo)((()=>T(q,null)))},"+Eiz":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var a=r("5vwO"),i=r("szIg"),o=r("O94r"),n=r.n(o),l=r("APA6"),s=r("J81Z"),c=r("w2aK"),u=r("BLcC"),d=r("71uP"),m=r("TKP4"),p=r("Rdst"),f=r("ESdd"),g=r("cm/A"),y=r("/SIk"),b=r.n(y),h=r("fi7b"),v=r("EZOS"),x=r("Ygfp"),S=r.n(x),k=r("uH0D"),P=r("VM/Z"),T=r("SJeZ"),C=r("jgBC"),Z=r("cIsc"),M=r("9h1+"),I=b().createElement;const w={flexDirection:"column","& .content":{mt:["sm","md"]},"& .grid":{display:"grid",gridTemplateColumns:"repeat(3, 33.33%)",gridTemplateRows:"repeat(3, 33.33%)"},"& .rateList":{mb:"sm",maxHeight:["60%","180px"],overflowY:"auto"},"& .row, & .cation":{pb:"xs"},"& .row:last-of-type":{pb:0},"& .cation":{color:"t.third"},"& .row":{color:"t.primary"},"& .updateTime":{pb:"sm",mb:"sm",borderBottom:"1px solid",borderColor:"t.secondary"},"& .info":{color:"t.third",fontSize:0,lineHeight:"16px","& > a":{color:"t.yellow"}},"& .link":{mt:"xs"}},E=({children:e})=>I(d.Z,{variant:"body2"},e),A=({visible:e,onClose:t})=>{const r=(0,M.tZ)(),{t:a}=(0,T.$G)(),{getI18n:i}=(0,T.yk)(),o=(()=>{const e=(0,T.G8)(),t=(0,T.KQ)();return(0,y.useMemo)((()=>Object.entries(e).filter((([e])=>{var r;return null===(r=t[e])||void 0===r?void 0:r.marginAvailable})).map((([,e])=>e))),[e,t])})();return I(Z.Z,{open:e,onCloseIconClick:t,sx:{width:["100%","488px"]}},I(m.Z,{__css:w},I(d.Z,{variant:"title6",color:"t.primary"},i("joinMargin-MultiAssetsExchangeRate",{defaultValue:"Multi-Assets Exchange Rate"})),I("div",{className:"content"},I("div",{className:"grid cation"},I(E,null,i("joinMargin-Pair",{defaultValue:"Pair"})),I(E,null,i("joinMargin-AskRate",{defaultValue:"Ask Rate"})),I(E,null,i("joinMargin-BidRate",{defaultValue:"Bid Rate"}))),I("div",{className:"rateList"},o.map((({symbol:e="",askRate:t=0,bidRate:r=0})=>I("div",{key:e,className:"grid row"},I(E,null,e.slice(0,-3),"/",e.slice(-3)),I(E,null,(0,g.GW)(t,4)),I(E,null,(0,g.GW)(r,4)))))),I("div",{className:"info updateTime"},"\xb7"," ",i("joinMargin-UpdateTime",{defaultValue:"Update Time"}),": ",o[0]?(0,C.vs)(o[0].time||0):""," UTC"),I("div",{className:"info"},i("joinMargin-ExchangeRateTip",{defaultValue:"USD valuation of the Margin assets in the USD\u24c8-M Futures account are calculated according to the real-time exchange rate under Multi-Assets mode, including the available balance for orders and withdrawals."})),I("div",{className:"info link"},I(h.c,{t:a,i18nKey:(0,T.Gv)("joinMargin-MultiAssetsCalcDetails"),components:{jump:I("a",{href:(0,k.b)(`/${r}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`),target:"_blank",rel:"noreferrer"})},defaults:"For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump>.",values:{guideLink:i("joinMargin-guidLink")}})))))},N=b().memo(A);var O=r("8uyB"),R=r("5kFy"),L=r("rdEq");const V={display:"flex",alignItems:"center",justifyContent:"flex-end",cursor:"pointer",".margin-ratio-label":{display:"flex",alignItems:"center",color:"t.primary"}},F={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",".margin-ratio-option":{padding:"4px 16px",color:"t.primary",fontSize:"12px","&:hover":{bg:"line"},"&.active":{color:"t.yellow"}}};var D=b().createElement;const _=(0,P.nM)(),B=b().memo((({getFutI18n:e})=>{const{assetMode:t}=(0,T.F7)();return D(l.Z,{pb:"16px",pt:"6px"},D(s.Z,{variant:"default",colorStyle:"secondary",sz:"tiny",width:"100%",sx:{fontWeight:"normal",borderRadius:"2px"},onClick:()=>C.TB.emit(C.FP.SHOW_PREFERENCE_PANEL,"am")},t?e("joinMargin-multi-assets",{defaultValue:"Multi-Assets"}):e("joinMargin-single-asset",{defaultValue:"Single-Asset"})))})),z=b().memo((({selectedOption:e,marginRatioList:t,onChange:r,marginRatioLabel:i})=>{const{isIPad:o}=(0,M.Fs)();return D(l.Z,{sx:(0,a.Z)({},V)},D(c.ZP,{trigger:"hover",enablePortal:!0,overlay:D(l.Z,{sx:F},t.map((t=>D("div",{className:n()({"margin-ratio-option":!0,active:t.key===e}),key:t.key,onClick:()=>{r(t.key)}},t.marginRatioLabel))))},D("div",{className:"margin-ratio-label"},i,D(p.Z,{ml:"4px",color:"t.third",size:16}))))}),(function(e,t){const{marginRatioLabel:r,marginRatioList:a,setMarginRatioItem:i}=e,{marginRatioLabel:o,marginRatioList:n,setMarginRatioItem:l}=t,s=a.map((e=>e.marginRatioLabel)).join(),c=n.map((e=>e.marginRatioLabel)).join();return r===o&&i===l&&s===c})),K=b().memo((({isRtl:e,isJoinMargin:t,marginRatioSelector:r,hasOptions:a,getFutI18n:o,riskRatio:n,maintenanceMargin:s,marginBalance:c,marginAsset:p,marginPrecision:y})=>{const b=(0,M.tZ)(),{t:v}=(0,T.$G)(),{visible:x,onOpen:S,onClose:P}=(0,T.yV)(),C=D(u.Z,{href:(0,k.b)(`/${b}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`),target:"_blank",variant:"secondaryLink",color:"t.yellow"}),Z=D(d.Z,{variant:"addressLink",as:"span",sx:{color:"t.yellow",cursor:"pointer",fontSize:"12px"},onClick:S}),I=t?o("joinMargin-accountMarginRatioTip",{defaultValue:"Account Margin Ratio = Account Maintenance Margin / Account Equity"}):o("tradeHistory-positions-marginRatioTip",{defaultValue:""}),w=t?o("joinMargin-accountMarginRatioLabel",{defaultValue:"Account Margin Ratio"}):o("tradeHistory-positions-marginRatioLabel",{defaultValue:"Margin Ratio"}),E=t?D(h.c,{t:v,i18nKey:(0,T.Gv)("joinMargin-accountMaintenanceMarginTipV2"),components:{jump:C,showRate:Z},defaults:"The sum of USD value of all cross positions maintenance margin in the USD\u24c8-M Futures. For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump> and <showRate>{{exchangeRate}}</showRate>.",values:{guideLink:o("joinMargin-guidLink",{defaultValue:"Multi-Assets Mode guide"}),exchangeRate:o("joinMargin-ExchangeRate",{defaultValue:"Real-time Exchange Rate"})}}):o("tradeHistory-positions-maintenanceMarginTip",{defaultValue:"The minimum amount of margin balance required to keep your open positions."}),A=t?o("joinMargin-accountMaintenanceMarginLabel",{defaultValue:"Account Maintenance Margin"}):o("tradeHistory-positions-maintenanceMarginLabel",{defaultValue:"Maintenance Margin"}),V=t?D(h.c,{t:v,i18nKey:(0,T.Gv)("joinMargin-accountEquityTipV2"),components:{jump:C,showRate:Z},defaults:"The sum of USD value of all margin balance in the USD\u24c8-M Futures. For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump> and <showRate>{{exchangeRate}}</showRate>.",values:{guideLink:o("joinMargin-guidLink",{defaultValue:"Multi-Assets Mode guide"}),exchangeRate:o("joinMargin-ExchangeRate",{defaultValue:"Real-time Exchange Rate"})}}):o("tradeHistory-positions-marginBalanceTip",{defaultValue:""}),F=t?o("joinMargin-accountEquityLabel",{defaultValue:"Account Equity"}):o("tradeHistory-positions-marginBalanceLabel",{defaultValue:"Margin Balance"}),_=(0,i.useSelector)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),B=(0,i.useSelector)((e=>e.loading.effects.preference.getAssetMode)),z=_||B;return D(l.Z,null,D(m.Z,{justifyContent:"space-between",alignItems:"center"},!t&&a?r:D(L.m,{tip:I},w),D(m.Z,{alignItems:"center"},D(R.Z,{riskRatio:n}),D(d.Z,{fontSize:"18px",color:"buy",ml:"10px"},(0,O.JX)(z?0:n,2)||"0.00","%"))),D(m.Z,{sx:{marginTop:"6px",lineHeight:"16px"},justifyContent:"space-between"},D(L.m,{tip:E},A),D(m.Z,{flexDirection:e?"row-reverse":""},D(d.Z,{color:"t.primary"},(0,g.uf)(z?0:s,y)),"\xa0",D(d.Z,{color:"t.primary"},p))),D(m.Z,{sx:{marginTop:"6px",lineHeight:"16px",paddingBottom:"11px"},justifyContent:"space-between"},D(m.Z,null,D(L.m,{tip:V},F),t&&D(f.Z,{ml:1,size:2,onClick:S,sx:{cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}}})),D(m.Z,{flexDirection:e?"row-reverse":""},D(d.Z,{color:"t.primary"},(0,g.GW)(z?0:c,y,!0)),"\xa0",D(d.Z,{color:"t.primary"},p))),D(N,{visible:x,onClose:P}))})),q=()=>{var e;const{marginAsset:t}=(0,M.j2)(),r=(0,M._n)(),a=(0,T.KQ)(),[i]=(0,M.z4)(),{getI18n:o}=(0,T.yk)(),n="rtl"===(0,M.gm)(),{0:s,1:c}=(0,y.useState)(""),{positionMode:u=!1}=(0,T.F7)(),d=(0,T.m)(o,u,_),m=(0,v.Z)(d),p=d.find((e=>e.key===s)),{riskRatio:f=0,marginBalance:g=(null===(e=a[t])||void 0===e?void 0:e.walletBalance)||0,maintenanceMargin:b,marginAsset:h=t,marginRatioLabel:x}=p||{},k=e=>{let t;d.length>0&&(t=d.find((e=>e.symbols.some((e=>e===i)))),e||t||(t=d[0]||{}),t&&c(t.key))};(0,y.useEffect)((()=>{p||k()}),[d.length]),(0,y.useEffect)((()=>{const e=S()(d,m,"key").find((e=>e.symbols.some((e=>e===i))));e&&c(e.key)}),[d.length]),(0,y.useEffect)((()=>{k(!0)}),[i]);const P=Boolean(null===d||void 0===d?void 0:d.length);return D(l.Z,{fontSize:"12px",display:["none","block"],px:"16px"},!_&&r?D(B,{getFutI18n:o}):null,D(K,{marginRatioSelector:D(z,{selectedOption:s,marginRatioLabel:x,marginRatioList:d,onChange:c}),hasOptions:P,isRtl:n,isJoinMargin:!1,getFutI18n:o,riskRatio:f,maintenanceMargin:b,marginBalance:g,marginAsset:h,marginPrecision:4}))},W=()=>{const{getI18n:e}=(0,T.yk)(),t=(0,M._n)(),r="rtl"===(0,M.gm)(),{riskRatio:a=0,marginBalance:i,maintenanceMargin:o}=(0,T.Nx)(_),n=_?4:2;return D(l.Z,{px:"16px",fontSize:"12px",display:["none","block"]},!_&&t?D(B,{getFutI18n:e}):null,D(K,{isRtl:r,isJoinMargin:!0,getFutI18n:e,riskRatio:a,maintenanceMargin:o,marginBalance:i,marginAsset:"USD",marginPrecision:n}))},U=()=>{const{assetMode:e}=(0,T.F7)();return D(e?W:q,null)},j=b().memo(U)},"xHF/":(e,t,r)=>{"use strict";r.d(t,{O$:()=>i,QN:()=>o,I_:()=>n,Z4:()=>l,E6:()=>s,_V:()=>c,UD:()=>u,mW:()=>d,UC:()=>m,AE:()=>p,xz:()=>f,UW:()=>g,Ok:()=>y,Pi:()=>b,X3:()=>h,jQ:()=>v,wm:()=>x,wC:()=>S});var a=r("9h1+");const i=40,o="All",n="FAVORITES",l="PERPETUAL",s="BUSD_PERPETUAL",c=[o,l,"DELIVERY"],u="USDT-MARIN",d="COIN-MARIN",m="HOT",p="NEW",f=[m,p],g=e=>e.stopPropagation(),y="STORAGE_MARKET_ACTIVE_TAB",b="STORAGE_MARKET_ACTIVE_SUB_TAB",h={first:{flex:"2 2 0",justifyContent:"flex-start",minWidth:"110px"},second:{flex:"1 1 0",minWidth:"63px",justifyContent:"flex-start"},secondHeader:{flex:"1 1 0",minWidth:"63px",justifyContent:"flex-start"},third:{flex:"1 1 0",minWidth:"63px",justifyContent:"flex-end"}},v={1e3:{key:"volume",des:"up"},2e3:{key:"volume",des:"down"},3e3:{key:"change",des:"down"},4e3:{key:"change",des:"up"}},x={volume:"quoteVolume",change:"difference",down:"descend",up:"ascend"},S=e=>(0,a.ZK)("trd-market",e)},W4bq:(e,t,r)=>{"use strict";r.d(t,{Pj:()=>C,Mp:()=>M,A1:()=>I,TO:()=>R});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("N8YU"),l=r("Uqe+"),s=r("szIg"),c=r("64LX"),u=r("LaZo"),d=r("dMPp"),m=r("8lq6"),p=r("C7P9"),f=r("hXK1"),g=r("oQJ1"),y=r("VM/Z"),b=r("9h1+"),h=r("jgBC"),v=r("/mDK"),x=r("KUZ0"),S=r("SJeZ"),k=r("xHF/"),P=o().createElement;const T=(0,y.nM)(),C=()=>{const e=(0,b.AM)(),t=(0,b.j2)(),r=(0,b.vK)(),i=(0,b.hP)(),{baseTicker:o,marketTabs:l}=(0,v.r)(e),{update:s,tickers:c}=(()=>{const{update:e,tickers:t}=(0,n.s)((0,y.BN)()),{tickers:r}=(0,n.s)((0,y.RU)());return{update:e,tickers:(0,a.Z)((0,a.Z)({},t),r)}})(),u=(0,v.A)(o,c),d=(0,S.M6)();return{loading:r,update:[i,s],marketTabs:l,nextTickers:Object.values(u).map((function(e){if(d.length){const t=d.find((t=>t.symbolName===e.symbol));if(t)return(0,a.Z)((0,a.Z)({},e),{},{activityUrl:null===t||void 0===t?void 0:t.activityUrl,rules:null===t||void 0===t?void 0:t.rules})}return e})),activeSymbol:t}},Z=({activeTab:e,keyword:t,activeSubTab:r})=>{const{favorites:a}=(0,S.ux)(),o=(0,i.useMemo)((()=>{var i;const o=[h.cZ];if(t)return o.push((({symbol:e})=>new RegExp((0,h.hr)(t),"i").test(e))),o;const n=new Map([[k.QN,()=>!1],[k.I_,e=>a.includes(e.isDelivery?`${e.pair}-${e.contractType}`:e.symbol)],[k.UD,({isDelivery:e})=>!e],[k.mW,({isDelivery:e})=>e],[k.UC,({isDelivery:e})=>!e],[k.AE,({isDelivery:e})=>!e]]);return o.push((({contractType:e,marginAsset:t})=>(({activeSubTab:e="",contractType:t="",marginAsset:r=""})=>e===k.QN||(e===k.Z4?t===k.Z4&&"BUSD"!==r.toUpperCase():e===k.E6?t===k.Z4&&"BUSD"===r.toUpperCase():t!==k.Z4))({activeSubTab:r,contractType:e,marginAsset:t})),null!==(i=n.get(null!==e&&void 0!==e?e:""))&&void 0!==i?i:function({tags:t}){return Array.isArray(t)&&t.includes(null!==e&&void 0!==e?e:"")}),o}),[r,e,a,t]);return(0,i.useCallback)((e=>o.every((t=>t(e)))),[o])},M=(e=k.UD,t=[])=>{const r=(0,s.useSelector)(x.zO),[a,o]=(0,l.Z)(`${k.Ok}_${T?"CM":"UM"}`,e),[n,c]=(0,l.Z)(`${k.Pi}_${T?"CM":"UM"}`,k.QN),{0:u,1:d}=(0,i.useState)("");(0,i.useEffect)((()=>{r&&(t.concat({sectionKey:k.I_}).filter((e=>e.sectionKey===a)).length||o(e))}),[a,e,r,o,t]);const m=Z({activeSubTab:n,activeTab:a,keyword:u}),p=(0,i.useCallback)((e=>{c(String(e))}),[c]);return(0,i.useMemo)((()=>({tabState:{activeTab:null!==a&&void 0!==a?a:"",switchTab:null!==o&&void 0!==o?o:""},searchState:{keyword:u,search:d},subTabState:{activeSubTab:n,switchSubTab:p},filterFunc:m})),[n,a,m,u,p,o])},I=({isChange:e=!0,isGridWidget:t,marketStyle:r,openEditFavoriteDialog:o,activeTab:n})=>{const{getI18n:l}=(0,S.yk)();return(0,i.useMemo)((()=>{const i=[(0,a.Z)({label:l("lastPrice",{defaultValue:"Last Price"}),key:"lastPrice"},k.X3.secondHeader)];return[(0,a.Z)((0,a.Z)({label:l("Contract",{defaultValue:"Contracts"}),key:"symbol"},k.X3.first),{},{postRender:()=>n===k.I_?P(c.Z,{onClick:o,size:16,sx:{color:"tan.third",":hover":{color:"t.primary",cursor:"pointer"}}}):null}),...t?r?i:[]:i,e?(0,a.Z)({label:l("24h"),key:"difference"},k.X3.third):(0,a.Z)({label:l("vol"),key:"quoteVolume"},k.X3.third)]}),[n,l,e,t,r,o])},w=(e,t)=>e.localeCompare(t),E=(0,u.Z)(w),A=(e,t)=>+(e||0)-+(t||0),N=(0,u.Z)(A),O=(e,t)=>{const r=(0,d.Z)("marginAsset",e).toUpperCase(),a=(0,d.Z)("marginAsset",t).toUpperCase(),i="BUSD";return r===i&&a===i?0:r===i?-1:a===i?1:0},R=({activeTab:e,isSearching:t,sortKeyFromLocalStorage:r})=>{const a=(0,s.useSelector)((e=>e.futureMarket.sortInfo)),o=Object.keys(a).length?Object.keys(a)[0]:"symbol",n=Object.values(a).length?Object.values(a)[0]:void 0;return(0,i.useMemo)((()=>{if(e===k.I_)return(0,m.Z)([(0,p.Z)((0,f.Z)(0,"favoritesIndex"))]);const a=[];return t&&a.push(O),"default"!==n&&n&&r||k.xz.includes(null!==e&&void 0!==e?e:"")?"symbol"===o&&"ascend"===n?a.push(((e,t)=>w((0,d.Z)("symbol",e),(0,d.Z)("symbol",t)))):"symbol"===o&&"descend"===n?a.push(((e,t)=>E((0,d.Z)("symbol",e),(0,d.Z)("symbol",t)))):"difference"===o&&"descend"===n?a.push(((e,t)=>N((0,d.Z)(o,e),(0,d.Z)(o,t)))):"difference"===o&&"ascend"===n?a.push(((e,t)=>A((0,d.Z)(o,e),(0,d.Z)(o,t)))):"symbol"!==o&&"ascend"===n?a.push(((e,t)=>N((0,d.Z)(o,e),(0,d.Z)(o,t)))):"symbol"!==o&&"descend"===n&&a.push(((e,t)=>A((0,d.Z)(o,e),(0,d.Z)(o,t)))):a.push((0,g.Z)((0,f.Z)(0,"ruleNumber"))),(0,m.Z)(a)}),[e,t,o,r,n])}},uSdY:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Re});var a=r("Uqe+"),i=r("APA6"),o=r("/SIk"),n=r.n(o),l=r("szIg"),s=r("9h1+"),c=r("VM/Z");const u=({data:e,path:t,metaKey:r,ctrlKey:a,deliveryPath:i})=>{const{symbol:o,symbolDisplay:n,isDelivery:l}=e;let s=!1;const u=i===l;let d="spot";t&&(d=l?"delivery":"futures"),s=/windows|win32/i.test(navigator.userAgent)?a:r;{var m;let r=null===n||void 0===n||null===(m=n.split("/"))||void 0===m?void 0:m.join("_"),a=`binance://trade/spot/${r}${s?"":"?update=true"}`;if("delivery"===d){r=t[t.length-1];const e=!u;a=`binance://trade/quarterly/${r}${s?"":`?update=true&dateSymbol=${o}&refresh=${e}`}`}if("futures"===d){r=t[t.length-1];const i=!u;e.contractType===c.Yp.PERPETUAL&&(r=r.split("_").join("")),a=`binance://trade/perpetual/${r}${s?"":`?update=true&dateSymbol=${o}&refresh=${i}`}`}window.open(a,"_blank")}};var d=r("jgBC"),m=r("shUZ"),p=r("SJeZ"),f=r("k7O1"),g=r("4Dm0"),y=r("xHF/"),b=r("1pwg"),h=n().createElement;const v=(0,o.memo)((({group:e,active:t,getGroupOrderKey:r,showSort:a,renderProps:i})=>h(b.Z,{group:e,active:t,getGroupOrderKey:r,showSort:a,renderProps:i})));var x=r("13PS"),S=n().createElement;const k=({sx:e,value:t,onSearch:r=(()=>{}),openShotCut:a})=>{const i=(0,o.useRef)(),{getI18n:n}=(0,y.wC)(),l=n("searchHolder",{defaultValue:"Search"});return(0,o.useEffect)((()=>{a&&setTimeout((()=>{var e;null===(e=i.current)||void 0===e||e.focus()}),100)}),[a]),S(x.Z,{sx:e,value:t,search:r,placeholder:l,ref:i})},P=n().memo(k),T=(0,o.createContext)({activeTab:"",keyword:"",activeSubTab:""});var C=r("W4bq"),Z=r("5vwO"),M=r("UFWJ"),I=r("71uP"),w=r("DS8H"),E=r("RAIT"),A=r("frZ3"),N=r("00zm"),O=r("U0yl"),R=r("w2aK"),L=r("TKP4"),V=r("BLcC"),F=r("VgVM"),D=r("nJf+"),_=r("GbrZ"),B=r("l4n0"),z=r("dqGA"),K=r("2rU8"),q=r("OjEc");const W={"& .bn-input-prefix":{ml:"6px",mt:"6px"},"& input":{fontSize:0,mt:"-2px",height:"18px",borderRadius:"4px"},flex:1,mb:"4px",mt:"4px",lineHeight:1.5,height:"24px",border:"none",width:"100%",borderRadius:"4px",bg:"inputBg",position:"static"},U={px:"sm"},j={display:"flex",flexDirection:"column",height:"100%","& .searchWrap":{padding:"0 16px","& .bn-input-suffix":{display:"flex"}},"& .tabListWrap":{display:"flex",justifyContent:"space-between",pt:"8px",pb:"4px",px:["5px","5px","sm"],flexWrap:"wrap",".tabBtn":{display:"flex"},".hot-icon":{marginLeft:"2px",position:"relative",bottom:"1px"},svg:{color:"inherit"}},"& .sortHeaderWrap":{height:"20px",lineHeight:"20px",marginTop:"8px",px:"16px"}},$={boxShadow:"card",bg:"t.grey500",fontSize:0,px:"xs",py:2,borderRadius:"2px",color:"t.grey0",alignItems:"center","& .nextLink":{color:"background",ml:"2px","& .linkIcon":{transform:"scale(1.6)"}},"&::before":{content:"''",position:"absolute",left:"-3px",top:"50%",transform:"rotate(45deg)",mt:"-5px",bg:"t.grey500",width:"10px",height:"10px",borderRadius:"2px"}},H={fontSize:0,color:"t.grey600",fontWeight:"normal"},G={" & .futuresMarketColumnWrap":{display:"flex",flex:1,flexDirection:"column",height:"100%","& .content":{px:"sm",display:"flex",alignItems:"center",height:"100%",fontSize:0,color:"t.third",textDecoration:"none",cursor:"pointer","&:hover":{bg:"marketColumn.hover"},"& .item":{display:"flex",alignItems:"center",cursor:["auto","pointer"],userSelect:"none",fontSize:"14px","& .favorite":{pr:"2px",color:"t.grey500","&.primary":{color:"primary"},"& .muted":{color:"t.muted"}},".name":{flex:1,color:"t.third",display:"flex",lineHeight:1,flexWrap:"wrap",alignItems:"center",".symbol":{color:"t.primary"}}}}}},J={".market-multiple":{boxSizing:"border-box",px:"1px",height:"14px",fontSize:"12px",lineHeight:"12px",borderRadius:"2px",ml:"4px",fontWeight:"normal",border:"1px solid",color:"multiple.color",cursor:"inherit",borderColor:"multiple.border"},".futuresMarketColumnWrap":{display:"flex",flex:1,flexDirection:"column",height:"100%",".content":{px:"sm",display:"flex",alignItems:"center",height:"100%",fontSize:0,color:"t.third",textDecoration:"none",cursor:"pointer","&:hover":{bg:"marketColumn.hover"},".item":{display:"flex",alignItems:"center",cursor:["auto","pointer"],userSelect:"none",fontSize:"14px",".favorite":{pr:"2px",color:"t.third","&.primary":{color:"primary"},"&.muted":{color:"t.muted"}},".name":{flex:1,color:"t.third",display:"flex",lineHeight:1,flexWrap:"wrap",alignItems:"center",".symbol":{color:"t.primary"}}}}}};var Y=n().createElement;const Q=(0,o.memo)((e=>Y(I.Z,Object.assign({__css:H},e)))),X=e=>{const{symbol:t,symbolDisplay:r,lastPrice:a,difference:i="--",quoteVolume:u,bigThan:m,tickSize:f=1e-7,pair:g,contractType:b,noFavorite:h,noFiat:v,changeSymbol:x,lastFlag:S=0,isGridWidget:k,isDefaultChange:P,needBreakline:C,active:Z,openShotCut:M,activityUrl:I,trackId:w}=e,E=(0,s.Kn)(),A=(0,o.useMemo)((()=>{var e;return t&&null!==(e=E[t])&&void 0!==e?e:{}}),[E,t]),N=m?"buy":"sell",O=(0,s.U1)("string"===typeof f?parseFloat(f):f),{format:W}=(0,s.ve)(O),{format:U}=(0,s.ve)(0),{favorites:j,setFavorite:G}=(0,p.ux)(),{pathname:J}=(0,B.Hb)(),X=J.split("/").slice(0,-1),{activeTab:ee}=(0,o.useContext)(T),te=(0,l.useSelector)((e=>e.futureMarket.radioWord)),re=!!e.isDelivery,ae="change"===te,{getI18n:ie}=(0,p.yk)(),oe=(0,o.useMemo)((()=>S>0?"buy":S<0?"sell":"t.grey600"),[S]),ne=re?j.indexOf(`${g}-${b}`):j.indexOf(null!==t&&void 0!==t?t:""),le=(0,o.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),G(re?`${g}-${b}`:t,ne,j)}),[G,re,g,b,t,ne,j]),se=(0,o.useMemo)((()=>{let e="";var t;re?(X[2]="delivery",e=[...X,(0,d.eB)({pair:g,contractType:b})].join("/")):(X[2]="futures",e=b!==c.Yp.PERPETUAL?[...X,(0,d.eB)({pair:g,contractType:b})].join("/"):[...X,null===r||void 0===r||null===(t=r.split("/"))||void 0===t?void 0:t.join("_")].join("/"));return e}),[re,X,g,b,r]),ce=ee===y.I_,ue=(0,z.hd)(),de=(0,o.useCallback)((e=>{var r,a;null!==(r=(a=e.target).closest)&&void 0!==r&&r.call(a,`.${q.mA}`)?(0,q.JO)({isChina:ue,cnDoc:null===A||void 0===A?void 0:A.cnDoc,enDoc:null===A||void 0===A?void 0:A.enDoc}):!e.metaKey&&!e.ctrlKey&&t&&b&&(e.preventDefault(),x&&x(t,re,b))}),[t,b,A,ue,x,re]),me=(0,o.useMemo)((()=>{const{symbol:t,contractTypeI18n:r,deliveryDateFormat:a}=(0,_.H)(e,ie);return Y(n().Fragment,null,Y("span",{className:"symbol"},`${t}`,"\xa0"),Y("div",{style:{width:C&&k?"100%":"auto",display:"flex",alignItems:"center"}},Y("div",null,r," ",a),Y(q.ZP,{config:A}),Y(q.yK,{url:I})))}),[e,ie,C,k,A,I]),pe=(0,o.useMemo)((()=>M&&Z),[Z,M]);return Y(R.ZP,{enablePortal:!0,trigger:"hover",className:"futuresMarketColumnWrap",placement:"right",sx:pe?{bg:"marketColumn.hover"}:{},overlay:v?null:Y(L.Z,{sx:$},Y(V.Z,Object.assign({href:se,target:"_blank",className:"nextLink"},w?{"data-testid":w}:null),Y(F.Z,{size:10,className:"linkIcon"})))},Y("a",Object.assign({className:"content",onClick:de},w?{"data-testid":w}:null),Y("div",{className:"item",style:y.X3.first},h?null:Y("div",{className:"favorite "+(ne>-1?"primary":""),onClick:le},Y(D.Z,{size:12})),Y(Q,{className:"name"},me)),!k||P?Y("div",{className:"item",style:y.X3.second},Y(Q,{sx:{color:oe}},(re&&ce?"$":"")+W(a))):null,Y("div",{className:"item",style:y.X3.third},Y(K.XI,{sx:{color:ae?N:"t.grey600"},__css:H},ae?`${i}%`:`${U(u)}`))))},ee=(0,o.memo)(X);var te=r("eIfy"),re=r.n(te),ae=r("NcRm"),ie=r("UGwn"),oe=n().createElement;const ne=(0,ae.W8)((({itemElement:e,itemData:t,itemHeight:r})=>oe(i.Z,{style:{height:r,zIndex:2e3},sx:G},oe(e,t)))),le=(0,ae.JN)((({items:e,itemElement:t,itemHeight:r,disabled:a})=>oe("div",{style:{overflow:"auto"}},Boolean(null===e||void 0===e?void 0:e.length)&&(null===e||void 0===e?void 0:e.map(((e,i)=>oe(ne,{index:i,key:`${e.symbolDisplay}-${e.symbol}`,itemElement:t,itemData:e,itemHeight:r,disabled:a}))))))),se=({itemElement:e,itemHeight:t,dataSource:r,disabled:a})=>{const i=(0,ie.X)(),n=(0,o.useCallback)((({oldIndex:e,newIndex:t})=>{i(re()(r,e,t))}),[r,i]);return oe(le,{distance:1,items:r,onSortEnd:n,itemElement:e,itemHeight:t,disabled:a})},ce=(0,o.memo)(se);var ue=n().createElement;(0,c.nM)();const de=(e,t)=>{const r=t[e];return"string"===typeof r?r:`${r.symbolDisplay}-${r.symbol}`},me=(0,o.memo)((({filterFunc:e,sortFunc:t,noFavorite:r,noFiat:a,changeSymbol:n,isGridWidget:l,isDefaultChange:c,needBreakline:u,openShotCut:d,onKeyDownCallback:m})=>{const{isLight:f}=(0,s.Fg)(),{getI18n:g}=(0,O.ZK)("","futures-ui"),{nextTickers:b,loading:h}=(0,C.Pj)(),{favorites:v}=(0,p.ux)(),{activeTab:x,activeSubTab:S,keyword:k}=(0,o.useContext)(T),P=(0,s.iB)(),R=(0,o.useMemo)((()=>b.map((e=>{const{contractVal:t,volume:r,symbol:a,isDelivery:i,rules:o}=e;if(o){const t=o.filter((e=>e.sectionKey===x));e.ruleNumber=t.length&&t[0].ruleNumber}else e.ruleNumber=Number.MAX_SAFE_INTEGER;var n;return i?(0,Z.Z)((0,Z.Z)({},e),{},{quoteVolume:Number(t)*Number(r||(null===(n=P[a])||void 0===n?void 0:n.volume)||0)}):e})).map((e=>{const t=v.indexOf(e.isDelivery?`${e.pair}-${e.contractType}`:e.symbol);return(0,Z.Z)((0,Z.Z)({},e),{},{favoritesIndex:v.length-t})}))),[x,v,P,b]),{0:L,1:V}=(0,o.useState)(R),{0:F}=(0,o.useState)(R),D=(0,o.useMemo)((()=>R.filter(e)),[e,R]),_=(0,o.useMemo)((()=>L.filter(e).sort((({difference:e=0},{difference:t=0})=>+t-+e)).slice(0,20)),[e,L]),B=(0,o.useMemo)((()=>F.filter(e).sort((({onboardDate:e=0},{onboardDate:t=0})=>t-e)).slice(0,20)),[e,F]),z=(0,o.useMemo)((()=>{let e=D;return x===y.UC&&(e=_),x===y.AE&&(e=B),t(e)}),[x,D,_,B,t]),K=(0,o.useMemo)((()=>ue(i.Z,{sx:{textAlign:"center"}},ue(f?w.Z:E.Z,{size:96}),ue(I.Z,{variant:"body2",color:"t.placeholder",pt:l?"18px":"5px"},g("futures-Market-NoSymbolUnder","No symbol under this category")))),[g,l,f]);(0,A.Z)((()=>{V(R)}),36e5);const q=(0,N.D)((e=>{const t=S===y.E6?{trackId:`BUSD_perp_${null===e||void 0===e?void 0:e.baseAsset}`}:"";return ue(ee,Object.assign({},e,t,{noFavorite:r,noFiat:a,changeSymbol:n,isGridWidget:l,isDefaultChange:c,needBreakline:u,openShotCut:d}))})),W=l?y.O$:24;return x===y.I_?ue(ce,{dataSource:z,itemElement:q,itemHeight:W,disabled:Boolean(v.length!==z.length||k)}):ue(M.a,{sx:J,dataSource:z,loading:h,itemElement:q,itemKey:de,itemHeight:W,openShotCut:d,onKeyDownCallback:m,emptyChildren:K})}));var pe=r("TZ0n"),fe=r("JtUR"),ge=r("ssCM"),ye=r("Dj7H"),be=r("0uqL"),he=n().createElement;const ve={delay:500,bg:"bg4"},xe={color:"t.yellow200",ml:"3px",fontSize:"16px",position:"relative",bottom:"2px"},Se=new Map([["hot",he(fe.Z,{size:14,sx:xe,key:"hot"})],["activity",he(ge.Z,{sx:xe,key:"new"})],["promoted",he(ye.Z,{sx:xe,key:"promote"})],["new",he(pe.Z,{sx:xe,key:"new"})]]),ke=({activeTab:e,switchTab:t,tabs:r})=>{const{i18n:{language:a}}=(0,s.ZK)(),l=(0,o.useMemo)((()=>{const e=r.map((e=>{let t=e;if(e.markIcon){const r=Se.get(e.markIcon);t=(0,Z.Z)((0,Z.Z)({},t),{},{display:he(n().Fragment,null,he(I.Z,{as:"span"},e.display),e.markIconLink?he(i.Z,{as:"a",href:`/${a}${e.markIconLink}`,target:"_blank",rel:"noopener noreferrer",sx:{color:"t.third",":hover":{color:"t.yellow"}}},r):r)})}return t}));return[{sectionKey:y.I_,display:he(D.Z,{size:14}),description:"",ruleNumber:"1000",sortValue:0},...e]}),[a,r]);return e?he(be.Z,{list:l,activeTab:e,switchTab:t,tabsStyle:{marginRight:"2px"},tooltipProps:ve}):null},Pe=(0,o.memo)(ke);var Te=r("TBcR"),Ce=n().createElement;const Ze=({types:e,activeType:t,onChange:r,sx:a={}})=>t&&r?Ce(i.Z,{sx:a},Ce(Te.Z,{types:e,type:t,onChange:r})):null,Me=(0,o.memo)(Ze);var Ie=r("S0Ie"),we=n().createElement;const Ee=(0,o.memo)((({value:e,sx:t,change:r=(()=>!1)})=>we(Ie.Z,{fontSize:16,onClick:t=>{t.stopPropagation(),r("change"===e?"volume":"change")},sx:(0,Z.Z)({mt:"2px",cursor:"pointer","&:hover":{color:"t.primary"}},t)})));var Ae=n().createElement;const Ne=({getI18n:e})=>(({list:e,i18nFunction:t})=>e.map((e=>({key:e,label:Ae("span",{"data-testid":e===y.E6?"BUSD_perp_tab":""},t(`market-text-${e}`))}))))({list:[...y._V,y.E6],i18nFunction:e}),Oe=({name:e,noFavorite:t,noFiat:r,isGridWidget:n=!1,electronUpdateTabs:c,openShotCut:b,selectedCallback:h,changeSymbolCb:x=null,w:S,openEditFavoriteDialog:k})=>{const Z=(0,l.useDispatch)(),M=(0,s.Pv)(),I=(0,g.G)(),w=(0,l.useSelector)((e=>e.futureMarket.sortInfo)),E=(0,l.useSelector)((e=>e.futureMarket.radioWord)),A=(0,p.Bd)();let N=(0,f.d0)();N=x||N;const[O,R]=(0,a.Z)("futuresSort"),{getI18n:L}=(0,p.yk)(),V=(0,o.useMemo)((()=>I?y.mW:y.UD),[I]),{marketStyle:F,needBreakline:D,containerWidthRef:_,windowWidth:B}=(e=>{const{width:t}=(0,m.i)(),r=(0,o.useRef)(),{0:a,1:i}=(0,o.useState)(!1),{0:n,1:l}=(0,o.useState)(!0);return(0,o.useEffect)((()=>{r.current&&(i(r.current.offsetWidth>256),l(r.current.offsetWidth<400))}),[t,e]),(0,o.useMemo)((()=>({marketStyle:a,needBreakline:n,containerWidthRef:r,windowWidth:t})),[a,n,t])})(S),z=(0,o.useCallback)(((t,r)=>{N({isBlank:I!==r,stateSymbol:t,isDeliveryColumn:r,electronUpdateTabs:c,name:e}),h&&h(),(0,d.PI)(t)}),[N,e,I,h,c]),K=(0,o.useCallback)((({data:e,metaKey:t,ctrlKey:r})=>{const a=(0,f.co)(e.symbol,M,e.isDelivery);u({data:e,path:a,metaKey:t,ctrlKey:r,deliveryPath:I}),h&&h()}),[I,h,M]),{tabState:{activeTab:q,switchTab:$},searchState:{keyword:H,search:G},subTabState:{activeSubTab:J,switchSubTab:Y},filterFunc:Q}=(0,C.Mp)(V,A),X=(0,o.useCallback)((e=>Z.futureMarket.updateState({sortInfo:e})),[Z.futureMarket]),ee=(0,o.useCallback)((e=>{var t,r;Z.futureMarket.updateState({radioWord:null===(t=y.jQ[e.ruleNumber])||void 0===t?void 0:t.key}),$(e.sectionKey);const a={[y.wm[null===(r=y.jQ[e.ruleNumber])||void 0===r?void 0:r.key]]:"default"};X(a),R(a)}),[Z.futureMarket,R,X,$]),te=(0,o.useCallback)((e=>Z.futureMarket.updateState({radioWord:e})),[Z.futureMarket]);(0,o.useEffect)((()=>{O&&X(O)}),[q,Z.futureMarket,O,X]);const re=(0,C.A1)({isChange:"change"===E,isGridWidget:n,marketStyle:F,openEditFavoriteDialog:k,activeTab:q}),ae=(0,C.TO)({activeTab:q,isSearching:Boolean(H),sortKeyFromLocalStorage:O}),ie=Ne({getI18n:L});return Ae(i.Z,{ref:_,sx:j},Ae(T.Provider,{value:{activeTab:q,activeSubTab:J,keyword:H}},Ae("div",{onClick:y.UW},Ae("div",{className:"searchWrap"},Ae(P,{value:H,onSearch:G,openShotCut:b,sx:W})),Ae("div",{className:"tabListWrap"},Ae(Pe,{tabs:A,switchTab:ee,activeTab:q,width:B,w:S})),Ae(Me,{types:ie,activeType:J,onChange:Y,sx:U}),Ae("div",{className:"sortHeaderWrap"},Ae(v,{group:re,active:w,getGroupOrderKey:e=>{R(e),X(e)},showSort:q!==y.I_,renderProps:Ae(Ee,{value:E,change:te})}))),Ae(me,{filterFunc:Q,sortFunc:ae,noFavorite:t,noFiat:r,changeSymbol:z,isGridWidget:n,isDefaultChange:F,needBreakline:D,openShotCut:b,onKeyDownCallback:K})))},Re=n().memo(Oe)},CLE1:(e,t,r)=>{"use strict";r.d(t,{xG:()=>o,NU:()=>n,mU:()=>l,z$:()=>c});var a=r("cm/A"),i=(r("9h1+"),r("jQmP"));const o=e=>({price:`${e("orderBook-price",{defaultValue:"Price"})}`,size:`${e("orderBook-Size",{defaultValue:"Size"})}`,sum:`${e("orderBook-Sum",{defaultValue:"Sum"})}`}),n=({maxSumRef:e,amountAskSum:t,quantityPrecision:r,isCoinUnit:o,direction:n,tickSize:l,filters:s})=>(c,u,d,m)=>{var p;const f=(0,i.p)(l),{amount:g,sum:y}=u[d],b=m?t-((null===(p=u[d-1])||void 0===p?void 0:p.sum)||0):y||0,h=s.find((e=>"LOT_SIZE"===e.filterType)),{stepSize:v}=h,x=(0,i.p)(v),S={size:o?(0,a.uf)(g,x):(0,a.uf)(g,f),sum:o?(0,a.uf)(Number(b),r):(0,a.uf)(Number(b),f)};return{progress:Number(b)/Number(e.current),datas:c.map((({type:e},t)=>({type:e,value:S[e]||null,style:{textAlign:{ltr:0===t?"left":"right",rtl:0===t?"right":"left"}[n],direction:n}})))}},l=({getI18n:e,quoteAsset:t,baseAsset:r,marginAsset:a,isCoinUnit:i})=>[{type:"price",title:`${o(e).price}(${t})`,direction:"l",style:{flex:1,justifyContent:"flex-start"}},{type:"size",title:`${o(e).size}(${i?r:a})`,direction:"r",style:{flex:1,justifyContent:"flex-end"}},{type:"sum",title:`${o(e).sum}(${i?r:a})`,direction:"r",style:{flex:1,justifyContent:"flex-end"}}],s={bg:"bg4",delay:200,enablePortal:!0,placement:"top"},c=[{type:"all",dataTestid:"defaultModeButton",toolTipProps:s},{type:"bid",dataTestid:"buyModeButton",toolTipProps:s},{type:"ask",dataTestid:"sellModeButton",toolTipProps:s}]},GtUU:(e,t,r)=>{"use strict";r.d(t,{M:()=>s,N:()=>c});var a=r("cm/A"),i=r("9h1+"),o=r("jQmP"),n=r("SJeZ");const l=e=>({price:`${e("orderBook-Price",{defaultValue:"Price"})}`,amount:`${e("orderBook-Amount",{defaultValue:"Amount"})}`,total:`${e("orderBook-Total",{defaultValue:"Total"})}`}),s=(e,t)=>e.map(((e,r)=>({type:e,title:l(t)[e],style:{flex:1,justifyContent:0===r?"flex-start":"flex-end"}}))),c=({median:e,quantityPrecision:t,decimalPlace:r,isCoinUnit:l})=>(t,s,c)=>{const u=(0,i.gm)(),{tickSize:d,filters:m}=(0,i.j2)(),p=(0,o.p)(d),{amount:f,total:g,price:y}=s[c],b=m.find((e=>"LOT_SIZE"===e.filterType)),{stepSize:h}=b,v=(0,o.p)(h),x={amount:l?(0,a.uf)(f,v):(0,n.WA)({quantity:f,price:y,precision:p}),total:l?(0,a.uf)(Number(g),r):(0,n.WA)({quantity:f,price:y,precision:p})};return{progress:Number(f)/Number(e),datas:t.map((({type:e},t)=>({type:e,value:x[e]||null,style:{textAlign:{ltr:0===t?"left":"right",rtl:0===t?"right":"left"}[u],direction:u}})))}}},"6hWq":(e,t,r)=>{"use strict";r.d(t,{_:()=>a});const a={"&#futuresOrderbook":{".orderbook-tbheader":{".item":{display:"block",color:"t.third",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"end","&:first-of-type":{textAlign:"start"}}},"& .tick-content":{color:"t.primary"},"& .orderbook-ticker":{display:"flex",py:"1px",px:3,height:33,alignItems:"center","& .contractPrice":{display:"flex",mr:1,fontSize:"20px",alignItems:"center",fontWeight:"medium"},"& .markPrice":{flex:1,display:"inline-block",fontSize:"12px",textAlign:"left",color:"t.secondary"},"& .right":{flex:1,textAlign:"right"},"& .more":{color:"tradeWidget.orderbookMoreIconColor",fontSize:1,mr:2,textDecoration:"none","&:hover":{color:r("0/eC").er[300]}},"& .arrow-icon":{fontSize:"16px "},"& .status-sell":{color:"t.sell"},"& .status-green":{color:"t.buy"},"& .status-primary":{color:"t.primary"}},"& .orderbook-progress":{height:"20px !imporant","& .row-content":{lineHeight:"20px !imporant",px:"0px !important"},"& .progress-container":{height:"20px !imporant","& .row-content":{"& .text":{color:"t.secondary"}}},"& .progress-bar":{height:"20px !imporant"}}}}},qCKq:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var a=r("/SIk");const i=({currentType:e,asks:t,bids:r,addSumData:i,isMobile:o})=>{if(o)return{amountAskSum:0,amountBidSum:0,maxSumRef:(0,a.useRef)(0),setMaxSumRef:()=>{}};const n=(0,a.useRef)(0),l="bid"!==e?i(t):0,s="ask"!==e?i(r):0,c=(0,a.useCallback)((a=>{let i=0,o=0;if("ask"!==e){var s;const e=Math.min(a,r.length);i=(null===(s=r[e-1])||void 0===s?void 0:s.sum)||0}if("bid"!==e){var c;const e=Math.min(a,t.length);o=l-((null===(c=t[t.length-e-1])||void 0===c?void 0:c.sum)||0)}n.current=Math.max(i,o)}),[e,r,t,l]);return{amountAskSum:l,amountBidSum:s,maxSumRef:n,setMaxSumRef:c}}},GnZy:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("nd4m"),s=r("teyc"),c=r("LcTY"),u=r("lv1b"),d=r("VM/Z"),m=r("jgBC"),p=r("9h1+"),f=r("8T+8"),g=r("SJeZ"),y=r("4Dm0"),b=r("CLE1"),h=r("GtUU"),v=r("jQmP");var x=r("qCKq"),S=r("6hWq"),k=o().createElement;const P="obSymbol",T={ask:void 0,bid:void 0},C=()=>{const e=(0,n.useDispatch)(),t=(0,d.BN)(),r=(0,p.gm)(),[o,[C,Z]]=(0,p.z4)(),M=(0,p.j2)(),{tickSize:I,filters:w}=M,E=(0,n.useSelector)((e=>e.exchangeInfo.infos))[o],{levels:A=[],levelsIndex:N=[],minQty:O="0.01"}=E||{},R=-Math.log10(O),[L,V]=(0,p.it)(P,{}),F=(0,p.sH)(P),{getI18n:D}=(0,g.yk)(),{isCoinUnit:_}=(0,g.QV)(),B=function(){const{isCoinUnit:e}=(0,g.QV)(),{tickSize:t}=(0,p.j2)(),r=(0,v.p)(t);return(0,i.useCallback)((t=>t.reduce(((t,a)=>(a.originAmount||(a.originAmount=a.amount,a.unitChangedAmount=(0,g.WA)({quantity:a.amount,price:a.price,precision:r,format:!1})),a.amount=e?a.originAmount:a.unitChangedAmount,a.sum=t+Number(a.amount||0),a.sum)),0)),[e,r])}(),{isMobile:z}=(0,p.Fs)(),K=(0,y.G)(),q="rtl"===r?"right":"left",W=()=>"undefined"===typeof L[o]?N[N.length-1]:N.includes(L[o])?L[o]:N[N.length-1],U=(0,i.useCallback)(((e,t)=>{if($(e),!t){const t=s.tO.getItem(F,{});V((0,a.Z)((0,a.Z)({},t),{},{[o]:e}))}}),[V,F,o]),{0:j,1:$}=(0,i.useState)(W()),H=A[j],G=(0,i.useMemo)((()=>(0,b.mU)({getI18n:D,quoteAsset:Z,baseAsset:C,marginAsset:M.marginAsset,isCoinUnit:_})),[_,D,Z,C,M]),{preOrders:J,loading:Y}=(0,p.E)(),Q=(0,u.AJ)(J,!0,o),X=(0,p.U6)(o,t,K).getState(),ee=(0,m.jM)(X.ask,{num:400,level:H,desc:!1}),te=(0,m.jM)(X.bid,{num:400,level:H,desc:!0}),re=(0,i.useMemo)((()=>{if(ee&&te){var e;const t=ee.concat(te).sort(((e,t)=>e.amount-t.amount));return null===(e=t[Math.floor(.95*t.length)])||void 0===e?void 0:e.amount}return 0}),[ee,te]),{0:ae,1:ie}=((0,i.useRef)(T),(0,i.useState)("all")),{amountAskSum:oe,maxSumRef:ne,setMaxSumRef:le}=(0,x.E)({currentType:ae,asks:ee,bids:te,addSumData:B,isMobile:z}),se=(0,i.useMemo)((()=>z?(0,h.N)({median:re,quantityPrecision:R,decimalPlace:j,product:M,isCoinUnit:_}):(0,b.NU)({maxSumRef:ne,amountAskSum:oe,quantityPrecision:R,tickSize:I,filters:w,direction:r,isCoinUnit:_})),[z,I,ne,oe,R,M,re,j,_,r,w]),ce=(0,i.useCallback)((t=>{c.T.emit(c.F.UPDATE_ORDER_PRICE_INPUT,t.price),e.position.setOrderbookPrice({symbol:o,price:t.price})}),[e.orderForm,e.position,o]),ue=(0,i.useCallback)((t=>{e.userProfile.save({key:"orderBookDecimal",value:t})}),[e.userProfile]),de=(0,i.useMemo)((()=>k(f.Z,null)),[]);return(0,i.useEffect)((()=>{U(W(),"changeSymbol")}),[N,o]),k(l.Z,{symbol:o,TICK_MAP:A,baseAsset:C,quoteAsset:Z,tickSizeMap:N,qty:O,ordersLoading:Y,openOrders:Q,asks:ee,bids:te,type:ae,changeType:ie,listStyle:{direction:r},isElectron:!0,level:j,setLevel:U,tableHeaderConfig:G,handleDecimalChange:ue,handleOrderSelected:ce,renderTicker:de,renderRow:se,renderAutoSizer:le,getHeaderConfig:h.M,getI18n:D,__css:S._,id:"futuresOrderbook",progessDirection:q,rowHeight:20,typeList:z?void 0:b.z$})}},eVjR:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var a=r("/SIk"),i=r.n(a),o=r("szIg"),n=(r("O94r"),r("sZZk")),l=r("Uqe+"),s=(r("Kiww"),r("TKP4"),r("71uP"),r("BLcC"),r("APA6"),r("w2aK")),c=(r("c4mN"),r("KsyR")),u=(r("bDLa"),r("9h1+")),d=r("VM/Z");r("uX2D"),r("38Cn"),i().createElement;r("f+9E"),r("5vwO"),r("GpFh");var m=r("YhxV"),p=r("Stvs"),f=r("rR/+");i().createElement;const g={red:m.Z.colors.sell,green:m.Z.colors.buy},y={red:f.Z.colors.sell,green:f.Z.colors.buy},b={red:p.Z.colors.sell,green:p.Z.colors.buy};d.Qq,d.qo,d.Pe;i().createElement;var h=r("ux7Q"),v=r("FOuV"),x=r("SJeZ");var S=i().createElement;d.Xs,d.Xs,d.Xs,d.Xs;const k=()=>{(0,o.useDispatch)();const[e,t]=(0,l.Z)(v.di,v.kj),{getI18n:r}=(0,u.ZK)(),{getI18n:i}=((0,u.gm)(),(0,x.yk)()),{setLayouts:s}=(0,a.useContext)(h.VY),{isIPad:c}=((0,o.useSelector)((e=>e.layout.pageLayout)),(0,u.Fs)()),d=((0,u.rd)(),(0,n.useMediaQuery)({query:"screen and (max-width: 1440px)"}));(0,a.useCallback)((e=>{if(d&&"six"===e)return;const{pathname:t,search:r}=window.location;let a="";if(t.indexOf("multipleChart")>-1){a=`${t.split("/").slice(0,4).join("/")}?type=${e}`}else{const i=t.split("/").slice(0,2);a=""===r?`${i.join("/")}/futures/multipleChart?type=${e}`:`${i.join("/")}/futures/multipleChart${r}&type=${e}`}return window.open(a,"_blank")}),[d]);return null},P=()=>{const e=(0,a.useRef)();return S(s.ZP,{trigger:"hover",ref:e,sx:{height:"64px",pt:"20px",pr:26,pl:"8px",bg:"moduleBg",position:"relative",cursor:"pointer",svg:{path:{fill:"t.primary"},"&:hover":{path:{fill:"t.yellow"}}}},"data-testid":"UIOptionSelect",overlay:S(k,null),placement:"bottom",enablePortal:!0},S(c.Z,{sx:{zIndex:10}}))},T=i().memo(P)},tXWo:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r("/SIk"),i=r.n(a),o=r("szIg"),n=r("fi7b"),l=r("9h1+"),s=r("zKvp"),c=r("a1YN"),u=r("TKP4"),d=r("71uP"),m=r("SJeZ"),p=r("VDPE"),f=i().createElement;const g=()=>{const{isMobile:e}=(0,l.Fs)(),t=((e=!0,t=!0)=>({root:{color:e?"themeConfig.grey800":"themeConfig.grey50",backgroundColor:e?"#FEF6D8":"t.yellow700",border:"1px solid "+(e?"t.yellow100":"#665A28"),borderRadius:"4px",height:"auto",padding:"12px",margin:"0px 10px 4px",marginTop:t?"10px":"0px","& .warning":{width:"16px",height:"16px",marginRight:"10px",color:"t.yellow200"},"& .description":{fontSize:"12px",width:t?"calc(100% - 30px)":"auto",marginRight:t?"25px":2,wordBreak:"break-word",color:"#F0B90B"}},close:{width:"16px",height:"16px"}}))((0,l.Fg)().isLight,e),{t:r}=(0,m.$G)(),{getI18n:i}=(0,m.yk)(),g=(0,p.yN)({hideOtherSymbol:!1}),y=(0,l.zk)("openTip"),b=(0,l.zk)("placeOrder"),h=(0,o.useDispatch)(),v=(0,a.useCallback)((()=>h.serviceStatus.updateStateImmutable({openTip:!1})),[]);return y&&f(u.Z,{sx:t.root,alignItems:"center"},f(u.Z,{alignItems:"flex-start"},f(s.Z,{className:"warning"}),f("div",{className:"description"},f("span",null,i("service-abnormal",{defaultValue:"The service is currently overloaded or malfunctioning."})," ","\xa0",b&&f(n.c,{t:r,i18nKey:(0,m.Gv)("abnormal-close-all"),components:{bold:f("span",{style:{fontWeight:"bold"}})},defaults:"<bold>Cancel all open orders</bold> and <bold>close all positions</bold> here."})),f(d.Z,{mt:"4px",onClick:g},i("confirmBtn",{defaultValue:"Confirm"})," >"," "))),f(c.Z,{sx:t.close,onClick:v}))}},a9vC:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>I});var a=r("TKP4"),i=r("71uP"),o=r("w2aK"),n=r("afeE"),l=r("Rdst"),s=r("/SIk"),c=r.n(s),u=r("XtDi"),d=r("wXRv"),m=r("EZ8p"),p=r("9h1+"),f=r("2rU8"),g=r("/1uR"),y=r("/MJE"),b=r("jQmP"),h=r("6Afj"),v=r("OjEc"),x=r("SJeZ"),S=r("4Dm0"),k=c().createElement;const P=(0,h.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(4726)]).then(r.bind(r,"uSdY")))),{registerActionHandle:T,constants:C}=y.Z;function Z({showRightBorderLine:e}){const[t]=(0,p.z4)(),r=(0,p.Kn)()[t]||{},o=(0,p.j2)(),n=(0,p.rR)(),u=(0,x.CE)()[t],{getI18n:d}=(0,x.yk)(),{loading:m,value:y}=(0,g.s)(o.deliveryDate),h=!m&&y<1,S=(0,b.p)(n),P=Number((null===u||void 0===u?void 0:u.estimatedSettlePrice)||0).toFixed(S),{isMobile:T}=(0,p.Fs)(),{symbol:C,contractTypeI18n:Z,deliveryDateFormat:M}=(0,x.oO)();return(0,s.useMemo)((()=>k(c().Fragment,null,k(a.Z,{sx:{alignItems:"center",mr:0,mb:[1,0],pr:"16px",borderRight:e?"1px solid":"none",borderColor:"newLine"}},k(a.Z,{flexDirection:"column",sx:{color:"t.primary"}},k("h1",{style:{fontSize:"20px",fontWeight:"500"}},C,"\xa0 "),k(f.XI,{sx:{fontSize:"sm"}},k("h1",{style:{fontSize:"14px",display:"flex",alignItems:"center",fontWeight:"500"}},`${Z} ${M}`,k(v.ZP,{config:r,sx:{display:"inline-block",top:"2px",position:"relative","& svg":{fontSize:"20px"}}})))),k(l.Z,{color:"t.primary",fontSize:20})),h&&k(i.Z,{sx:{color:"t.yellow200",fontSize:"12px",fontWeight:"normal",width:T?"100%":"100px",whiteSpace:T?"normal":"nowrap"}},d("EstimatedDeliveryPrice",{defaultValue:"Est delivery price"}),"(USD):",P))),[P,h,o])}const M=({name:e=null,showRightBorderLine:t})=>{const r=(0,S.G)(),a=(0,s.useRef)(),{0:i,1:l}=(0,s.useState)(!1),{0:p,1:f}=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=T((({name:e})=>{switch(e){case C.ACTION_TRADE_SEARCH_SYMBOL:l(!0),f(!0)}}));return()=>e}),[i,p]);const g=()=>l(!0),y=()=>{l(!1),f(!1)};(0,d.Z)({callback:y,id:"marketSymbol"});const b=(0,s.useMemo)((()=>({open:i,onMouseEnter:g,onMouseLeave:y,onClick:()=>l(!i)})),[i]),[h,v]=(0,u.Z)(!1),x=(0,s.useCallback)((()=>{v(!1)}),[v]),M=(0,s.useCallback)((()=>{v(!0)}),[v]);return k(c().Fragment,null,k(o.ZP,Object.assign({ref:a,sx:{"&:hover":{cursor:"pointer"},whiteSpace:"nowrap",minWidth:"auto",mb:[r?"4px":0]},trigger:"hover",enablePortal:!0,overlay:k(n.Z,{id:"marketSymbol",className:"dropdown-box",sx:{bg:"marketCard",left:["-16px",0],px:0,pt:0,pb:"xs",minWidth:["auto","425px"],maxWidth:["100vw","425px"],height:318,maxHeight:"100vh",boxShadow:"selectShadow"}},k(P,{name:e,isGridWidget:!1,openShotCut:p,selectedCallback:y,openEditFavoriteDialog:M}))},b),k(Z,{showRightBorderLine:t})),k(m.default,{visible:h,onClose:x}))},I=(0,s.memo)(M)},X2Id:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("sZZk"),l=r("9h1+"),s=r("GF72"),c=r("v2M8"),u=r("LTcb"),d=r("LcTY"),m=r("VM/Z"),p=r("gIGE"),f=r("SJeZ"),g=r("jQmP"),y=r("z+x3"),b=o().createElement;const h=Math.floor((y.FA-44-31)/20),v=({sx:e={}})=>{const[t,r]=(0,l.z4)(),{getI18n:o}=(0,u.Rk)(),{formatMi:v,formatTk:x}=(0,l.mC)(),{isCoinUnit:S}=(0,f.QV)(),{marginAsset:k,tickSize:P}=(0,l.j2)(),T=(0,g.p)(P),[C,Z]=r,M=(0,i.useMemo)((()=>[{text:`${o("price",{defaultValue:"Price"})}(${Z})`,area:"left"},{text:`${o("amount",{defaultValue:"Amount"})}(${S?C:k})`,area:"right"},{text:o("time",{defaultValue:"Time"}),area:"right"}]),[o,Z,C,k,S]),{trades:I,loading:w}=(0,p.K)({symbol:t,stream:(0,m.BN)(),isFutures:!0,isDelivery:!1}),E=(0,i.useCallback)((e=>{d.T.emit(d.F.UPDATE_ORDER_PRICE_INPUT,e.price)}),[]),A=(0,i.useMemo)((()=>o("common-nodata",{defaultValue:"No Data"})),[]),N=(0,n.useMediaQuery)({query:y.is}),O=(0,i.useMemo)((()=>(N?I.reverse().slice(0,h):I.slice().reverse()).map((e=>{const{quantity:t,price:r}=e,i=S?t:(0,f.WA)({quantity:t,price:r,precision:T,format:!1});return(0,a.Z)((0,a.Z)({},e),{},{quantity:i})}))),[I,N,T]);return b(c.Z,{sx:(0,a.Z)({px:"0",pb:"12px",width:"100%"},e)},b(s.Z,{headers:M,trades:O,loading:w,itemHeight:20,formatMi:v,formatTk:x,formatQty:S,onRowClick:E,emptyText:A}))},x=o().memo(v)},"7Q68":(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var a=r("/SIk"),i=r.n(a),o=r("O94r"),n=r.n(o),l=r("w2aK"),s=r("APA6"),c=r("TKP4"),u=r("Rdst"),d=r("SJeZ"),m=r("FOuV"),p=i().createElement;const{LAST_PRICE:f,MARK_PRICE:g}=m.gu,y={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",".filter-option":{padding:"10px 32px 10px 16px",color:"t.primary","&:hover":{bg:"line"},"&.active":{color:"t.yellow"},fontSize:"14px"}},b=({workingType:e,changeWorkingType:t,sx:r={}})=>{var i;const{getI18n:o}=(0,d.yk)(),m=(0,a.useMemo)((()=>[{label:o("advancedStrategy-lastPrice",{defaultValue:"Last"}),type:f},{label:o("advancedStrategy-markPrice",{defaultValue:"Mark"}),type:g}]),[o]);return p(l.ZP,{trigger:"hover",sx:{ml:"8px"},overlay:p(s.Z,{sx:y},m.map((({label:r,type:a})=>p("div",{className:n()({"filter-option":!0,active:a===e}),key:a,onClick:()=>{a!==e&&t(a)}},r))))},p(c.Z,{sx:{height:"40px",bg:"inputBg",borderRadius:"4px",justifyContent:"center",alignItems:"center",color:"t.primary",minWidth:"80px"}},null===(i=m.find((t=>t.type===e)))||void 0===i?void 0:i.label,p(u.Z,{ml:"4px",color:"t.third",size:16})))}},FOuV:(e,t,r)=>{"use strict";r.d(t,{yf:()=>o,vQ:()=>n,dk:()=>l,PR:()=>s,Yl:()=>c,hp:()=>u,HZ:()=>d,O6:()=>m,gu:()=>p,PH:()=>f,HM:()=>g,x:()=>y,CN:()=>b,IA:()=>h,Fy:()=>v,rb:()=>x,cQ:()=>S,Y1:()=>k,fj:()=>P,di:()=>T,kj:()=>C,Z$:()=>Z,PV:()=>M,rf:()=>I,hI:()=>w,kE:()=>E,Sm:()=>A,yX:()=>N,L6:()=>O,Br:()=>R,Zv:()=>L,Xd:()=>V,y3:()=>F});var a=r("VM/Z"),i=r("EPGa");const o="futures/funding-history",n={USDT:{pricePrecision:2},USDT2:{pricePrecision:8},BNB:{pricePrecision:2},BNB2:{pricePrecision:8},perpetual:{pricePrecision:2},delivery:{pricePrecision:4}},l={UFutures:{precision:2},CFutures:{precision:4}};let s;!function(e){e.LONG="LONG",e.SHORT="SHORT",e.BOTH="BOTH"}(s||(s={}));const c={ISOLATED:"ISOLATED",CROSSED:"CROSSED"};let u;!function(e){e.BUY="BUY",e.SELL="SELL"}(u||(u={}));const d={CONTRACT_PRICE:"Last Price",MARK_PRICE:"Mark Price"};let m,p,f;!function(e){e[e.LONG=1]="LONG",e[e.SHORT=-1]="SHORT"}(m||(m={})),function(e){e.LAST_PRICE="CONTRACT_PRICE",e.MARK_PRICE="MARK_PRICE"}(p||(p={})),function(e){e.LIMIT="limit",e.LIMIT_TYPE="LIMIT",e.MARKET="market",e.MARKET_TYPE="MARKET",e.STOP="stop",e.STOP_TYPE="STOP",e.TAKE_PROFIT="takeProfit",e.CLOSE="close",e.STOP_LIMIT="STOP",e.STOP_MARKET="STOP_MARKET",e.TAKE_PROFIT_LIMIT="TAKE_PROFIT",e.TAKE_PROFIT_MARKET="TAKE_PROFIT_MARKET",e.TRAILING_STOP_MARKET="TRAILING_STOP_MARKET",e.LIQUIDATION="LIQUIDATION"}(f||(f={}));const g={ONE_WAY:.001,TWO_WAY:5e-4},y={FEE_URL:`${a.$g}/%locale%/fee/futureFee`,DEPOSIT_URL:`${a.$g}/%locale%/my/wallet/exchange/deposit/crypto/%coin%`,BUYING_URL:`${a.$g}/%locale%/buy-sell-crypto?crypto=%crypto%`,BUYING_URL_ELECTRON:"binance://buy-sell-crypto?crypto=%crypto%",COLLATERAL_URL:`${a.$g}/%locale%/my/wallet/account/futures`,GRID_TRADING_URL:`${a.$g}/%locale%/futures/strategy/grid?symbol=%symbol%`,GRID_LEARN_URL:`${a.$g}/%locale%/futures/strategy/grid?symbol=%symbol%&activeTab=%activeTab%`,TWAP_LEARN_URL:`${a.$g}/%locale%/futures/strategy/twap?symbol=%symbol%`};function b(e="",t={}){return Object.keys(t).reduce(((e,r)=>e.replace(new RegExp(`%${r}%`,"g"),t[r])),e)}const h=1,v={transferAvailable:!a.Jg,openAccountAvailable:!a.Jg,feeAvailable:!a.Jg,enableReduceOnly:!0,enableTakeProfit:!0,enableFundingHistory:!a.Jg,leverageInfo:{symbol:"\u2715",defaultVal:20,minVal:1,maxVal:125,avaliableVal:40,minNationalVal:5e4},slideFlag:!0,enabledMonthly:!1,enabledActivity:!a.Jg&&!1},x={GTC:"GTC",IOC:"IOC",FOK:"FOK",POST_ONLY:"GTX",GTE_GTC:"GTE_GTC"},S=[i.Jm.STOP_MARKET,i.Jm.TAKE_PROFIT_MARKET],k=[i.Jm.MARKET,i.Jm.TRAILING_STOP_MARKET,i.Jm.STOP_MARKET,i.Jm.TAKE_PROFIT_MARKET];let P;!function(e){e.OTOCO="OTOCO",e.OTO="OTO"}(P||(P={}));const T="page-mode",C="order_mode",Z="chart_mode",M="futures-chartSymbol",I="futures-lastProductList",w={two:[],three:[],four:[],six:[]},E={two:["btcusd_quarter","btcusd_quarter"],three:["btcusd_quarter","btcusd_quarter","btcusd_quarter"],four:["btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter"],six:["btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter"]},A={two:["delivery","delivery"],three:["delivery","delivery","delivery"],four:["delivery","delivery","delivery","delivery"],six:["delivery","delivery","delivery","delivery","delivery","delivery"]},N={futures:"futures",delivery:"delivery"},O="btcusd_quarter",R=e=>e.includes(i.Jm.MARKET)&&!(e=>e===i.Jm.TRAILING_STOP_MARKET)(e),L="MODIFY_ORDER_CONFIG",V={kLine:!0,needConfirm:!0},F={PRICE:"PRICE",QUANTITY:"QUANTITY",BOTH:"BOTH"}},SJeZ:(e,t,r)=>{"use strict";r.d(t,{xm:()=>o.xm,Gv:()=>M.Gv,WA:()=>xe.WA,zZ:()=>$e,cO:()=>o.cO,G8:()=>se,zF:()=>ot,zu:()=>i.zu,KQ:()=>d.s,Kc:()=>d.K,he:()=>$,Wr:()=>f,Gf:()=>g.G,nL:()=>h,w2:()=>u,IV:()=>i.IV,d0:()=>v.d0,f3:()=>k,oD:()=>T,gN:()=>C.g,$h:()=>kt,oO:()=>I,G3:()=>w.G,UI:()=>i.UI,t1:()=>i.t1,mL:()=>E,yV:()=>A,s4:()=>V,aq:()=>F.a,b9:()=>H,_k:()=>G,e5:()=>J,CJ:()=>i.CJ,I3:()=>i.I3,Bd:()=>ae,d2:()=>ee,E5:()=>te,yk:()=>M.yk,C3:()=>re.C3,nN:()=>oe,m8:()=>le,uD:()=>Fe,Nx:()=>bt,rf:()=>pe,ho:()=>ge,H3:()=>Te,Qd:()=>Ue,m:()=>pt,se:()=>Ze,CE:()=>Ee,ux:()=>Ie,kN:()=>i.kN,K5:()=>Ne,M6:()=>De,t2:()=>o.t2,lE:()=>Re,Xb:()=>o.Xb,hN:()=>i.hN,db:()=>Ye,$J:()=>o.$J,F7:()=>i.F7,r8:()=>i.r8,QV:()=>Qe.Q,KK:()=>Ve,W5:()=>i.W5,BF:()=>St,NU:()=>i.NU,H$:()=>Oe,NJ:()=>fe,aT:()=>i.aT,LY:()=>Le,x_:()=>Xe,ql:()=>tt,_$:()=>it,$G:()=>M.$G,Gb:()=>c,eY:()=>i.eY,s7:()=>xe.s7,F:()=>o.dM,Dj:()=>o.Dj,h5:()=>Y});var a=r("VM/Z");var i=r("+dPF"),o=r("8Y2u"),n=r("cucV"),l=r("DCTW"),s=r("wdcV");const c=e=>{const{useLastPrice:t}=(0,i.F7)(),r=(0,o.dM)(),a=(0,s.L6)(r)[e]||[];return(0,n.ot)(a,t)},u=e=>{const{useLastPrice:t}=(0,i.F7)(),r=(0,o.dM)(),a=(0,s.L6)(r)[e]||[];return(0,l.ot)(a,t)};var d=r("nFk2"),m=r("GMmk"),p=r("Z62D");function f({symbol:e,isDelivery:t}){const{value:r=(e?{}:[])}=(0,m.N)((()=>t?(0,p.u)(e):(0,p.x)(e)),[e,t]);return r}var g=r("4c8F"),y=r("/SIk");r("W40Z"),r("Utn3");var b=r("EPGa");function h({orderType:e,activePrice:t,price:r}){let a=!1,i=!1;if(e===b.Jm.TRAILING_STOP_MARKET){const e=Number(t);t&&(e<r?i=!0:e>r&&(a=!0))}return{buyDisabled:a,sellDisabled:i}}var v=r("k7O1"),x=r("eM7A");async function S(){const{data:e}=await(0,x.w)();return e}function k(){const{value:e=!1,error:t,loading:r}=(0,m.N)(S,[]);return{value:e,error:t,loading:r}}var P=r("9h1+");const T=()=>{const{contractType:e}=(0,P.j2)();return e!==a.Yp.PERPETUAL};var C=r("vJ4P");var Z=r("GbrZ"),M=r("869M");function I(){const{getI18n:e}=(0,M.yk)(),t=(0,P.j2)();return(0,Z.H)(t,e)}var w=r("4Dm0");function E(e){return(0,P.iB)()[e]||{}}const A=()=>{const{0:e,1:t}=(0,y.useState)(!1);return{visible:e,onOpen:(0,y.useCallback)((()=>{t(!0)}),[]),onClose:(0,y.useCallback)((()=>{t(!1)}),[])}};var N=r("5vwO"),O=r("szIg"),R=r("eXOl"),L=r("KUZ0");const V=()=>{const e=(0,O.useSelector)(L.W9),{delivery:t,perpetual:r}=(0,R.Pv)();return e.map((e=>{if(Object.keys(r).includes(e))return(0,N.Z)((0,N.Z)({},r[e]||{}),{},{delivery:!1});const a=Object.values(t).find((({pair:t,contractType:r})=>{if("string"===typeof e&&e.indexOf("-")){const[a,i]=e.split("-");return a===t&&i===r}return!1}));return a?(0,N.Z)((0,N.Z)({},a),{},{delivery:!0}):void 0})).filter((e=>!!e))};var F=r("2ynj"),D=r("/MJE"),_=r("2yzH"),B=r("4m5F"),z=r("wqQ1"),K=r("cm/A");const q=({orderType:e,qty:t=0,triggerPrice:r,orderPrice:a,contractVal:i,activationPrice:o,lastPrice:n,unit:l,precision:s})=>{const c=l===B.SW.coin,u=l===B.AO.usdt;if(c||u){let l;switch(e){case b.Jm.LIMIT:case b.Jm.STOP_LIMIT:case b.Jm.TAKE_PROFIT_LIMIT:case b.Jm.POST_ONLY:l=a||0;break;case b.Jm.MARKET:l=n||0;break;case b.Jm.STOP_MARKET:case b.Jm.TAKE_PROFIT_MARKET:l=r||0;break;case b.Jm.TRAILING_STOP_MARKET:l=o||0;break;default:l=0}if(c){const e=Number(i);return l=Number(l),l?(0,K.Jp)(e/l,t).toFixed(s,2):0}return u&&l?(0,K.Jp)(l,t).toFixed(s,2):0}return t};var W=r("IewQ"),U=r("NQFm");const j=b.Jm.MARKET;function $(){var e;const t=(0,w.G)(),[r]=(0,P.z4)(),i=E(r)||{},{filters:o=[]}=i,n=(null===(e=o.find(U.$H))||void 0===e?void 0:e.tickSize)||"",l=(0,a.l6)(!0),s=(0,P.d)(r,l,{num:1,level:n,isDelivery:t}),c=(0,P.H0)(r,l,{num:1,level:n,isDelivery:t});return{bidPrice:(0,y.useMemo)((()=>{var e;return null===(e=s[0])||void 0===e?void 0:e.price}),[s]),askPrice:(0,y.useMemo)((()=>{var e;return null===(e=c[0])||void 0===e?void 0:e.price}),[c])}}function H(){return{placeOrderReducer:(e,{type:t,payload:r})=>t===W.z?(0,N.Z)((0,N.Z)({},e),r):(0,N.Z)({},e)}}const G=()=>{const e=(0,w.G)(),[t]=(0,i.eY)(),[r,[a]]=(0,P.z4)(),o=(0,P.j2)(),{marginAsset:n}=o,{getI18n:l}=(0,M.yk)(),s=l("Cont"),{contractVal:c}=(0,P.j2)(),u=(0,P.uH)(!0),d=(0,P.XY)(t),{maxBuyOrderAmount:m,maxSellOrderAmount:p}=(0,P.V2)({reduceOnly:!1,orderPrice:0,orderType:j,positionDirection:b.RS.OPEN}),f=q({qty:m,orderType:j,lastPrice:u,triggerPrice:u,orderPrice:u,activationPrice:u,unit:t,contractVal:c,precision:d}),g=q({qty:p,orderType:j,lastPrice:u,triggerPrice:u,orderPrice:u,activationPrice:u,unit:t,contractVal:c,precision:d});let y;return y=e?t===B.SW.coin?a:s:t===B.AO.usdt?n:a,{curMaxBuyAmount:f,curMaxSellAmount:g,cUnit:y,unitAmountPrecision:d}};function J(){const e=(0,O.useDispatch)(),{showFlashOrder:t}=(0,i.F7)(),r=(0,O.useSelector)(z.AK),a=(0,O.useSelector)((e=>e.setting.layout)),o=(0,y.useCallback)((t=>{localStorage.setItem(W.w,t),e.preference.updateState({showFlashOrder:t}),null===D.Z||void 0===D.Z||D.Z.tradeService.notifyProLayoutUpdate({name:a,detail:(0,N.Z)((0,N.Z)({},r),{flashOrder:t})})}),[a,r,e.preference]);return(0,y.useEffect)((()=>{0}),[o]),(0,y.useEffect)((()=>{{const{flashOrder:t}=r;localStorage.setItem(W.w,t),e.preference.updateState({showFlashOrder:t})}}),[e.preference,r]),[t,o]}const Y=()=>{const{getI18n:e}=(0,M.yk)(),t=(0,w.G)(),[r]=(0,i.eY)(),a=(0,P.XY)(),o=(0,P.XY)(t?B.SW.cont:B.AO.coin),n=(0,P.j2)(),l=(0,P.iB)(),[s]=Re(),[c]=Ve(),u=(0,P.c7)();return(0,y.useCallback)(((i,d)=>{var m;const p=null!==d&&void 0!==d&&d.symbol?l[null===d||void 0===d?void 0:d.symbol]:n,{contractVal:f,baseAsset:g,marginAsset:y,minQty:b,filters:h}=p,v=(null===(m=h.find(U.Jv))||void 0===m?void 0:m.notional)||"1";return(0,_.m)({unit:r,orderAmount:i,price:Number((null===d||void 0===d?void 0:d.price)||u()),contractVal:f,unitAmountPrecision:a,orderAmountPrecision:o,base:g,margin:y,minQty:b,minNotional:v,isDelivery:t,getFutI18n:e,positionDirection:s,reduceOnly:"boolean"===typeof(null===d||void 0===d?void 0:d.reduceOnly)?d.reduceOnly:c,messageType:null===d||void 0===d?void 0:d.messageType})}),[l,e,u,o,r,a,t,c,s,n])};var Q=r("aTw2");const X=["BTCUSDT","ETHUSDT","EOSUSDT","LTCUSDT","BCHUSDT","ETCUSDT","DOTUSDT","LINKUSDT","ADAUSDT","BNBUSDT","XLMUSDT"];function ee(){const e=(0,O.useDispatch)(),t=(0,P.Pc)(),[r]=(0,P.z4)();(0,y.useEffect)((()=>{t.isExistFutureAccount&&X.includes(r)&&(0,Q.v_)("/bapi/futures/v1/private/delivery/battle/um/game-status",{symbol:r}).then((t=>{t.success&&t.data.inBattle&&e.pageStore.updateState({battleStatus:t.data})})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[e.pageStore,r,t.isExistFutureAccount])}function te(){var e;const[t]=(0,P.z4)(),r=X.includes(t),a=(0,O.useSelector)((e=>e.pageStore.battleStatus))||{};return(0,N.Z)((0,N.Z)({},a),{},{inBattle:!(!r||!a.inBattle||(null===(e=a.battleOrderVo)||void 0===e?void 0:e.symbol)!==t)})}var re=r("unna");const ae=()=>(0,O.useSelector)(L.mS);var ie=r("jgBC");function oe(){const{getI18n:e}=(0,M.yk)(),t=(0,y.useCallback)(((t={},r=!1)=>function({product:e={},getFuturesI18n:t}){var r,a,i;const{pair:o,baseAsset:n,quoteAsset:l,deliveryDate:s}=e,c=(null===(r=e.contractType)||void 0===r||null===(a=r.toLowerCase())||void 0===a||null===(i=a.split(" "))||void 0===i?void 0:i[0])||"",u=s?new Date(s):null,d=o||`${n}${l}`,m=(0,ie.Hn)(e),p=t((g=c,{perpetual:"inversePerpetual"}[g]||g),{defaultValue:c||""}),f=m||!u?"":`${`0${u.getMonth()+1}`.slice(-2)}${`0${u.getDate()}`.slice(-2)}`;var g;return{symbol:d,contractTypeI18n:p,deliveryDateFormat:f,fullName:`${d} ${p} ${f}`,shortName:`${d} ${m?p:f}`}}({product:t,objValue:r,getFuturesI18n:e})),[e]);return(0,y.useMemo)((()=>({genSymbolDisplay:t})),[t])}const ne=e=>e.indexPrice,le=()=>(0,O.useSelector)(ne)||{},se=()=>(0,O.useSelector)((e=>e.assetIndex));var ce=r("FOuV"),ue=r("xGav"),de=r("yxRq");const{leverageInfo:me}=ce.Fy;function pe(){return(0,O.useSelector)(ue.G)}function fe(e){const{leverageList:t={}}=pe()||{};return t[e]||me.defaultVal}function ge({symbol:e,brackets:t,positions:r}){var a,i;const{curLeverage:o}=pe(),n=(null===t||void 0===t?void 0:t[e])||[],l=Math.abs((null===r||void 0===r||null===(a=r[e])||void 0===a?void 0:a.notionalValue)||0);return{leverageData:{curLeverage:o||me.defaultVal,minVal:me.minVal,maxVal:(null===n||void 0===n||null===(i=n[0])||void 0===i?void 0:i.maxOpenPosLeverage)||me.maxVal,userNotionalValue:l,userCurLeverage:(0,de.IK)(n,l)},findLeverageByLevel:e=>(0,de._F)(n,e)}}var ye=r("MwrP"),be=r.n(ye),he=r("N8YU"),ve=r("f36X"),xe=r("GG68"),Se=r("H3aL"),ke=r("k2tD");const Pe=[b.Jm.LIMIT,b.Jm.TAKE_PROFIT_LIMIT,b.Jm.TAKE_PROFIT_MARKET,b.Jm.STOP_LIMIT,b.Jm.STOP_MARKET];function Te({symbol:e}){const{getI18n:t}=(0,P.KL)(),{tickers:r={}}=(0,he.s)((0,a.l6)(!0))||{},{delOpenOrders:o}=(0,ve.W)(),{preOrders:n}=(0,P.E)(),l=(0,P.AM)(),{unit:s}=(0,i.F7)(),c=(0,y.useMemo)((()=>{return e=t,({pricePrecision:t,price:r,stopPrice:a,isBuy:i,type:o,timeInForce:n})=>{const l=e("openOrder-trigger",{defaultValue:"Trigger"}),s=e("openOrder-type-LIMIT",{defaultValue:"Limit"}),c=e("post-only",{defaultValue:"Post only"}),u=e("openOrder-type-STOP",{defaultValue:"Stop Limit"}),d=e("openOrder-type-STOP_MARKET",{defaultValue:"Stop Market"}),m=e("openOrder-type-TAKE_PROFIT_LIMIT",{defaultValue:"Take Profit Limit"}),p=e("openOrder-type-TAKE_PROFIT_MARKET",{defaultValue:"Take Profit Market"}),f=(0,ke.mD)(r,t),g=(0,ke.mD)(a,t);switch(o){case b.Jm.STOP_LIMIT:return`${u}: ${f} ${l} ${i?">=":"<="} ${g}`;case b.Jm.STOP_MARKET:return`${d} ${l} ${i?">=":"<="} ${g}`;case b.Jm.TAKE_PROFIT_LIMIT:return`${m} ${f} ${l} ${i?"<=":">="} ${g}`;case b.Jm.TAKE_PROFIT_MARKET:return`${p} ${l} ${i?"<=":">="} ${g}`;case b.Jm.LIMIT:default:return`${n===ce.rb.POST_ONLY?c:s} ${f}`}};var e}),[t]),u=(0,y.useCallback)((async e=>{be()(e)||await o(e)}),[o]),d=(0,y.useMemo)((()=>n.filter((({symbol:t,type:r})=>t===e&&Pe.includes(r)))),[n,e]);return(0,y.useMemo)((()=>d.map((e=>{const{orderId:t,origQty:a,type:i,price:o,stopPrice:n,symbol:d,side:m,activatePrice:p,executedQty:f,timeInForce:g}=e,y=l[d]||{},{pricePrecision:h,quantityPrecision:v,equalQtyPrecision:x,contractVal:S}=y,k=r[d]||{},{lastPrice:P}=k,T=+a-+f;let C="";const Z="BUY"===m,M=+n>0&&i!==b.Jm.LIMIT?n:o,I=c({pricePrecision:h,type:i,isBuy:Z,price:+o,stopPrice:+n,timeInForce:g});if(s===B.SW.coin){const e=ce.cQ.includes(i)?n:i===b.Jm.TRAILING_STOP_MARKET?p||P:o;C=(0,Se.unitChangeCoinQty)({quantity:a,contractVal:S,price:e,precision:x})}else if(s===B.AO.usdt){const e=ce.cQ.includes(i)?n:i===b.Jm.TRAILING_STOP_MARKET?p||P:o;C=(0,xe.WA)({quantity:a,price:e,precision:v,format:void 0})}else C=T.toFixed(v||2);return{orderId:t,quantity:+C>0?+C:0,origQty:a,price:(+M).toFixed(h),isBuy:Z,text:I,symbol:d,stopPrice:n,unit:s,order:e,cancel:()=>u(e)}}))),[d,l,r,c,s,u])}const Ce=e=>e.marginType;function Ze(){return(0,O.useSelector)(Ce)}var Me=r("IcOa");const Ie=()=>{const e=(0,O.useDispatch)(),t=(0,Me._n)(),r=(0,O.useSelector)(L.W9),a=(0,y.useCallback)((async(r,a,i=[])=>{let o=[],n="";a>-1?(o=[...i.slice(0,a),...i.slice(a+1)],n="del"):(o=[...i,r],n="add"),e.futureMarket.oprFuturesFavorite({symbol:r,type:n,values:o,isLoggedIn:t})}),[e.futureMarket,t]);return(0,y.useMemo)((()=>({favorites:r||[],setFavorite:a})),[r,a])},we=e=>e.markPrice,Ee=()=>(0,O.useSelector)(we)||{};var Ae=r("bmcq");const Ne=()=>{const e=(0,O.useDispatch)();return[(0,O.useSelector)(Ae.yg),e.futuresOrderForm.changeOrderType]},Oe=()=>{const e=(0,O.useDispatch)();return[(0,O.useSelector)(Ae.T8),e.futuresOrderForm.changeSubOrderType]},Re=()=>{const e=(0,O.useDispatch)();return[(0,O.useSelector)(Ae.Vj),e.futuresOrderForm.changePositionDirection]},Le=()=>{const e=(0,O.useDispatch)();return[(0,O.useSelector)(Ae.DX),e.futuresOrderForm.changeTimeInForce]},Ve=()=>{const e=(0,O.useDispatch)();return[(0,O.useSelector)(Ae.Oc),e.futuresOrderForm.changeReduceOnly]},Fe=()=>{const e=(0,O.useDispatch)();return[(0,O.useSelector)(Ae.kd),e.futuresOrderForm.changeIsTPSLEnabled]},De=()=>(0,O.useSelector)(L.nJ);var _e=r("Q2PN"),Be=r("IOB8");const{leverageInfo:ze}=ce.Fy,Ke=({symbol:e,marginAsset:t,contractVal:r,positionSide:a,delta:i=0})=>{var n;const c=(0,s._g)(e,a),u=(0,O.useSelector)(Be.Y),d=(0,O.useSelector)(_e._Y),m=(0,O.useSelector)(ue.G),{leverageList:p={}}=m,f=p[e]||ze.defaultVal,g=(0,l.yh)(f),y=(0,o.$J)(),b=y[c];if(!b)return{};const h=(0,s.nn)({positions:y,marginAsset:t}),{entryPrice:v,markPrice:x,isolated:S,isolatedWallet:k,positionSize:P}=b,T=[(0,N.Z)((0,N.Z)({},b),{},{isolatedWallet:k+i})],C=(0,l.Ak)(u,T,d,m,e,!0,!1,h),{liquidationPrice:Z=0}=(null===C||void 0===C?void 0:C[0])||{},M=(({markPrice:e=1,entryPrice:t=1,leverage:r=1,position:a,bracket:i,contractVal:o=0})=>{if(0===t||0===e)return 0;const{isolatedWallet:n=0,positionSize:s=0}=a,c=(0,l.yh)(r),u=(0,l.SH)(i,a);return Math.max(0,Math.min(n-u,n+s*o*(1/t-1/e)-Math.abs(s)*c*o/e))})({markPrice:x,entryPrice:v,leverage:f,position:b,bracket:(null===u||void 0===u?void 0:u[e])||[],contractVal:r}),I=h.filter((e=>!(null!==e&&void 0!==e&&e.isolated))),w=h.filter((e=>null===e||void 0===e?void 0:e.isolated)),E=(0,l.ot)(I),A=(0,l.Uy)(I,f,e),R=(0,l.sE)(w,f,e),L=null===d||void 0===d||null===(n=d[t])||void 0===n?void 0:n.crossWalletBalance,V=L+E-(A+R),F=(0,l.zW)(I,u),D=(0,l.wj)(w)*g,_=Math.max(Math.min(V,L-D-F),0);return(0,N.Z)((0,N.Z)({maxAppend:_,maxRemovable:M},b),{},{isolated:S,isolatedWallet:k,liquidationPrice:Z,marginAsset:t})},{leverageInfo:qe}=ce.Fy,We=({symbol:e,marginAsset:t,positionSide:r,delta:a=0})=>{var i;const l=(0,s._g)(e,r),c=(0,O.useSelector)(Be.Y),u=(0,O.useSelector)(_e._Y),d=(0,O.useSelector)(ue.G),{leverageList:m={}}=d,p=m[e]||qe.defaultVal,f=(0,n.yh)(p),g=(0,o.$J)(),y=g[l];if(!y)return{};const b=(0,s.nn)({positions:g,marginAsset:t}),{entryPrice:h,markPrice:v,isolated:x,isolatedWallet:S}=y,k=[(0,N.Z)((0,N.Z)({},y),{},{isolatedWallet:S+a})],P=(0,n.Zk)(c,k,u,d,e,!0,!1,b),{liquidationPrice:T=0}=(null===P||void 0===P?void 0:P[0])||{},C=(({markPrice:e=0,entryPrice:t,leverage:r=0,position:a,bracket:i})=>{const{isolatedWallet:o=0,positionSize:l=0}=a,s=(0,n.yh)(r),c=(0,n.SH)(i,a);return Math.max(0,Math.min(o-c,o+l*(e-t)-e*Math.abs(l)*s))})({markPrice:v,entryPrice:h,leverage:p,position:y,bracket:(null===c||void 0===c?void 0:c[e])||[]}),Z=b.filter((e=>!(null!==e&&void 0!==e&&e.isolated))),M=b.filter((e=>null===e||void 0===e?void 0:e.isolated)),I=(0,n.ot)(Z),w=(0,n.Uy)(Z,p,e),E=(0,n.sE)(M,p,e),A=null===u||void 0===u||null===(i=u[t])||void 0===i?void 0:i.crossWalletBalance,R=A+I-(w+E),L=(0,n.zW)(Z,c),V=(0,n.wj)(M)*f,F=Math.max(Math.min(R,A-V-L),0);return(0,N.Z)((0,N.Z)({maxAppend:F,maxRemovable:C},y),{},{isolated:x,isolatedWallet:S,liquidationPrice:T,marginAsset:t})},Ue=e=>(0,w.G)()?Ke(e):We(e);var je=r("6JMj");const $e=({symbol:e})=>{const{close:t}=(0,R.iB)()[e]||{},{tickers:r={}}=(0,he.s)((0,a.l6)(!0))||{};return r[e]||{lastPrice:Number(t)}},He=()=>{const[e]=(0,P.z4)(),t=(0,w.G)(),r=(0,O.useSelector)(_e._Y),s=(0,O.useSelector)(Be.Y),c=(()=>{const e=(0,R.iB)()||{},t={};for(var r in e){const a=e[r].close?Number(e[r].close):0;t[r]={lastPrice:a}}const{tickers:i}=(0,he.s)((0,a.l6)(!0))||{};return i||t})(),u=(0,o.dM)().map((e=>{var t;return(0,N.Z)((0,N.Z)({},e),{},{lastPrice:(null===c||void 0===c||null===(t=c[e.symbol])||void 0===t?void 0:t.lastPrice)||e.lastPrice})})),{preOrders:d}=(0,O.useSelector)(je.b),m=(0,O.useSelector)(ue.G)||{},{useLastPrice:p,assetMode:f}=(0,i.F7)(),{riskRatio:g,assetsRateEquity:y,assetsMM:b}=bt(t),h=se();return t?(0,l.Ak)(s,u,r,m,e,!0,p,void 0,d):f?(0,n.bG)({riskRatio:g,assetsRateEquity:y,assetsMM:b,assetIndexes:h,brackets:s,positions:u,balances:r,leverages:m,useLastPrice:p,openOrders:d}):(0,n.Zk)(s,u,r,m,e,!0,p,void 0,d)};var Ge=r("jQmP"),Je=r("mE5e");function Ye({symbol:e,tickSize:t}){const{getI18n:r}=(0,M.yk)(),a=He(),o=Ee(),n=(0,P.AM)(),{unit:l}=(0,i.F7)(),s=(0,Ge.p)(t),c=(0,y.useMemo)((()=>r("pnl",{defaultValue:"PNL"})),[r]);return(0,y.useMemo)((()=>a.filter((({symbol:t,positionSize:r})=>{const a=Number(r);return t===e&&0!==a})).map((({id:e,entryPrice:t,positionSize:r,unrealizedPnl:a,symbol:i,lastPrice:u})=>{var d;const{contractVal:m=0}=n[i]||{},p=null===(d=o[i])||void 0===d?void 0:d.markPrice;let f=0;l===B.SW.cont||l===B.AO.coin?f=Number(r):l===B.SW.coin?f=(0,Se.unitChangeCoinQty)({quantity:Number(r),contractVal:m,price:u||p,precision:s}):l===B.AO.usdt&&(f=(({quantity:e,price:t,func:r=Je.mD,precision:a=2,format:i})=>r(e*t,a,i))({quantity:Number(r),price:u||p,precision:s}));const g=Number(a.toFixed(2));return{id:e,price:t,quantity:f,isBuy:f>0,PNL:g,text:`${c} ${g}`,positionTypeText:c}}))),[a,e,l,o,n,s,c])}var Qe=r("IpC4");r("viQn");function Xe(e){const{getI18n:t}=(0,M.yk)(),{positionMode:r=!1}=(0,i.F7)(),a=r&&e?e:b.RS.BOTH;return(0,ie.ad)({positionMode:r,positionDirection:a,getFutI18n:t})}var et=r("SnVb");function tt({quantity:e}){const[t]=(0,i.eY)(),[r,[a,o]]=(0,P.z4)(),n=(0,P.j2)(),l=(0,w.G)(),{marginAsset:s}=n,{getI18n:c}=(0,M.yk)(),{quantityPrecision:u,equalQtyPrecision:d=2,minQty:m,tickSize:p}=n,f=Number(m),g=(0,ie.p8)(p);let y,h=u,v="",x=c("entry-size",{defaultValue:"Enter Size"});const S=c("Cont"),k=Number((0,P.uH)(!0)),{contractVal:T}=n,{curMaxBuyAmount:C,curMaxSellAmount:Z}=G(),I=k,E=~e.indexOf("%");let A,O;E?(A=(0,K.Jp)(parseFloat(e)/100,C).toNumber(),O=(0,K.Jp)(parseFloat(e)/100,Z).toNumber()):A=O=Number(e);const R={quantity:e,buyQty:A,sellQty:O,buyCont:0,sellCont:0};let L;return l?t===B.SW.coin?(y=a,h=d,R.buyCont=Number((0,et.Z)({orderType:b.Jm.MARKET,contractVal:T,qty:A,lastPrice:k,isDelivery:l})),R.sellCont=Number((0,et.Z)({orderType:b.Jm.MARKET,contractVal:T,qty:O,lastPrice:k,isDelivery:l})),L=1,!E&&Number(e)&&(v=R.buyCont<1?I?`${c("mininumQtyPrefix",{defaultValue:"Minimum Qty is"})} ${(0,K.Jp)(T/I).toFixed(h,0)} ${a} \u2248 1 ${S}`:"":` \u2248 ${R.buyCont||0} ${S}`)):(h=0,y=S,x=`1 ${c("Cont",{defaultValue:"Cont"})} = ${T} ${o}`):t===B.AO.usdt?(y=s,h=g,R.buyCont=k?A/k:0,R.sellCont=k?O/k:0,L=f,!E&&Number(e)&&(v=R.buyCont<f?I?`${c("mininumQtyPrefix",{defaultValue:"Minimum Qty is"})} ${(0,K.Jp)(f*I).toFixed(h,0)} ${s} \u2248 ${f} ${a}`:"":` \u2248 ${(0,K.GW)(R.buyCont||0,u)} ${a}`,I||(v=""))):(y=a,h=u),(0,N.Z)({cUnit:y,precision:h,helperText:v,ticker:n,minContQty:L,placeholder:x},R)}const rt=e=>e.transferAssets,at=e=>e.transferAssets.assets;function it(){return(0,O.useSelector)(rt)}function ot(){return(0,O.useSelector)(at)}r("2srY"),r("ZJL0");(0,a.l6)(!0);const nt="t.third";Array.from({length:4},(()=>nt));var lt=r("tN1Z"),st=r("Zl10"),ct=r.n(st),ut=r("h++M"),dt=r.n(ut),mt=r("QlFx");const pt=(e,t,r)=>r?gt(e,t):ft(e,t),ft=(e,t)=>{const r=(0,O.useSelector)(_e._Y),a=(0,O.useSelector)(Be.Y),i=(0,o.dM)(),l=[],c=e("header-Cross",{defaultValue:"Cross"}),u=(0,s.L6)(i.filter((e=>{const{positionSide:r,positionSize:a}=e;return 0!==a&&(!t&&r===b.PR.BOTH||t&&r!==b.PR.BOTH)})));return Object.values(u).forEach(((i=[])=>{const[o,s]=ct()(i,(e=>e.isolated));if(s.length>0){const{marginAsset:e}=s[0]||{},t=(null===r||void 0===r?void 0:r[e])||{},{crossWalletBalance:i=0}=t,o=(0,n.zW)(s,a),u=(0,n.ot)(s);l.push({riskRatio:yt(o,i,u),marginBalance:i+u,maintenanceMargin:o,key:`${e}`,marginAsset:e,symbols:s.map((e=>e.symbol)),isolated:!1,marginRatioLabel:`${e} ${c}`})}o.forEach((r=>{const{positionSide:i,symbol:o,isolatedWallet:s=0,marginAsset:c}=r,u=(0,mt.lE)(o,e),d=(null===a||void 0===a?void 0:a[o])||[],m=(0,n.SH)(d,r),p=(0,n.nn)(r),f=t?`${e(i,{defaultValue:dt()(i)})}`:"";l.push({riskRatio:yt(m,s,p),marginBalance:s+p,maintenanceMargin:m,key:`${o}_${i}`,marginAsset:c,symbols:[o],isolated:!0,marginRatioLabel:`${u} ${f}`})}))})),l},gt=(e,t)=>{const r=(0,O.useSelector)(_e._Y),a=(0,O.useSelector)(Be.Y),i=(0,o.dM)(),n=[],c=e("header-Cross",{defaultValue:"Cross"}),u=(0,s.L6)(i.filter((e=>{const{positionSide:r,positionSize:a}=e;return 0!==a&&(!t&&r===b.PR.BOTH||t&&r!==b.PR.BOTH)})));return Object.values(u).forEach(((i=[])=>{const[o,s]=ct()(i,(e=>e.isolated));if(s.length>0){const{marginAsset:e}=s[0]||{},t=(null===r||void 0===r?void 0:r[e])||{},{crossWalletBalance:i=0}=t,o=(0,l.zW)(s,a),u=(0,l.ot)(s);n.push({riskRatio:yt(o,i,u),marginBalance:i+u,maintenanceMargin:o,key:`${e}`,marginAsset:e,symbols:s.map((e=>e.symbol)),isolated:!1,marginRatioLabel:`${e} ${c}`})}o.forEach((r=>{const{positionSide:i,symbol:o,isolatedWallet:s=0,marginAsset:c}=r,u=(0,mt.lE)(o,e),d=(null===a||void 0===a?void 0:a[o])||[],m=(0,l.SH)(d,r),p=(0,l.nn)(r),f=t?`${e(i,{defaultValue:dt()(i)})}`:"";n.push({riskRatio:yt(m,s,p),marginBalance:s+p,maintenanceMargin:m,key:`${o}_${i}`,marginAsset:c,symbols:[o],isolated:!0,marginRatioLabel:`${u} ${f}`})}))})),n},yt=(e=0,t=0,r=0)=>{const a=t+r;return(0,Je.JX)(a?e/a*100:0,2)},bt=e=>e?xt():vt(),ht=(0,lt._)(((e,t,r,a)=>{let i=0,o=0;const l={},c={},u={},d=(0,s.L6)(r);return Object.entries(e).forEach((([e,r])=>{if(!r.marginAvailable)return;const s=d[e]||[],[,m]=ct()(s,(e=>e.isolated)),{crossWalletBalance:p=0}=r||{},f=(null===a||void 0===a?void 0:a[e])||{},{askRate:g=0,bidRate:y=0}=f;let b=p,h=0;if(m.length>0){const e=(0,n.zW)(m,t);b+=(0,n.ot)(m),h+=e}i+=Math.min(b*g,b*y),o+=h*g,c[e]=Math.min(b*g,b*y),l[e]=b,u[e]=h})),{riskRatio:yt(o,i),marginBalance:i,maintenanceMargin:o,assetsRateEquity:c,assetsEquity:l,assetsMM:u}})),vt=()=>{const e=(0,O.useSelector)(_e._Y),t=(0,O.useSelector)(Be.Y),r=(0,o.dM)(),a=se();return ht(e,t,r,a)},xt=()=>({riskRatio:0,marginBalance:0,maintenanceMargin:0,assetsRateEquity:{},assetsEquity:{},assetsMM:{}});function St(e=a.UW){const t=(0,w.G)(),r=(0,O.useSelector)((e=>e.setting)),{CoinFutures:{layout:i},USDTFutures:{layout:o}}=r,n=t?i===e:o===e;(0,re.C3)();return n}const kt=({symbol:e})=>{const{getI18n:t}=(0,M.yk)(),r=(0,P.iB)(),{baseAsset:a,marginAsset:o,isDelivery:n}=r[e]||{},{unit:l}=(0,i.F7)();return n?l===B.SW.coin?a:t("Cont"):l===B.AO.usdt?o:a}},nFk2:(e,t,r)=>{"use strict";r.d(t,{s:()=>o,K:()=>n});var a=r("szIg"),i=r("Q2PN");function o(){return(0,a.useSelector)(i.Pv)}function n(e){return(0,a.useSelector)(i.JW)[e]}},"4c8F":(e,t,r)=>{"use strict";r.d(t,{G:()=>o});var a=r("szIg"),i=r("IOB8");function o(){return(0,a.useSelector)(i.Y)}},k7O1:(e,t,r)=>{"use strict";r.d(t,{d0:()=>u,co:()=>d});var a=r("/SIk"),i=r("szIg"),o=r("l4n0"),n=r("At/5"),l=r("VM/Z"),s=r("eXOl"),c=(r("/M83"),r("FOuV"));const u=(e=!1)=>{const t=(0,i.useDispatch)(),{pathname:r,search:u}=(0,o.Hb)(),d=(0,s.AM)(),m=(0,n.C)(),p=(0,i.useSelector)((e=>e.setting.isElectronMainWindow));return(0,a.useCallback)((({isBlank:t=!1,stateSymbol:a,isDeliveryColumn:i=e,electronUpdateTabs:o=!1,resPathList:n=[]})=>{if(n.length<1){const e=((e,t,r=!1)=>{let a="";if(r){const{pair:r,contractType:i}=t[e]||{};a=[r,l.Yp[i]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}else{const{pair:r,contractType:i,symbol:o}=t[e]||{};a=i===l.Yp.PERPETUAL?o:[r,l.Yp[i]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}return a})(a,d,i);n=[i?c.yX.delivery:c.yX.futures,e]}const s=r.split("/"),f=s.slice(0,s.length-n.length).concat(n),g=a||n[n.length-1],y=`${f.join("/")}${u}`,b=d[g]||d[g.split("_").join("")],{contractType:h}=b;{let e=f[f.length-1],r=`binance://trade/quarterly/${e}${o?"":`?update=true&dateSymbol=${g}&refresh=${t}`}`;return i||(h===l.Yp.PERPETUAL&&(e="string"===typeof e&&e.split("_").join("")),r=`binance://trade/perpetual/${e}${o?"":`?update=true&dateSymbol=${g}&refresh=${t}`}`),void(p?window.open(r,"_blank"):m(y))}}),[p,t.pageStore,t.products,m,e,r,d,u])},d=(e,t,r=!1)=>{let a="";const i=r?c.yX.delivery:c.yX.futures;if(r){const{pair:r,contractType:i}=t.delivery[e]||{};a=[r,l.Yp[i]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}else{const{pair:r,contractType:i,symbolDisplay:o}=t.perpetual[e]||{};a=i===l.Yp.PERPETUAL?o.split("/").join("_"):[r,l.Yp[i]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}return[i,a]}},vJ4P:(e,t,r)=>{"use strict";r.d(t,{g:()=>o});var a=r("/SIk"),i=r("VM/Z");function o(){const{0:e,1:t}=(0,a.useState)({});return(0,a.useEffect)((()=>(0,i.BN)().getContractInfoStream().subscribe((e=>{t(e)}))),[]),e}},"3AuT":(e,t,r)=>{"use strict";r.d(t,{U:()=>h});var a=r("5vwO"),i=r("VM/Z"),o=r("9h1+"),n=r("W2gp"),l=r("H8sf"),s=r.n(l),c=r("/SIk"),u=r("szIg"),d=r("TNnZ"),m=r("4m5F"),p=r("HkAn"),f=r("00zm"),g=r("bi7V"),y=r("wdcV");const b=(0,i.l6)(!0),h=()=>{const e=(0,o._n)(),{isExistFutureAccount:t}=(0,o.Pc)(),[r]=(0,o.z4)(),i=(0,u.useDispatch)(),l=(0,c.useRef)({}),[h=""]=r.split("_"),{run:v}=(0,g.Z)((()=>i.position.updatePosition(l.current)),300);(0,p.aD)(),(0,o.mL)(),(0,o.S_)(),(0,o.U6)(r,b,!0),(0,c.useEffect)((()=>{i.userCenter.queryCurrency(),i.products.queryFuturesProduct(),i.bracket.getBrackets("",!0),i.symbolConfigInfo.querySymbolConfigInfo()}),[i.userCenter,i.bracket,i.products,i.symbolConfigInfo]),(0,c.useEffect)((()=>b.getMarkPriceStream(r).subscribe((e=>{i.markPrice.updateStateImmutable(e)}))),[i.markPrice,r]),(0,c.useEffect)((()=>b.getIndexPriceStream(h).subscribe((e=>{i.indexPrice.updateStateImmutable({[r]:(0,a.Z)((0,a.Z)({},e[h]),{},{symbol:r})})}))),[i.indexPrice,h,r]),(0,c.useEffect)((()=>{e&&t&&(i.leverage.getUserLeverageData(r),i.position.queryPosition({symbol:r}),i.preference.getOrderConfirmation(),i.preference.getUnit({data:{unit:m.SW.cont}}),i.preference.getFuturesPnlBasis(),i.preference.getPositionMode(),i.preference.getPriceProtection(d.x),i.balance.getBalance(!0),i.futureMarket.queryFuturesFavorites(),i.feeTier.getFeeTier({name:h}),i.tradeForbidden.getCoolingPeriodConfig(),i.userCenter.getAgentCode())}),[r,h,e,t,i.preference,i.balance,i.leverage,i.position,i.futureMarket,i.feeTier,i.userCenter]);const x=(0,f.D)((t=>{if(e){const e=Object.values(t).map((e=>({symbol:null===e||void 0===e?void 0:e.symbol,markPrice:null===e||void 0===e?void 0:e.markPrice}))),r=(0,y.kh)(e);l.current=s()({},l.current,r),v()}}));(0,c.useEffect)((()=>b.getMarkPriceMiniStream().subscribe((e=>{i.markPrice.updateStateImmutable(e),x(e)}))),[]),(0,c.useEffect)((()=>{if(e&&t)return b.getStreamTickers().subscribe((e=>{const t=(0,y.kh)(Object.values(e));l.current=s()({},l.current,t),v()}))}),[e,t]),(0,c.useEffect)((()=>{if(e&&t)return b.getUserAssetsStream().subscribe((({balances:e,positions:t})=>{const r=(0,n.FB)(e,"asset");console.info(JSON.stringify({name:"useDeliveryInitState",value:Object.values(t)}));const o=Object.values(t).reduce(((e,t)=>{const{symbol:r="",positionSide:i}=t;return e[(0,y._g)(r,i)]=(0,a.Z)((0,a.Z)({},t),{},{pushTime:Date.now()}),e}),{});i.balance.mergeState(r),l.current=s()({},l.current,o),v()}))})),(0,c.useEffect)((()=>{if(e&&t){i.serviceStatus.getServiceStatus(!0);const e=setInterval((()=>{i.serviceStatus.getServiceStatus(!0)}),18e4);return()=>clearInterval(e)}}),[e,t])}},"4Dm0":(e,t,r)=>{"use strict";r.d(t,{G:()=>i});var a=r("l4n0");function i(){const{pathname:e}=(0,a.Hb)();return e.includes("delivery")}},"2ynj":(e,t,r)=>{"use strict";r.d(t,{a:()=>o});var a=r("szIg");const i=e=>e.feeTier;function o(){return(0,a.useSelector)(i)}},"57Vj":(e,t,r)=>{"use strict";r.d(t,{D:()=>x,n:()=>S});var a=r("5vwO"),i=r("VM/Z"),o=r("9h1+"),n=r("W2gp"),l=r("H8sf"),s=r.n(l),c=r("/SIk"),u=r("szIg"),d=r("00zm"),m=r("+Ak0"),p=r("Fidm"),f=r("4m5F"),g=r("HkAn"),y=r("SJeZ"),b=r("bi7V"),h=r("wdcV");const v=(0,i.l6)(!0),x=()=>{const e=(0,o._n)(),{isExistFutureAccount:t}=(0,o.Pc)(),[r]=(0,o.z4)(),i=(0,u.useDispatch)(),{getI18n:l}=(0,y.yk)(),m=(0,c.useRef)({}),{run:x}=(0,b.Z)((()=>i.position.updatePosition(m.current)),300);(0,g.aD)(),(0,o.mL)(),(0,o.S_)(),(0,c.useEffect)((()=>{i.userCenter.queryCurrency(),i.products.queryFuturesProduct(),i.bracket.getBrackets(),i.symbolConfigInfo.querySymbolConfigInfo()}),[i.userCenter,i.bracket,i.products,i.symbolConfigInfo]),(0,c.useEffect)((()=>{e&&t&&(i.leverage.getUserLeverageData(r),i.position.queryPosition({symbol:r}),i.preference.getOrderConfirmation(),i.preference.getUnit({data:{unit:f.AO.coin}}),i.preference.getFuturesPnlBasis(),i.preference.getPositionMode(),i.preference.getMultiAssetMarginEnableConfig().then((e=>{e&&i.preference.getAssetMode()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})),i.preference.getPriceProtection(p.xK),i.balance.getBalance(!1),i.futureMarket.queryFuturesFavorites(),i.feeTier.getFeeTier({name:r}),i.tradeForbidden.getCoolingPeriodConfig(),i.userCenter.getAgentCode())}),[r,e,t,i.preference,i.balance,i.leverage,i.position,i.futureMarket,i.feeTier,i.grid,i.userCenter]),(0,c.useEffect)((()=>v.getMarkPriceStream(r).subscribe((e=>{i.markPrice.updateStateImmutable(e),i.indexPrice.updateStateImmutable(e)}))),[i.indexPrice,i.markPrice,r]);const S=(0,d.D)((t=>{if(e){const e=Object.values(t).map((e=>({symbol:null===e||void 0===e?void 0:e.symbol,markPrice:null===e||void 0===e?void 0:e.markPrice}))),r=(0,h.kh)(e);m.current=s()({},m.current,r),x()}}));(0,c.useEffect)((()=>v.getMarkPriceMiniStream().subscribe((e=>{i.markPrice.updateStateImmutable(e),S(e)}))),[]),(0,c.useEffect)((()=>{if(e&&t)return v.getStreamTickers().subscribe((e=>{const t=(0,h.kh)(Object.values(e));m.current=s()({},m.current,t),x()}))}),[e,t]),(0,c.useEffect)((()=>{if(e&&t)return v.getUserAssetsStream().subscribe((({balances:e,positions:t})=>{const r=(0,n.FB)(e,"asset");console.info(JSON.stringify({name:"useFuturesInitState",value:Object.values(t)}));const o=Object.values(t).reduce(((e,t)=>{const{symbol:r,positionSide:i}=t;return e[(0,h._g)(r,i)]=(0,a.Z)((0,a.Z)({},t),{},{pushTime:Date.now()}),e}),{});i.balance.mergeState(r),m.current=s()({},m.current,o),x()}))}));const k=(0,d.D)((({leverage:e})=>{if(e){const{symbol:t,leverage:a}=e;r===t?i.leverage.updateCurrentLeverage({symbol:t,leverage:a}):i.leverage.updateLeverageList({symbol:t,leverage:a})}}));(0,c.useEffect)((()=>{if(e&&t)return v.getUserAccountConfigUpdateStream().subscribe((e=>k(e)))})),(0,c.useEffect)((()=>{if(e&&t){i.serviceStatus.getServiceStatus(!1);const e=setInterval((()=>{i.serviceStatus.getServiceStatus(!1)}),18e4);return()=>clearInterval(e)}}),[e,t])},S=()=>{const e=(0,o._n)(),{isExistFutureAccount:t}=(0,o.Pc)(),r=(0,u.useDispatch)();(0,c.useEffect)((()=>{e&&t&&m.C&&r.orders.queryOpenOrder()}),[e,t,r.orders])}},"869M":(e,t,r)=>{"use strict";r.d(t,{yk:()=>l,Gv:()=>s,$G:()=>c});var a=r("Tr4L"),i=r("U0yl");const o="futures-trade",n="futures-ui",l=()=>(0,i.ZK)(o,n),s=e=>`${o}-${e}`,c=()=>(0,a.$)(n)},unna:(e,t,r)=>{"use strict";r.d(t,{C3:()=>n});var a=r("szIg"),i=r("VM/Z");r("wqQ1");const o=e=>e.layout.pageLayout,n=()=>(0,a.useSelector)(o)||i.$f},JlsY:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var a=r("FOuV"),i=r("SJeZ");const{UFutures:{precision:o},CFutures:{precision:n}}=a.dk;function l(){return(0,i.G3)()?n:o}},"8Y2u":(e,t,r)=>{"use strict";r.d(t,{xm:()=>c,$J:()=>d,dM:()=>m,kD:()=>p,Dj:()=>f,cO:()=>g,t2:()=>y,Xb:()=>b});var a=r("5vwO"),i=r("szIg"),o=r("eXOl"),n=r("tN1Z"),l=r("wdcV");const s=e=>"undefined"!==typeof e?Number(e):void 0,c=(0,n._)(((e,t)=>Object.entries(e).reduce(((e,[r,i])=>{const{symbol:o}=i||{},n=t[o]||{},{close:l,contractVal:c,marginAsset:u,baseAsset:d,quoteAsset:m,quantityPrecision:p,pricePrecision:f,equalQtyPrecision:g,tickSize:y,limitStepSize:b,marketStepSize:h}=n;return e[r]=(0,a.Z)((0,a.Z)({lastPrice:l,contractVal:c,marginAsset:u,baseAsset:d,quoteAsset:m,quantityPrecision:p,pricePrecision:f,equalQtyPrecision:g,tickSize:y,limitStepSize:b,marketStepSize:h},i),{},{askNotional:s(i.askNotional),bidNotional:s(i.bidNotional),cumRealized:s(i.cumRealized),entryPrice:s(i.entryPrice),isolatedWallet:s(i.isolatedWallet),markPrice:s(i.markPrice),notionalValue:s(i.notionalValue),positionSize:s(i.positionSize),unrealizedProfit:s(i.unrealizedProfit)}),e}),{}))),u=(0,n._)((e=>(0,l.J9)(e)));function d(){const e=(0,i.useSelector)((e=>e.position.positionMap)),t=(0,o.Vh)();return c(e,t)}function m(){const e=d();return u(e)}function p(){const{length:e}=m();return e}const f=()=>(0,i.useSelector)((e=>e.position.validPositionKeyArray)),g=e=>(0,i.useSelector)((t=>{var r;return(null===(r=t.position.positionMap)||void 0===r?void 0:r[e])||{}})),y=(e,t)=>(0,i.useSelector)((r=>{var a,i;return null===(a=r.position.positionMap)||void 0===a||null===(i=a[e])||void 0===i?void 0:i[t]})),b=()=>(0,i.useSelector)((e=>e.position.hideOtherSymbol))},"+dPF":(e,t,r)=>{"use strict";r.d(t,{zu:()=>P,IV:()=>N,UI:()=>Z,t1:()=>M,CJ:()=>E,I3:()=>A,kN:()=>O,hN:()=>T,F7:()=>S,r8:()=>C,W5:()=>I,NU:()=>R,aT:()=>w,eY:()=>k});var a=r("5vwO"),i=r("/SIk"),o=r("szIg"),n=r("VM/Z");const l=e=>e.preference,s=e=>e.preference.displayMarginTypeAndLeverage,c=e=>e.preference.enableAdvancedTPSL,u=e=>e.preference.positionMode,d=e=>e.preference.usdtFuturesUnit,m=e=>e.preference.coinFuturesUnit,p=e=>e.preference.assetMode,f=e=>e.preference.TPSLNotify,g=e=>e.preference.isEnableFundingFee,y=e=>e.preference.fundingFee,b=e=>e.preference.fundingFeeRange,h=e=>e.preference.orderConfirmation,v=e=>e.preference.showPlusMinusButton;var x=r("jgBC");function S(){const e=(0,o.useSelector)(l),t=(0,n.nM)();return(0,a.Z)((0,a.Z)({},e),{},{unit:t?e.coinFuturesUnit:e.usdtFuturesUnit})}function k(){const e=(0,o.useDispatch)(),t=(0,n.nM)(),r=(0,o.useSelector)(d),a=(0,o.useSelector)(m);return[t?a:r,e.preference.changeUnit]}function P(){const e=(0,o.useDispatch)();return[(0,o.useSelector)(p),e.preference.changeAssetMode]}function T(){const e=(0,o.useDispatch)();return[(0,o.useSelector)(u),(0,i.useCallback)((t=>e.preference.changePositionMode({dualSidePosition:t})),[])]}function C(){return{showPreferencePanel:(0,i.useCallback)((e=>{x.TB.emit(x.FP.SHOW_PREFERENCE_PANEL,e)}),[]),hidePreferencePanel:(0,i.useCallback)((()=>{x.TB.emit(x.FP.CLOSE_PREFERENCE_PANEL)}),[])}}function Z(){const e=(0,o.useDispatch)();return[(0,o.useSelector)(s),t=>{e.preference.updateState({displayMarginTypeAndLeverage:t})}]}function M(){const e=(0,o.useDispatch)();return[(0,o.useSelector)(c),t=>{e.preference.updateState({enableAdvancedTPSL:t})}]}function I(){const e=(0,i.useRef)(),t=(0,i.useCallback)((()=>{var t,r;null===(t=e.current)||void 0===t||null===(r=t.showResponsibleConfigPanel)||void 0===r||r.call(t)}),[]);return{responsiblePanelRef:e,showResponsiblePanel:t}}function w(){const e=(0,o.useDispatch)();return[(0,o.useSelector)(f),e.preference.updateTPSLNotify]}function E(){const e=(0,o.useDispatch)();return[{isEnableFundingFeeNotify:(0,o.useSelector)(g),fundingFee:(0,o.useSelector)(y)},e.preference.updateFundingFeeNotify]}function A(){return(0,o.useSelector)(b)}function N(){return(0,o.useDispatch)().preference.changeOrderConfirmation}function O(){return[(0,o.useSelector)(h),N()]}function R(){return[(0,o.useSelector)(v),(0,o.useDispatch)().preference.updateShowPlusMinusButton]}},IpC4:(e,t,r)=>{"use strict";r.d(t,{Q:()=>l});var a=r("4m5F"),i=r("+dPF");const{coin:o,usdt:n}=a.AO;function l(){const{unit:e}=(0,i.F7)();return{isCoinUnit:e===o,isUSDTUnit:e===n}}},viQn:(e,t,r)=>{"use strict";r.d(t,{I:()=>l});var a=r("/SIk"),i=r("9h1+"),o=r("eXOl"),n=r("FOuV");function l(e){const t=(0,i.tZ)(),r=(0,o.AM)(),{pair:l="",quoteAsset:s}=r[e]||{};return(0,a.useMemo)((()=>`/${t}/${n.yf}${"USD"===s?"/quarterly":""}/3?contract=${l}`),[t,s,l])}},UGwn:(e,t,r)=>{"use strict";r.d(t,{X:()=>n});var a=r("/SIk"),i=r("szIg"),o=r("IcOa");const n=()=>{const e=(0,i.useDispatch)(),t=(0,o._n)();return(0,a.useCallback)((r=>{var a;e.futureMarket.oprFuturesFavorite({values:(a=r,a?[...new Set(a.map((e=>e.isDelivery?`${e.pair}-${e.contractType}`:e.symbol)))]:[]),isLoggedIn:t})}),[e.futureMarket,t])}},bi7V:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r("/SIk");const i=(e,t,r)=>{const i=Array.isArray(t)?t:[],o="number"===typeof t?t:r||0,n=(0,a.useRef)(!1),l=(0,a.useRef)(),s=(0,a.useRef)(e);s.current=e;const c=(0,a.useRef)([]),u=(0,a.useCallback)((()=>{l.current&&clearTimeout(l.current),l.current=void 0}),[]),d=(0,a.useCallback)(((...e)=>{c.current=e,l.current||(l.current=setTimeout((()=>{s.current(...c.current),l.current=void 0}),o))}),[o,u]);return(0,a.useEffect)((()=>u),[]),(0,a.useEffect)((()=>{n.current?d():n.current=!0}),[...i,d]),{run:d,cancel:u}}},GG68:(e,t,r)=>{"use strict";r.d(t,{WA:()=>s,s7:()=>c});var a=r("/SIk"),i=r("cm/A"),o=r("jQmP"),n=r("IpC4"),l=r("k2tD");const s=({quantity:e,price:t,func:r=l.mD,precision:a=2,format:i})=>r(e*t,a,i),c=e=>{const t=(0,o.p)(e.tickSize),{isCoinUnit:r}=(0,n.Q)(),c=(0,a.useCallback)((({quantity:e,price:a,func:i=l.mD,precision:o=t,format:n})=>r?e:s({quantity:e,price:a,precision:o,func:i,format:n})),[r,t]),u=(0,a.useCallback)((()=>r?e.baseAsset:e.marginAsset),[r,e]),d=(0,a.useCallback)((({quantity:e,price:a,func:o=l.mD,qtyPrecision:n=2,tickSizePrecision:c,format:d=!0})=>{const m=u();return r?`${(0,i.uf)(e,n)} ${m}`:`${s({quantity:e,price:a,precision:c||t,func:o,format:d})} ${m}`}),[u,t,r]);return(0,a.useMemo)((()=>({getQuantity:c,getAssetLabel:u,getFormatedQuantity:d})),[u,c,d])}},"lP6+":(e,t,r)=>{"use strict";r.d(t,{z:()=>m});var a=r("lk5g"),i=r("frZ3"),o=r("/SIk"),n=r("VM/Z"),l=r("9h1+"),s=r("S24M");const c=(0,n.l6)(!0);let u,d;const m=()=>{const e=(0,l._n)(),{isExistFutureAccount:t}=(0,l.Pc)();(0,o.useEffect)((()=>{if(e&&t)return c.getStreamTickers().subscribe((()=>{u=Date.now()}))}),[e,t]),(0,i.Z)((()=>{u&&Date.now()-u>=5e3&&d!==u&&(d=u,(0,a.gp)({t:"ws_nodata"}),(0,s.j)("ws_nodata",{source:"futures",isOnline:window.navigator.onLine,visibilityState:document.visibilityState}))}),1e3)}},Q2PN:(e,t,r)=>{"use strict";r.d(t,{Pv:()=>a,_Y:()=>i,JW:()=>o});const a=e=>e.balance.balance,i=e=>e.balance.balance,o=e=>e.balance},IOB8:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});const a=e=>e.bracket},KUZ0:(e,t,r)=>{"use strict";r.d(t,{W9:()=>a,mS:()=>i,nJ:()=>o,zO:()=>n});const a=e=>e.futureMarket.futuresFavorites,i=e=>e.futureMarket.futuresMarketTabs,o=e=>e.futureMarket.placeholderSymbols,n=e=>e.futureMarket.isLoadedSectionInfo},xGav:(e,t,r)=>{"use strict";r.d(t,{G:()=>a});const a=e=>e.leverage},"2hF0":(e,t,r)=>{"use strict";r.d(t,{w:()=>ne});var a=r("AA3X"),i=r("5vwO"),o=r("TqPH"),n=r("rfrl"),l=r("H8sf"),s=r.n(l),c=r("9sz9");const u=(0,c.NY)()({name:"assetIndex",state:{},reducers:{mergeState(e,t){const r={};return Object.values(t).forEach((e=>{const t=e.symbol.replace(/USD$/,"");r[t]=e})),(0,n.ZP)(e,(e=>s()({},e,r)))}},effects:{async getAssetIndex(){const{success:e,data:t}=await(0,o.p)();if(e){const e=null===t||void 0===t?void 0:t.map((e=>(0,i.Z)((0,i.Z)({},e),{},{askBuffer:Number(e.askBuffer),askRate:Number(e.askRate),bidBuffer:Number(e.bidBuffer),bidRate:Number(e.bidRate),index:Number(e.index)})));this.mergeState(e)}}}});var d=r("YLfc"),m=r("W2gp"),p=r("pIEz");const f=(0,c.NY)()({name:"balance",state:{loading:!0,isError:!1,balance:{}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable,mergeState(e,t){const r=s()({},e.balance,t);return(0,i.Z)((0,i.Z)({},e),{},{loading:!1,isError:!1,balance:r})}},effects:e=>({async getBalance(t){const{success:r,data:a=[]}=t?await(0,p.ig)():await(0,p.kL)(),o=t?a:a.map((e=>(0,i.Z)((0,i.Z)({},e),{},{availableBalance:"availableBalance"in e?Number(e.availableBalance):0,crossWalletBalance:Number(e.crossWalletBalance),initialMargin:Number(e.initialMargin),maintenanceMargin:Number(e.maintenanceMargin),marginBalance:Number(e.marginBalance),unrealizedProfit:Number(e.unrealizedProfit),walletBalance:Number(e.walletBalance)})));if(r){const t=(0,m.FB)(o,"asset"),r=o.map((e=>e.asset));e.transferAssets.updateState({assetTypes:r}),this.mergeState(t||{})}else this.updateState({isError:!0})}})});var g=r("aTw2");const y=(0,c.NY)()({name:"bracket",state:{isError:!1},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable,mergeState:(e,t)=>(0,i.Z)((0,i.Z)({},e),{},{isError:!1},t)},effects:{async getBrackets(e=""){let t;try{t=await(0,g.v_)("/bapi/futures/v1/friendly/future/common/brackets",{symbol:e},{enableErrorMsgIntercept:!1})}catch(r){t={success:!1}}if(t.success){const{brackets:e=[]}=t.data||{},r=(0,m.FB)(e,"symbol","riskBrackets");this.mergeState(r||{})}else this.updateState({isError:!0})}}});var b=r("ZEEb");const h=(0,c.NY)()({name:"feeTier",state:{},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async getFeeTier(e){const t=await(0,b.Io)(e);this.updateState(t)}}});var v=r("2miT"),x=r("mlwG"),S=r.n(x);const k=(0,c.NY)()({name:"futureMarket",state:{futuresFavorites:[],sortInfo:{},radioWord:"change",futuresMarketTabs:[{description:"",display:"USD\u24c8-M",ruleNumber:1e3,sectionKey:"USDT-MARIN",sortValue:1},{description:"",display:"COIN-M",ruleNumber:4e3,sectionKey:"COIN-MARIN",sortValue:2}],isLoadedSectionInfo:!1,isLoadedSubTab:!1,placeholderSymbols:[]},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async queryFuturesFavorites(){const{success:e=!1,data:t}=await(0,v.eq)(),r=(t||"").length?t.split(","):[];if(e){var a,i;const e=null===(a=JSON.parse(localStorage.getItem("persist:root")))||void 0===a?void 0:a.futureMarket,t=(null===(i=JSON.parse(e||null))||void 0===i?void 0:i.futuresFavorites)||[];let o=!1;r.length!==t.length&&(o=!0);for(let a=0;a<t.length;a++){const e=t[a];-1===r.indexOf(e)&&(o=!0)}this.updateState({futuresFavorites:o?r:t})}},async oprFuturesFavorite({values:e,isLoggedIn:t},r){const a=r.futureMarket.futuresFavorites;if(this.updateState({futuresFavorites:e}),!t)return null;const i=await(0,v.YM)({optionalSymbols:S()(e.join(","),",")});return null!==i&&void 0!==i&&i.success||this.updateState({futuresFavorites:a}),i},async getSelectionInfo(){const{success:e=!1,data:t}=await(0,v.T)({pathFilter:!0});e&&t.length&&this.updateState({futuresMarketTabs:t}),this.updateState({isLoadedSectionInfo:!0})},async getSymbolExtInfo(){const{success:e=!1,data:t}=await(0,v.TV)({pathFilter:!0});e&&t.length&&this.updateState({placeholderSymbols:t})}}});var P=r("srVz");const T=(0,c.NY)()({name:"grid",state:{openGrids:{loading:!1,data:[]}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async queryOpenGrids(e){this.updateStateImmutable({openGrids:{loading:!0}});const{success:t,data:r}=await(0,P.qq)(e);t&&this.updateState({openGrids:{loading:!1,data:r||[]}})}}}),C=(0,c.NY)()({name:"indexPrice",state:{},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{}});var Z=r("VM/Z"),M=r("c7Of");const I=(0,c.NY)()({name:"layout",state:{pageLayout:void 0},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:e=>({toggleLayout(t){e.pageStore.updateState({showSetting:!1,isLayoutChanging:!0}),this.updateState({pageLayout:t}),M.Q.erase(Z.IF),M.Q.write(Z.IF,t)}})});var w=r("oYRn"),E=r("FOuV");const{leverageInfo:A}=E.Fy,N=(0,c.NY)()({name:"leverage",state:{curLeverage:A.defaultVal,leverageList:{}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable,updateCurrentLeverage(e,{symbol:t,leverage:r}){const a=(0,i.Z)((0,i.Z)({},e.leverageList),{},{[t]:r}),o=r;return(0,i.Z)((0,i.Z)({},e),{},{leverageList:a,curLeverage:o})},updateLeverageList(e,{symbol:t,leverage:r}){const a=(0,i.Z)((0,i.Z)({},e.leverageList),{},{[t]:r});return(0,i.Z)((0,i.Z)({},e),{},{leverageList:a})}},effects:{async getUserLeverageData(e){const t=await(0,w.bK)(),{success:r,data:a}=t;if(r&&!Object.prototype.hasOwnProperty.call(a,"error")&&(null===a||void 0===a?void 0:a.length)>0){const t=(0,m.FB)(a,"symbol","leverage"),r=null===t||void 0===t?void 0:t[e];this.updateState({leverageList:t,curLeverage:r})}},async updateUserLeverage({symbol:e,leverage:t}){const r=await(0,w.Z)({symbol:e,leverage:t}),{success:a}=r;return a&&this.updateCurrentLeverage({symbol:e,leverage:t}),r}}});var O=r("6S88");const R=(0,c.NY)()({name:"marginType",state:{marginType:"CROSSED"},reducers:{updateState:(e,t)=>({marginType:t})},effects:{async changeMarginType({symbol:e,marginType:t}){const{success:r,data:a={}}=await(0,O.W)({symbol:e,marginType:t});return r&&this.updateState(a.marginType||E.Yl.CROSSED),a}}});var L=r("BSj8");const V=(0,c.NY)()({name:"markPrice",state:{},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async queryMarkPrice(e){const t=await(0,L.m4)(e);this.updateStateImmutable(t)}}});var F=r("GpFh"),D=r("sNdf"),_=r("PuIx"),B=r.n(_),z=r("wdcV");const K=(e,t,r,a,i)=>{if("initialMarkPrice"===r)return e||t||a.markPrice},q=(0,c.NY)()({name:"position",state:{apiError:!1,hideOtherSymbol:!1,onlySymbol:"",validPositionKeyArray:[],positionMap:{},rankingInfo:{rankingKey:"",rankingType:"default"}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable,updatePosition(e,t){const{positionMap:r,validPositionKeyArray:a,hideOtherSymbol:o,onlySymbol:l}=e,s=(0,F.Z)(e,["positionMap","validPositionKeyArray","hideOtherSymbol","onlySymbol"]),c=(0,n.ZP)(r,(e=>B()(e,t,K)));let u=(0,z.J9)(c).filter((e=>!o||(null===e||void 0===e?void 0:e.symbol)===l)).map((e=>(0,z._g)(e.symbol,e.positionSide)));return u.length===a.length&&u.every(((e,t)=>e===a[t]))&&(u=a),(0,i.Z)({positionMap:c,validPositionKeyArray:u,hideOtherSymbol:o,onlySymbol:l},s)},hideOtherSymbol(e,t){const{positionMap:r,validPositionKeyArray:a}=e,o=(0,F.Z)(e,["positionMap","validPositionKeyArray"]),{hideOtherSymbol:n,onlySymbol:l}=t;let s=(0,z.J9)(r).filter((e=>!n||(null===e||void 0===e?void 0:e.symbol)===l)).map((e=>(0,z._g)(e.symbol,e.positionSide)));return s.length===a.length&&s.every(((e,t)=>e===a[t]))&&(s=a),(0,i.Z)((0,i.Z)({positionMap:r,validPositionKeyArray:s},o),{},{hideOtherSymbol:n,onlySymbol:l})},setOrderbookPrice(e,t){const{price:r,symbol:a}=t,{positionMap:o}=e,l=(0,F.Z)(e,["positionMap"]),s=(0,n.ZP)(o,(e=>{const t=(0,z._g)(a,"LONG"),i=(0,z._g)(a,"SHORT"),{[a]:o,[t]:n,[i]:l}=e;return[o,n,l].forEach(((e={})=>{e.selectPrice=r})),e}));return(0,i.Z)({positionMap:s},l)}},effects:e=>({async queryPosition({symbol:t}){const r=(0,Z.nM)()?D.G2:D.vY,{data:a,success:o}=await r({});o?this.updateState({apiError:!1}):this.updateState({apiError:!0});const n=(a||[]).reduce(((e,t)=>{const r=t||{},{symbol:a,positionSide:o,collateral:n,askNotional:l,bidNotional:s,cumRealized:c,entryPrice:u,isolatedWallet:d,markPrice:m,initialMarkPrice:p,notionalValue:f,positionAmount:g,unrealizedProfit:y}=r,b=(0,F.Z)(r,["symbol","positionSide","collateral","askNotional","bidNotional","cumRealized","entryPrice","isolatedWallet","markPrice","initialMarkPrice","notionalValue","positionAmount","unrealizedProfit"]);return e[(0,z._g)(a,o)]=(0,i.Z)({symbol:a,positionSide:o,collateral:n,marginAsset:n,askNotional:Number(l),bidNotional:Number(s),cumRealized:Number(c),entryPrice:Number(u),isolatedWallet:Number(d),markPrice:Number(m),initialMarkPrice:Number(p),notionalValue:Number(f),positionSize:Number(g),unrealizedProfit:Number(y)},b),e}),{}),{isolated:l}=(null===n||void 0===n?void 0:n[t])||{isolated:!1},s=l?E.Yl.ISOLATED:E.Yl.CROSSED;e.marginType.updateState(s),this.updatePosition(n)}})});var W=r("EfgN"),U=r("nYGy"),j=r("cm/A"),$=r("jgBC"),H=r("4m5F"),G=r("C1dj"),J=r("s02S"),Y=r("EPGa");const Q=(0,c.NY)()({name:"preference",state:{orderConfirmation:{LIMIT:!1,MARKET:!1,STOP:!1,STOP_MARKET:!1,POST_ONLY:!1},priceProtection:!0,positionMode:!1,assetMode:!1,multiAssetMarginEnable:!1,usdtFuturesUnit:H.AO.coin,coinFuturesUnit:H.SW.cont,useLastPrice:!1,queryUnitFinished:void 0,showFlashOrder:!1,isEnableFundingFee:!1,fundingFee:.25,fundingFeeRange:{cap:.75,floor:1e-4},TPSLNotify:!1,displayMarginTypeAndLeverage:!0,enableAdvancedTPSL:!1,showPlusMinusButton:!1},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:e=>({async getOrderConfirmation(){const{success:e,data:t}=await(0,W.CQ)(),{orderConfirmation:r}=t||{};e&&r&&this.updateState({orderConfirmation:(0,i.Z)((0,i.Z)({},r),{},{POST_ONLY:r.LIMIT})})},async getFuturesPnlBasis(){const{success:e,data:t}=await(0,U.fc)(),{pnlPriceBasis:r}=t||{};e&&this.updateState({useLastPrice:"markPrice"!==r})},async changeOrderConfirmation(e,t){const r=await(0,W.wS)({orderConfirmation:e});return r&&this.updateState({orderConfirmation:(0,i.Z)((0,i.Z)((0,i.Z)({},t.preference.orderConfirmation),e),{},{POST_ONLY:e.LIMIT||t.preference.orderConfirmation.LIMIT})}),r},async getPositionMode(t,r){const{success:a,data:i}=await(0,W.wo)()||{dualSidePosition:!0},{dualSidePosition:o}=i||{};a&&(this.updateState({positionMode:o}),e.futuresOrderForm.changeReduceOnly(!o&&r.futuresOrderForm.reduceOnly),e.futuresOrderForm.changePositionDirection(o?Y.RS.OPEN:Y.RS.BOTH))},async getAssetMode(){const{success:e,data:t}=await(0,J.Jy)()||{joinMargin:!0},{joinMargin:r}=t||{};e&&this.updateState({assetMode:r})},async changePositionMode(t,r){const a=await(0,W.qM)(t),{success:i,data:o}=a,{dualSidePosition:n}=o||{};return i&&void 0!==n&&(this.updateState({positionMode:n}),e.futuresOrderForm.changeReduceOnly(!n&&r.futuresOrderForm.reduceOnly),e.futuresOrderForm.changePositionDirection(n?Y.RS.OPEN:Y.RS.BOTH)),a},async changeAssetMode(e){const t=await(0,J.QO)(e),{success:r,data:a}=t,{joinMargin:i}=a||{};return r&&void 0!==i&&this.updateState({assetMode:i}),t},async getUnit(e){const{success:t,data:r}=await(0,$.YD)(U.lU,5e4),a=(null===r||void 0===r?void 0:r.unit)||(null===e||void 0===e?void 0:e.data.unit),i=(0,Z.nM)()?{coinFuturesUnit:a}:{usdtFuturesUnit:a};t&&a&&this.updateState(i)},async changeUnit(e){const t=(0,Z.nM)()?{coinFuturesUnit:e}:{usdtFuturesUnit:e},r=await(0,W.t1)({unit:e});return r&&this.updateState(t),r},async getPriceProtection(e=(()=>({}))){const{success:t,data:r=!0}=await e();t&&this.updateState({priceProtection:r})},async getFundingFeeNotify(){const{success:e,data:{threshold:t,isEnable:r}}=await(0,G.TS)();e&&this.updateState({fundingFee:(0,j.Jp)(t,100).toNumber(),isEnableFundingFee:r})},async getFungFeeRange(){const{success:e,data:{cap:t,floor:r}}=await(0,G.j4)();e&&this.updateState({fundingFeeRange:{cap:(0,j.Jp)(t,100).toNumber(),floor:(0,j.Jp)(r,100).toNumber()}})},async getStopLimitOrderNotify(){const{success:e,data:t}=await(0,G.lj)();e&&this.updateState({TPSLNotify:t})},async getMultiAssetMarginEnableConfig(){const{success:e,data:t}=await(0,J.aO)(),{multiAssetMarginEnable:r=!1}=t||{},a=!e||r;return this.updateState({multiAssetMarginEnable:a}),a},async getCoolingPeriodConfig(){const{success:e,data:t={inCoolingDuration:!1,endTime:0,startTime:0}}=await(0,W.mh)(),{inCoolingDuration:r=!1,endTime:a=0,startTime:i=0}=t;return e&&this.updateState({responsibleConfig:{inCoolingDuration:r,endTime:a,startTime:i}}),t},async setCoolingPeriodConfig(e){const t=await(0,W.iy)(e);return t.success&&this.updateState({responsibleConfig:(0,i.Z)({},e)}),t},async updateTPSLNotify(e){const t=await(0,G.rR)(e);return t.success&&this.updateState({TPSLNotify:e}),t},async updateFundingFeeNotify({fundingFee:e,isEnable:t}){const r=await(0,G.hw)({threshold:(0,j.QZ)(e,100).toNumber(),isEnable:t});return r.success&&this.updateState({isEnableFundingFee:t,fundingFee:e}),r},async updateShowPlusMinusButton(t){e.preference.updateState({showPlusMinusButton:t})}})});var X=r("LW49");const ee=(0,c.NY)()({name:"serviceStatus",state:{marketData:!0,userData:!0,placeOrder:!0,abnormal:!1,openTip:!1},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async getServiceStatus(e=!1){try{const t=await(0,X._)(e),{marketData:r,userData:a,placeOrder:i}=t,o=!r||!a||!i,n=o;this.updateStateImmutable({marketData:r,userData:a,placeOrder:i,abnormal:o,openTip:n})}catch(t){console.log("get service status error",t)}}}});var te=r("2Mkn"),re=r("IvVn");const ae=(0,c.NY)()({name:"transferAssets",state:{transferAsset:"USDT",assets:{},futuresAssets:{},assetTypes:[]},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async getUserAssets(){const e=await(0,re.N)({}),t=(0,m.FB)(e,"asset");return this.updateState({assets:t}),t},async getMaxWithdrawAmount(e=[]){const t=await Promise.all(e.map((e=>(0,b.yd)({assetName:e})))),r=null===t||void 0===t?void 0:t.reduce(((t,r,a)=>(t[e[a]]={free:Math.max(Object.prototype.hasOwnProperty.call(r,"error")?0:r,0)},t)),{});this.updateState({futuresAssets:r})},transfer:async(e,t)=>(0,te.r)(e,{lang:t})}}),ie=(0,c.NY)()({name:"userAsset",state:{userAsset:{}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable}}),oe=(0,c.NY)()({name:"userTab",state:{activeTab:"0"},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable}}),ne={assetIndex:u,balance:f,bracket:y,feeTier:h,futureMarket:k,grid:T,indexPrice:C,layout:I,leverage:N,marginType:R,markPrice:V,position:q,preference:Q,serviceStatus:ee,tradeForbidden:a.Z,transferAssets:ae,userAsset:ie,userTab:oe}},COFI:(e,t,r)=>{"use strict";r.d(t,{GY:()=>i,Sn:()=>o,Nn:()=>n,aV:()=>l,hr:()=>s,oU:()=>c,nW:()=>u,IS:()=>d,BV:()=>m,DX:()=>p,ZA:()=>f,Dc:()=>g,Jt:()=>y,SA:()=>b});var a=r("/MJE");const{registerActionHandle:i,constants:{ACTION_TRADE_ONECLIKE_BUY:o,ACTION_TRADE_ONECLIKE_SELL:n,ACTION_FUTURES_DUAL_OPEN:l,ACTION_FUTURES_DUAL_CLOSE:s,ACTION_TRADE_BUY:c,ACTION_TRADE_SELL:u,ACTION_FUTURES_ONECLIKE_CLOSE:d,COMMON_CANCEL:m,COMMON_OK:p,ACTION_TRADE_INCREASE_ORDER_PRICE:f,ACTION_TRADE_REDUCE_ORDER_PRICE:g,ACTION_TRADE_INCREASE_ORDER_QUANTITY:y,ACTION_TRADE_REDUCE_ORDER_QUANTITY:b}}=a.Z},lbaD:(e,t,r)=>{"use strict";function a(e){return Number.isNaN(e)||Math.abs(e)===1/0}function i({quantity:e,isBuy:t,entryPrice:r=0,closedPrice:i=0,contractVal:o=100,isDelivery:n,askPrice:l,bidPrice:s}){const c=t?1:-1;let u,d;return n?(u=e?(1/r-1/(t?s:l))*e*o*c:0,d=e?(1/r-1/i)*e*o*c:0):(u=e?((t?s:l)-r)*e*c:0,d=(i-r)*e*c),{marketPNL:a(u)?"-":u,limitPNL:a(d)?"-":d}}r.d(t,{k:()=>i})},QlFx:(e,t,r)=>{"use strict";r.d(t,{uf:()=>a,kh:()=>i,lE:()=>o});r("RX+5");const a=(e,t=2)=>{try{if("number"!==typeof e&&!e)return"-";const r=(e="number"===typeof e?e:+e).toFixed(Math.max(0,~~t)),a=-1!==r.indexOf(".")?/\d(?=(\d{3})+\.)/g:/\d(?=(\d{3})+$)/g;return r.replace(a,"$&,")}catch(r){return Sentry.captureException(r),"-"}},i=e=>e&&e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),o=(e="",t)=>{const[r="",a=""]=e.split("_");let i=[r,a.substr(2)].join(" ");if("PERP"===a||!a){i=[r,t("inversePerpetual",{defaultValue:"Perpetual"})].join(" ")}return i}},yxRq:(e,t,r)=>{"use strict";r.d(t,{BJ:()=>c,Nu:()=>p,w_:()=>f,IK:()=>g,_F:()=>y,sY:()=>b,zS:()=>S,Fb:()=>P,M4:()=>T,sE:()=>M,wf:()=>I,qb:()=>E,sk:()=>N,qH:()=>O,mb:()=>R,iZ:()=>L,dK:()=>V,VX:()=>F,$g:()=>D});var a=r("5vwO"),i=r("FOuV"),o=r("k2tD"),n=r("wdcV");const{leverageInfo:l}=i.Fy,s=e=>Number((0,o.mD)(1/e,5)),c=e=>["MARKET","STOP_MARKET","TAKE_PROFIT_MARKET","TRAILING_STOP_MARKET"].includes(e),u=(e,t)=>{const r=[...e].reverse();let a=0;for(;a<r.length;){const e=r[a];if(t<=e.maxOpenPosLeverage&&e.minOpenPosLeverage<=t)return e;a+=1}return 0},d=({positionSize:e=0,entryPrice:t=0,markPrice:r=0,lastPrice:a=0,unrealizedProfit:i=0},{isDelivery:o=!1,contractVal:n=0},l=!1)=>{const s=l&&a?a:r;if(!s)return i;const c=Number(t)||0,u=Number(s)||0;return(Number(e)||0)*(o?n*((c?1/c:0)-(u?1/u:0)):u-c)||0},m=({positionSize:e=0,markPrice:t=0},{isDelivery:r=!1,contractVal:a=0})=>{const o=Number(t);return Math.abs(e*i.IA*(r?a*(o?1/o:0):o))},p=({positionSize:e=0,markPrice:t=0},{isDelivery:r=!1,contractVal:a=1}={})=>{const o=Number(t);return e*i.IA*(r?a*(o?1/o:0):o)},f=({formType:e="limit",type:t="bid",askPrice:r=0,bidPrice:a=0,orderPrice:o=0,markPrice:n=0,pricePrecision:l=2,isDelivery:s})=>{r=Number(r),a=Number(a),o=Number(o),n=Number(n);const u=r||n,d=a||n,m=10**l,p="bid"===t;let f;return f=c(e)?p?s?u:Math.floor(u*(1+i.HM.TWO_WAY)*m)/m:s?d*(1-i.HM.TWO_WAY):d:p?s?Math.min(r,n,o):o:s?o:Math.max(a,n,o),f},g=(e,t)=>((e,t)=>{let r=0;for(;r<e.length;){const a=e[r];if(t<a.bracketNotionalCap)return a;r+=1}return r&&e[r-1]})(e,t),y=(e,t)=>{let r=0;const a=[...e].reverse();for(;r<a.length;){const e=a[r],i=e.maxOpenPosLeverage;if(t===i)return e;if(t<i)return a[Math.max(r,0)];r+=1}return r&&a[r-1]},b=({positionSize:e,orderBidAmount:t,orderAskAmount:r,type:a})=>{r=Number(r),t=Number(t);const i="bid"===a;return(e=Number(e))>=0?i?t:Math.max(0,r-e):i?Math.max(0,t+e):r},h=({orderPrice:e=0,assumePrice:t=0,markPrice:r=0})=>({mp:r?1/r:0,op:e?1/e:0,ap:t?1/t:0}),v=({formType:e,type:t="bid",positionSize:r,orderBidAmount:a,orderAskAmount:o,markPrice:n=0,orderPrice:l=0,assumePrice:s=0,positionMode:u=!1,isDelivery:d=!1,contractVal:m=0})=>{n=Number(n)||0,l=Number(l)||0,s=Number(s)||0;const p="bid"===t?1:-1,f=b({positionSize:r,orderBidAmount:a,orderAskAmount:o,type:t}),g=u?Number("bid"===t?a:o):f*i.IA;let y;return y=d?(({orderPrice:e,markPrice:t,assumePrice:r,contractVal:a=0,formType:i})=>{const{mp:o,op:n,ap:l}=h({orderPrice:e,markPrice:t,assumePrice:r});return a*((c(i)?l:n)-o)})({orderPrice:l,markPrice:n,assumePrice:s,formType:e,contractVal:m}):n-(c(e)?s:l),g*Math.abs(Math.min(0,p*y))},x=({availableBalance:e,type:t="bid",formType:r="limit",orderPrice:a,markPrice:o,leverage:n,assumePrice:l=0,isolated:u=!1,isDelivery:d=!1,contractVal:m=0,bidNotional:p,askNotional:f,isTwoWay:g=!1,presetNotionalValue:y=0,positionNotionalValue:b=0,crossWalletBalance:v=0,totalIsolatedInitialMargin:x=0,totalCrossMaintenanceMargin:S=0})=>{e=Number(e),o=Number(o),a=Number(a);const k=s(n),P=y*k,T="bid"===t?1:-1;let C,Z;if(d){const{ap:t,mp:i,op:n}=h({markPrice:o,assumePrice:l,orderPrice:a});if(g)Z=e,C=m*(k*t+Math.abs(Math.min(0,T*((c(r)?t:n)-i)))),u&&(Z=Math.max(0,Math.min(e,v-x-S)));else{let a=(b+(T>0?p:-f))*k;a=T>0?-a:a,C=m*(k*t+Math.abs(Math.min(0,T*((c(r)?t:n)-i)))),Z=u?Math.max(0,Math.min(e,v-x-S)+P+a):Math.max(0,e+P+a)}}else Z=u?Math.min(e,v-x-S):e,C=i.IA*(l*k+Math.abs(Math.min(0,T*(o-(c(r)?l:a)))));return C?Z/C:0},S=({data:e={},isolated:t=!1,curPosition:r={},all:a=!1,isDelivery:i,contractVal:o})=>{let n=0;return t&&!a?Math.min(d(r,{isDelivery:i,contractVal:o},!1),d(r,{isDelivery:i,contractVal:o},!0)):(Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&(a||!e.isolated)){const t=e.contractVal||o;n+=Math.min(d(e,{isDelivery:i,contractVal:t},!1),d(e,{isDelivery:i,contractVal:t},!0))}})),n)},k=({riskTable:e,positionNotionalValue:t=0,symbol:r,positionSize:a=0,markPrice:i=0,isDelivery:o=!1,contractVal:n=0})=>{const{bracketMaintenanceMarginRate:l=0,cumFastMaintenanceAmount:s=0}=(({riskTable:e={},symbol:t,positionSize:r,markPrice:a,isDelivery:i,contractVal:o})=>{const n=m({positionSize:r,markPrice:a},{isDelivery:i,contractVal:o}),{bracketMaintenanceMarginRate:l,cumFastMaintenanceAmount:s}=(e[t]||[]).find((e=>n<e.bracketNotionalCap))||{};return{bracketMaintenanceMarginRate:l,cumFastMaintenanceAmount:s}})({riskTable:e,symbol:r,positionSize:a,markPrice:i,isDelivery:o,contractVal:n});return t*l-s},P=({positionNotionalValue:e=0,bidNotional:t=0,askNotional:r=0})=>Math.max(Math.abs(Number(e)+Number(t)),Math.abs(Number(e)-Number(r))),T=({data:e={},riskTable:t={},isolated:r,curPosition:i={},all:o=!1,isDelivery:n=!1,contractVal:l=0})=>{let s=0;if(r&&!o){const e=m(i,{isDelivery:n,contractVal:l});return k((0,a.Z)((0,a.Z)({riskTable:t},i),{},{isDelivery:n,contractVal:l,positionNotionalValue:e}))}return Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&(o||!e.isolated)){const r=m(e,{isDelivery:n,contractVal:l}),i=k((0,a.Z)({riskTable:t,positionNotionalValue:r,isDelivery:n,contractVal:l},e))||0;s+=i}})),s},C=({bidNotional:e=0,askNotional:t=0,positionSize:r,markPrice:a,isDelivery:i,contractVal:o})=>{e=Number(e)||0,t=Number(t)||0;const n=p({positionSize:r,markPrice:a},{isDelivery:i,contractVal:o});return Math.max(Math.abs(n+e),Math.abs(n-t))},Z=({positionNotionalValue:e,bidNotional:t,askNotional:r,leverage:a=l.defaultVal})=>{const i=s(a);return P({positionNotionalValue:e,bidNotional:t,askNotional:r})*i},M=({data:e,curLeverage:t,curSymbol:r,isDelivery:i=!1,contractVal:o=1})=>{let n=0;return Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){const{symbol:l,markPrice:c,positionSize:u,contractVal:d=o}=e,m=l===r?t:e.leverage,f=p(e,{isDelivery:i,contractVal:d});let g=Number(c);g=i?g?1/g:0:g,n+=(Math.abs(P((0,a.Z)((0,a.Z)({},e),{},{positionNotionalValue:f})))-g*Math.abs(u)*d)*s(m)}})),n},I=({data:e={},curLeverage:t,symbol:r,isolated:i,all:o=!1,curPosition:n,isDelivery:l=!1,contractVal:s=1})=>{let c=0;if(i&&!o){const e=p(n,{isDelivery:l,contractVal:s}),i=r===n.symbol?(0,a.Z)((0,a.Z)((0,a.Z)({},n),{leverage:t}),{},{positionNotionalValue:e}):(0,a.Z)((0,a.Z)({},n),{},{positionNotionalValue:e});return Z(i)}return Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&(o||!e.isolated)){const i=e.contractVal||s,o=p(e,{isDelivery:l,contractVal:i}),n=e.symbol===r?(0,a.Z)((0,a.Z)((0,a.Z)({},e),{leverage:t}),{},{positionNotionalValue:o}):(0,a.Z)((0,a.Z)({},e),{},{positionNotionalValue:o});c+=Z(n)}})),c},w=({assumePrice:e=0,type:t="bid",orderBidAmount:r=0,orderAskAmount:a=0,isDelivery:o=!1,contractVal:n=1})=>{e=Number(e)||0,r=Number(r)||0,a=Number(a)||0;const l="bid"===t,s=o?e?n/e:0:e;return{newBidNotional:l?i.IA*r*s:0,newAskNotional:l?0:i.IA*a*s}},E=({riskTable:e,brackets:t,positionSize:r,markPrice:a,availableBalance:o,type:n,formType:l,askPrice:s,bidPrice:c,orderPrice:d,leverage:m,bidNotional:g,askNotional:y,isolated:b,pricePrecision:h,isDelivery:v,contractVal:x,crossWalletBalance:S,calculateDeliveryActualMaxAmount:k,currentMarginPositions:Z={},symbol:I,isNew:E=!0})=>{const N=f({formType:l,type:n,askPrice:s,bidPrice:c,orderPrice:d,markPrice:a,pricePrecision:h,isDelivery:v}),O=p({positionSize:r,markPrice:a},{isDelivery:v,contractVal:x}),R=P({positionNotionalValue:O,bidNotional:g,askNotional:y}),L=T({data:Z.filter((e=>!e.isolated)),riskTable:t,isolated:b,all:!0,contractVal:x,isDelivery:v}),V=M({data:Z,curLeverage:m,curSymbol:I,isDelivery:v,contractVal:x});let F,D;const _=v?k({positionSize:r,availableBalance:o,positionNotionalValue:O,presetNotionalValue:R,bidNotional:g,askNotional:y,isolated:b,type:n,formType:l,orderPrice:d,markPrice:a,leverage:m,assumePrice:N,crossWalletBalance:S,contractVal:x,totalCrossMaintenanceMargin:L,totalIsolatedInitialMargin:V}):A({positionSize:r,availableBalance:o,presetNotionalValue:R,positionNotionalValue:O,bidNotional:g,askNotional:y,contractVal:x,isolated:b,type:n,formType:l,orderPrice:d,markPrice:a,leverage:m,assumePrice:N,isDelivery:v,crossWalletBalance:S,totalCrossMaintenanceMargin:L,totalIsolatedInitialMargin:V});"bid"===n?(F=_,D=0):(D=_,F=0);const{presentNotional:B,notionalAfterTrade:z}=(({bidNotional:e=0,askNotional:t=0,positionSize:r,markPrice:a,assumePrice:i,orderBidAmount:o,orderAskAmount:n,type:l,isDelivery:s=!1,contractVal:c=1,isNew:u=!1})=>{e=Number(e)||0,t=Number(t)||0;const d=p({positionSize:r,markPrice:a},{isDelivery:s,contractVal:c}),{newBidNotional:m,newAskNotional:f}=w({assumePrice:i,type:l,orderAskAmount:n,orderBidAmount:o,isDelivery:s,contractVal:c});let g;return g=u?"bid"===l?Math.max(Math.abs(d+e+m),Math.abs(d-t)):Math.max(Math.abs(d+e),Math.abs(d-t-f)):Math.max(Math.abs(d+e+m),Math.abs(d-t-f)),{presentNotional:C({bidNotional:e,askNotional:t,positionSize:r,markPrice:a,isDelivery:s,contractVal:c}),notionalAfterTrade:g,positionNotionalValue:d}})({positionSize:r,bidNotional:g,askNotional:y,markPrice:a,assumePrice:N,orderBidAmount:F,orderAskAmount:D,type:n,isDelivery:v,contractVal:x,isNew:E}),{bracketNotionalCap:K}=u(e,m);if(z<=K)return{maxBidAmount:F,maxAskAmount:D};let q;return v?(q=N?x/N:0,{maxBidAmount:q?Math.max((K-O-g)/q,0):0,maxAskAmount:q?Math.max((K+O-y)/q,0):0}):(q=N*i.IA,E?(F=q?(K-O-g)/q:0,D=q?(K+O-y)/q:0,F=F<0?0:F,D=D<0?0:D,{maxBidAmount:F,maxAskAmount:D}):r>=0?{maxBidAmount:q?Math.max((K-B)/q,0):0,maxAskAmount:q?Math.max((K+B)/q,0):0}:{maxBidAmount:q?Math.max((K+B)/q,0):0,maxAskAmount:q?Math.max((K-B)/q,0):0})},A=({positionSize:e,availableBalance:t,positionNotionalValue:r,bidNotional:a,askNotional:i,isolated:o,type:n,formType:l,orderPrice:u,markPrice:d,leverage:m,assumePrice:p,presetNotionalValue:f,crossWalletBalance:g,totalCrossMaintenanceMargin:y=0,totalIsolatedInitialMargin:b=0})=>{const h=s(m),v="bid"===n?1:-1,x=c(l)?p:u,S=c(l)?p:u,k=f*h,P=p*h+Math.abs(Math.min(0,v*(d-x))),T=p*h,C=1===v?-(r+a):r-i,Z=o?Math.min(g-y-b,t):t,M=Z+k+C*h,I=Math.abs(e)*Math.abs(Math.min(0,v*(d-S))),w=Math.max(0,M);if(e>=0){if(1===v)return P?w/P:0;const t=Math.max(0,M+I),o=P?t/P:0;return Math.abs(r+a)>Math.abs(r-i-o*p)&&o>=Math.abs(e)?Math.max(0,(Z+k-(r+a)*h+I)/(I/Math.abs(e))):o<Math.abs(e)?T?w/T:0:o}if(1===v){const t=Math.max(0,M+I),o=P?t/P:0;return Math.abs(r+a+o*p)<Math.abs(r-i)&&o>=Math.abs(e)?Math.max(0,(Z+k+(r-i)*h+I)/(I/Math.abs(e))):o<Math.abs(e)?T?w/T:0:o}return P?w/P:0},N=({leverage:e,positionSize:t,orderBidAmount:r,orderAskAmount:a,formType:i,type:o,askPrice:n,bidPrice:l,orderPrice:c,markPrice:u,bidNotional:d,askNotional:m,positionMode:g=!1,pricePrecision:y,isDelivery:b,contractVal:h})=>{const x=f({formType:i,type:o,askPrice:n,bidPrice:l,orderPrice:c,markPrice:u,pricePrecision:y,isDelivery:b}),S=(({positionSize:e,markPrice:t,assumePrice:r,type:a,bidNotional:i,askNotional:o,orderBidAmount:n,orderAskAmount:l,leverage:c=20,positionMode:u=!1,isDelivery:d=!1,contractVal:m=1})=>{const f=s(c);if(u){const e="bid"===a?n:l;return d?e*m*f*(Number(r)?1/r:0):r*f*e}i=Number(i)||0,o=Number(o)||0;const g=p({positionSize:e,markPrice:t},{isDelivery:d,contractVal:m}),{newBidNotional:y,newAskNotional:b}=w({assumePrice:r,type:a,orderAskAmount:l,orderBidAmount:n,isDelivery:d,contractVal:m}),h=Math.max(Math.abs(g+i),Math.abs(g-o)),v=Math.max(Math.abs(g+i+y),Math.abs(g-o-b));return Math.max((v-h)*f,0)})({positionSize:t,markPrice:u,assumePrice:x,type:o,bidNotional:d,askNotional:m,orderBidAmount:r,orderAskAmount:a,leverage:e,positionMode:g,isDelivery:b,contractVal:h}),k=v({formType:i,positionSize:t,orderBidAmount:r,orderAskAmount:a,markPrice:u,orderPrice:c,type:o,assumePrice:x,positionMode:g,isDelivery:b,contractVal:h});return{cost:S+k,openLost:k}},O=({riskTable:e,markPrice:t,availableBalance:r,formType:a,askPrice:i,bidPrice:o,leverage:n,longPosition:l,shortPosition:s,buyPrice:c,sellPrice:d,pricePrecision:m,isDelivery:g,isolated:y,contractVal:b,currentPairPositions:h={},getAllOthersPresentNotional:v,symbol:S,crossWalletBalance:k,brackets:P})=>{let C,Z;const I=T({data:h.filter((e=>!e.isolated)),riskTable:P,isolated:y,all:!0,contractVal:b,isDelivery:g}),w=M({data:h,curLeverage:n,curSymbol:S,isDelivery:g,contractVal:b}),E=f({formType:a,type:"bid",askPrice:i,bidPrice:o,orderPrice:c,markPrice:t,pricePrecision:m,isDelivery:g}),A=f({formType:a,type:"ask",askPrice:i,bidPrice:o,orderPrice:d,markPrice:t,pricePrecision:m,isDelivery:g}),N=x({availableBalance:r,type:"bid",formType:a,orderPrice:c,markPrice:t,leverage:n,assumePrice:E,isDelivery:g,contractVal:b,isTwoWay:!0,isolated:y,totalCrossMaintenanceMargin:I,totalIsolatedInitialMargin:w,crossWalletBalance:k}),O=x({availableBalance:r,type:"ask",formType:a,orderPrice:d,markPrice:t,leverage:n,assumePrice:A,isDelivery:g,contractVal:b,isTwoWay:!0,isolated:y,totalCrossMaintenanceMargin:I,totalIsolatedInitialMargin:w,crossWalletBalance:k}),{longNotionalAfterTrade:R,shortNotionalAfterTrade:L,shortPresentNotional:V,longPresentNotional:F}=(({longPosition:e,shortPosition:t,markPrice:r,longActualMaxOpenPositions:a,shortActualMaxOpenPositions:i,bidAssumePrice:o,askAssumePrice:n,isDelivery:l,contractVal:s})=>{const{bidNotional:c=0,askNotional:u=0,positionSize:d=0}=e,{bidNotional:m=0,askNotional:f=0,positionSize:g=0}=t,y=p({positionSize:d,markPrice:r},{isDelivery:l,contractVal:s}),b=p({positionSize:g,markPrice:r},{isDelivery:l,contractVal:s}),h=Math.max(Math.abs(y+Number(c)+(l?o?s/o:0:o)*a),Math.abs(y-u)),v=Math.max(Math.abs(b+Number(m)),Math.abs(b-f)),x=Math.max(Math.abs(y+Number(c)),Math.abs(y-u));return{longNotionalAfterTrade:h,shortNotionalAfterTrade:Math.max(Math.abs(b+Number(m)),Math.abs(b-f-(l?n?s/n:0:n)*i)),shortPresentNotional:v,longPresentNotional:x}})({longPosition:l,shortPosition:s,markPrice:t,longActualMaxOpenPositions:N,shortActualMaxOpenPositions:O,bidAssumePrice:E,askAssumePrice:A,isDelivery:g,contractVal:b}),{bracketNotionalCap:D}=u(e,n),_=v({currentPairPositions:h.filter((e=>e.symbol===S)),markPrice:t,contractVal:b});return C=g&&N<=0?0:R+V<=D?N:g?b?E*(D-_)/b:0:E?(D-F-V)/E:0,Z=g&&O<=0?0:L+F<=D?O:g?b?A*(D-_)/b:0:A?(D-V-F)/A:0,{maxBidAmount:Math.max(C,0),maxAskAmount:Math.max(Z,0)}},R=({orderPrice:e=0,assumePrice:t=0,triggerPrice:r=0,activationPrice:a=0,formType:o=i.PH.LIMIT})=>{switch(o){case i.PH.LIMIT_TYPE:case i.PH.STOP_LIMIT:case i.PH.TAKE_PROFIT_LIMIT:return Number(e);case i.PH.MARKET_TYPE:return Number(t);case i.PH.STOP_MARKET:case i.PH.TAKE_PROFIT_MARKET:return Number(r);case i.PH.TRAILING_STOP_MARKET:return Number(a);default:return Number(e)}},L=({positionSize:e=0,orderAmount:t=0,side:r=1})=>Number(e)+t*r,V=({entryPrice:e=0,positionSize:t=0,orderPrice:r=0,assumePrice:a=0,triggerPrice:i=0,activationPrice:o=0,orderAmount:n=0,formType:l,side:s=1})=>{const c=Math.abs(t),u=Number(t),d=L({positionSize:t,orderAmount:n,side:s}),m=R({orderPrice:r,assumePrice:a,triggerPrice:i,activationPrice:o,formType:l});return 0===u||1===s&&u>0||-1===s&&u<0?d?(e*c+m*n)/Math.abs(d):0:c>n?Number(e):c===Number(n)?0:m},F=({entryPrice:e=0,positionSize:t=0,orderPrice:r=0,assumePrice:a=0,triggerPrice:i=0,activationPrice:o=0,orderAmount:n=0,formType:l,side:s=1,isolatedWallet:c=0,crossWalletBalance:u=0,cost:d=0,openLost:m=0,bidNotional:p=0,askNotional:f=0,takerCommission:g=0})=>{const y=Math.abs(t),h=Number(t),v=0===h||1===s&&h>0||-1===s&&h<0,x=R({orderPrice:r,assumePrice:a,triggerPrice:i,activationPrice:o,formType:l});if(v)return{estCrossWalletBalance:u-n*x*g,estIsolatedWallet:Number(c)+Number(d)};if(y>n)return{estCrossWalletBalance:u-n*s*(x-e)-n*x*g,estIsolatedWallet:(h?(h-n)*c/h:0)+Math.min(0,(h?n*c/h:0)-n*s*(x-e))};if(y<n){const r=b({positionSize:t,orderBidAmount:n,orderAskAmount:n,type:1===s?"bid":"ask"});return{estCrossWalletBalance:u+h*(x-e)-n*x*g,estIsolatedWallet:m+Math.max(Math.abs(Number(p)+x*r),Math.abs(Number(f)-x*r))-Math.max(Math.abs(p),Math.abs(f))+Math.min(0,c+h*(x-e))}}return{estCrossWalletBalance:0,estIsolatedWallet:0}},D=({balance:e,leverage:t,symbol:r,isDelivery:a,contractVal:i,askRate:o=0,assetIndexes:l,positions:s})=>{let c=0,u=0;const d={};return Object.values(e).forEach((o=>{const{marginAvailable:m,asset:p}=o;if(m){var f;const o=(0,n.nn)({positions:s,marginAsset:p})||[],m=S({data:o,isolated:!1,isDelivery:a,contractVal:i}),g=(null===l||void 0===l?void 0:l[p])||{},{askRate:y=0,bidRate:b=0}=g||{},h=I({data:o,isolated:!1,curLeverage:t,symbol:r,isDelivery:a,contractVal:i});c+=h*y;const v=(({assetWalletBalance:e=0,totalCrossUnrealizedPNL:t=0})=>Number(e)+Number(t))({assetWalletBalance:Number((null===e||void 0===e||null===(f=e[p])||void 0===f?void 0:f.crossWalletBalance)||0),totalCrossUnrealizedPNL:m}),x=Math.min(v*b,v*y);u+=x,Object.assign(d,{[p]:x})}})),{availableBalance:Number(o)?(u-c)/o:0,assetEquityMap:d}}},DCTW:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>l,nn:()=>s,fS:()=>c,wj:()=>m,yh:()=>p,ot:()=>f,SH:()=>y,zW:()=>b,Uy:()=>h,sE:()=>v,W8:()=>x,ST:()=>S,Vo:()=>k});var a=r("5vwO"),i=r("mE5e"),o=r("FOuV");const{leverageInfo:n}=o.Fy,l=(e,t=[],r,i,o,l=!0,u=!1,d,m=[])=>{const{leverageList:g={}}=i||{},h=d||t;return t.map(((t={})=>{const{marginAsset:i,isolated:o,isolatedWallet:d=0,symbol:v="",positionSide:T}=t,C=r[i]||{},{crossWalletBalance:Z=0}=C;let M,I,w=0,E=0,A=0,N=0,O=0;const R=(null===e||void 0===e?void 0:e[v])||[],L=!o&&T&&"BOTH"!==T,V=o?d:Z,F=g[v]||n.defaultVal;if(!o){const t=h.filter((e=>e.marginAsset===i)).filter((e=>!(null!==e&&void 0!==e&&e.isolated)));w=b(t,e),E=f(t),A=k(w,Z,E);const r=t.filter((e=>(null===e||void 0===e?void 0:e.symbol)!==v));N=b(r,e)-f(r)}if(L){const e=h.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===v&&"BOTH"!==r&&r!==T}))[0]||{positionSize:0,entryPrice:0};M="LONG"===T?t:e,I="SHORT"===T?t:e}l&&(O=L&&M.positionSize&&I.positionSize?S(R,V,N,M,I,t):x(R,V,N,t));const D=y(R,t),_=s(t),B=k(D,d,_),z=s(t,u),K=c(t)*p(F),q=`${(100*(z/K||0)).toFixed(2)}%`;return(0,a.Z)((0,a.Z)({},t),{},{liquidationPrice:O<0?0:O,unrealizedPnl:z,margin:o?d:K,riskRatio:o?B:A,ROEVal:q,leverage:F,strategyOrders:P(t,m)})}))},s=({positionSize:e=0,entryPrice:t=1,markPrice:r=1,contractVal:a=100,lastPrice:i},o=!1)=>{if(0===t||0===r)return 0;return e*a*(1/t-1/(o&&i||r))},c=({positionSize:e=0,markPrice:t=1,contractVal:r})=>Math.abs(e*r/t),u=({positionSize:e=0,markPrice:t=1,contractVal:r})=>e*r/t,d=({positionNotionalValue:e=0,bidNotional:t=0,askNotional:r=0})=>Math.max(Math.abs(Number(e)+Number(t)),Math.abs(Number(e)-Number(r))),m=e=>{let t=0;return e.forEach((e=>{const r=(({bidNotional:e,askNotional:t,markPrice:r,positionSize:a,contractVal:i})=>{const o=u({markPrice:r,positionSize:a,contractVal:i});return e=Number(e||0),t=Number(t||0),Math.max(Math.abs(o+e),Math.abs(o-t))})(e)-c(e);t+=r})),t},p=e=>1*(0,i.mD)(1/e,4),f=(e=[],t)=>e.reduce(((e,r)=>e+s(r,t)),0),g=(e=[],t)=>{const r=c(t);let i=e.findIndex((e=>r<e.bracketNotionalCap));return-1===i&&(i=e.length-1),(0,a.Z)((0,a.Z)({positionNotionalValue:r},e[i]),{},{index:i})},y=(e,t)=>{const{positionNotionalValue:r,bracketMaintenanceMarginRate:a,cumFastMaintenanceAmount:i}=g(e,t);return r*a-i},b=(e=[],t={})=>e.reduce(((e,r)=>{const{symbol:a}=r||{},i=(null===t||void 0===t?void 0:t[a])||[];return e+y(i,r)}),0),h=(e=[],t,r)=>e.filter((e=>!(null!==e&&void 0!==e&&e.isolated))).reduce(((e,i)=>e+(({positionNotionalValue:e,bidNotional:t,askNotional:r,leverage:a=n.defaultVal})=>{const i=p(a);return d({positionNotionalValue:e,bidNotional:t,askNotional:r})*i})((0,a.Z)((0,a.Z)({},i),{},{positionNotionalValue:u(i),leverage:r===i.symbol?t:i.leverage}))),0),v=(e=[],t,r)=>{let i=0;return e.forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){const{symbol:o,markPrice:n,positionSize:l,contractVal:s=100}=e,c=o===r?t:e.leverage,m=u(e);let f=Number(n);f=f?1/f:0,i+=(Math.abs(d((0,a.Z)((0,a.Z)({},e),{},{positionNotionalValue:m})))-f*Math.abs(l)*s)*p(c)}})),i},x=(e=[],t,r,a)=>{const{positionSize:i,entryPrice:o,contractVal:n=100}=a;if(!i||0===i)return 0;let l=0;const s=i>=0?1:-1;let c=e.length-1;for(;c>=0;){const{bracketMaintenanceMarginRate:a,cumFastMaintenanceAmount:u,bracketNotionalFloor:d}=e[c];l=(Math.abs(i)*a+s*Math.abs(i))/((t-r+u)/n+s*Math.abs(i)/o);if(Math.abs(i)*n/l>d)break;if(0===c)break;c-=1}return l},S=(e=[],t,r,a,i,o)=>{const{entryPrice:n=0,positionSize:l=0,contractVal:s=100}=a,{entryPrice:c=0,positionSize:u=0,markPrice:d}=i;if(0===l||0===u)return 0;const{index:m,bracketMaintenanceMarginRate:p,cumFastMaintenanceAmount:f}=g(e,a),{bracketMaintenanceMarginRate:y,cumFastMaintenanceAmount:b}=g(e,i);if(-1===m)return 0;let h=m,v=0,x=0;for(;h>=0;){let a=e.length-1;const{bracketMaintenanceMarginRate:i,cumFastMaintenanceAmount:o}=e[h];for(;a>=0;){const{bracketMaintenanceMarginRate:d,cumFastMaintenanceAmount:m,bracketNotionalFloor:p}=e[a];if(v=(Math.abs(l)*d+Math.abs(u)*i+Math.abs(l)-Math.abs(u))/((t-r+m+o)/s+Math.abs(l)/n-Math.abs(u)/c),0===v)return v;if(Math.abs(l*s/v)>p)break;a-=1}const m=Math.abs(u*s/v),p=Math.abs(u*s/d);if(e.reverse().findIndex((e=>m>e.bracketNotionalFloor))===e.reverse().findIndex((e=>p>e.bracketNotionalFloor)))break;if(0===h)break;h-=1}if(Math.abs(l)<Math.abs(u)){const{markPrice:e}=o;if(x=(Math.abs(l)*p+Math.abs(u)*y+Math.abs(l)-Math.abs(u))/((t-r+f+b)/s+Math.abs(l)/n-Math.abs(u)/c),x>=0&&(Math.abs(x-e)<Math.abs(v-e)||v<0))return x}return v},k=(e=0,t=0,r=0)=>{const a=t+r;return(0,i.JX)(a?e/a*100:0,2)},P=(e,t)=>{const r={sl:{},tp:{}};return t.forEach((t=>{const a=!0===t.closePosition,i=e.symbol===t.symbol,n=e.positionSide===t.positionSide,l=e.positionSize<0&&"BUY"===t.side||e.positionSize>0&&"SELL"===t.side;a&&i&&n&&l&&(t.type===o.PH.TAKE_PROFIT_MARKET&&(r.tp=t),t.type===o.PH.STOP_MARKET&&(r.sl=t))})),r}},cucV:(e,t,r)=>{"use strict";r.d(t,{Zk:()=>a.Zk,Uy:()=>a.Uy,sE:()=>a.sE,yh:()=>a.yh,SH:()=>a.SH,wj:()=>a.wj,zW:()=>a.zW,ot:()=>a.ot,nn:()=>a.nn,bG:()=>i.bG});var a=r("74Of"),i=r("H8fa")},H8fa:(e,t,r)=>{"use strict";r.d(t,{bG:()=>s,Dj:()=>c,_O:()=>u});var a=r("5vwO"),i=r("FOuV"),o=r("wdcV"),n=r("74Of");const{leverageInfo:l}=i.Fy,s=({riskRatio:e,assetsRateEquity:t,assetsMM:r,assetIndexes:i,brackets:s,positions:d,balances:m,leverages:p,useLastPrice:f,openOrders:g})=>{const{leverageList:y={}}=p||{},b=(0,o.L6)(d);return d.map(((o={})=>{const{symbol:p,positionSide:h,marginAsset:v}=o,x=m[v]||{},{crossWalletBalance:S=0}=x;let k,P,T=0;const C=(null===s||void 0===s?void 0:s[p])||[],Z=y[p]||l.defaultVal,M=i[v]||{},I=(b[v]||[]).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==p)),w=(0,n.zW)(I,s),E=(0,n.ot)(I);let A=0;Object.entries(t).forEach((([e,t])=>{e!==v&&(A+=t)})),Object.entries(r).forEach((([e,t])=>{const r=i[e]||{},{askRate:a=0}=r;A-=e!==v?t*a:w*a}));if(h&&"BOTH"!==h){const e=d.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===p&&"BOTH"!==r&&r!==h}))[0]||{positionSize:0,entryPrice:0};k="LONG"===h?o:e,P="SHORT"===h?o:e,T=u({accEquityAndMMs:A,assetIndex:M,bracket:C,crossWalletBalance:S,smdsUPNL:E,longPosition:k,shortPosition:P,curPosition:o})}else T=c({accEquityAndMMs:A,assetIndex:M,bracket:C,crossWalletBalance:S,smdsUPNL:E,curPosition:o});const N=(0,n.nn)(o,f),O=(0,n.fS)(o)*(0,n.yh)(Z),R=`${(100*(N/O||0)).toFixed(2)}%`;return(0,a.Z)((0,a.Z)({},o),{},{liquidationPrice:T<0?0:T,riskRatio:e,unrealizedPnl:N,margin:O,ROEVal:R,leverage:Z,strategyOrders:(0,n.Vf)(o,g)})}))},c=({accEquityAndMMs:e,assetIndex:t,bracket:r,crossWalletBalance:a,smdsUPNL:i,curPosition:o})=>{const{positionSize:n,entryPrice:l}=o,{askRate:s=1,bidRate:c=1}=t;if(!n||0===n)return 0;let u=0;const d=n>=0?1:-1;let m=r.length-1;const p={};for(;m>=0;){const{bracketMaintenanceMarginRate:t,cumFastMaintenanceAmount:o,bracketNotionalFloor:f,bracketNotionalCap:g}=r[m];p.mmr=t,p.cum=o,u=(e+o*s+(a+i-d*Math.abs(n)*l)*c)/(Math.abs(n)*(t*s-d*c));if(f<u*Math.abs(n))break;if(0===m)break;m-=1}if(a+i+d*Math.abs(n)*(u-l)<=0){const{mmr:t,cum:r}=p;u=(e+r*s+(a+i-d*Math.abs(n)*l)*s)/(Math.abs(n)*(t*s-d*s))}return u},u=({accEquityAndMMs:e,assetIndex:t,bracket:r,crossWalletBalance:a,smdsUPNL:i,longPosition:o,shortPosition:l,curPosition:s})=>{const{entryPrice:c=0,positionSize:u=0}=o,{entryPrice:d=0,positionSize:m=0}=l;if(0===u&&0===m)return 0;const{askRate:p=1,bidRate:f=1}=t,{index:g,bracketMaintenanceMarginRate:y,cumFastMaintenanceAmount:b}=(0,n.u5)(r,o),{bracketMaintenanceMarginRate:h,cumFastMaintenanceAmount:v}=(0,n.u5)(r,l);let x=g,S=0,k=0;const P={};for(;x>=0;){let t=r.length-1;const{bracketMaintenanceMarginRate:o,cumFastMaintenanceAmount:n,bracketNotionalFloor:l}=r[x];for(P.mmrLong=o,P.cumLong=n;t>=0;){const{bracketMaintenanceMarginRate:l,cumFastMaintenanceAmount:s,bracketNotionalFloor:g}=r[t];P.mmrShort=l,P.cumShort=s;S=(e+(s+n)*p+(a+i-Math.abs(u)*c+Math.abs(m)*d)*f)/((Math.abs(u)*o+Math.abs(m)*l)*p-(Math.abs(u)-Math.abs(m))*f);if(S*Math.abs(m)>g)break;t-=1}if(S*Math.abs(u)>l)break;if(0===x)break;x-=1}if(Math.abs(u)>Math.abs(m)){const{markPrice:t}=s;k=(e+(v+b)*p+(a+i-Math.abs(u)*c+Math.abs(m)*d)*f)/((Math.abs(u)*y+Math.abs(m)*h)*p-(Math.abs(u)-Math.abs(m))*f),k>=0&&(Math.abs(k-t)<Math.abs(S-t)||S<0)&&(P.mmrLong=y,P.cumLong=b,P.mmrShort=h,P.cumShort=v,S=k)}if(a+i+Math.abs(u)*(S-c)+Math.abs(m)*(d-S)<=0){const{mmrLong:t,cumLong:r,mmrShort:o,cumShort:n}=P;S=(e+(n+r)*p+(a+i-Math.abs(u)*c+Math.abs(m)*d)*p)/((Math.abs(u)*t+Math.abs(m)*o)*p-(Math.abs(u)-Math.abs(m))*p)}return S}},"74Of":(e,t,r)=>{"use strict";r.d(t,{Zk:()=>s,nn:()=>c,fS:()=>u,wj:()=>m,yh:()=>p,ot:()=>f,u5:()=>g,SH:()=>y,zW:()=>b,Uy:()=>h,sE:()=>v,W8:()=>x,wr:()=>S,Vo:()=>k,Vf:()=>P});var a=r("5vwO"),i=r("mE5e"),o=r("FOuV"),n=r("yxRq");const{leverageInfo:l}=o.Fy,s=(e,t=[],r,i,o,n=!0,s=!1,d,m=[])=>{const{leverageList:g={}}=i||{},h=d||t;return t.map(((t={})=>{const{isolated:i,isolatedWallet:o=0,symbol:d,positionSide:v,marginAsset:T}=t,C=r[T]||{},{crossWalletBalance:Z=0}=C;let M,I,w=0,E=0,A=0,N=0,O=0;const R=(null===e||void 0===e?void 0:e[d])||[],L=!i&&v&&"BOTH"!==v,V=i?o:Z,F=g[d]||l.defaultVal;if(!i){const t=h.filter((e=>e.marginAsset===T)).filter((e=>!(null!==e&&void 0!==e&&e.isolated)));w=b(t,e),E=f(t),A=k(w,Z,E);const r=t.filter((e=>(null===e||void 0===e?void 0:e.symbol)!==d));N=b(r,e)-f(r)}if(L){const e=h.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===d&&"BOTH"!==r&&r!==v}))[0]||{positionSize:0,entryPrice:0};M="LONG"===v?t:e,I="SHORT"===v?t:e}n&&(O=L?S(R,V,N,M,I,t):x(R,V,N,t));const D=y(R,t),_=c(t),B=k(D,o,_),z=c(t,s),K=u(t)*p(F),q=`${(100*(z/K||0)).toFixed(2)}%`;return(0,a.Z)((0,a.Z)({},t),{},{liquidationPrice:O<0?0:O,unrealizedPnl:z,margin:i?o:K,riskRatio:i?B:A,ROEVal:q,leverage:F,strategyOrders:P(t,m)})}))},c=({positionSize:e=0,entryPrice:t=0,markPrice:r=0,lastPrice:a},i=!1)=>e*((i&&a||r)-t),u=({positionSize:e=0,markPrice:t=0})=>Math.abs(e*t),d=({positionNotionalValue:e=0,bidNotional:t=0,askNotional:r=0})=>Math.max(Math.abs(e+Number(t)),Math.abs(e-Number(r))),m=e=>{let t=0;return e.forEach((e=>{const r=(({bidNotional:e,askNotional:t,markPrice:r,positionSize:a})=>{const i=(({positionSize:e=0,markPrice:t=0})=>e*t)({markPrice:r,positionSize:a});return e=Number(e||0),t=Number(t||0),Math.max(Math.abs(i+e),Math.abs(i-t))})(e)-u(e);t+=r})),t},p=e=>1*(0,i.mD)(1/e,4),f=(e=[],t)=>e.reduce(((e,r)=>e+c(r,t)),0),g=(e=[],t)=>{const r=u(t);let i=e.findIndex((e=>r<e.bracketNotionalCap));return-1===i&&(i=e.length-1),(0,a.Z)((0,a.Z)({positionNotionalValue:r},e[i]),{},{index:i})},y=(e,t)=>{const{positionNotionalValue:r,bracketMaintenanceMarginRate:a,cumFastMaintenanceAmount:i}=g(e,t);return r*a-i},b=(e=[],t={})=>e.reduce(((e,r)=>{const{symbol:a}=r||{},i=(null===t||void 0===t?void 0:t[a])||[];return e+y(i,r)}),0),h=(e=[],t,r)=>e.filter((e=>!(null!==e&&void 0!==e&&e.isolated))).reduce(((e,i)=>e+(({positionNotionalValue:e,bidNotional:t,askNotional:r,leverage:a=l.defaultVal})=>{const i=p(a);return d({positionNotionalValue:e,bidNotional:t,askNotional:r})*i})((0,a.Z)((0,a.Z)({},i),{},{positionNotionalValue:(0,n.Nu)(i),leverage:r===i.symbol?t:i.leverage}))),0),v=(e=[],t,r)=>{let i=0;return e.forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){const{symbol:o,markPrice:l,positionSize:s}=e,c=o===r?t:e.leverage,u=(0,n.Nu)(e);i+=(Math.abs(d((0,a.Z)((0,a.Z)({},e),{},{positionNotionalValue:u})))-l*Math.abs(s))*p(c)}})),i},x=(e=[],t,r,a)=>{const{positionSize:i,entryPrice:o}=a;if(!i||0===i)return 0;let n=0;const l=i>=0?1:-1;let s=e.length-1;for(;s>=0;){const{bracketMaintenanceMarginRate:a,cumFastMaintenanceAmount:c,bracketNotionalFloor:u}=e[s];n=(t-r+c-l*Math.abs(i)*o)/(Math.abs(i)*(a-l));if(n*Math.abs(i)>u)break;if(0===s)break;s-=1}return n},S=(e=[],t,r,a,i,o)=>{const{entryPrice:n=0,positionSize:l=0}=a,{entryPrice:s=0,positionSize:c=0}=i;if(0===l&&0===c)return 0;const{index:u,bracketMaintenanceMarginRate:d,cumFastMaintenanceAmount:m}=g(e,a),{bracketMaintenanceMarginRate:p,cumFastMaintenanceAmount:f}=g(e,i);let y=u,b=0,h=0;for(;y>=0;){let a=e.length-1;const{bracketMaintenanceMarginRate:i,cumFastMaintenanceAmount:o,bracketNotionalFloor:u}=e[y];for(;a>=0;){const{bracketMaintenanceMarginRate:u,cumFastMaintenanceAmount:d,bracketNotionalFloor:m}=e[a];b=(t-r+d+o-Math.abs(l)*n+Math.abs(c)*s)/(Math.abs(l)*i+Math.abs(c)*u-Math.abs(l)+Math.abs(c));if(b*Math.abs(c)>m)break;a-=1}if(b*Math.abs(l)>u)break;if(0===y)break;y-=1}if(Math.abs(l)>Math.abs(c)){const{markPrice:e}=o;if(h=(t-r+f+m-Math.abs(l)*n+Math.abs(c)*s)/(Math.abs(l)*d+Math.abs(c)*p-Math.abs(l)+Math.abs(c)),h>=0&&(Math.abs(h-e)<Math.abs(b-e)||b<0))return h}return b},k=(e=0,t=0,r=0)=>{const a=t+r;return(0,i.JX)(a?e/a*100:0,2)},P=(e,t)=>{const r={sl:{},tp:{}};return t.forEach((t=>{const a=!0===t.closePosition,i=e.symbol===t.symbol,n=e.positionSide===t.positionSide,l=e.positionSize<0&&"BUY"===t.side||e.positionSize>0&&"SELL"===t.side;a&&i&&n&&l&&(t.type===o.PH.TAKE_PROFIT_MARKET&&(r.tp=t),t.type===o.PH.STOP_MARKET&&(r.sl=t))})),r}},xbrC:(e,t,r)=>{"use strict";r.d(t,{r:()=>a});const a=(e=[])=>{const t=[];return e.forEach((e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach((e=>!t.includes(e)&&t.push(e)))})),t}},k4WF:(e,t,r)=>{"use strict";function a(e){return/[^\d|.|,|\u3002|\%]/.test(e)}r.d(t,{_p:()=>i,Y5:()=>o,f5:()=>n});const i=(e,t,r,i)=>{let o="object"!==typeof e?e:e.target.value;return a(Number(o))?"":~o.indexOf("%")?o:(/\u3002|,/.test(o)&&(o=o.replace(/[\u3002|,]/g,".")),/^0\d/.test(o)?o="0":/^\./.test(o)?o=0+o.substring(0,i+1):Number(o)>=0&&-1!==o.indexOf(".")&&o.split(".")[1].length>=i&&(o=o.replace(new RegExp(`^(\\d*\\.\\d{${i}})\\d*`),"$1")),Number.isNaN(Number(o))?"":void(r?t(r,o):t(o)))},o=e=>!/\d*\.?\d+$/.test(e.target.value)&&(e.target.value=""),n=(e,t)=>"Enter"===e.key&&t()},k2tD:(e,t,r)=>{"use strict";r.d(t,{GW:()=>o,mD:()=>n,OR:()=>l,nH:()=>s});var a=r("QlFx");const i=(e,t,r="round",i=!1)=>{const o=10**t;let n=(+(e=e||0)+1/10**(t+3))*o;if("string"===typeof r){const e=2;n=parseInt(n*10**e,10)/10**e,r=((e="bids")=>(()=>{switch(e){case"bids":return"floor";case"asks":return"ceil";default:if(Math[e])return Math[e];throw new Error("getRoundFunc called with unknown type")}})())(r)}if("function"!==typeof r)throw new Error("decRound unknown rounding func");return i?(0,a.uf)(r(n)/o,t):(r(n)/o).toFixed(t)},o=(e,t=2,r)=>i(e,t,"floor",r),n=(e,t=2,r)=>i(e,t,"ceil",r),l=e=>Math.abs(Math.log10(e)),s=(e=0)=>0===e?1:Math.abs(1/10**e)},wdcV:(e,t,r)=>{"use strict";r.d(t,{J9:()=>a,_g:()=>i,kh:()=>o,L6:()=>n,nn:()=>l,QN:()=>s});const a=e=>Object.values(e).filter((e=>{const{positionSize:t,isolatedWallet:r}=e||{};if(void 0===t)return;const a=Number(t);return 0!==a||0===a&&Number(r)<0})),i=(e,t)=>t&&"BOTH"!==t?`${e}_${t}`:e,o=(e=[])=>e.reduce(((e,t)=>{const{symbol:r}=t;return e[r]=t,e[`${i(r,"LONG")}`]=t,e[`${i(r,"SHORT")}`]=t,e}),{}),n=e=>e.reduce(((e,t)=>{const{marginAsset:r}=t;return e[r]=e[r]||[],e[r].push(t),e}),{}),l=({marginAsset:e,positions:t={}})=>Object.values(t).filter((t=>(null===t||void 0===t?void 0:t.marginAsset)===e))||[],s=e=>e.reduce(((e,{symbol:t,positionSide:r,orderSide:a,amount:i,message:o})=>{let n=r;"BOTH"===r&&(n="BUY"===a?"SHORT":"LONG");const l=`${t}_${n}`,s="LONG"===n?"buy":"sell",c=`${i} %unit% ${o}`;return e[l]?e[l].messages.push(c):e[l]={symbol:t,positionSide:n,color:s,amount:i,messages:[c]},e}),{})},"/M83":(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});const a=(e="",t={})=>{const{baseAsset:r,quoteAsset:a}=t;return[e,[r,a]]}},gHlc:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r("/SIk"),i=r.n(a),o=r("2cpV"),n=r("Fee1"),l=r("SJeZ"),s=r("9h1+"),c=r("HkAn"),u=r("VM/Z"),d=r("S24M"),m=i().createElement;const p={[u.$f]:"bottomRight",[u.UW]:"topRight",mobile:"topCenter"},f=()=>{const e=(()=>{const{isMobile:e}=(0,s.Fs)(),t=(0,l.C3)()===u.UW;let r=u.$f;return e?r="mobile":t&&(r=u.UW),r})(),{pageName:t,dfSource:r}=(0,c.Vn)();return m(n.Z,{name:"announcement"},!u.Jg&&m(o.Z,{business:"FUTURES",scope:"TRADING_PAGE",i18nHost:u.Yz,WS_HOST:u.Ij,sensorsTrack:d.j,trackParams:{pageName:t,dfSource:r},placement:p[e]}))}},"3Slz":(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var a=r("/SIk"),i=r.n(a),o=r("szIg"),n=r("I+sO"),l=r("zT+5"),s=r("gC8Z"),c=r("Qkkg"),u=r("ofts"),d=r("2iBS"),m=r("9h1+"),p=r("HkAn"),f=r("VM/Z"),g=r("S24M"),y=r("6Afj"),b=i().createElement;const h=(0,y.SA)((()=>Promise.all([r.e(3712),r.e(9845),r.e(4666)]).then(r.bind(r,"gHlc")))),v=({children:e})=>{(0,m.TF)(),(0,p.r5)(),(0,p.Vr)(),(0,p.mz)();const t=(0,o.useDispatch)();return(0,a.useEffect)((()=>{t.userCenter.checkLogin()}),[t.userCenter]),b(i().Fragment,null,b(u.Z,null),b(d.Z,null),b(l.I,{sensorsTrack:g.j,questionConfig:s.r.NEW0223}),b(h,null),e)},x=({render:e,children:t})=>{const{isMobile:r}=(0,m.Fs)(),a=(0,o.useSelector)((e=>e.setting.layout)),l=(0,o.useSelector)((e=>e.layout.pageLayout))===f.UW,s=a===f.rh||a===f.UW||r||l,u=e?e():null;return b(i().Fragment,null,t,b(c.Z,null,b(n.Z,{queueSize:2,closable:!0,autoHideDuration:4500,anchorOrigin:{vertical:s?"top":"bottom",horizontal:"right"},disableAnimate:!0},b(v,null,u))))},S=(0,a.memo)(x)},"9tTL":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ie});var a=r("/SIk"),i=r.n(a),o=r("fYqI"),n=r("Ozc/"),l=r("Tfqf"),s=r("9h1+"),c=r("SJeZ"),u=r("HkAn"),d=r("SKkT"),m=r("/MJE"),p=r("5vwO"),f=r("tSjq"),g=r("wr3m"),y=r("7DKi"),b=r("FOuV"),h=r("EPGa"),v=r("S24M");const x=({type:e,price1:t,price2:r})=>{(0,v.j)("webClick",{module:"chart",type:e,price1:t,price2:r})};var S=r("NQFm");const k=Object.values(h.Jm),P=Object.values(h.Jm);var T=r("jgBC");var C=r("lXyA"),Z=r.n(C),M=r("00zm");const I="trd_chart_basic_kline_load_timeout",w=e=>[e.time,e.open,e.high,e.low,e.close];const E=({dataProvider:e,symbol:t,interval:r,logOnFetchEndCallback:i,logOnFetchStartCallback:o,logOnKlineReadyCallback:l,logOnErrorDataCallback:s,logOnCatchChartCallback:c})=>{const u=(0,a.useCallback)((()=>{Z()((e=>{(0,T.Os)({eventId:I,scheduleId:"",stepId:"fetchDataEnd",catch({error:t,track:r}){r({FETCH_DATA_END_TYPE:t,duration_:(0,T.Fr)(Date.now()-e)})},log({track:t}){t({FETCH_DATA_END_TYPE:"SUCCESS",duration_:(0,T.Fr)(Date.now()-e)})}})})),null===i||void 0===i||i()}),[i]),d=(0,a.useCallback)((()=>{Z()((()=>{const e=(0,T.Nb)({id:"fetchDataStart"}),t=(0,T.Nb)({id:"fetchDataEnd",timeout:6}),r=(0,T.Nb)({id:"basicKlineReady",timeout:3});T.Os.init({step:e._(t)._(r),eventId:I}),(0,T.Os)({eventId:I,stepId:"fetchDataStart",catch({error:e,track:t}){t({FETCH_DATA_START_TYPE:e})},log({track:e}){e({FETCH_DATA_START_TYPE:"SUCCESS"})}})})),null===o||void 0===o||o()}),[o]),m=(0,a.useCallback)((()=>{Z()((()=>{(0,T.Os)({eventId:I,stepId:"basicKlineReady",catch({error:e,track:t}){t({BASIC_KLINE_READY_TYPE:e})},log({track:e}){e({BASIC_KLINE_READY_TYPE:"SUCCESS"})}})})),null===l||void 0===l||l()}),[l]),f=(0,a.useRef)(new Set);return{logOnFetchEnd:u,logOnFetchStart:d,logOnKlineReady:m,logOnErrorData:(0,M.D)((a=>{if(!f.current.has(a.type)){const i=e.trackingData.klineDataQueue.find((({id:e})=>a.payload.prevItem.id===e)),o=e.trackingData.klineDataQueue.find((({id:e})=>a.payload.nextItem.id===e));(0,v.j)(`trd_chart_${a.type}`,(0,p.Z)({trd_chart_symbol:t,trd_chart_interval:r,neighbor:JSON.stringify([i,o])},function(e){switch(e.type){case"disConnect":case"renderError":return{trd_chart_nextItem:JSON.stringify(w(e.payload.nextItem)),trd_chart_prevItem:JSON.stringify(w(e.payload.prevItem))};case"invalidData":return{trd_chart_invalid_data:JSON.stringify(w(e.payload.data))};default:return{}}}(a))),f.current.add(a.type)}null===s||void 0===s||s()})),logOnCatchChart:(0,a.useCallback)((e=>{n.Z.log(JSON.stringify({type:"kline-error",error:e}),"custom"),null===c||void 0===c||c()}),[c])}};var A=r("m92i"),N=r("uM3s"),O=r("lw9u"),R=r("EWim");const L=()=>{let e=0;return({symbol:t,pair:r,contractType:a,interval:i,priceType:o,useMiniTicker:n,isDelivery:l,onNewDataArrived:s=(()=>null),dataTransformer:c=(e=>e),disconnectCallback:u=(()=>null)})=>{e+=1;let d=0,m=null;const f={klineDataQueue:[]},g=(y=e,()=>y===e);var y;const b=(0,R.b0)({symbol:t,pair:r,contractType:a,interval:i,isDelivery:l,priceType:o});return{trackingData:f,getData:async({startTime:e=0,endTime:t=0},r=(()=>!1))=>{try{const a=(await(0,N.M)({onFetchKlineData:b,startTime:e,endTime:t})).map(c);(e=>{var t;const r=null===(t=e[e.length-1])||void 0===t?void 0:t.time;r&&r>d&&(d=r)})(a),f.klineDataQueue=a.slice(-100).map((e=>(0,p.Z)((0,p.Z)({},e),{},{id:(0,A.Z)()}))),r({data:a,isLoadAll:0===a.length})}catch(a){}},subscribe:(e,y)=>(m=(0,O.Ld)({symbol:t,pair:r,contractType:a,interval:i,priceType:o,isDelivery:l,useMiniTicker:n,checkIfInSync:g,callback:(e,t)=>{const r=(0,p.Z)((0,p.Z)({},t),{},{id:(0,A.Z)()});var a,o;a=f.klineDataQueue,o=r,a.push(o),a.length>100&&a.splice(0,1);const n=c(e),{time:l}=n;(e=>{if(0===d)return;const t=(0,T.nJ)(i);e-d>=2*t&&(null===u||void 0===u||u())})(l),l>d&&(d=l),y(n),s(n)}}),m),unsubscribe:()=>{var e;null===(e=m)||void 0===e||e(),m=null},getBarDatas:()=>null,subcribe:()=>null,unSubcribe:()=>null}}};var V=r("pqKJ"),F=r("nWyn"),D=r("t3Ex");const _=["5m","15m","30m","1h","2h","4h","6h","12h","1d"],B=({symbol:{pair:e},period:t})=>({symbol:e,period:t,limit:500}),z=(0,p.Z)((0,p.Z)({},(0,D.r)({availableIntervals:_,transform:e=>e.map((({timestamp:e,sumOpenInterest:t,sumOpenInterestValue:r})=>({time:e,sum:+t,sumValue:+r}))),makeRequest:e=>async()=>(0,F.K$)(B(e))})),{},{defaultProps:{id:"@OI-UM",title:"O.I",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,sumValue:t})=>({time:e,value:t})));r([{data:e.map((({time:e,sum:t})=>({time:e,value:t}))),chartType:"BAR",color:"@OI-UM.bar.color"},{data:a,chartType:"LINE",color:"@OI-UM.nv.color",lineWidth:"@OI-UM.nv.lineWidth",yAxisIndex:"oiValue"}])},getLabel(e,t){const[{data:r}={},{data:a}={}]=t;return[{key:"title",label:"Open Interest"},{key:"oi-value",label:`${(0,T.XR)((0,D.W)(e,r),2)}`,styles:{color:"@OI-UM.bar.color"}},{key:"noi-text",label:"Notional Value of Open Interest"},{key:"noi-value",label:`${(0,T.XR)((0,D.W)(e,a),2)}`,styles:{color:"@OI-UM.nv.color"}}]},getMobileLabel:()=>[{key:"title",label:"Open Interest"}]}),K=(0,p.Z)((0,p.Z)({},(0,D.r)({availableIntervals:_,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,F.Zc)(B(e))})),{},{defaultProps:{id:"@LS-Acco",title:"L.S Acco.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Acco.bar.buyColor",yAxisIndex:"bar",name:"bar",min:0,max:1,visible:!0},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Acco.bar.sellColor",yAxisIndex:"bar",stack:"bar",min:0,max:1,visible:!0},{data:a,chartType:"LINE",color:"@LS-Acco.ratio.color",lineWidth:"@LS-Acco.ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Account Ratio"},{key:"ratio-value",label:`${(0,T.JX)((0,D.W)(e,i),2)}`,styles:{color:"@LS-Acco.ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,T.JX)(100*(0,D.W)(e,r),2)}%`,styles:{color:"@LS-Acco.bar.buyColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,T.JX)(100*(0,D.W)(e,a),2)}%`,styles:{color:"@LS-Acco.bar.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Account Ratio"}]}),q=(0,p.Z)((0,p.Z)({},(0,D.r)({availableIntervals:_,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,F.mk)(B(e))})),{},{defaultProps:{id:"@LS-Posit",title:"L.S Posit.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Posit.bar.buyColor",yAxisIndex:"bar",name:"bar",min:0,max:1,visible:!0},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Posit.bar.sellColor",yAxisIndex:"bar",stack:"bar",min:0,max:1,visible:!0},{data:a,chartType:"LINE",color:"@LS-Posit.ratio.color",lineWidth:"@LS-Posit.ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Position Ratio"},{key:"ratio-value",label:`${(0,T.JX)((0,D.W)(e,i),2)}`,styles:{color:"@LS-Posit.ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,T.JX)(100*(0,D.W)(e,r),2)}%`,styles:{color:"@LS-Posit.bar.buyColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,T.JX)(100*(0,D.W)(e,a),2)}%`,styles:{color:"@LS-Posit.bar.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Position Ratio"}]}),W=(0,p.Z)((0,p.Z)({},(0,D.r)({availableIntervals:_,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,F._K)(B(e))})),{},{defaultProps:{id:"@LS-Ratio",title:"L.S Ratio",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Ratio.bar.buyColor",yAxisIndex:"bar1",name:"bar1",min:0,max:1,visible:!0},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Ratio.bar.sellColor",yAxisIndex:"bar1",stack:"bar1",min:0,max:1,visible:!0},{data:a,chartType:"LINE",color:"@LS-Ratio.ratio.color",lineWidth:"@LS-Ratio.ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Ratio"},{key:"ratio-value",label:`${(0,T.JX)((0,D.W)(e,i),2)}`,styles:{color:"@LS-Ratio.ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,T.JX)(100*(0,D.W)(e,r),2)}%`,styles:{color:"@LS-Ratio.bar.buyColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,T.JX)(100*(0,D.W)(e,a),2)}%`,styles:{color:"@LS-Ratio.bar.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Ratio"}]}),U=(0,p.Z)((0,p.Z)({},(0,D.r)({availableIntervals:_,transform:e=>e.map((({timestamp:e,buyVol:t,sellVol:r,buySellRatio:a})=>({time:e,buy:+t,sell:+r,buySellRatio:+a}))),makeRequest:e=>async()=>(0,F.eq)(B(e))})),{},{defaultProps:{id:"@BSVol",title:"B.S Vol.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0,barWeight:.5},getResult(e,t,r){r([{data:e.map((({time:e,buy:t})=>({time:e,value:t}))),chartType:"BAR",color:"@BSVol.buyColor"},{data:e.map((({time:e,sell:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"@BSVol.sellColor",yAxisIndex:"bar"}])},getLabel(e,t){const[{data:r}={},{data:a}={}]=t;return[{key:"title",label:"Taker Buy/Sell Volume"},{key:"buy-text",label:"Buy"},{key:"buy-value",label:`${(0,T.XR)((0,D.W)(e,r),2)}`,styles:{color:"@BSVol.buyColor"}},{key:"sell-text",label:"Sell"},{key:"sell-value",label:`${(0,T.XR)((0,D.W)(e,a),2)}`,styles:{color:"@BSVol.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Taker Buy/Sell Volume"}]}),j=[{name:z.defaultProps.id,indicator:z},{name:K.defaultProps.id,indicator:K},{name:q.defaultProps.id,indicator:q},{name:W.defaultProps.id,indicator:W},{name:U.defaultProps.id,indicator:U}],$=["5m","15m","30m","1h","2h","4h","6h","12h","1d"],H=({symbol:{pair:e,contractType:t},period:r})=>({pair:e,period:r,contractType:t,limit:500}),G=(0,p.Z)((0,p.Z)({},(0,D.r)({availableIntervals:$,transform:e=>e.map((({timestamp:e,sumOpenInterest:t,sumOpenInterestValue:r})=>({time:e,sum:+t,sumValue:+r}))),makeRequest:e=>async()=>(0,F.Yo)(H(e))})),{},{defaultProps:{id:"@OI-CM",title:"O.I",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){r([{data:e.map((({time:e,sumValue:t})=>({time:e,value:t}))),chartType:"BAR",color:"@OI-CM.bar.color"}])},getLabel(e,t){const[{data:r}={}]=t;return[{key:"title",label:"Open Interest"},{key:"noi-text",label:"Notional Value of Open Interest"},{key:"noi-value",label:`${(0,T.XR)((0,D.W)(e,r),2)}`,styles:{color:"@OI-CM.bar.color"}}]},getMobileLabel:()=>[{key:"title",label:"Open Interest"}]}),J=(0,p.Z)((0,p.Z)({},(0,D.r)({availableIntervals:$,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,F.XC)((0,p.Z)((0,p.Z)({},H(e)),{},{contractType:"ALL"}))})),{},{defaultProps:{id:"@LS-Acco",title:"L.S Acco.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Acco.bar.buyColor",yAxisIndex:"bar",name:"bar",min:0,max:1,visible:!0},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Acco.bar.sellColor",yAxisIndex:"bar",stack:"bar",min:0,max:1,visible:!0},{data:a,chartType:"LINE",color:"@LS-Acco.ratio.color",lineWidth:"@LS-Acco.ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Account Ratio"},{key:"ratio-value",label:`${(0,T.JX)((0,D.W)(e,i),2)}`,styles:{color:"@LS-Acco.ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,T.JX)(100*(0,D.W)(e,r),2)}%`,styles:{color:"@LS-Acco.bar.buyColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,T.JX)(100*(0,D.W)(e,a),2)}%`,styles:{color:"@LS-Acco.bar.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Account Ratio"}]}),Y=(0,p.Z)((0,p.Z)({},(0,D.r)({availableIntervals:$,transform:e=>e.map((({timestamp:e,longPosition:t,shortPosition:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,F.H8)((0,p.Z)((0,p.Z)({},H(e)),{},{contractType:"ALL"}))})),{},{defaultProps:{id:"@LS-Posit",title:"L.S Posit.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Posit.bar.buyColor",yAxisIndex:"bar",name:"bar",min:0,max:1,visible:!0},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Posit.bar.sellColor",yAxisIndex:"bar",stack:"bar",min:0,max:1,visible:!0},{data:a,chartType:"LINE",color:"@LS-Posit.ratio.color",lineWidth:"@LS-Posit.ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Position Ratio"},{key:"ratio-value",label:`${(0,T.JX)((0,D.W)(e,i),2)}`,styles:{color:"@LS-Posit.ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,T.JX)(100*(0,D.W)(e,r),2)}%`,styles:{color:"@LS-Posit.bar.buyColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,T.JX)(100*(0,D.W)(e,a),2)}%`,styles:{color:"@LS-Posit.bar.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Position Ratio"}]}),Q=(0,p.Z)((0,p.Z)({},(0,D.r)({availableIntervals:$,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,F.QE)((0,p.Z)((0,p.Z)({},H(e)),{},{contractType:"ALL"}))})),{},{defaultProps:{id:"@LS-Ratio",title:"L.S Ratio",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Ratio.bar.buyColor",yAxisIndex:"bar",name:"bar",min:0,max:1,visible:!0},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"@LS-Ratio.bar.sellColor",yAxisIndex:"bar",stack:"bar",min:0,max:1,visible:!0},{data:a,chartType:"LINE",color:"@LS-Ratio.ratio.color",lineWidth:"@LS-Ratio.ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Ratio"},{key:"ratio-value",label:`${(0,T.JX)((0,D.W)(e,i),2)}`,styles:{color:"@LS-Ratio.ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,T.JX)(100*(0,D.W)(e,r),2)}%`,styles:{color:"@LS-Ratio.bar.buyColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,T.JX)(100*(0,D.W)(e,a),2)}%`,styles:{color:"@LS-Ratio.bar.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Ratio"}]}),X=(0,p.Z)((0,p.Z)({},(0,D.r)({availableIntervals:$,transform:e=>e.map((({timestamp:e,takerBuyVol:t,takerBuyVolValue:r,takerSellVol:a,takerSellVolValue:i})=>({time:e,buy:+t,buyValue:+r,sell:+a,sellValue:+i}))),makeRequest:e=>async()=>(0,F.YW)(H(e))})),{},{defaultProps:{id:"@BSVol",title:"B.S Vol.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0,barWeight:.5},getResult(e,t,r){r([{data:e.map((({time:e,buyValue:t})=>({time:e,value:t}))),chartType:"BAR",color:"@BSVol.buyColor"},{data:e.map((({time:e,sellValue:t})=>({time:e,value:t}))),chartType:"BAR",color:"@BSVol.sellColor",yAxisIndex:"bar"}])},getLabel(e,t){const[{data:r}={},{data:a}={}]=t;return[{key:"title",label:"Taker Buy/Sell Volume"},{key:"buy-text",label:"Buy"},{key:"buy-value",label:`${(0,T.XR)((0,D.W)(e,r),2)}`,styles:{color:"@BSVol.buyColor"}},{key:"sell-text",label:"Sell"},{key:"sell-value",label:`${(0,T.XR)((0,D.W)(e,a),2)}`,styles:{color:"@BSVol.sellColor"}}]},getMobileLabel:()=>[{key:"title",label:"Taker Buy/Sell Volume"}]}),ee=["1m","3m","8h","3d","1w","1M",...$],te=(0,p.Z)((0,p.Z)({},(0,D.r)({availableIntervals:ee,transform:e=>e.map((({timestamp:e,indexPrice:t,basisRate:r,futuresPrice:a,basis:i})=>({time:e,indexPrice:+t,basisRate:+r,futuresPrice:+a,basis:+i}))),makeRequest:e=>async()=>(0,F.rV)(H(e))})),{},{defaultProps:{id:"@Basis",title:"Basis",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){r([{data:e.map((({time:e,basis:t})=>({time:e,value:t}))),chartType:"AREA",color:"basis.area"},{data:e.map((({time:e,basisRate:t})=>({time:e,value:t}))),chartType:"LINE",color:"@Basis.basisColor",visible:!1},{data:e.map((({time:e,futuresPrice:t})=>({time:e,value:t}))),chartType:"LINE",color:"@Basis.futurePriceColor",yAxisIndex:"line"},{data:e.map((({time:e,indexPrice:t})=>({time:e,value:t}))),chartType:"LINE",color:"@Basis.priceIndexColor",yAxisIndex:"line"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={},{data:o}={}]=t;return[{key:"title",label:"Basis"},{key:"basis-value",label:`${(0,T.XR)((0,D.W)(e,r),2)}`,styles:{color:"candle.upBarColor"}},{key:"basisRate-text",label:"Basis Rate"},{key:"basisRate-value",label:`${(0,T.JX)(100*(0,D.W)(e,a),2)}%`,styles:{color:"@Basis.basisColor"}},{key:"futuresPrice-text",label:"Futures Price"},{key:"futuresPrice-value",label:`${(0,T.XR)((0,D.W)(e,i),2)}`,styles:{color:"@Basis.futurePriceColor"}},{key:"priceIndex-text",label:"Price Index"},{key:"priceIndex-value",label:`${(0,T.XR)((0,D.W)(e,o),2)}`,styles:{color:"@Basis.priceIndexColor"}}]},getMobileLabel:()=>[{key:"title",label:"Basis"}]}),re=[{name:G.defaultProps.id,indicator:G},{name:J.defaultProps.id,indicator:J},{name:Y.defaultProps.id,indicator:Y},{name:Q.defaultProps.id,indicator:Q},{name:X.defaultProps.id,indicator:X},{name:te.defaultProps.id,indicator:te}];var ae=i().createElement;const ie=({namespace:e,symbol:t,useMiniTicker:r})=>{const v=o.k.Store.createStore(e),C=o.k.SessionStore.createStore(e),Z=o.k.CandlestickHistoryStore.createStore(e),[M]=v(o.k.Store.getInterval),[I]=v(o.k.Store.getPriceType),[,w]=Z(o.k.CandlestickHistoryStore.getCandlestickHistory),[A]=C(o.k.SessionStore.getCandlestickReference),[,N]=C(o.k.SessionStore.getCandlestickKey),O=M===o.k.Store.DisplayIntervals.Time?o.k.Store.DisplayIntervals["1m"]:M,{getI18n:R}=(0,c.yk)(),F=(e=>{const t=(0,s.Vh)()[e];if(!t)return[];const{isDelivery:r}=t;return r?re:j})(t),{isContUnit:D}=(0,l.Q)(),_=(0,s.Fg)().isLight?"light":"dark",[B,z]=(0,u.TG)(),K=(0,s.C$)(),{symbolDisplay:q="",baseAsset:W,quoteAsset:U,pricePrecision:$,isDelivery:H,pair:G,contractType:J,contractVal:Y}=(0,s.Vh)()[t]||{},Q=(0,a.useMemo)((()=>({pair:G,contractType:J})),[J,G]),X=(0,a.useMemo)((()=>R("Cont",{defaultValue:"Cont"})||""),[R]),ee=D?X:W;(0,s.M9)(t,r),(0,s.jT)({symbol:t,interval:O,priceType:I});const te=(0,a.useCallback)((()=>{setTimeout((()=>{const e=null===A||void 0===A?void 0:A.getCurrentItemByTime(Date.now()),t=(null===A||void 0===A?void 0:A.getSeriesData())||[];w([e,t[t.length-2]])}),0)}),[A,w]),ie=(0,a.useMemo)((()=>H?D?(0,V.D)(Y):(0,V.V)(Y):e=>e),[Y,D,H]),oe=(0,a.useMemo)((()=>L()),[]),ne=(0,a.useMemo)((()=>oe({symbol:t,pair:G,contractType:J,interval:O,priceType:I,useMiniTicker:r,isDelivery:H,dataTransformer:ie,onNewDataArrived:te,disconnectCallback:N})),[oe,t,G,J,O,I,r,H,ie,te,N]),{showConfirmation:le,confirmationProps:se}=(({symbol:e,namespace:t})=>{var r;const i=o.k.Store.createStore(t),n=o.k.SessionStore.createStore(t),[l]=i(o.k.Store.getChartMode),[d]=i(o.k.Store.getShowLimitOrder),[m]=n(o.k.SessionStore.getCandlestickReference),[v]=(0,y.g)(b.Zv,b.Xd),{getI18n:T}=(0,c.yk)(),{kLine:C=!1,needConfirm:Z}=v||{},M=(0,s.AM)()[e],{contractVal:I,isDelivery:w,filters:E=[]}=M||{},A=(null===(r=E.find(S.W4))||void 0===r?void 0:r.maxQty)||"",N=(0,u.Xw)(),{enqueueNotification:O}=(0,g.Z)(),{0:R,1:L}=(0,a.useState)(1),{0:V,1:F}=(0,a.useState)(!1),{0:D,1:_}=(0,a.useState)(),B=(0,a.useMemo)((()=>w?k:P),[w]),z=(0,c.H3)({symbol:e}),K=(0,a.useMemo)((()=>z.filter((({order:e})=>B.includes(e.origType)))),[z,B]),q=(0,a.useMemo)((()=>T("amendmentOrderSubmitted",{defaultValue:"Amendment Order Submitted"})),[T]),W=(0,a.useMemo)((()=>T("maxLimitQty",{defaultValue:"Maximum Limit Order Quantity"})),[T]),U=(0,a.useMemo)((()=>T("cont-unit",{defaultValue:"Cont"})),[T]),j=(0,a.useMemo)((()=>`${W}: ${A} ${U}`),[U,A,W]),$=(0,a.useCallback)((()=>L((e=>e+1))),[]),H=(0,a.useCallback)((()=>{$(),F(!1)}),[$]),G=(0,a.useCallback)((async({orderId:e,price:t,quantity:r,symbol:a,side:i})=>{const o=await(0,f.nC)({orderId:e,price:t,quantity:r,symbol:a,side:i,timestamp:Date.now()},void 0);o.success?O({message:q}):"90814005"===o.code&&O({message:j,autoHideDuration:1e4}),H()}),[O,H,j,q]),J=(0,a.useCallback)((async t=>{var r;const a=+((null===t||void 0===t?void 0:t.origQty)||""),i=+((null===t||void 0===t?void 0:t.quantity)||""),o=+((null===t||void 0===t?void 0:t.price)||""),n="quantity"===t.hasChanged?"cont"===t.unit?i:(({price:e,coin:t,contractVal:r})=>t*e/r)({price:o,coin:i,contractVal:I}):a,l="cont"===t.unit?n:(({price:e,cont:t,contractVal:r})=>t*r/e)({price:o,cont:n,contractVal:I}),s={orderId:t.orderId,price:o,quantity:n,symbol:e,side:null===(r=t.order)||void 0===r?void 0:r.side},c="price"===t.hasChanged?"PRICE":"quantity"===t.hasChanged?"QUANTITY":"";Z?(_({order:(0,p.Z)((0,p.Z)({},t.order),{},{modifyParams:{limitPrice:s.price,qty:l,amendedField:c},onConfirm:()=>G(s,void 0)}),onClose:H}),F(!0)):G(s,void 0)}),[I,e,Z,H,G]);return(0,a.useEffect)((()=>{if(m&&d&&l!==o.k.Store.ChartMode.Four)return K.forEach((({price:e,quantity:t,text:r,origQty:a,cancel:i,orderId:o,unit:n,order:l})=>{m.createOrderLine((0,p.Z)({price:e,quantity:t.toString(),text:r,editable:w&&C&&l.origType!==h.Jm.LIMIT&&l.origType!==h.Jm.POST_ONLY,onClose:()=>{x({type:"cancel"}),i()},onPriceChange:t=>{x({type:"dragIcon"===t.trigger?"order":"vertical",price1:+e,price2:+((null===t||void 0===t?void 0:t.price)||"")}),J({price:t.price||"",quantity:t.quantity||"",origQty:a,orderId:o,unit:n,order:l,hasChanged:t.price!==t.prevPrice?"price":""})},onQuantityChange:e=>{x({type:"Amountclick"}),J({price:e.price||"",quantity:e.quantity||"",origQty:a,orderId:o,unit:n,order:l,hasChanged:e.quantity!==e.prevQuantity?"quantity":""})},onClickDragArea:e=>{x({type:"dragIcon"===e.triggerType?"order":"vertical"})},onClickQuantity:e=>{x({type:"Amountclick"})}},(({isBuy:e,theme:t})=>{const r=e?t.colors.buy:t.colors.sell;return{textInputBorderColor:r,dragSquareIconColor:r,dragSquareBackgroundColor:t.colors.popupBg,dragSquareDraggingBackgroundColor:t.colors.line,closeIconColor:t.colors.t.secondary,priceBackground:r,priceColor:t.colors.t.primary,priceBorderColor:r,quantityBackground:t.colors.popupBg,quantityColor:t.colors.t.primary,quantityBorderColor:t.colors.line,borderColor:t.colors.line,priceLabelBackground:t.colors.moduleBg,priceLabelBorderColor:r,priceLabelColor:r,background:t.colors.popupBg,lineColor:r,lineDash:[2,2],draggingLineDash:[0,0]}})({isBuy:"BUY"===l.side,theme:N})))})),()=>{m.deleteAllOrderShape()}}),[l,m,N,K,R,J,w,d,C]),{showConfirmation:V,confirmationProps:D}})({symbol:t,namespace:e});(({symbol:e,namespace:t})=>{const r=o.k.Store.createStore(t),i=o.k.SessionStore.createStore(t),[n]=r(o.k.Store.getChartMode),[l]=r(o.k.Store.getShowPositionOrder),[d]=i(o.k.SessionStore.getCandlestickReference),m=(0,u.Xw)(),f=(0,s.AM)()[e],{tickSize:g}=f||{},y=(0,c.db)({symbol:e,tickSize:g}),b=(0,a.useMemo)((()=>(0,T.p8)(+g)),[g]);(0,a.useEffect)((()=>{if(d&&l&&n!==o.k.Store.ChartMode.Four)return y.forEach((({isBuy:e,price:t,positionTypeText:r,quantity:a,PNL:i})=>{var o;const n=null===(o=t.toFixed(b))||void 0===o?void 0:o.toString();d.createPositionLine((0,p.Z)({price:n,quantity:a,pnl:i,positionTypeText:`${r} `,showCloseButton:!0},(({isBuy:e,pnl:t,theme:r})=>{const a=e?r.colors.buy:r.colors.sell,i=t>0?r.colors.buy:t<0?r.colors.sell:a;return{priceColor:r.colors.t.primary,priceBackgroundColor:i,priceBorderColor:i,quantityColor:r.colors.t.primary,quantityBackgroundColor:r.colors.popupBg,quantityBorderColor:a,closeButtonColor:a,closeButtonBackgroundColor:r.colors.popupBg,closeButtonBorderColor:a,priceLabelColor:r.colors.t.white,priceLabelBackgroundColor:a,priceLabelBorderColor:a,lineColor:a,lineDash:[2,2]}})({isBuy:e,pnl:i,theme:m})))})),()=>{d.deleteAllPositionShape()}}),[n,d,y,m,l,b])})({symbol:t,namespace:e});const{setMessageInfo:ce}=(0,s.YT)(),ue=E({dataProvider:ne,symbol:t,interval:O}),de=(0,a.useCallback)(((e,t)=>{n.Z.log(JSON.stringify({type:"origin_kline",error:e,componentStack:t}),"custom")}),[]);return t&&O&&J&&G?ae(i().Fragment,null,ae(o.k.Containers.BasicKline,{klineOptions:{symbol:Q,storeSymbol:t,candlestick:{tickSize:$},theme:_,themeKey:K,baseAsset:ee,quoteAsset:U,dataProvider:ne,customTheme:{light:B,dark:z},namespace:e,sensorsManager:ue},customIndicators:F,symbolDisplay:q.split("/").join("_"),bizType:H?"delivery":"futures",setMessageInfo:ce,onError:de,electron:m.Z}),le?ae(d.Z,se):null):null}},vNnD:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DepthChart:()=>d,default:()=>m});var a=r("/SIk"),i=r.n(a),o=r("DDYV"),n=r("fYqI"),l=r("9h1+"),s=i().createElement;const c=({price:e,depth:t})=>({xData:t,yData:+e}),u=({symbol:e,width:t,height:r,forceHorizontalMode:i=!1})=>{const o=(0,l.Om)(),u=(0,l.Vh)()[e],{pricePrecision:d,isDelivery:m}=u||{},{scale:p,setScale:f}=(0,l.pq)(),{asks:g,bids:y}=(0,l.Xl)(e,m,r>t?c:void 0),b=(0,a.useMemo)((()=>"BTCUSDT"===e?0:d-1),[e,d]);return s(n.k.Containers.DepthChart,{symbol:e,theme:o,asks:g,bids:y,width:t,height:r,pricePrecision:d,filterPricePrecision:b,scale:p,setScale:f,mode:i?n.k.DepthChartMode.Horizontal:r>t?n.k.DepthChartMode.Vertical:n.k.DepthChartMode.Horizontal})},d=({symbol:e,forceHorizontalMode:t})=>s(o.Z,null,(({width:r,height:a})=>s(u,{symbol:e,width:r,height:a,forceHorizontalMode:t}))),m=d},dJFx:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>J});var a=r("/SIk"),i=r.n(a),o=r("GuU3"),n=r.n(o),l=r("fYqI"),s=r("9h1+"),c=r("SKkT"),u=r("VM/Z"),d=r("6u/I"),m=r("Ekp3"),p=r("Ozc/"),f=r("5vwO"),g=r("9tmi"),y=r("tSjq"),b=r("wr3m"),h=r("7DKi"),v=r("cm/A"),x=r("FOuV"),S=r("SJeZ"),k=r("jgBC"),P=r("S24M");const T=({type:e})=>{(0,P.j)("webClick",{module:"chart",elementId:e})};var C=r("EPGa"),Z=r("NQFm");const M=Object.values(C.Jm),I=Object.values(C.Jm);var w=r("lXyA"),E=r.n(w),A=r("GbrZ"),N=r("FCBM"),O=r("lw9u"),R=r("uM3s"),L=r("EWim");var V=r("pqKJ"),F=r("Tfqf");const D="trd_chart_tv_load_timeout",_=({symbol:e,type:t,priceType:r})=>`${e}@${t}@${r}`,B=e=>{const[t,r,a]=e.split("@");return{symbol:t,type:r,priceType:a}},z=[u.ls.TRADING,u.ls.DELIVERING],K={1:"1m",3:"3m",5:"5m",15:"15m",30:"30m",60:"1h",120:"2h",240:"4h",360:"6h",480:"8h",720:"12h","1D":"1d","3D":"3d","1W":"1w","1M":"1M"};let q;!function(e){e.Futures="futures",e.FuturesMark="futures-mark",e.FuturesIndex="futures-index",e.Delivery="delivery",e.DeliveryMark="delivery-mark",e.DeliveryIndex="delivery-index"}(q||(q={}));const W=({ticker:e,name:t,productType:r,pricePrecision:a})=>({name:t,fullName:t,description:t,ticker:e,tickSize:10**a,exchange:"Binance",supportedResolutions:l.k.DefaultResolutions,type:r}),U=({namespace:e,useMiniTicker:t=!1})=>{const r=l.k.Store.createStore(e),i=l.k.OrderHistoryStore.createStore(e),o=(0,a.useRef)(0),n=(0,a.useMemo)((()=>E()((()=>(0,k.Os)({eventId:"trd_chart_tv_load_timeout",stepId:"getBarsStart",catch({error:e,track:t}){t({GET_BAR_START_TYPE:e})},log({track:e}){e({GET_BAR_START_TYPE:"SUCCESS"})}})))),[]),c=(0,a.useMemo)((()=>E()((e=>(0,k.Os)({eventId:"trd_chart_tv_load_timeout",stepId:"getBarsEnd",catch({error:t,track:r}){r({GET_BAR_END_TYPE:t,duration_:(0,k.Fr)(e-o.current)})},log({track:t}){t({GET_BAR_END_TYPE:"SUCCESS",duration_:(0,k.Fr)(e-o.current)})}})))),[]),{getI18n:d}=(0,s.ZK)("trd-chart","trade-ui"),{getI18n:m}=(0,S.yk)(),p=(0,s.Vh)(),f=(0,a.useRef)(p),{isContUnit:g}=(0,F.Q)(),y=(0,s._n)(),[b]=r(l.k.Store.getPriceType),[,,h,v]=i(l.k.OrderHistoryStore.getOrderHistory),x=(0,a.useRef)(y),T=(0,a.useRef)(),C=(0,a.useRef)(b);f.current=p,x.current=y,C.current=b;const Z=(0,a.useMemo)((()=>g?V.D:V.V),[g]),M=(0,a.useMemo)((()=>m("usdtFutures-13",{defaultValue:"Futures"})||""),[m]),I=(0,a.useMemo)((()=>m("inverseFutures-13",{defaultValue:"Delivery"})||""),[m]),w=(0,a.useMemo)((()=>d("indexPrice",{defaultValue:"Index Price"})||""),[d]),D=(0,a.useMemo)((()=>d("markPrice",{defaultValue:"Mark Price"})||""),[d]),U=(0,a.useMemo)((()=>d("lastPrice",{defaultValue:"Last Price"})||""),[d]),j=(0,a.useMemo)((()=>({exchanges:[{name:"Binance",value:"Binance",desc:""}],symbols_types:[{name:M,value:q.Futures},{name:`${M} ${D}`,value:q.FuturesMark},{name:`${M} ${w}`,value:q.FuturesIndex},{name:I,value:q.Delivery},{name:`${I} ${D}`,value:q.DeliveryMark},{name:`${I} ${w}`,value:q.DeliveryIndex}]})),[I,M,w,D]),$=(0,a.useCallback)((async e=>{var t;if(v(),null===(t=T.current)||void 0===t||t.call(T),!x.current)return;const r=f.current,{isDelivery:a}=r[e]||{},i=a?(0,u.RU)():(0,u.BN)(),o=await(async({isDelivery:e,symbol:t})=>await(0,L.lz)({symbol:t,isDelivery:e,rows:500,page:1}))({isDelivery:a,symbol:e});h(o.map((e=>({id:e.orderId.toString(),avgPrice:+(e.avgPrice||e.price),executedQty:+e.executedQty,side:e.side,time:e.updateTime,status:e.status})))),T.current=i.getUserOrderStream().subscribe((t=>{t.symbol===e&&h([{id:t.orderId.toString(),avgPrice:t.avgPrice||t.price,executedQty:t.executedQty,side:t.side,time:t.insertTime,status:t.status}])}))}),[h,v]),H=(0,a.useCallback)((e=>{const{symbol:t=""}=B(e);$(t)}),[$]),G=(0,a.useCallback)((async()=>{try{await(0,k.YY)({checker:()=>Object.keys(f.current).length>0})}catch(t){(0,P.j)("tv_web_error",{type:"onFetchSymbolsInfo",message:t.message,business:"futures"})}const e=f.current;return Object.keys(e).reduce(((t,r)=>{const{symbol:a,pricePrecision:i,isDelivery:o,contractStatus:n,contractType:s}=e[r];if(!z.includes(n))return t;const{symbol:c,contractTypeI18n:u,deliveryDateFormat:d}=(0,A.H)(e[r],m),p=`${c} ${u}${d?` ${d}`:""}`,f=_({symbol:a,type:s,priceType:l.k.Store.PriceType.Last}),g=_({symbol:a,type:s,priceType:l.k.Store.PriceType.Index}),y=_({symbol:a,type:s,priceType:l.k.Store.PriceType.Mark});return t[f]=W({ticker:f,name:`${p} ${U}`,productType:o?q.Delivery:q.Futures,pricePrecision:i}),t[g]=W({ticker:g,name:`${p} ${w}`,productType:o?q.DeliveryIndex:q.FuturesIndex,pricePrecision:i}),t[y]=W({ticker:y,name:`${p} ${D}`,productType:o?q.DeliveryMark:q.FuturesMark,pricePrecision:i}),t}),{})}),[m,w,D,U]),J=(0,a.useCallback)((async({symbolInfo:e,resolution:t,rangeStartDate:r,rangeEndDate:a})=>{const i=f.current;o.current=Date.now(),n();const{symbol:l="",priceType:s=C.current}=B(e.ticker||""),{pair:u,contractType:d,contractVal:m,isDelivery:p}=i[l],g=Math.max(0,1e3*r),y=1e3*a,b=K[t],h=p?Z(m):e=>e,v=(0,L.b0)({symbol:l,pair:u,contractType:d,interval:b,isDelivery:p,priceType:s}),x=await(0,R.M)({onFetchKlineData:v,startTime:g,endTime:y});return c(Date.now()),x.map(h)}),[c,n,Z]),Y=(0,a.useCallback)((({symbolInfo:e,resolution:r,callback:a})=>{const i=f.current,{symbol:o="",priceType:n=C.current}=B(e.ticker||""),{pair:l,contractType:s,contractVal:c,isDelivery:u}=i[o],d=K[r],m=u?Z(c):e=>e;return(0,O.Ld)({symbol:o,pair:l,contractType:s,interval:d,priceType:n,isDelivery:u,useMiniTicker:t,checkIfInSync:()=>!0,callback:e=>a(m(e))})}),[Z,t]),Q=(0,a.useCallback)((async()=>{const{serverTime:e}=await(0,N.b)(!0);return Math.floor(parseInt(e,10)/1e3)}),[]),X=(0,a.useMemo)((()=>l.k.createDatafeed()),[]),{datafeed:ee,symbolsInfo:te}=X({config:j,onFetchSymbolsInfo:G,onFetchBars:J,onSubscribeBars:Y,onFetchServerTimeApi:Q});return{datafeed:ee,symbolsInfo:te,onSymbolWillChange:H}};var j=r("k2tD");var $=i().createElement;const H="myTradingView",G=e=>{[d.sy,d.O7].map((e=>n().createInstance({name:e}))).forEach((t=>t.setItem(H,e)))},J=({symbol:e,namespace:t,useMiniTicker:r=!1})=>{const o=l.k.Store.createStore(t),[P]=o(l.k.Store.getInterval),[w]=o(l.k.Store.getPriceType),E=(0,s.Vh)(),{contractType:A}=E[e]||{},{datafeed:N,symbolsInfo:O,onSymbolWillChange:R}=U({namespace:t,useMiniTicker:r}),L=(0,s.Om)(),{isLight:V,shouldResetTradingView:F,updateShouldResetTradingView:B}=(0,s.Fg)(),z=V?"light":"dark",K=(0,m.k)(z),q=P===l.k.Store.DisplayIntervals.Time?l.k.Store.DisplayIntervals["1m"]:P,W=(0,a.useMemo)((()=>n().createInstance({name:t})),[t]),J=(0,a.useMemo)((()=>_({symbol:e,type:A,priceType:w})),[e,A,w]),Y=(0,a.useRef)(-1),{positionLines:Q}=(({symbol:e})=>{const t=(0,s.AM)()[e],{tickSize:r}=t||{},a=(0,S.db)({symbol:e,tickSize:r});return{positionLines:(0,s.vE)((()=>a.map((({id:e,PNL:t,price:r,quantity:a,text:i})=>({id:e,PNL:t,text:i,price:r,quantity:a.toString(),tooltip:""})))),[a])}})({symbol:e}),{orderLines:X,showConfirmation:ee,confirmationProps:te,modifiedModalProps:re}=(({symbol:e})=>{var t;const{getI18n:r}=(0,S.yk)(),[i]=(0,h.g)(x.Zv,x.Xd),o=(0,S.$h)({symbol:e}),{kLine:n=!1,needConfirm:l}=i||{},c=(0,s.AM)()[e],{pricePrecision:u,contractVal:d,isDelivery:m,quoteAsset:p,equalQtyPrecision:P,quantityPrecision:w,filters:E=[]}=c||{},A=(null===(t=E.find(Z.W4))||void 0===t?void 0:t.maxQty)||"",{enqueueNotification:N}=(0,b.Z)(),{0:O,1:R}=(0,a.useState)(!1),{0:L,1:V}=(0,a.useState)(1),{0:F,1:D}=(0,a.useState)(!1),{0:_,1:B}=(0,a.useState)({order:{symbol:"",closePosition:!1,positionSide:"",side:C.g.BUY,type:C.Jm.LIMIT,stopPrice:"",workingType:x.gu.LAST_PRICE,orderId:0,clientOrderId:"",reduceOnly:!1,timeInForce:"",insertTime:0,origType:C.Jm.LIMIT,price:0,origQty:"",executedQty:"",activatePrice:"",priceRate:0,status:"",strategyId:"",strategyType:"",avgPrice:"",modifyParams:{},onConfirm:()=>{}},onClose:()=>null}),z=(0,a.useMemo)((()=>m?M:I),[m]),K=(0,S.H3)({symbol:e}),q=(0,a.useMemo)((()=>K.filter((({order:e})=>z.includes(e.origType)))),[K,z]),W=(0,a.useMemo)((()=>r("amendmentOrderSubmitted",{defaultValue:"Amendment Order Submitted"})),[r]),U=(0,a.useMemo)((()=>r("maxLimitQty",{defaultValue:"Maximum Limit Order Quantity"})),[r]),j=(0,a.useMemo)((()=>r("cont-unit",{defaultValue:"Cont"})),[r]),$=(0,a.useMemo)((()=>`${U}: ${A} ${j}`),[j,A,U]),H=(0,a.useMemo)((()=>r("tv-order-drag-tooltip",{defaultValue:"Drag for price modify"})),[r]),G=(0,a.useMemo)((()=>r("tv-order-modify-tooltip",{defaultValue:"Click for modify"})),[r]),J=(0,a.useMemo)((()=>r("tv-order-cancel-tooltip",{defaultValue:"Click for cancel"})),[r]),Y=(0,a.useMemo)((()=>r("tv-order-price-placeholder",{defaultValue:"Price"})),[r]),Q=(0,a.useMemo)((()=>r("tv-order-amount-placeholder",{defaultValue:"Amount"})),[r]),X=(0,a.useMemo)((()=>r("tv-order-cacnel",{defaultValue:"Cancel"})),[r]),ee=(0,a.useMemo)((()=>r("tv-order-submit",{defaultValue:"Submit"})),[r]),te=(0,a.useCallback)((()=>V((e=>e+1))),[]),re=(0,a.useCallback)((()=>{te(),D(!1)}),[te]),ae=(0,a.useCallback)((async({orderId:e,price:t,quantity:r,symbol:a,side:i})=>{const o=await(0,y.nC)({orderId:e,price:t,quantity:r,symbol:a,side:i,timestamp:Date.now()},void 0);o.success?N({message:W}):"90814005"===o.code&&N({message:$,autoHideDuration:1e4}),re()}),[N,re,$,W]),ie=(0,a.useCallback)((async t=>{var r;const a=+((null===t||void 0===t?void 0:t.origQty)||""),i=+((null===t||void 0===t?void 0:t.quantity)||""),o=+((null===t||void 0===t?void 0:t.price)||""),n="quantity"===t.hasChanged||"both"===t.hasChanged?"cont"===t.unit?i:(0,k.QQ)({price:o,coin:i,contractVal:d}):a,s="cont"===t.unit?n:(0,k.me)({price:o,cont:n,contractVal:d}),c={orderId:t.orderId,price:o,quantity:n,symbol:e,side:null===(r=t.order)||void 0===r?void 0:r.side},u="both"===t.hasChanged?"BOTH":"price"===t.hasChanged?"PRICE":"quantity"===t.hasChanged?"QUANTITY":"";l?(B({order:(0,f.Z)((0,f.Z)({},t.order),{},{modifyParams:{limitPrice:c.price,qty:s,amendedField:u},onConfirm:()=>ae(c,void 0)}),onClose:re}),D(!0)):ae(c,void 0)}),[d,e,l,re,ae]),{0:oe,1:ne}=(0,a.useState)({price:"",amount:""}),le=(0,g.TA)({initialValues:oe,enableReinitialize:!0,onSubmit:e=>{var t,r,a;const i=e.price!==le.initialValues.price,o=e.amount!==le.initialValues.amount;ie((0,f.Z)((0,f.Z)({},null===(t=e.order)||void 0===t?void 0:t.order),{},{order:null===(r=e.order)||void 0===r?void 0:r.order,price:(+e.price).toFixed(u),quantity:+e.amount,unit:null===(a=e.order)||void 0===a?void 0:a.unit,hasChanged:i&&o?"both":i?"price":o?"quantity":""})),R(!1)}}),se={visible:O,priceField:(0,f.Z)((0,f.Z)({},le.getFieldProps("price")),{},{suffixText:p,placeholder:Y}),amountField:(0,f.Z)((0,f.Z)({},le.getFieldProps("amount")),{},{suffixText:o,placeholder:Q}),submitText:ee,cancelText:X,onSubmit:le.handleSubmit,onCancel:()=>R(!1)};return{orderLines:(0,a.useMemo)((()=>q.map((e=>{const{order:t,unit:r,quantity:a,price:i,text:o,cancel:l}=e,s="cont"===r?+t.origQty:(0,k.me)({price:+i,cont:+t.origQty,contractVal:d}),c=(0,v.uf)(s,"cont"===r?w:P);return{id:t.orderId.toString(),text:o,price:+i,quantity:a.toString(),isBuy:"BUY"===t.side,tooltip:H,modifyTooltip:G,cancelTooltip:J,editable:m&&n&&t.origType!==C.Jm.LIMIT&&t.origType!==C.Jm.POST_ONLY,onMove:({price:e})=>{T({type:"TV_vertical"}),ie((0,f.Z)((0,f.Z)({},t),{},{order:t,price:e.toFixed(u),unit:r,hasChanged:"price"}))},onModify:()=>{T({type:"TV_amountclick"}),ne({price:i.toString(),amount:c,order:e}),R(!0)},onCancel:()=>{T({type:"TV_cancel"}),l()}}}))),[H,m,n,q,G,J,ie,u,L,o,P,w,Y,Q,d,p,X,ee,ne,R]),showConfirmation:F,confirmationProps:_,modifiedModalProps:se}})({symbol:e}),{executionOrders:ae}=(({symbol:e,namespace:t})=>{const r=l.k.OrderHistoryStore.createStore(t),[i]=r(l.k.OrderHistoryStore.getOrderHistory),{getI18n:o}=(0,s.KL)(),n=(0,S.$h)({symbol:e}),c=(0,s.AM)(),{baseAsset:u,pricePrecision:d,quantityPrecision:m,equalQtyPrecision:p,isDelivery:f,contractVal:g}=c[e]||{},y=(0,a.useMemo)((()=>o("openOrder-sideBuyBOTH",{defaultValue:"Buy"})||""),[o]),b=(0,a.useMemo)((()=>o("openOrder-sideSellBOTH",{defaultValue:"Sell"})||""),[o]),h=(0,a.useMemo)((()=>{switch(n){case u:return f?p:m;default:return f?m:d}}),[f,n,u,p,d,m]),v=(0,a.useCallback)((({avgPrice:e,executedQty:t})=>f?(0,j.GW)(n===u?(0,k.me)({price:e,cont:t,contractVal:g}):t,h):(0,j.mD)(n===u?t:t*e,h)),[u,g,f,h,n]);return{executionOrders:(0,a.useMemo)((()=>i.filter((({status:e,executedQty:t})=>"FILLED"===e.toUpperCase()||"PARTIAL FILL"===e.toUpperCase()||"PARTIALLY_FILLED"===e.toUpperCase()||"EXPIRED"===e.toUpperCase()&&t>0||"CANCELED"===e.toUpperCase()&&t>0)).map((({id:e,avgPrice:t,side:r,time:a,executedQty:i})=>{const o=`${"BUY"===r?y:b} ${v({avgPrice:t,executedQty:i})} @ ${(+t).toFixed(d)}`;return{id:e,text:"",price:+t,quantity:"",time:Math.round(a/1e3),isBuy:"BUY"===r,tooltip:o}}))),[i,y,b,v,d])}})({symbol:e,namespace:t}),ie=(0,s.tZ)(),oe=(0,d.GL)(ie);(0,s.M9)(e,r),(0,s.jT)({symbol:e,interval:q,priceType:w});const ne=(0,a.useCallback)((()=>{Y.current=Date.now()}),[]),le=(0,a.useCallback)((e=>G(e)),[]),se=(0,a.useCallback)((()=>(()=>{const e=(0,k.Nb)({id:"chartReady"}),t=(0,k.Nb)({id:"getBarsStart",timeout:3}),r=(0,k.Nb)({id:"getBarsEnd",timeout:6}),a=(0,k.Nb)({id:"chartResponsive",timeout:3});k.Os.init({step:e._(t)._(r)._(a),eventId:D}),(0,k.Os)({eventId:D,stepId:"chartReady",catch({error:e,track:t}){t({CHART_READY_TYPE:e,connection:JSON.stringify(navigator.connection)})},log({track:e}){e({CHART_READY_TYPE:"SUCCESS",connection:JSON.stringify(navigator.connection)})}})})()),[]),ce=(0,a.useCallback)((async()=>{const e=await W.getItem(H);G(e)}),[W]),ue=(0,a.useCallback)((e=>p.Z.log(JSON.stringify({type:"tv-error",error:e}),"custom")),[]),de=(0,a.useCallback)((()=>{return e=Y.current,void(0,k.Os)({eventId:D,stepId:"chartResponsive",catch({error:e,track:t}){t({CHART_RESPONSIVE_TYPE:e,connection:JSON.stringify(navigator.connection)})},log({track:t}){t({CHART_RESPONSIVE_TYPE:"SUCCESS",duration_:(0,k.Fr)(Date.now()-e)})}});var e}),[]),me=(0,a.useCallback)((()=>B(!1)),[B]);return $(i().Fragment,null,$(l.k.Containers.TradingView,{namespace:t,theme:L,storageName:H,tradingViewProps:{symbol:J,symbolsInfo:O,theme:K,limitOrders:X,positionOrders:Q,executionOrders:ae,overwritingThemeOnLoaded:F,initialConfig:{tvConfig:{library_path:`${u.Or}/charting_library_next/`,symbol:J,theme:K,locale:oe,datafeed:N},onScriptLoaded:ne,onSave:le,onChartReadyDone:se,onWillUnmount:ce,onCreateOrderShapesError:ue,onFirstTimeDataLoadedDone:de,onSymbolWillChange:R,onSetThemeDone:me}}}),$(l.k.OrderModificationModal,re),ee?$(c.Z,te):null)}},lKaM:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createMainToobar:()=>A,default:()=>O,miniToolbar:()=>N});var a=r("/SIk"),i=r.n(a),o=r("szIg"),n=r("Sm7y"),l=r("fYqI"),s=r("VM/Z"),c=r("6C5I"),u=r("SJeZ"),d=r("9h1+"),m=r("/MJE"),p=r("LcTY"),f=r("FOuV"),g=r("krVE"),y=r("irMk"),b=r("6u/I"),h=r("7uiG");const v=e=>[e.miniMultiChartType,e.setMiniMultiChartType],x=e=>[e.lastSelectedMiniMultiChartWindow,e.setLastSelectedMiniMultiChartWindow],S=e=>[e.miniMultiChartWindows,e.setMiniMultiChartWindows],k=e=>[e.interval,e.setInterval],P=e=>[e.chartType,e.setChartType],T=e=>[e.priceType,e.setPriceType],C=(e,t,r)=>{const i=(0,b.lv)(e,r),o=(0,b.lv)(t,r);((e,t)=>{const r=l.k.Store.createStore(e),[i,o]=r(l.k.Store.getInterval),[n,s]=(0,h.Qy)(t)(k);(0,a.useEffect)((()=>s(i)),[i,s]),(0,y.Z)((()=>o(n)))})(i,o),((e,t)=>{const r=l.k.Store.createStore(e),[i,o]=r(l.k.Store.getOriginalChartStyle),[n,s]=(0,h.Nu)(t)(P);(0,a.useEffect)((()=>s(i)),[i,s]),(0,y.Z)((()=>o(n)))})(i,o),((e,t)=>{const r=l.k.Store.createStore(e),[i,o]=r(l.k.Store.getPriceType),[n,s]=(0,h.kH)(t)(T);(0,a.useEffect)((()=>s(i)),[i,s]),(0,y.Z)((()=>o(n)))})(i,o)},Z=(e,t)=>{((e,t)=>{const r=l.k.Store.createStore(e),[i,o]=r(l.k.Store.getChartMode),[n,s]=(0,h.PH)(t)(v);(0,a.useEffect)((()=>s(i)),[i,s]),(0,y.Z)((()=>o(n)))})(e,t),((e,t)=>{const r=l.k.Store.createStore(e),[i,o]=r(l.k.Store.getMiniMultiChartWindows),[n,s]=(0,h.Lb)(t)(S);(0,a.useEffect)((()=>s(i)),[i,s]),(0,y.Z)((()=>o(n)))})(e,t),((e,t)=>{const r=l.k.Store.createStore(e),[i,o]=r(l.k.Store.getLastSelectedMiniMultiChartWindow),[n,s]=(0,h.zz)(t)(x);(0,a.useEffect)((()=>s(i)),[i,s]),(0,y.Z)((()=>o(n)))})(e,t),C(e,t,0),C(e,t,1),C(e,t,2),C(e,t,3)};var M=i().createElement;const I=i().lazy((()=>Promise.all([r.e(6374),r.e(3712),r.e(5600)]).then(r.bind(r,"dJFx")))),w=i().lazy((()=>Promise.all([r.e(6374),r.e(3712),r.e(6200)]).then(r.bind(r,"9tTL")))),E=i().lazy((()=>Promise.all([r.e(6374),r.e(3712)]).then(r.bind(r,"vNnD")))),A=({headerSlot:e,closeButton:t,isPro:r,showFullscreenIcon:a,showChartModeDropdown:i,tabKeys:s})=>({onSymbolChange:u})=>({namespace:d,components:{intervalFilter:m,indicator:p,orderMark:f,chartStyleDropdown:g,cameraButton:y,compareButton:b,tabs:h,fullscreen:v,chartModeDropdown:x,priceDropdown:S,symbolTabs:k}})=>{const P=l.k.Store.createStore(d),[T]=P(l.k.Store.getChartMode),[C]=P(l.k.Store.getActiveTab),Z=(0,o.useDispatch)(),{isMobile:M}=(0,n.F)(),I=(0,o.useSelector)(c.Xj),w=T===l.k.Store.ChartMode.Single,E=l.k.Store.Tabs.TradingView,A=l.k.Store.Tabs.Depth,N=C===E?[l.k.Store.OrderMarkOption.Open,l.k.Store.OrderMarkOption.Position,l.k.Store.OrderMarkOption.Execution]:[l.k.Store.OrderMarkOption.Open,l.k.Store.OrderMarkOption.Position],O=w&&(C!==A||M)?m():null,R=w&&(C!==A||M)?p():null,L=w&&C!==A?f({isFullscreen:I,options:N}):null,V=i&&w&&C===E?g():null,F=w&&(C!==A||M)?S():null,D=w&&C===E?y():null,_=w&&C===E?b():null,B=w||M?null:k({onSymbolChange:u}),z=w?h({tabKeys:s}):null,K=a&&w?v({expanded:!I,onClick:Z.pageStore.toggleFullScreen}):null,q=i?x():null;return{head:[e,O,R,L,V,D,_,F,B],mid:[],tail:[z,K,q,t],useDraggableHandle:r&&!I}},N=({onRemove:e,onResume:t})=>({components:{intervalFilter:r,indicator:a,miniSymbolStatus:i,resumeWindow:o,closeButton:n,priceDropdown:l}})=>({head:[r(),a(),l()],mid:[i({showChange:!0})],tail:[o({onResume:t}),n({onRemove:e})],useDraggableHandle:!1}),O=({symbol:e,globalNamespace:t,namespace:r,useMiniTicker:i,generateToolbar:n})=>{const y=l.k.Store.createStore(r),[b]=y(l.k.Store.getChartMode),[h]=y(l.k.Store.getActiveTab),v=(0,d.zO)(),x=(0,d.j2)(),S=(0,o.useSelector)((e=>e.products.products)),k=(0,o.useSelector)(c.Xj),P=(0,u.d0)(),T=(0,d.Vh)(),C=(0,a.useRef)(S),A=(0,a.useRef)(T);C.current=S,A.current=T;const{genSymbolDisplay:O}=(0,u.nN)(),{isLight:R}=(0,d.Fg)(),L=(0,a.useMemo)((()=>R?"white":"black"),[R]);Z(r,t),(0,a.useEffect)((()=>{k&&(h===l.k.Store.Tabs.TradingView?p.T.emit("HIDE_FLASH_ORDER"):p.T.emit("SHOW_FLASH_ORDER"))}),[h,k]);const V=(0,a.useCallback)((e=>{const t=A.current[e]||{},{fullName:r}=O(t);return r}),[O]),F=(0,a.useCallback)((e=>{if(""===e)return e;const{curSymbol:t}=(0,g.Ib)(C.current,f.L6,"delivery"),{contractStatus:r}=A.current[e]||{},a=null===r||void 0===r?void 0:r.toLowerCase();return"close"===a||void 0===a?t:e}),[v]),D=(0,a.useCallback)((async()=>({isReadyToTrade:!0,openTime:0})),[]),_=(0,a.useCallback)((({symbol:e})=>{const t=A.current[e];t&&P({stateSymbol:t.symbol,isDeliveryColumn:t.isDelivery,isBlank:t.isDelivery!==x.isDelivery})}),[P,x.isDelivery]),B=(0,a.useCallback)((e=>M(a.Suspense,{fallback:null},M(w,{symbol:e.symbol,namespace:e.namespace,useMiniTicker:b===l.k.Store.ChartMode.Four||i}))),[b,i]),z=(0,a.useCallback)((e=>M(a.Suspense,{fallback:null},M(I,{symbol:e.symbol,namespace:e.namespace,useMiniTicker:i}))),[i]),K=(0,a.useCallback)((e=>M(a.Suspense,{fallback:null},M(E,{symbol:e.symbol,forceHorizontalMode:!0}))),[]);return M(l.k.Containers.Chart,{namespace:r,symbol:e,hostAddress:s.Xs,themeName:L,getSymbolDisplayName:V,checkTradeStatus:D,checkMiniSymbolAvaliablility:F,beforeMiniChartSymbolChange:_,generateMiniToolbar:N,generateToolbar:n,basicKline:B,tradingView:z,depth:K,electron:m.Z})}},EWim:(e,t,r)=>{"use strict";r.d(t,{b0:()=>l,lz:()=>s});var a=r("5vwO"),i=r("x9UV"),o=r("aTw2"),n=r("GiBP");const l=({symbol:e,pair:t,contractType:r,interval:i,isDelivery:l,priceType:s})=>c=>l&&"last"===s?(e=>(0,o.U2)(`/dapi/v1/continuousKlines?${(0,n.DT)(e)}`))((0,a.Z)((0,a.Z)({},c),{},{pair:t,contractType:r,interval:i})):l&&"mark"===s?(e=>(0,o.U2)(`/dapi/v1/markPriceKlines?${(0,n.DT)(e)}`))((0,a.Z)((0,a.Z)({},c),{},{symbol:e,interval:i})):l&&"index"===s?(e=>(0,o.U2)(`/dapi/v1/indexPriceKlines?${(0,n.DT)(e)}`))((0,a.Z)((0,a.Z)({},c),{},{pair:t,interval:i})):"mark"===s?(e=>(0,o.U2)(`/fapi/v1/markPriceKlines?${(0,n.DT)(e)}`))((0,a.Z)((0,a.Z)({},c),{},{symbol:e,interval:i})):"index"===s?(e=>(0,o.U2)(`/fapi/v1/indexPriceKlines?${(0,n.DT)(e)}`))((0,a.Z)((0,a.Z)({},c),{},{pair:t,interval:i})):(e=>(0,o.U2)(`/fapi/v1/continuousKlines?${(0,n.DT)(e)}`))((0,a.Z)((0,a.Z)({},c),{},{pair:t,contractType:r,interval:i})),s=async e=>{const{data:t=[]}=await(0,i.HY)(e);return t}},uM3s:(e,t,r)=>{"use strict";r.d(t,{M:()=>i});var a=r("5vwO");const i=async({onFetchKlineData:e,startTime:t,endTime:r,limit:i=1e3})=>{const o=[];let n=[],l=r;const s=0!==r;do{if(n=await e((0,a.Z)((0,a.Z)({},0===l?{}:{endTime:l}),{},{limit:i})),0===n.length)break;n.forEach((([e,t,r,a,i,n,,l])=>{o.push({time:+e,open:+t,high:+r,low:+a,close:+i,volume:+n,quantity:+l})})),l=n[0][0]-1}while(n.length===i&&l>t&&s);return o.sort(((e,t)=>e.time-t.time)),o}},pqKJ:(e,t,r)=>{"use strict";r.d(t,{V:()=>i,D:()=>o});var a=r("5vwO");const i=e=>t=>(0,a.Z)((0,a.Z)({},t),{},{volume:t.quantity,quantity:t.volume*e}),o=e=>t=>(0,a.Z)((0,a.Z)({},t),{},{volume:t.volume,quantity:t.volume*e})},lw9u:(e,t,r)=>{"use strict";r.d(t,{Ld:()=>s});var a=r("5vwO"),i=r("VM/Z"),o=r("jgBC");const n=e=>e,l=e=>e,s=({symbol:e,pair:t,contractType:r,interval:s,priceType:c,isDelivery:u,useMiniTicker:d,callback:m,checkIfInSync:p=(()=>!0)})=>{const f=u?(0,i.RU)():(0,i.BN)(),g="mark"===c?e:t,y=f.getContinuousKlineStream(g,r,s,{priceType:c,symbol:e});y.selector=n;const b=d?f.getStreamTickers():f.getStreamTradeSnap(e);b.selector=d?(e=>t=>t[e])(e):l;const h=(0,o.yv)([y,b]);return h.subscribe((([e,t])=>{if(!t||!e||!p())return;const r=(0,a.Z)({},e);if("last"===c){const e=Array.isArray(t)?t.slice(-1).pop():t,n=(0,o.nJ)(s),l=+(e.price||e.lastPrice),c=+(e.quantity||e.quoteVolume),u=e.tradeTime||e.eventTime;try{if("1M"===s){const e=new Date(u),t=new Date(r.time).getMonth();if(e.getMonth()>t){const e=+new Date(r.time).setMonth(t+1);Object.assign(r,(0,a.Z)({time:e,open:l,high:l,low:l,close:l},d?{volume:0,quantity:0}:{volume:c,quantity:c}))}}else if(u-r.time>n){const e=r.time+Math.floor((u-r.time)/n)*n;Object.assign(r,(0,a.Z)({time:e,open:l,high:l,low:l,close:l},d?{volume:0,quantity:0}:{volume:c,quantity:c}))}}catch(i){console.error(i)}r.close=l}m(r,e)})),h}},cN65:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r("d19s"),i=r("fDz0"),o=r("/SIk"),n=r.n(o),l=n().createElement;const s={display:"flex",mt:"16px","& .checkBox":{height:"16px",width:"16px"},"& .label":{color:"t.primary",fontSize:"12px"}},c=(0,o.memo)((({defaultChecked:e,value:t,label:r,getValue:n,style:c})=>{const{0:u,1:d}=(0,o.useState)(e);return l(a.Z,{sx:s,style:c,onClick:e=>{e.stopPropagation()}},l(i.Z,{checked:u,onChange:e=>{d(e.currentTarget.checked),n({[t]:e.currentTarget.checked})},className:"checkBox"}),l("div",{className:"label"},r))})),u=(0,o.memo)((({options:e=[],getValue:t})=>l(n().Fragment,null,e.map((e=>l(c,{label:e.label,getValue:t,key:e.value,value:e.value,defaultChecked:e.defaultChecked,style:e.style}))))))},"E+7l":(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r("/SIk"),i=r.n(a),o=r("VM/Z"),n=r("Ykg6"),l=r("9h1+"),s=i().createElement;const c=function(){const e=(0,l.tZ)();return(0,l._n)()&&!1?s(n.Z,{expand:!0,lng:e,i18nHost:o.Xs}):null}},"8RC1":(e,t,r)=>{"use strict";r.d(t,{Vq:()=>S,ZP:()=>k});var a=r("5vwO"),i=r("GpFh"),o=r("GDnE"),n=r("/SIk"),l=r.n(n),s=r("7nmT"),c=r("rjaD"),u=r("J81Z"),d=r("APA6"),m=r("TKP4"),p=r("I+sO"),f=r("cIsc"),g=r("f5AK"),y=r("pi/q"),b=r("ZJL0"),h=l().createElement;let v,x=0;!function(e){e.dialog="dialog",e.styledDialog="styledDialog"}(v||(v={}));class S{constructor(){(0,o.Z)(this,"id",""),(0,o.Z)(this,"show",(e=>{let{type:t=v.styledDialog}=e,r=(0,i.Z)(e,["type"]),a=document.getElementById(this.id);if(a||(a=document.createElement("div"),a.id=this.id,document.body.appendChild(a)),s.unmountComponentAtNode(a),t===v.dialog){if(!r.dialogProps)throw new Error("must pass dialogProps");this.showDialog(r,a)}else this.showStyledDialog(r,a)})),(0,o.Z)(this,"showDialog",((e,t)=>{const{dialogProps:r}=e;requestAnimationFrame((()=>{const{isLight:i,color:o}=e,n=(0,b.gh)(!!i,o);s.render(h(y.Z,{theme:n},h(c.Z,{sx:(0,a.Z)({width:["298px","360px","360px"],p:"md"},e.sx),visible:!0,onMaskClick:this.close},null===r||void 0===r?void 0:r.body,h(u.Z,{mt:["16px","16px","24px"],sz:"l",width:"100%",onClick:this.close},null===r||void 0===r?void 0:r.okText))),t)}))})),(0,o.Z)(this,"showStyledDialog",((e,t)=>{requestAnimationFrame((()=>{const{isLight:r,color:a}=e,i=(0,b.gh)(!!r,a);s.render(h(y.Z,{theme:i},h(p.Z,{queueSize:2,closable:!0,autoHideDuration:4500,anchorOrigin:{vertical:e.isMobile?"top":"bottom",horizontal:"right"}},h(f.Z,Object.assign({open:!0,onMaskClick:this.close,onCloseIconClick:this.close},e)))),t)}))})),(0,o.Z)(this,"close",(()=>{const e=document.getElementById(this.id);e&&s.unmountComponentAtNode(e)})),(0,o.Z)(this,"confirm",(async e=>{let{isLight:t,sx:r,content:o,cancelText:n,okText:s,hasFooter:c=!0}=e,p=(0,i.Z)(e,["isLight","sx","content","cancelText","okText","hasFooter"]);return new Promise(((e,i)=>{this.show((0,a.Z)((0,a.Z)({},p),{},{isLight:t,sx:(0,a.Z)({minWidth:"368px"},r),children:h(l().Fragment,null,h(d.Z,{sx:{mt:"xs",textAlign:"center"}},o),c&&h(g.y,null,h(m.Z,null,n&&h(u.Z,{flexGrow:1,variant:"outline",onClick:i,sz:"l",sx:{boxShadow:"none",border:"1px solid",borderColor:"dropdown.hoverBg",color:"t.primary",mr:3,width:.5,"&:hover":{borderColor:"t.yellow300",color:"t.yellow300",bg:"transparent !important"}}},n),s&&h(u.Z,{sx:{width:.5},sz:"l",flexGrow:1,onClick:e},s))))}))}))})),this.id=`binance-dialog${x}`,x++}}const k=new S},lFb1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r("/SIk"),i=r.n(a),o=r("APA6"),n=r("TKP4"),l=r("J81Z"),s=i().createElement;const c=({onCancel:e,message:t,cancelText:r,okText:a,onOk:i})=>s(o.Z,null,s(o.Z,{sx:{my:"md"}},t),s(n.Z,null,s(l.Z,{flexGrow:1,variant:"outline",onClick:e,sz:"l",sx:{boxShadow:"none",border:"1px solid",borderColor:"dropdown.hoverBg",mr:3,width:.5,"&:hover":{borderColor:"t.yellow300",color:"t.yellow300",bg:"transparent !important"}}},r),s(l.Z,{sx:{width:.5},sz:"l",flexGrow:1,onClick:i},a))),u=i().memo(c)},"2rU8":(e,t,r)=>{"use strict";r.d(t,{XI:()=>d,PH:()=>m});var a=r("/SIk"),i=r.n(a),o=r("71uP"),n=r("9h1+"),l=r("BzR9"),s=r("O94r"),c=r.n(s),u=i().createElement;const d=(0,a.forwardRef)(((e,t)=>{const r="rtl"===(0,n.gm)()?c()([l.Z["alb-direction-rtl"],e.className]):c()(e.className);return u(o.Z,Object.assign({ref:t},e,{className:r}),e.children)})),m=(0,a.forwardRef)(((e,t)=>{const r="rtl"===(0,n.gm)()?c()([l.Z["alb-direction-rtl"],e.className]):c()(e.className);return u("div",Object.assign({ref:t},e,{className:r}),e.children)}))},"b/WR":(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("APA6"),l=o().createElement;function s(e){let{children:t}=e,r=(0,a.Z)(e,["children"]);return l(n.Z,Object.assign({sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},r),t)}},Fee1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("71uP"),l=r("3NZz"),s=r("lk5g"),c=o().createElement;const u=()=>window.performance?window.performance.now():+new Date;const d=function(e){let{children:t,name:r,onError:d,onComponentMounting:m,fallbackRender:p,FallbackComponent:f,fallback:g}=e,y=(0,a.Z)(e,["children","name","onError","onComponentMounting","fallbackRender","FallbackComponent","fallback"]);const b=(0,i.useRef)(u()),h=(0,i.useCallback)(((e,t,a)=>{null===d||void 0===d||d(e,t,a),(0,s.gp)({t:"COMPONENT_JS_ERROR",componentName:r,errorInfo:t,errorName:e.name,errorMessage:e.message,renderError:1}),console.error(e),console.log(`${r||"Something"} went wrong.`)}),[r,d]),v=(0,i.useCallback)((()=>{null===m||void 0===m||m(),(0,s.gp)({t:"COMPONENT_JS_MOUNT",componentName:r,renderDuration:u()-b.current,mountTime:window.performance?window.performance.now():null,renderSuccess:1})}),[r,m]);let x;return o().isValidElement(g)||"function"===typeof p||"function"===typeof f||(x=c(n.Z,{fontSize:3,color:"t.primary",p:3},`Sorry, ${r||"Something"} went wrong. Please refresh the page.`)),c(l.S,Object.assign({name:r,onError:h,onComponentMounting:v,fallback:x||g,fallbackRender:p,FallbackComponent:f},y),t)}},"8Eqx":(e,t,r)=>{"use strict";r.d(t,{U:()=>F});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("APA6"),l=r("J81Z"),s=r("VM/Z"),c=r("9h1+"),u=r("SJeZ"),d=r("ko6h"),m=r("2WKB"),p=r("aTw2"),f=r("fi7b"),g=r("GpFh"),y=r("71uP"),b=r("z/Z1"),h=o().createElement;function v(e){let{variant:t}=e,r=(0,g.Z)(e,["variant"]);const{text:a}=(0,b.Fg)();if("undefined"===typeof t||"string"===typeof t)return h(y.Z,Object.assign({variant:t},r));const i=t.map((e=>{var t;return null===a||void 0===a||null===(t=a[e])||void 0===t?void 0:t.fontSize})),o=t.map((e=>{var t;return null===a||void 0===a||null===(t=a[e])||void 0===t?void 0:t.fontWeight})),n=t.map((e=>{var t;return null===a||void 0===a||null===(t=a[e])||void 0===t?void 0:t.lineHeight}));return h(y.Z,Object.assign({fontSize:i,fontWeight:o,lineHeight:n},r))}var x=r("4Dm0"),S=r("d19s"),k=r("ruN6"),P=r("DYXK"),T=o().createElement;const C={lineHeight:"22px"};const Z=e=>{let{label:t,options:r,value:a,onChange:i}=e,n=(0,g.Z)(e,["label","options","value","onChange"]);return T(o().Fragment,null,t&&T(S.Z,{sx:{alignSelf:"flex-start"}},t),T(k.Z,Object.assign({onValueChange:i,value:a,sx:C,renderValue:e=>function(e,t){var r;return null===(r=e.find((e=>e.value===t)))||void 0===r?void 0:r.title}(r,e),variant:"filled"},n),r.map((e=>T(P.W,{value:e.value,key:e.value},e.title)))))};var M=r("TKP4"),I=o().createElement;const w={width:"100%",justifyContent:"space-between",alignItems:"center",height:"32px",padding:"0 32px 0 16px"},E=({asset:e="",walletBalance:t=0})=>I(M.Z,{sx:w,className:"option-title-wrap"},I(v,{color:"t.primary"},e),I(v,{color:"t.secondary"},t));var A=o().createElement;const N={width:["100%","484px"],borderRadius:"4px",".modal-title":{border:"none",borderTopLeftRadius:"4px",borderTopRightRadius:"4px",textAlign:"center",py:[14]},".modal-content":{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",margin:["24px 0px","62px 0px"]}},O={asset:"",walletBalance:0},R=({onClose:e})=>{const{getI18n:t,t:r}=(0,u.yk)(),a=(0,u._$)(),n=(0,u.KQ)(),s=(0,x.G)(),g=(0,i.useMemo)((()=>{const e=s?"BTC":"USDT",{asset:t,walletBalance:r=0}=n[e]||O;return{asset:t,walletBalance:r}}),[n,s]),[y,b]=o().useState([]),[h,S]=o().useState(g),k=y.map((({walletBalance:e,asset:t})=>({title:A(E,{walletBalance:e,asset:t}),value:t})));(0,i.useEffect)((()=>{const e=Object.entries(n).map((([e,{walletBalance:t=0}])=>({asset:e,walletBalance:t})));e.length&&b(e)}),[n,a]);const P=(0,i.useCallback)((async e=>{S({asset:e,walletBalance:n[e].walletBalance||0})}),[S,n]),{setMessageInfo:T}=(0,c.YT)(),C=(0,i.useCallback)((async()=>{(await(0,p.v_)("/bapi/futures/v1/private/future/balance/testnet/top-up",{asset:h.asset})).success&&T({message:t("faucet-success")||"success",variant:"success"}),e&&e()}),[h.asset,T,t,e]);return A(d.Z.Modal,{visible:!0,sx:N},A("div",{className:"modal-title"},A(m.Z,{color:"#72768F",size:14,sx:{float:"right"},onClick:e,cursor:"pointer"}),A(v,{fontSize:[20],fontWeight:[500],color:"t.primary",variant:["headline6"]},t("Faucet"))),A("div",{className:"modal-content"},A(Z,{options:k,value:h.asset,label:t("coinLabel"),onChange:P,sx:{width:"100%",bg:"inputBg",border:"none",height:"40px",borderRadius:"4px","& > div":{border:"none"},input:{paddingLeft:"16px"},svg:{marginTop:"4px"},"ul li":{bg:"popupBg",".option-title-wrap":{padding:"0"}}}}),A(v,{color:"t.secondary",pt:["16px"],pb:["32px"],variant:["body2","body1"],sx:{width:"100%"}},A(f.c,{t:r,components:{div:A("div",null)},i18nKey:"futures-trade-faucet-tips"})),A(l.Z,{sz:"l",width:[1,.5],onClick:C},t("faucet-transfer"))))};var L=o().createElement;const V={width:"calc(100% - 8px)",".faucet-button":{width:"100%",height:"24px",borderRadius:"4px"}},F=({sx:e={}})=>{const[t,r]=o().useState(!1),{getI18n:i}=(0,u.yk)(),d=e=>()=>{r(e)},m=(0,c._n)();return s.Jg&&m?L(n.Z,{sx:(0,a.Z)((0,a.Z)({},V),e)},L(l.Z,{variant:"default",colorStyle:"secondary",className:"faucet-button",onClick:d(!0)},i("Faucet")),t&&L(R,{onClose:d(!1)})):null}},wbLk:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("/SIk"),i=r.n(a),o=r("1mez"),n=i().createElement;const l=()=>n("div",{style:{width:"100vw",height:"100vh"}},n("div",{style:{display:"flex",flex:"1 1 1",alignItems:"center",justifyContent:"center",height:"100%"}},n(o.Z,null)))},hIa1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("/SIk"),i=r.n(a),o=r("j3/i"),n=r("Qkkg"),l=i().createElement;function s(){return l(n.Z,null,l(o.xB,{styles:e=>o.iv`
          html {
            scrollbar-width: none;
            -webkit-tap-highlight-color: transparent;
            background-color: ${e.colors.overallBg};
          }
          body {
            margin: 0;
            height: 100%;
            width: 100vw;
            overflow-x: hidden !important;
            overflow-y: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            -webkit-overflow-scrolling: touch;
            -webkit-tap-highlight-color: transparent;
            background-color: ${e.colors.overallBg};
          }
          h1 {
            margin: 0;
            padding: 0;
          }
          #__next {
            max-width: 100vw;
            overflow-x: hidden;
          }
          input {
            font-family: inherit;

            &::placeholder {
              font-style: normal !important;
            }
          }

          .list-grid {
            > div > div > div {
              margin-top: 0;
              margin-bottom: 0;
              padding-left: 0;
              padding-right: 0;
              height: 100%;
              > div {
                flex: 1;
              }
            }
          }
          body:not(.scrollBar)::-webkit-scrollbar {
            display: none;
          }

          .scrollBar {
            padding-right: 0px;
          }
          .scrollBar:hover {
            padding-right: 0px;
          }
          .scrollBar::-webkit-scrollbar {
            width: 0px;
            height: 0px;
          }
          .scrollBar:hover::-webkit-scrollbar,
          ::-webkit-scrollbar {
            width: 5px;
            height: 6px;
          }
          body.scrollBar::-webkit-scrollbar {
            height: 6px;
            width: 8px !important;
          }
          /*  */
          input[type='number']::-webkit-outer-spin-button,
          input[type='number']::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
          }
          /* react-grid */
          .react-grid-layout {
            position: relative;
            transition: height 200ms ease;
            margin-bottom: 24px;
          }
          .react-grid-item {
            transition: all 100ms ease;
            transition-property: left, top;
          }
          .react-grid-item.cssTransforms {
            transition-property: transform;
          }
          .react-grid-item.resizing {
            z-index: 1;
            will-change: width, height;
          }
          .react-grid-item.react-draggable-dragging {
            transition: none;
            z-index: 3;
            will-change: transform;
          }
          .react-grid-item.dropping {
            visibility: hidden;
          }
          .react-grid-item.react-grid-placeholder {
            background: red;
            opacity: 0.2;
            transition-duration: 100ms;
            z-index: 2;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            -o-user-select: none;
            user-select: none;
            box-shadow: 0px 0px 100px #000;
          }
          .react-grid-item > .react-resizable-handle {
            position: absolute;
            width: 20px;
            height: 20px;
            bottom: 0;
            right: 0;
            cursor: se-resize;
            z-index: inherit;
          }
          .react-grid-item > .react-resizable-handle::after {
            content: '';
            position: absolute;
            right: 3px;
            bottom: 3px;
            width: 5px;
            height: 5px;
            border-right: 2px solid ${e.colors.icons.close};
            border-bottom: 2px solid ${e.colors.icons.close};
          }
          .react-resizable-hide > .react-resizable-handle {
            display: none;
          }
          /* react-resizable */
          .react-resizable {
            position: relative;
          }

          .draggableHandle {
            cursor: grab;
          }

          .react-draggable-dragging .draggableHandle {
            cursor: grabbing;
          }
          /*  */
          ::-webkit-scrollbar-track {
            background: transparent;
          }
          ::-webkit-scrollbar-thumb {
            background: ${e.colors.line};
            border-radius: 4px;
            width: 4px;
          }

          /*  stylisRtl .rc-calendar-picker */
          .rc-calendar-picker {
            position: absolute;
            right: 0 !important;
            z-index: 1000;
          }

          .react-grid-item.react-grid-placeholder {
            pointer-events: none;
          }

          .react-resizable-handle {
            visibility: hidden;
          }

          .trading-page-close-button {
            visibility: hidden;
          }

          .react-grid-item:hover .react-resizable-handle,
          .react-grid-item:hover .trading-page-close-button,
          .react-resizable-handle:hover {
            visibility: visible;
          }
          .react-draggable:hover .pro-layout-close-button {
            visibility: visible;
          }
        `}))}},pBBP:(e,t,r)=>{"use strict";r.d(t,{E:()=>n,v:()=>u});var a=r("/SIk"),i=r("HkAn"),o=r("S24M");const n=(e,t)=>{const{pageName:r,dfSource:n}=(0,i.Vn)();(0,a.useEffect)((()=>{e&&(0,o.j)("PopupView",{clientType:"web",title:t,pageName:r,df_source:n,eventName:"futures_help_center_tracking"})}),[n,t,r,e])};var l=r("5vwO"),s=r("GpFh"),c=r("jgBC");const u=()=>{const{pageName:e,dfSource:t}=(0,i.Vn)();return{trackWebClick:r=>{let{module:a="futures_helpCenter"}=r,i=(0,s.Z)(r,["module"]);(0,c.wZ)((0,l.Z)({module:a,pageName:e,dfSource:t},i))}}}},pV8G:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>le,openHelpCenterModal:()=>oe});var a=r("/SIk"),i=r.n(a),o=r("TKP4"),n=r("maGK"),l=r("LKg9"),s=r("VM/Z"),c=r("Qkkg"),u=r("xpNn"),d=r("pBBP"),m=r("71uP"),p=r("cIsc"),f=r("MJCM"),g=r("jgBC"),y=r("U0yl"),b=r("BLcC"),h=r("mAxD"),v=r("xA9w"),x=i().createElement;const S=()=>{},k=({title:e,children:t,isDefaultExpand:r=!1,trackCallback:i=S})=>{const{0:o,1:n}=(0,a.useState)(r),l=(0,a.useCallback)((()=>{n((e=>!e))}),[]);return x("div",{className:"toggle-panel"+(o?" expand":"")},x("div",{className:"toggle-title",onClick:()=>{l(),o&&i()}},e,x(v.Z,{size:16,className:"arrow"})),x("div",{className:"toggle-content"},t))},P=i().memo(k);var T=i().createElement;const C="support/list/a-guide-to-Binance-Futures",Z=({codes:e,data:t})=>{const{i18n:{language:r},getI18n:a}=(0,y.r5)(),{trackWebClick:i}=(0,d.v)();return T(P,{isDefaultExpand:!0,title:T(o.Z,null,T(h.Z,{color:"t.third"}),T(m.Z,{variant:"subtitle1",className:"panel-name"},a("HotTopics",{defaultValue:"Hot Topics"})))},e.map(((e,a)=>{const{code:o,title:n,type:l}=t[e]||{};return T(b.Z,{variant:"secondaryLink",key:o,className:"common-link",href:`/${r}/support/${1===l?"announcement":"faq"}/${o}`,target:"_blank",onClick:()=>i({elementId:`hotTopics_${a+1}`,elementTargetUrl:o})},n)})),T(m.Z,{as:"a",variant:"addressLink",href:`/${r}/${C}`,target:"_blank",className:"more-link",onClick:()=>i({elementId:"hotTopics_learnMore",elementTargetUrl:C})},a("LearnMore",{defaultValue:"Learn More"})))},M=i().memo(Z);var I=r("JtUR"),w=r("TVE9"),E=r("2iBS"),A=i().createElement;const N=({openHelpCenter:e,closeHelpCenter:t})=>{const{t:r}=(0,y.r5)(),{trackWebClick:i}=(0,d.v)(),n=(0,a.useCallback)((()=>{t(),(0,E.n)({afterClose:e}),i({elementId:"hot_feature"})}),[t,e,i]);return A("div",{className:"toggle-panel",onClick:n},A("div",{className:"toggle-title"},A(o.Z,null,A(I.Z,{size:24,color:"t.third"}),A(m.Z,{variant:"subtitle1",className:"panel-name"},r("futures-trade-hotFeatures",{defaultValue:"Hot Features"}))),A(w.Z,{size:16})))},O=i().memo(N);var R=r("WkMA"),L=r("ofts"),V=i().createElement;const F=({openHelpCenter:e,closeHelpCenter:t})=>{const{getI18n:r}=(0,y.r5)(),{trackWebClick:i}=(0,d.v)(),n=(0,a.useCallback)((()=>{t(),(0,L.l)({title:r("HowCompleteTrade",{defaultValue:"How to complete a trade?"}),showFooter:!1,afterClose:e}),i({elementId:"tour_around_trade"})}),[t,r,e,i]);return V(P,{title:V(o.Z,null,V(R.Z,{color:"t.third"}),V(m.Z,{variant:"subtitle1",className:"panel-name"},r("TourAround",{defaultValue:"Tour Around"}))),trackCallback:()=>{i({elementId:"tour_around"})}},V(b.Z,{variant:"secondaryLink",className:"common-link",onClick:n},r("HowCompleteTrade",{defaultValue:"How to complete a trade?"})))},D=i().memo(F);var _=r("fi7b"),B=r("f2C1"),z=r("aDP/"),K=r("jBCd"),q=r("zT+5"),W=r("c3qt"),U=r("yRKG"),j=r("SJeZ"),$=r("S24M"),H=i().createElement;const G=({icon:e,name:t,desc:r,onClick:a})=>H("div",{className:"action-item",onClick:a},e,H("div",{className:"action-content"},H(m.Z,{variant:"subtitle1",color:"t.primary"},t),H(m.Z,{variant:"body2",color:"t.third"},r))),J=({visible:e,openHelpCenter:t,closeHelpCenter:r})=>{const{t:i,getI18n:o}=(0,y.r5)(),{isLoggedIn:n}=(0,U.f0)(),{isExistFutureAccount:l}=(0,U.Pc)(),{trackWebClick:c}=(0,d.v)(),{shortName:p}=(0,j.oO)(),{0:f,1:g}=(0,a.useState)(),b=(0,a.useCallback)((e=>{r(),(0,q.F)(!0,{type:e,afterClose:t}),c({elementId:e===s.g3?"futures_help_tutorial":"futures_help_test"})}),[r,t,c]),h=(0,a.useCallback)((()=>{r(),(0,u.O)({afterClose:t}),c({elementId:"futures_help_tradingRules"})}),[r,t,c]),v=(0,a.useCallback)((()=>{b(s.Nz),(0,$.j)("$WebClick",{eventName:"futures_quiz",$element_id:"start_quiz",source:"help_center_popup"})}),[b]);return(0,a.useEffect)((()=>{e&&n&&l&&(0,W.o)().then((({data:e})=>{g(e)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[n,l,e]),H("div",{className:"bottom-panel"},H(G,{icon:H(B.Z,{color:"t.third"}),name:H(_.c,{t:i,i18nKey:"helpCenter-TradingRules",defaults:"<colorWrap>{{symbolName}}</colorWrap> Trading Rules",values:{symbolName:p},components:{colorWrap:H(m.Z,{as:"span",color:"t.yellow"})}}),desc:o("LearnMoreTradingRules",{defaultValue:"Learn more about trading rules of each symbol"}),onClick:h}),H(G,{icon:H(z.Z,{color:"t.third"}),name:o("TutorialVideo",{defaultValue:"Tutorial Video"}),desc:o("3MinsVideoTutorial",{defaultValue:"3 mins video tutorial on Futures trade"}),onClick:()=>b(s.g3)}),!1===f?H(G,{icon:H(K.Z,{color:"t.third"}),name:o("Quiz",{defaultValue:"Quiz"}),desc:o("CompleteMandatoryQuiz",{defaultValue:"Complete the mandatory Quiz to start Trading"}),onClick:v}):null)},Y=i().memo(J),Q={pt:20,pl:"xs",pr:["sm","xs"],cursor:"pointer",bg:"moduleBg",flex:"0 0 auto","&  path":{fill:"t.primary"},"&:hover path":{fill:"t.yellow"}},X={minWidth:["100%",640,720],maxWidth:["100%",640,720],"& > div:first-of-type":{pt:18,svg:{fontSize:20,"&:hover":{color:"t.primary"}}}},ee={height:"100%",p:0,"& .main-container":{height:["100%",580],display:"flex",flexDirection:"column"},"& .modal-title":{height:28,px:24,my:18,color:"t.primary"},"& .content-wrapper":{display:"flex",flex:1,minHeight:0},"& .overflow-container":{flex:1,overflow:"auto",mt:"ls",px:24,"&::-webkit-scrollbar":{width:"5px",height:"5px"},"&::-webkit-scrollbar-thumb":{bg:"icons.close"},"& .toggle-panel":{pb:"ls",mb:"ls",borderBottom:"1px solid",borderColor:"line","& .toggle-title":{display:"flex",justifyContent:"space-between",alignItems:"center",py:"ls",cursor:"pointer","& .panel-name":{ml:[10,18],color:"t.primary"},"& .arrow":{transform:"matrix(1, 0, 0, -1, 0, 0)",transition:"transform 0.3s ease-out","& > path":{fill:"t.third"}},"&:hover .arrow path":{fill:"t.primary"}},".toggle-content":{maxHeight:0,opacity:0,transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",overflow:"hidden",ml:[37,45],"& .common-link":{mb:"xs",display:"block",fontSize:1,color:"t.secondary",textDecoration:"underline",cursor:"pointer","&:first-of-type":{mt:"minor"}},"& .more-link":{color:"t.yellow",mb:"ls",fontSize:1}},"&.expand":{"& .toggle-title":{"& > svg":{transform:"matrix(-1, 0, 0, 1, 0, 0)"}},"& .toggle-content":{maxHeight:500,opacity:1}}},"& .bottom-panel":{display:"flex",flexDirection:["column","row"],justifyContent:["unset","space-between"],flexWrap:"wrap",pt:["ls",0],"& .action-item":{display:"flex",width:["100%",293,325],py:[0,"ls"],pl:"3px",pr:[0,"md"],mb:[30,0],cursor:"pointer",boxSizing:"border-box","& svg":{minWidth:"24px"}},"& .action-content":{ml:[10,18]}}}};var te=i().createElement;const re=({visible:e,openHelpCenter:t,closeHelpCenter:r})=>{const{getI18n:i}=(0,y.r5)(),{0:o,1:n}=(0,a.useState)({codes:[],data:{}}),{codes:l,data:s}=o,c=(0,a.useCallback)((async()=>{let e=[],t=[];try{const r=await(async()=>{const{data:e}=await(0,f.a)("a-guide-to-Binance-Futures"),{data:t}=e||{},r=new Set,a=t?JSON.parse(t):{};if(a.hash){const e=a.hash;Object.keys(e).filter((t=>"PlaylistFAQArticleList"===e[t].id)).forEach((t=>{var a,i,o,n;Object.keys(null!==(a=null===(i=e[t])||void 0===i||null===(o=i.config)||void 0===o||null===(n=o.config)||void 0===n?void 0:n.articles)&&void 0!==a?a:{}).forEach((a=>{var i,o,n;r.add(null===(i=e[t])||void 0===i||null===(o=i.config)||void 0===o||null===(n=o.config)||void 0===n?void 0:n.articles[a].id)}))}))}return r})();e=Array.from(r).slice(0,3),t=await(async e=>{const{data:t}=await(0,f.t)(e);return Array.isArray(null===t||void 0===t?void 0:t.items)?null===t||void 0===t?void 0:t.items:[]})(e)}catch(r){throw new Error(r)}n({codes:e,data:(0,g.FB)(t,"code")})}),[]);return(0,a.useEffect)((()=>{e&&!l.length&&c()}),[e,l,c]),te(p.Z,{open:e,onCloseIconClick:r,sx:X,contentSx:ee},te("div",{className:"main-container"},te(m.Z,{variant:"headline6",className:"modal-title"},i("title",{defaultValue:"Futures Help Center"})),te("div",{className:"content-wrapper"},te("div",{className:"overflow-container"},te(M,{codes:l,data:s}),te(O,{openHelpCenter:t,closeHelpCenter:r}),te(D,{openHelpCenter:t,closeHelpCenter:r}),te(Y,{visible:e,openHelpCenter:t,closeHelpCenter:r})))))},ae=i().memo(re);var ie=i().createElement;const oe=()=>{l.Y.emit(s.xm,{visible:!0})},ne=()=>{const{0:e,1:t}=(0,a.useState)(!1),{trackWebClick:r}=(0,d.v)(),i=(0,a.useCallback)((()=>{oe(),r({module:"header",elementId:"futures_helpCenter_entry"})}),[r]),u=(0,a.useCallback)((()=>{t(!1)}),[]);return(0,a.useEffect)((()=>l.Y.on(s.xm,(({visible:e})=>{t(e)}))),[]),(0,d.E)(e,"futures_helpCenter"),ie(c.Z,null,ie(o.Z,{__css:Q},ie(n.Z,{onClick:i})),ie(ae,{visible:e,openHelpCenter:oe,closeHelpCenter:u}),!1)},le=i().memo(ne)},"2iBS":(e,t,r)=>{"use strict";r.d(t,{Z:()=>E,n:()=>I});var a=r("/SIk"),i=r.n(a),o=r("71uP"),n=r("cIsc"),l=r("6exu"),s=r("c3qt"),c=r("LKg9"),u=r("yRKG"),d=r("Uqe+"),m=r("frZ3"),p=r("9h1+"),f=r("SJeZ"),g=r("pBBP");const y=(e,t,r="gif")=>`static/images/futures/assets/guide-${e}-${t?"light":"dark"}-en.${r}`;var b=r("VM/Z");const h={minWidth:["100%",640,720],maxWidth:["100%",640,720]},v={height:["100%","500px"],py:18,px:24,bg:"modalBg",borderRadius:"6px","& .main-container":{height:["100%","auto"],display:"flex",flexDirection:"column"},"& .content-wrapper":{display:"flex",flex:1,minHeight:0},"& .overflow-container":{display:"flex",flexDirection:"column",flex:1},"& .modal-footer":{justifyContent:"flex-end",alignItems:"center","& .previous-btn":{mr:"md",color:"t.third",cursor:"pointer",":hover":{color:"t.primary"}}}};var x=r("TKP4"),S=r("J81Z"),k=i().createElement;const P=()=>{},T=({steps:e=[],closeModal:t,activeIndex:r=0,setActiveIndex:i=P,track:n=P})=>{const{t:l,getI18n:s}=(0,f.yk)(),{isMobile:c}=(0,p.Fs)(),u=0===r,d=e.length-1===r,m=(0,a.useCallback)((()=>{i(r-1),n("previous")}),[r,i,n]),g=(0,a.useCallback)((()=>{i(r+1),n("next")}),[r,i,n]),y=(0,a.useCallback)((()=>{t&&t(),n("startTrading")}),[t,n]);return k(x.Z,{className:"modal-footer"},!c&&!u&&k(o.Z,{className:"previous-btn",variant:"subtitle2",onClick:m},l("futures-guide-Previous")),!c&&!d&&k(S.Z,{sz:"normal",colorStyle:"flatprimary",width:125,onClick:g},l("futures-guide-Next")),(d||c)&&k(S.Z,{sz:"normal",colorStyle:"flatprimary",onClick:y},s("StartTrading",{defaultValue:"Start Trading"})))},C=i().memo(T);var Z=i().createElement;let M;const I=({afterClose:e=(()=>{})}={})=>{c.Y.emit(b.bG,{visible:!0,afterClose:e})},w=()=>{const{getI18n:e}=(0,f.yk)(),{isLight:t}=(0,p.Fg)(),{isLoggedIn:r}=(0,u.f0)(),{isExistFutureAccount:i}=(0,u.Pc)(),{trackWebClick:x}=(0,g.v)(),S=(0,a.useMemo)((()=>((e,t)=>[{title:e("ba-futures-mock"),desc:{i18nKey:"hotFeature_5_desc"},imgPath:y("hotfeature5",t,"png"),hasLearnMore:!0,learnMoreLink:"https://testnet.binancefuture.com/%lng%/futures/BTCUSDT",learnMoreText:e("futures-start-trading")},{title:e("trd-layout-setting-color-cvd"),desc:{i18nKey:"trd-guide-cvd-content"},imgPath:y("hotfeature6",t,"png"),hasLearnMore:!1},{title:e("hotFeature_1"),desc:{i18nKey:"hotFeature_1_desc"},imgPath:y("hotfeature1",t),hasLearnMore:!0,learnMoreLink:"support/faq/29b45c485d664028b9ca1cdf90b24f6f"},{title:e("hotFeature_2"),desc:{i18nKey:"hotFeature_2_desc"},imgPath:y("hotfeature2",t)},{title:e("hotFeature_3"),desc:{i18nKey:"hotFeature_3_desc"},imgPath:y("hotfeature3",t),hasLearnMore:!0,learnMoreLink:"futures/position/adjustment"}])(e,t)),[e,t]),[k,P]=(0,d.Z)(b.gu),[T,I]=(0,d.Z)(b.sS),[w,E]=(0,d.Z)(b.jN),{0:A,1:N}=(0,a.useState)(),{0:O,1:R}=(0,a.useState)(!1),L=!1===A,V=(0,a.useMemo)((()=>{return!k||!T&&(e=w,(new Date).toDateString()===new Date(e).toDateString());var e}),[k,w,T]),F=(0,a.useCallback)((()=>{R(!1)}),[]),D=(0,a.useCallback)((()=>{F(),"function"===typeof M&&M(),x({elementId:"hot_feature_close"})}),[F,x]),_=(0,a.useCallback)((e=>{x({elementId:`hot_feature_${e}`})}),[x]);return(0,m.Z)((()=>{T&&I(!1)}),864e5),(0,a.useEffect)((()=>{T||E(new Date("2022-03-09").getTime())}),[T,E]),(0,a.useEffect)((()=>{r&&i&&A&&V&&(R(!0),I(!0),P(!0))}),[i,r,A,V,I,P]),(0,a.useEffect)((()=>{r&&i&&(0,s.o)().then((({data:e})=>{N(e)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[r,i]),(0,a.useEffect)((()=>c.Y.on(b.bG,(({visible:e,afterClose:t})=>{R(e),M=t}))),[]),(0,g.E)(O,"futures_hotFeature"),Z(n.Z,{open:O,onCloseIconClick:D,sx:h,contentSx:v},Z("div",{className:"main-container"},Z(o.Z,{variant:"headline6",color:"t.primary"},e("hotFeatures",{defaultValue:"Hot Features"})),L&&Z(o.Z,{variant:"body2",color:"t.third",mt:"minor"},e("hotFeaturesTip",{defaultValue:"Check out some features we recommended for you!"})),Z("div",{className:"content-wrapper"},Z("div",{className:"overflow-container"},Z(l.Z,{steps:S,staticHost:b.Xs,closeModal:F,track:_,sx:{height:L?302:324}},Z(C,null))))))},E=i().memo(w)},pww2:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("d5gM"),l=r("snMe"),s=r("T9gt"),c=o().createElement;n.Z.use(l.Db);const u={fallbackLng:"en",debug:!1,saveMissing:!1,react:{useSuspense:!1},partialBundledLanguages:!0},d=({i18n:e={},lng:t="en",ns:r,children:o})=>{const{0:l,1:d}=(0,i.useState)(!1),m=Object.keys(e)||[];return l||(d(!0),n.Z.init((0,a.Z)((0,a.Z)({},u),{},{lng:t,ns:m,defaultNS:r,fallbackLng:t,resources:{[t]:e},backend:{}}))),(0,i.useEffect)((()=>{m.length>0&&m.forEach((r=>n.Z.addResourceBundle(t,r,e[r],!0,!0))),n.Z.changeLanguage(t)}),[m,e,t]),c(s.a,{i18n:n.Z},o)}},UIpo:(e,t,r)=>{"use strict";r.d(t,{Jy:()=>g,hM:()=>y,Zb:()=>b,oZ:()=>v});var a=r("GpFh"),i=r("JwA9"),o=r("TKP4"),n=r("APA6"),l=r("9izf"),s=r("eOkI"),c=r("/SIk"),u=r.n(c),d=r("szIg"),m=r("eXOl"),p=r("Dvpw"),f=u().createElement;const g=40,y=e=>{let{onRemove:t,renderExtra:r}=e,i=(0,a.Z)(e,["onRemove","renderExtra"]);return f(b,Object.assign({},i,{onRemove:t,renderExtra:()=>f(u().Fragment,null,r&&r(),t&&f(p.Z,{onRemove:t}))}))},b=e=>{let{children:t,title:r,area:l,renderExtra:s,onRemove:c,titleShrink:u=0,autoHeight:d}=e,m=(0,a.Z)(e,["children","title","area","renderExtra","onRemove","titleShrink","autoHeight"]);return f(i.Z,Object.assign({__css:{position:"relative",gridArea:l,zIndex:"auto",width:"100%",bg:"moduleBg",height:d?"auto":"100%"}},m),r&&f(o.Z,{sx:{position:"relative",zIndex:1,height:g,px:"sm",fontSize:1,color:"t.primary",justifyContent:"space-between",alignItems:"center",bg:"moduleBg",flexShrink:0,flexGrow:0,userSelect:c?"auto":"none"},className:c?"draggableHandle":void 0},f(o.Z,{sx:{fontSize:"14px",flexShrink:u,fontWeight:500}},r),s&&s()),f(n.Z,{sx:d?{overflowY:"auto",overflowX:"hidden"}:{position:"absolute",top:0,left:0,right:0,bottom:0,paddingTop:r?g:0,overflowY:"auto",overflowX:"hidden"}},t))},h={closeD:{cursor:"pointer",flexShrink:0,position:"absolute",right:0,top:0,color:"icons.close",zIndex:1,"&:hover":{color:"t.third"}},tabsContainer:{height:"100%",display:"flex",flexDirection:"column"},tabs:{flexShrink:0,flexGrow:0,height:40,px:"16px",width:["100%","100%","calc(100% - 220px)"],fontSize:"16px",lineHeight:"16px",position:"relative",bg:"transparent","div.active":{color:"t.yellow",borderBottom:"none"},"div:hover":{color:"t.yellow"}}},v=u().forwardRef(((e,t)=>{let{panes:r,extra:o,area:g,onRemove:y}=e,b=(0,a.Z)(e,["panes","extra","area","onRemove"]);const v=(0,d.useDispatch)(),{activeTab:x}=(0,m.jV)();return f(i.Z,Object.assign({__css:(0,c.useMemo)((()=>({width:"100%",height:"100%",gridArea:g,bg:"moduleBg",zIndex:"auto",position:"relative"})),[g])},b,{ref:t,name:"position"}),y&&f(p.Z,{onRemove:y,sx:h.closeD}),o,f(l.Z,{lazy:!0,variant:"trade-next",sx:h.tabsContainer,tabsSx:h.tabs,tabsClassName:y?"draggableHandle":"",tabClassName:"draggableCancel",defaultActiveKey:"0",onChange:e=>v.userTab.updateState({activeTab:e})},r.map((([e,t],r)=>f(s.Z,{key:r,sx:{flex:1,height:"calc(100% - 40px)"},tab:e,tabKey:String(r)},f(n.Z,{className:"draggableCancel",width:"100%",height:"100%"},u().cloneElement(t,{active:Number(x)===r})))))))}))},GR32:(e,t,r)=>{"use strict";r.d(t,{i:()=>u});var a=r("/SIk"),i=r.n(a),o=r("JwA9"),n=r("9h1+"),l=r("6Afj"),s=i().createElement;const c=(0,l.SA)((()=>Promise.all([r.e(6374),r.e(3712)]).then(r.bind(r,"vNnD")))),u=()=>{const[e]=(0,n.z4)();return s(o.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",position:"relative"},name:"depthchart"},s(c,{symbol:e}))}},JwA9:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("/SIk"),i=r.n(a),o=r("APA6"),n=r("Fee1"),l=i().createElement;const s=i().memo(i().forwardRef(((e,t)=>l(n.Z,{name:e.name},l(o.Z,Object.assign({},e,{ref:t}),e.children)))))},hiQk:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("kO20"),l=r("ux7Q"),s=r("7uiG"),c=r("9h1+"),u=r("VM/Z"),d=r("nnRT"),m=r.n(d),p=o().createElement;const f=(0,n.WidthProvider)(n.Responsive),g=({RenderWGLGrid:e})=>{const{layouts:t,setLayout:r,setLayouts:o,breakpoint:n,setBreakpoint:d,layout:g}=(0,i.useContext)(l.VY),y=(0,i.useCallback)((e=>{e!==n&&d(e)}),[d,n]),[b,h]=(0,s.xG)((e=>[e.disableMouse,e.setDisableMouse])),v=(0,c.gm)(),x=(e,t)=>e&&"chart"===t?"disable-mouse":"",S=(0,i.useCallback)(((e,t,r)=>{h(!1),"orderForm"===r.i&&(r.w<t.w&&(r.w=r.minW),r.w>t.w&&(r.w=r.maxW))}),[h]),{0:k,1:P}=(0,i.useState)(1),T=(0,i.useCallback)((()=>{P(3)}),[]),C=(0,i.useCallback)((()=>{P(1)}),[]),Z=(0,i.useMemo)((()=>g.map((t=>p("div",{className:x(b,t.i),key:t.i,suppressHydrationWarning:!0,style:{zIndex:"subHeader"===t.i?2:k}},p(e,{el:t,layout:g,setLayout:r}))))),[g,b,k,e,r]);return!t||u.sk?null:p(f,{className:"layout",cols:l.e_,layouts:t,useCSSTransforms:"rtl"!==v,onBreakpointChange:y,rowHeight:10,margin:[1,1],autoSize:!0,draggableCancel:".draggableCancel",draggableHandle:".draggableHandle",containerPadding:[0,0],onLayoutChange:(e,r)=>{if(m()(e,g)&&m()(r,t))return;const i=Object.keys(t).find((e=>!m()(t[e],r[e])));if(i&&i!==n){const e=t[i].map((e=>e.i)),n=r[i].map((e=>e.i));if(!m()(e,n))return o((0,a.Z)((0,a.Z)({},r),{},{[i]:[...t[i],{i:"forceUpdate",x:0,y:0,h:0,w:0}]}))}return o(r)},onResizeStart:()=>{h(!0)},onResizeStop:S,breakpoints:l.j$,onDragStart:T,onDragStop:C},Z)},y=(0,i.memo)(g)},DQ97:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var a=r("5vwO"),i=r("kO20"),o=r("/SIk"),n=r.n(o),l=r("szIg"),s=r("Uqe+"),c=r("ux7Q"),u=r("7OE6"),d=r("6C5I"),m=r("VM/Z"),p=r("/MJE"),f=r("SJeZ"),g=n().createElement;const y=(0,u.x)(),{constants:b,onAppEvent:h}=p.Z,v=({FullScreenLayout:e,Layout:t})=>{(0,f.G3)();const r=(0,l.useSelector)(d.Xj),n=((0,l.useSelector)((e=>e.setting.USDTFutures.layoutDetail)),(0,l.useSelector)((e=>e.setting.CoinFutures.layoutDetail)),(0,l.useSelector)((e=>e.setting.futuresLayoutDetail))),u=i.Responsive.utils.getBreakpointFromWidth(c.j$,y),{0:p,1:v}=(0,o.useState)(u),[x,S]=(0,s.Z)(m.v6,c.gH),k=(0,o.useRef)(c.EY),P=(0,o.useMemo)((()=>(console.info(JSON.stringify({name:"electronLayout",value:Object.keys(x)})),Object.keys(x).reduce(((e,t)=>{let r=Object.keys(n).map((e=>n[e]&&(x[t].find((t=>t.i===e))||k.current[t].find((t=>t.i===e))))).filter(Boolean);return t===p&&(n.market?r.market=(0,c.C1)(r,t):r=(0,c.I5)(r,t),n.verticalDepth?r.verticalDepth=(0,c.oq)(r,t):r=(0,c.ys)(r)),e[t]=r,e}),(0,a.Z)({},k.current)))),[n,x,p]),[T,C]=(0,s.Z)(m.VM,c.t3),Z=((0,o.useMemo)((()=>x[p].filter((e=>"forceUpdate"!==e.i))),[x,p]),P[p]),M=(0,o.useCallback)((e=>{S((0,a.Z)((0,a.Z)({},x),{},{[p]:e}))}),[S,x,p]);return(0,o.useEffect)((()=>{const e=h(b.APPEVENT_RESET_FUTURES_USDT_LAYOUT,(e=>{S(c.gH)}));return()=>{null===e||void 0===e||e()}}),[]),(0,o.useEffect)((()=>{T!==c.t3&&(C(c.t3),S(c.gH))}),[T]),r?e:g(c.VY.Provider,{value:{layouts:P,setLayouts:S,layout:Z,setLayout:M,breakpoint:p,setBreakpoint:v}},t)},x=(0,o.memo)(v)},RfYP:(e,t,r)=>{"use strict";r.d(t,{KP:()=>c,rr:()=>d,S9:()=>p,Tc:()=>g});var a=r("/SIk"),i=r.n(a),o=r("TKP4"),n=r("9h1+"),l=i().createElement;const s={color:"t.third",height:"100%",alignItems:"center",fontFamily:"BinancePlex",fontWeight:"medium",pr:"16px",fontSize:"14px"},c=i().memo((({i18nKey:e,defaultValue:t,active:r,suffix:a,testId:i})=>{const{getI18n:c}=(0,n.ZK)();return l(o.Z,{className:""+(r?"active":""),sx:s,active:r,"data-testid":i},c(e,{defaultValue:t}),a)})),u=i().memo((({active:e,i18nKey:t="trd-layout-tabOpenOrder"})=>{const{preOrders:r}=(0,n.E)();return l(c,{i18nKey:t,defaultValue:"Open Orders",active:e,suffix:`(${r.length})`,testId:"OpenOrder"})})),d=e=>l(u,{active:e}),m=i().memo((({active:e,i18nKey:t="trd-layout-tabOrderHistory"})=>l(c,{i18nKey:t,defaultValue:"Order History",active:e,testId:"OrderHistory"}))),p=e=>l(m,{active:e}),f=i().memo((({active:e,i18nKey:t="trd-layout-tabTradeHistory"})=>l(c,{i18nKey:t,defaultValue:"Trade History",active:e,testId:"TradeHistory"}))),g=e=>l(f,{active:e})},"/Kmz":(e,t,r)=>{"use strict";r.d(t,{O:()=>a});const a={bg:"overallBg",display:"grid",width:"100vw",height:"100vh",minHeight:"680px"}},ux7Q:(e,t,r)=>{"use strict";r.d(t,{j$:()=>x,e_:()=>S,EY:()=>C,gH:()=>T,ZJ:()=>P,mZ:()=>M,t3:()=>v,VY:()=>I,HC:()=>N,y3:()=>E,oq:()=>L,C1:()=>O,ys:()=>A,I5:()=>R,tv:()=>w});var a=r("5vwO"),i=r("/SIk");const o=[{i:"favorite",x:0,y:0,w:18,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:18,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:18,h:52},{i:"orderbook",x:18,y:0,w:3,h:43},{i:"trades",x:18,y:43,w:3,h:20},{i:"userinfo",x:0,y:63,w:21,h:50},{i:"orderForm",x:21,y:0,w:3,h:63,minW:3,maxW:6},{i:"marginRatio",x:21,y:63,w:3,h:17},{i:"assetsCard",x:21,y:80,w:3,h:33},{i:"verticalDepth",x:0,y:64,w:21,h:13,hidden:!0},{i:"market",x:0,y:11,w:3,h:52,minW:3,hidden:!0}],n=[{i:"subHeader",x:0,y:0,isResizable:!1,w:18,h:7},{i:"chart",x:0,y:7,w:18,h:52},{i:"orderbook",x:18,y:0,w:3,h:39},{i:"trades",x:18,y:43,w:3,h:20},{i:"userinfo",x:0,y:59,w:21,h:50},{i:"orderForm",x:21,y:0,w:3,h:59,minW:3,maxW:6},{i:"marginRatio",x:21,y:63,w:3,h:17},{i:"assetsCard",x:21,y:80,w:3,h:33},{i:"verticalDepth",x:0,y:60,w:21,h:13,hidden:!0},{i:"market",x:0,y:7,w:3,h:52,minW:3,hidden:!0}],l=[{i:"favorite",x:0,y:0,w:16,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:16,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:16,h:52},{i:"orderbook",x:16,y:0,w:4,h:43},{i:"trades",x:16,y:43,w:4,h:20},{i:"userinfo",x:0,y:63,w:20,h:50},{i:"orderForm",x:20,y:0,w:4,h:63,minW:4,maxW:8},{i:"marginRatio",x:20,y:63,w:4,h:17},{i:"assetsCard",x:20,y:80,w:4,h:33},{i:"verticalDepth",x:0,y:64,w:20,h:13,hidden:!0},{i:"market",x:0,y:11,w:4,h:52,minW:4,hidden:!0}],s=[{i:"subHeader",x:0,y:0,isResizable:!1,w:16,h:7},{i:"chart",x:0,y:7,w:16,h:52},{i:"orderbook",x:16,y:0,w:4,h:39},{i:"trades",x:16,y:43,w:4,h:20},{i:"userinfo",x:0,y:59,w:20,h:50},{i:"orderForm",x:20,y:0,w:4,h:59,minW:4,maxW:8},{i:"marginRatio",x:20,y:63,w:4,h:17},{i:"assetsCard",x:20,y:80,w:4,h:33},{i:"verticalDepth",x:0,y:60,w:20,h:13,hidden:!0},{i:"market",x:0,y:7,w:4,h:52,minW:4,hidden:!0}],c=[{i:"favorite",x:0,y:0,w:15,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:15,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:15,h:52},{i:"orderbook",x:15,y:0,w:4,h:43},{i:"trades",x:15,y:43,w:4,h:20},{i:"userinfo",x:0,y:63,w:19,h:50},{i:"orderForm",x:19,y:0,w:5,h:63,minW:5,maxW:10},{i:"marginRatio",x:19,y:63,w:5,h:17},{i:"assetsCard",x:19,y:80,w:5,h:33},{i:"verticalDepth",x:0,y:64,w:19,h:13,hidden:!0},{i:"market",x:0,y:11,w:4,h:52,minW:4,hidden:!0}],u=[{i:"subHeader",x:0,y:0,isResizable:!1,w:15,h:7},{i:"chart",x:0,y:7,w:15,h:52},{i:"orderbook",x:15,y:0,w:4,h:39},{i:"trades",x:15,y:43,w:4,h:20},{i:"userinfo",x:0,y:59,w:19,h:50},{i:"orderForm",x:19,y:0,w:5,h:59,minW:5,maxW:10},{i:"marginRatio",x:19,y:63,w:5,h:17},{i:"assetsCard",x:19,y:80,w:5,h:33},{i:"verticalDepth",x:0,y:60,w:19,h:13,hidden:!0},{i:"market",x:0,y:7,w:4,h:52,minW:4,hidden:!0}],d=[{i:"favorite",x:0,y:0,w:14,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:14,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:14,h:52,minW:6,minH:6},{i:"orderbook",x:14,y:0,w:5,h:43},{i:"trades",x:14,y:43,w:5,h:20},{i:"userinfo",x:0,y:63,w:19,h:50},{i:"orderForm",x:19,y:0,w:5,h:63,minW:5,maxW:10},{i:"marginRatio",x:19,y:63,w:5,h:17},{i:"assetsCard",x:19,y:80,w:5,h:33},{i:"verticalDepth",x:0,y:64,w:19,h:13,hidden:!0},{i:"market",x:0,y:11,w:4,h:52,minW:4,hidden:!0}],m=[{i:"subHeader",x:0,y:0,isResizable:!1,w:14,h:7},{i:"chart",x:0,y:7,w:14,h:52,minW:6,minH:6},{i:"orderbook",x:14,y:0,w:5,h:39},{i:"trades",x:14,y:43,w:5,h:20},{i:"userinfo",x:0,y:59,w:19,h:50},{i:"orderForm",x:19,y:0,w:5,h:59,minW:5,maxW:10},{i:"marginRatio",x:19,y:63,w:5,h:17},{i:"assetsCard",x:19,y:80,w:5,h:33},{i:"verticalDepth",x:0,y:60,w:19,h:13,hidden:!0},{i:"market",x:0,y:7,w:4,h:52,minW:4,hidden:!0}],p=[{i:"favorite",x:0,y:0,w:24,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:24,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:13,h:55},{i:"orderbook",x:13,y:11,w:5,h:32},{i:"trades",x:13,y:44,w:5,h:23},{i:"userinfo",x:0,y:66,w:18,h:37},{i:"orderForm",x:18,y:11,w:6,h:55,minW:6,maxW:12},{i:"marginRatio",x:18,y:66,w:6,h:17},{i:"assetsCard",x:18,y:83,w:6,h:20},{i:"verticalDepth",x:0,y:66,w:18,h:13,hidden:!0},{i:"market",x:0,y:11,w:5,h:52,minW:5,hidden:!0}],f=[{i:"subHeader",x:0,y:0,isResizable:!1,w:24,h:7},{i:"chart",x:0,y:7,w:13,h:55},{i:"orderbook",x:13,y:11,w:5,h:32},{i:"trades",x:13,y:44,w:5,h:23},{i:"userinfo",x:0,y:64,w:18,h:37},{i:"orderForm",x:18,y:11,w:6,h:55,minW:6,maxW:12},{i:"marginRatio",x:18,y:66,w:6,h:17},{i:"assetsCard",x:18,y:83,w:6,h:20},{i:"verticalDepth",x:0,y:62,w:18,h:13,hidden:!0},{i:"market",x:0,y:7,w:5,h:52,minW:5,hidden:!0}],g={i:"chart",getTitle:e=>e("trd-layout-chartTle")},y={i:"orderbook",getTitle:e=>e("trd-layout-orderBookTle")},b={i:"trades",getTitle:e=>e("trd-layout-tradesTle")},h={i:"userinfo",getTitle:e=>`${e("trd-layout-tabPosition")} & ${e("trd-layout-tabOpenOrder")} `},v=4,x={xl:2e3,lg:1500,md:1439,sm:1200,xs:1023},S={xl:24,lg:24,md:24,sm:24,xs:24},k={xl:o,lg:l,md:c,sm:d,xs:p},P={xl:o.filter((e=>!e.hidden)),lg:l.filter((e=>!e.hidden)),md:c.filter((e=>!e.hidden)),sm:d.filter((e=>!e.hidden)),xs:p.filter((e=>!e.hidden))},T={xl:n.filter((e=>!e.hidden)),lg:s.filter((e=>!e.hidden)),md:u.filter((e=>!e.hidden)),sm:m.filter((e=>!e.hidden)),xs:f.filter((e=>!e.hidden))},C={xl:n,lg:s,md:u,sm:m,xs:f},Z={xl:JSON.parse(JSON.stringify(n)),lg:JSON.parse(JSON.stringify(s)),md:JSON.parse(JSON.stringify(u)),sm:JSON.parse(JSON.stringify(m)),xs:JSON.parse(JSON.stringify(f))},M=[{i:"favorite",getTitle:e=>e("trd-layout-favouriteTle")},{i:"market",x:0,y:0,w:4,h:27,minW:4,minH:6,getTitle:e=>e("trd-layout-MarketTle"),setting:!1},g,{i:"verticalDepth",x:11,y:27,w:16,h:9,minW:2,minH:2,getTitle:e=>e("trd-chart-Depth")},y,b,h,{i:"orderForm",getTitle:(e,t)=>t("placeOrder",{defaultValue:"Place Order"})},{i:"marginRatio",getTitle:(e,t)=>t("tradeHistory-positions-marginRatioLabel")},{i:"assetsCard",getTitle:(e,t)=>t("assets")}],I=(0,i.createContext)({layout:P.lg,layouts:P,breakpoint:"lg",setBreakpoint:()=>{},setLayout:()=>{},setLayouts:()=>{},showFavourite:!0,setFavourite:()=>{},dragged:!1,setDragged:()=>{}}),w=(e,t="lg")=>{const r=k[t].find((e=>"market"===e.i)),a=e.find((e=>"chart"===e.i)),i=k[t].find((e=>"chart"===e.i));return a&&i&&r&&a.x===i.x+r.w&&a.y===i.y&&a.w===i.w-r.w&&(a.x=i.x,a.w=i.w),e.filter((e=>"market"!==e.i))},E=(e,t)=>{const r=k[t].find((e=>"market"===e.i)),a=k[t].find((e=>"chart"===e.i)),i=e.find((e=>"chart"===e.i));return i&&a&&r&&i.x===a.x&&i.y===a.y&&(i.x+=r.w,i.w-=r.w),[...e,r]},A=e=>e.filter((e=>"verticalDepth"!==e.i)),N=(e,t)=>{const r=e.find((e=>"userinfo"===e.i)),a=k[t].find((e=>"verticalDepth"===e.i)),i=k[t].find((e=>"userinfo"===e.i));return r&&i&&a&&r.y===i.y&&(r.y+=a.h),[a,...e]},O=(e,t="lg")=>{const r=Z[t].find((e=>"market"===e.i)),i=Z[t].find((e=>"chart"===e.i)),o=e.find((e=>"chart"===e.i));return o&&i&&r&&o.x===i.x&&o.y===i.y&&(o.x+=r.w,o.w-=r.w),(0,a.Z)({},r)},R=(e,t="lg")=>{const r=Z[t].find((e=>"market"===e.i)),a=e.find((e=>"chart"===e.i)),i=Z[t].find((e=>"chart"===e.i));return a&&i&&r&&a.x===i.x+r.w&&a.y===i.y&&a.w===i.w-r.w&&(a.x=i.x,a.w=i.w),e.filter((e=>"market"!==e.i))},L=(e,t="lg")=>{const r=e.find((e=>"userinfo"===e.i)),a=Z[t].find((e=>"verticalDepth"===e.i)),i=Z[t].find((e=>"userinfo"===e.i));return r&&i&&a&&r.y===i.y&&(r.y+=a.h),a}},"z+x3":(e,t,r)=>{"use strict";r.d(t,{ZK:()=>i,FA:()=>o,c9:()=>n,is:()=>l});var a=r("9h1+");const i=e=>(0,a.ZK)("trd-layout",e),o=405,n="screen",l="screen and (max-width: 767px)"},vt3k:(e,t,r)=>{"use strict";r.d(t,{dh:()=>y,TE:()=>s,Yr:()=>d});var a=r("/SIk"),i=r.n(a),o=(r("W33l"),r("U0yl"),r("/MJE")),n=(r("VM/Z"),i().createElement);const l=({children:e})=>n(i().Fragment,null,i().cloneElement(e,{onClick:e=>{e&&e.preventDefault(),o.Z.login()},href:"#"})),s=e=>n(l,e);var c=i().createElement;const u=({children:e})=>c(i().Fragment,null,i().cloneElement(e,{onClick:e=>{e&&e.preventDefault(),o.Z.register()},href:"#"})),d=e=>c(u,e);var m=r("GpFh"),p=r("71uP"),f=r("869M"),g=i().createElement;const y=e=>{let{link:t}=e,r=(0,m.Z)(e,["link"]);const{getI18n:a}=(0,f.yk)();return g(p.Z,Object.assign({as:"a",variant:"addressLink",href:t,target:"_blank",color:"t.yellow",fontSize:12},r),a("learnMore",{defaultValue:"Learn More"}))}},DCFU:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var a=r("GDnE"),i=r("/SIk"),o=r.n(i),n=r("TKP4"),l=r("71uP"),s=r("5vwO");const c={offset:0,x:!0},u=e=>"function"===typeof e,d=e=>e&&"object"===typeof e&&!(0,i.isValidElement)(e),m=(e,t)=>{const r=d(e),a=d(t);if(r&&r===a){const r=Object.keys(e),a=Object.keys(t);if(r.length===a.length)return Number(r.every((r=>m(e[r],t[r]))))}else if(u(e)&&u(t)||(0,i.isValidElement)(e)&&(0,i.isValidElement)(t))return!0;return Number(e===t)};function p(e,t=0,r=!0){const{top:a,right:i,bottom:o,left:n,width:l,height:s}=e.getBoundingClientRect(),{clientWidth:c,clientHeight:u}=document.documentElement;return(l>0||s>0)&&o>=-t&&a<u+t&&(!r||i>=-t&&n<c+t)}class f extends i.PureComponent{constructor(e){super(e),(0,a.Z)(this,"rootRef",(0,i.createRef)(null)),(0,a.Z)(this,"checkUpdate",(()=>{const{current:e}=this.rootRef;return e&&!this.unmount})),(0,a.Z)(this,"checkViewport",(e=>{const{index:t}=this,{current:r}=this.rootRef,{check:a,noLazy:i}=this.props;if(this.checkUpdate()){const{offset:o,x:n}=(0,s.Z)((0,s.Z)({},c),a);i||p(r,o,n)?(delete f.instances[t],this.inViewPort(e)):f.instances[t]=this}})),(0,a.Z)(this,"inViewPort",(()=>{})),(0,a.Z)(this,"equalUpdate",((e,t)=>{m(e,t)||this.checkViewport()})),this.index=f.count,f.count+=1}componentDidUpdate(e){const t=(0,s.Z)((0,s.Z)({},this.props),{},{check:null}),r=(0,s.Z)((0,s.Z)({},e),{},{check:null});this.equalUpdate(r,t)}componentDidMount(){this.checkViewport()}componentWillUnmount(){delete f.instances[this.index],this.unmount=!0}}(0,a.Z)(f,"instances",{}),(0,a.Z)(f,"count",0),(0,a.Z)(f,"reactEquals",m),(0,a.Z)(f,"isInViewport",p),(0,a.Z)(f,"checkViewport",(()=>{const{instances:e}=f;Object.keys(e).forEach((t=>{const r=e[t];r&&r.checkViewport()}))}));{const e=function(e,t){let r=null;return function(){r||(r=setTimeout((()=>{e.apply(this,[].slice.call(arguments,0)),r=null}),t))}}(f.checkViewport,100);document.addEventListener("scroll",e,!0),document.addEventListener("transitionend",e,!0)}const g=f;var y=o().createElement;const b=class extends g{constructor(...e){super(...e),(0,a.Z)(this,"state",{loading:!1}),(0,a.Z)(this,"checkUpdate",(()=>{const{loading:e}=this.state,{current:t}=this.rootRef;return t&&!e&&!this.unmount})),(0,a.Z)(this,"inViewPort",(()=>{const{showMore:e}=this.props;this.setState({loading:!0},(()=>{new Promise((t=>{e().then((()=>t(!1))).catch((e=>("undefined"!==typeof Sentry&&Sentry.captureException(e),t(!0))))})).then((()=>{g.instances[this.index]=this})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}))}))}componentWillReceiveProps({loading:e,error:t}){this.state.loading!==e&&setTimeout((()=>{this.setState({loading:e,error:t})}),2e3)}render(){const{rootRef:e,props:t}=this;return y(n.Z,{sx:{width:"100%",minHeight:"2px",justifyContent:"center",alignItems:"center",color:"t.secondary"},ref:e},t.error?y(l.Z,{onClick:this.inViewPort},"\u52a0\u8f7d\u5931\u8d25\uff0c\u70b9\u51fb\u91cd\u8bd5"):null)}}},zZ5f:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("7nmT"),l=r("1mez"),s=o().createElement;const c={position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},u=({show:e=!0,fullScreen:t=!1,inner:r=!1,children:i=null,zIndex:n="100"})=>{if(!e)return i||null;const u=s(l.Z,{sx:(0,a.Z)({zIndex:n||"100"},c)});return s(o().Fragment,null,i,t?s("div",{style:{position:r?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(rgba(0, 0, 0, 0.05) 30%, transparent)",zIndex:2e3}},u):u)};let d;u.show=({fullScreen:e=!1}={})=>{d||(d=document.createElement("div"),document.body.appendChild(d)),n.render(s(u,{fullScreen:e}),d)},u.hide=()=>{d&&n.render(s(u,{show:!1}),d)};const m=u},PMF4:(e,t,r)=>{"use strict";r.d(t,{u:()=>p});var a=r("/SIk"),i=r.n(a),o=r("TKP4"),n=r("APA6"),l=r("J81Z"),s=r("+Ak0"),c=r("vt3k"),u=r("9h1+"),d=r("z+x3"),m=i().createElement;const p=({children:e,active:t=!1,height:r})=>{const{getI18n:a}=(0,d.ZK)(),{isLoggedIn:p,isLoading:f}=(0,u.f0)();return f||!s.C?null:p?i().cloneElement(e,{active:t}):m(o.Z,{sx:{justifyContent:"center",height:r||"100%",alignItems:"flex-end",color:"t.primary"}},m(n.Z,{sx:{height:"100%",fontSize:1,display:"flex",alignItems:"center"}},m(c.TE,null,m(l.Z,{as:"a",variant:"text",sz:"tiny",px:"2px",py:"4px",fontSize:1},a("tabLogIn",{defaultValue:"Log In"}))),"\xa0",a("tabOr",{defaultValue:"or"}),"\xa0",m(c.Yr,null,m(l.Z,{as:"a",variant:"text",sz:"tiny",px:"2px",py:"4px",fontSize:1},a("tabRegister",{defaultValue:"Register now"}))),"\xa0",a("tabStart",{defaultValue:"to start trading."})))}},vvaW:(e,t,r)=>{"use strict";r.d(t,{d:()=>u});var a=r("/SIk"),i=r.n(a),o=r("BLcC"),n=r("474N"),l=r("869M"),s=i().createElement;const c={display:"inline-flex",alignItems:"center",textDecoration:"none",ml:"8px"},u=({href:e,text:t,target:r})=>{const{getI18n:a}=(0,l.yk)(),i=t||a("learnMore",{defaultValue:"Learn More"});return s(o.Z,{variant:"standardLink",sx:c,href:e,target:r},i,s(n.Z,{size:12,ml:"2px",color:"t.yellow"}))}},LxGj:(e,t,r)=>{"use strict";r.d(t,{a:()=>w});var a=r("/SIk"),i=r.n(a),o=r("APA6"),n=r("ZFRO"),l=r("l4n0"),s=r("GbrZ"),c=r("D9Cm"),u=r("71uP"),d=r("vJ4P"),m=r("869M"),p=r("eXOl"),f=r("VM/Z"),g=r("vvaW"),y=i().createElement;var b=r("5vwO"),h=r("srVz"),v=r("7H20"),x=r("IcOa"),S=r("LcTY"),k=r("FOuV"),P=i().createElement;const T=(0,f.l6)(!0);var C=r("Hv1I"),Z=i().createElement;var M=i().createElement;const I={marginTop:"1px"},w=({height:e})=>{const t=(()=>{const{getI18n:e,i18n:{language:t}}=(0,m.yk)(),{search:r}=(0,l.Hb)(),i=(0,p.j2)(),{symbol:o,settlePlan:n}=i,{0:b,1:h}=(0,a.useState)(!1),{fullName:v}=(0,s.H)(i,e),x=(0,a.useCallback)((()=>{h(!1)}),[]),{eventType:S,contractStatus:k,symbol:P}=(0,d.g)();return(0,a.useEffect)((()=>{if("contractInfo"!==S||P!==o||"CLOSE"!==k)return h(n>0),x;window.location.href=`${f.$g}/${t}/futures/BTC_USDT${r}`}),[k,P,S,x,t,r,n,o]),{content:b?y("div",null,y(u.Z,{color:"t.primary",as:"span"},e("settle-warning",{symbol:v,date:`${(0,c.v)(new Date(n),"yyyy-MM-dd hh:mm")}`})),y(g.d,{href:(0,f.b$)(t),target:"_blank"})):null,onClose:x}})(),r=(()=>{const{getI18n:e,i18n:{language:t}}=(0,m.yk)(),{isLoggedIn:r}=(0,x.f0)(),{isExistFutureAccount:i}=(0,x.Pc)(),[o]=(0,v.z)(),n=(0,p.j2)(),{0:l,1:c}=(0,a.useState)({[o]:!1}),{fullName:d}=(0,s.H)(n,e),f=(0,a.useCallback)((()=>{c((e=>(0,b.Z)((0,b.Z)({},e),{},{[o]:!1})))}),[o]);return(0,a.useEffect)((function(){if(i&&r)return async function(){const{data:e}=await(0,h.qq)({});c((t=>(console.info(JSON.stringify({name:"checkIfShowGridWarning",value:e})),e.reduce(((e,t)=>(e[t.symbol]=!0,e)),(0,b.Z)({},t)))))}(),T.getStrategyStream&&T.getStrategyStream().subscribe((({streategy:t={}})=>{const{code:r,symbol:a,strategyStatus:i,strategyType:o}=t;"GRID"===o&&(8003===r&&S.T.emit(S.F.NOTIFICATION,e("grid-canceled",{defaultValue:"Manually placing or cancelling an order of {{symbol}} has stopped the grid.",symbol:a}),{variant:"warning"}),c((e=>(0,b.Z)((0,b.Z)({},e),{},{[a]:"NEW"===i||"WORKING"===i}))))}))}),[i,r]),{content:l[o]?P("div",null,P(u.Z,{color:"t.primary",as:"span"},e("grid-warning",{defaultValue:"{{symbol}} is in Grid Trading. Manual trading, canceling orders or closing positions, of the symbol terminates Grid Strategy.",symbol:d})),P(g.d,{href:(0,k.CN)(k.x.GRID_LEARN_URL,{locale:t,symbol:o,activeTab:"workingGrid"})})):null,onClose:f}})(),i=(()=>{const{t:e,getI18n:t,i18n:{language:r}}=(0,m.yk)(),{isLoggedIn:i}=(0,x.f0)(),{isExistFutureAccount:o}=(0,x.Pc)(),[n]=(0,v.z)(),l=(0,p.j2)(),{0:c,1:u}=(0,a.useState)(0),{0:d,1:f}=(0,a.useState)({[n]:0}),{fullName:y}=(0,s.H)(l,t),h=d[n],S=(0,a.useCallback)((()=>{f((e=>(0,b.Z)((0,b.Z)({},e),{},{[n]:0})))}),[n]);return(0,a.useEffect)((function(){o&&i&&async function(){const{data:e}=await(0,C.OM)();u(e.length),console.info(JSON.stringify({name:"checkIfShowTwapWarning",value:e})),f((t=>e.reduce(((e,t)=>(e[t.symbol]=e[t.symbol]?e[t.symbol]+1:1,e)),(0,b.Z)({},t))))}()}),[o,i]),{content:h>0?Z("div",null,e("twap-warning",{defaultValue:"{{symbol}} is running TWAP Strategy. Manual trading, canceling orders or closing positions, of the symbol will not affect the total size of the strategy will execute.",symbol:y}),Z(g.d,{href:(0,k.CN)(k.x.TWAP_LEARN_URL,{locale:r,symbol:n}),text:`${e("total-twap-orders",{defaultValue:"Total TWAP Orders"})} (${c})`})):null,onClose:S}})(),w=(0,a.useMemo)((()=>[t,r,i].filter((e=>Boolean(e.content)))),[t,r,i]);return 0===w.length?null:M(o.Z,{sx:I,height:e},M(n.v,{messages:w}))}},"96Xb":(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var a=r("/SIk"),i=r.n(a),o=r("APA6"),n=r("ZFRO"),l=r("XSQz"),s=r("9h1+"),c=r("00yk"),u=r("SJeZ"),d=r("vvaW"),m=r("uH0D"),p=i().createElement;const f={marginTop:"1px",height:"40px"},g=({type:e="umfutures"})=>{const{getI18n:t}=(0,u.yk)(),[r]=(0,s.z4)(),i=(0,c.pZ)((e=>e.announmentList)),[g,y]=(0,c.hM)(),b=(0,a.useMemo)((()=>(0,c.L0)(i,g||{},r,e).map((e=>({content:p("div",null,e.title,p(d.d,{href:(0,m.b)((null===e||void 0===e?void 0:e.path)||e.url),text:t("view-more"),target:"_blank"})),onClose:()=>(0,c.V$)(e.id,g||{},y)})))),[i,g,r,e,t,y]);return 0===b.length?null:p(o.Z,{sx:f},p(n.v,{messages:b,icon:p(l.Z,null)}))},y=i().memo(g)},"8T+8":(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var a=r("/SIk"),i=r.n(a),o=r("C4wm"),n=r("Tr4L"),l=r("My+q"),s=r("VM/Z"),c=r("TeNm"),u=r("SJeZ"),d=r("9h1+"),m=r("fi7b"),p=r("BLcC"),f=r("rdEq"),g=r("FOuV"),y=r("uH0D"),b=i().createElement;const h=(0,s.nM)(),v=i().memo((({markPrice:e,symbol:t})=>{const{formatTk:r}=(0,d.mC)(),{i18n:{language:a},t:i}=(0,u.yk)(),o=`/${a}/${g.yf}/${h?"quarterly/":""}3?index=m&contract=${t}`;return b(f.m,{tip:b(m.c,{t:i,components:{Link:b(p.Z,{target:"_blank",href:(0,y.b)(o)})},i18nKey:"futures-trade-markPrice-tip",defaults:"The current Mark Price. Click to <Link>Learn More</Link>."}),labelSx:{borderBottom:"1px solid",color:"t.third",borderBottomColor:"t.third","&:hover":{color:"primary",borderBottomColor:"primary"}}},r(e))})),x=()=>{var e;const[t]=(0,d.z4)(),r=null===(e=(0,u.CE)()[t])||void 0===e?void 0:e.markPrice;return r?b(v,{markPrice:r,symbol:t}):null};var S=i().createElement;const k=({isMore:e=!1})=>{const{t:t,i18n:{language:r}}=(0,n.$)(),a=(0,u.G3)()?(0,s.RU)():(0,s.BN)(),[i,[m,p]]=(0,d.z4)(),{trades:f}=(0,o.y)({symbol:i,stream:(0,s.l6)(!0),limit:2});let g=0;f[0]&&f[1]&&f[0].price!==f[1].price&&(g=Number(f[0].price)-Number(f[1].price)>0?-1:1);const{tickProps:y}=(0,c.k)(a),b=y?y.showPrice:0;let h,v="status-primary";switch(g){case-1:v="status-sell",h=S(l.Z,{className:`arrow-icon ${v}`});break;case 1:v="status-green",h=S(l.Z,{style:{transform:"rotate(180deg)"},className:`arrow-icon ${v}`});break;default:v="status-primary",h=S("div",{style:{width:"16px"}})}return S("div",{className:"orderbook-ticker"},S("div",{className:`contractPrice ${v}`},b,h),S("div",{className:"markPrice"},S(x,null)),S("div",null,e&&S("a",{className:"more",target:"_blank",href:`/${r}/orderbook/${m}_${p}`,rel:"noreferrer"},t("trd-orderBook-More",{defaultValue:"More"}))))},P=i().memo(k)},a2gA:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var a=r("/SIk"),i=r.n(a),o=r("71uP"),n=i().createElement;const l={maxWidth:"104px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},s=({children:e})=>n(o.Z,{sx:l},e)},IBbm:(e,t,r)=>{"use strict";r.d(t,{Q:()=>S});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("APA6"),l=r("WZQH"),s=r("8uyB"),c=r("k2tD"),u=r("71uP"),d=r("a2gA"),m=o().createElement;const p={display:"inline-block"},f=({text:e,target:t})=>m(u.Z,{as:"label",htmlFor:t,color:"t.third",sx:p},"string"===typeof e?m(d.u,null,e):e),g={marginTop:"10px",borderRadius:"4px",border:"none !important",fontSize:"14px",bg:"transInputBG",".bn-input-prefix":{display:"flex",alignItems:"center","> label":{height:"22px"}},".bn-input-suffix":{display:"flex",alignItems:"center",height:"100%",marginLeft:"4px"},"> .bn-input-status-disabled":{bg:"transparent !important","> input::placeholder":{color:"t.placeholder"}}},y={width:"100%",height:"40px",margin:"0"},b={border:"none !important",MozAppearance:"textfield","::-webkit-outer-spin-button, ::-webkit-inner-spin-button":{WebkitAppearance:"none"}};var h=o().createElement;const v=/^\d+\.?\d*|%$/,x=/^0+(?=\d)/,S=e=>{let{precision:t,maxLength:r,value:o,onChange:u,prefix:d,target:m,className:p,maxNumberValue:S}=e,k=(0,a.Z)(e,["precision","maxLength","value","onChange","prefix","target","className","maxNumberValue"]);const P=(0,i.useRef)(`${m}-${(1e3*Math.random()).toFixed(0)}`),T=!isNaN(Number(o)),C=(0,c.nH)(t),Z=e=>{let a=e;if(!v.test(a)&&""!==a||isNaN(Number(a)))return o;a=a.replace(x,"");return(0,s.N3)(a)>t&&(a=a.replace(new RegExp(`^(\\d*\\.\\d{${t}})\\d*`),"$1")),r&&a.split(".")[0].length>r&&(a=o),0===t&&(a=a.replace(".","")),S&&Number(a)>S&&(a=S.toString()),a},M=Z(o);(0,i.useEffect)((function(){M!==o&&"function"===typeof u&&u(M)}),[M,u,o]);return h(n.Z,{sx:g,className:p},h(l.Z,Object.assign({},k,{className:"order-form-input",id:P.current,variant:"inline",boxProps:y,sx:b,type:T?"number":"text",step:C,value:M,onChange:e=>{"function"===typeof u&&u(Z(e.target.value))},onKeyDown:e=>{if(69===e.keyCode||189===e.keyCode||187===e.keyCode)return e.preventDefault(),!1;38!==e.keyCode&&40!==e.keyCode||!(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)||e.preventDefault()},prefix:h(f,{text:d,target:P.current})})))}},b2zI:(e,t,r)=>{"use strict";r.d(t,{T:()=>o,U:()=>n});var a=r("EPGa"),i=r("FOuV");const o={LIMIT_PRICE:"limitPrice",SIDE:"side",UNIT_AMOUNT:"unitAmount",BUY_ORDER_AMOUNT:"buyOrderAmount",SELL_ORDER_AMOUNT:"sellOrderAmount",ACTIVATE_PRICE:"activatePrice",ACTIVATE_PRICE_WORKING_TYPE:"activatePriceWorkingType",PRICE_RATE:"priceRate",TRIGGER_PRICE:"triggerPrice",TRIGGER_PRICE_WORKING_TYPE:"triggerPriceWorkingType",STRATEGY_SIDE:"strategySide",TP_STOP_PRICE:"takeProfitStopPrice",SL_STOP_PRICE:"stopLossStopPrice",TP_STOP_PRICE_WORKING_TYPE:"takeProfitStopPriceWorkingType",SL_STOP_PRICE_WORKING_TYPE:"stopLossStopPriceWorkingType",TP_LIMIT_PRICE:"takeProfitLimitPrice",SL_LIMIT_PRICE:"stopLossLimitPrice",TP_ORDER_TYPE:"takeProfitOrderType",SL_ORDER_TYPE:"stopLossOrderType"},n={[o.SIDE]:void 0,[o.LIMIT_PRICE]:"",[o.UNIT_AMOUNT]:"",[o.BUY_ORDER_AMOUNT]:0,[o.SELL_ORDER_AMOUNT]:0,[o.TRIGGER_PRICE]:"",[o.TRIGGER_PRICE_WORKING_TYPE]:i.gu.MARK_PRICE,[o.STRATEGY_SIDE]:i.O6.LONG,[o.TP_STOP_PRICE]:"",[o.SL_STOP_PRICE]:"",[o.TP_STOP_PRICE_WORKING_TYPE]:i.gu.MARK_PRICE,[o.SL_STOP_PRICE_WORKING_TYPE]:i.gu.MARK_PRICE,[o.TP_LIMIT_PRICE]:"",[o.SL_LIMIT_PRICE]:"",[o.TP_ORDER_TYPE]:a.Jm.TAKE_PROFIT_MARKET,[o.SL_ORDER_TYPE]:a.Jm.STOP_MARKET,[o.ACTIVATE_PRICE]:"",[o.ACTIVATE_PRICE_WORKING_TYPE]:i.gu.MARK_PRICE,[o.PRICE_RATE]:""}},"3szt":(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var a=r("5vwO"),i=r("9h1+"),o=r("/SIk"),n=r.n(o),l=r("TKP4"),s=r("+yB+"),c=r("szIg"),u=r("5tIi"),d=r("VM/Z"),m=r("jgBC"),p=r("sIpC"),f=r("SJeZ"),g=r("IOB8"),y=n().createElement;function b({visible:e,onClose:t}){const r=(0,c.useDispatch)(),a=(0,i._n)(),n=(0,i.tZ)(),l=(0,c.useSelector)(g.Y),{curLeverage:s}=(0,f.rf)(),b=(0,f.G3)(),h=(0,f.$J)(),[v]=(0,i.z4)(),x=(0,i.j2)(),S=(0,o.useCallback)((e=>{r.leverage.updateCurrentLeverage({symbol:v,leverage:e}),m.TB.emit(m.FP.SET_SLIDER_AMOUNT,0)}),[r.leverage,v]),k=(0,m.CN)(b?d.l8.CM_LEVERAGE_MARGIN:d.l8.UM_LEVERAGE_MARGIN,{locale:n}),P=(0,m.CN)(d.O8,{locale:n});return y(u.Z,{visible:e,symbol:v,isLoggedIn:a,lng:n,brackets:l,leverage:s,positions:h,ticker:x,onChangeLeverage:S,onClose:t,toLogin:()=>(0,p.G)(n),enableErrorMsgIntercept:!0,tradingRuleLink:k,positionLimitEnargeLink:P,liquidationInfoLink:(0,m.CN)(d.Wh.LIQ_PRICE,{locale:n})})}var h=r("9Qap"),v=n().createElement;const x=({title:e,visible:t,onClose:r})=>{const{isLoggedIn:a}=(0,i.f0)(),{preOrders:n}=(0,i.E)(),l=(0,f.F)(),[s]=(0,i.z4)(),{marginType:u}=(0,f.se)(),d=(0,c.useDispatch)(),m=(0,o.useCallback)((e=>{d.marginType.updateState(e)}),[]);return v(h.Z,{title:e,marginType:u,openOrders:n,symbol:s,validPositionArr:l,toLogin:p.G,visible:t,onClose:r,isLoggedIn:a,onChange:m,enableErrorMsgIntercept:!0})},S=(0,o.memo)(x);var k=n().createElement;const P=({sx:e={},labelSx:t={},className:r})=>{var a;const c="rtl"===(0,i.gm)(),{getI18n:u}=(0,f.yk)(),[d]=(0,i.z4)(),{contractType:m}=(0,i.j2)(),{curLeverage:p=20}=(0,f.rf)(),{marginType:g="CROSSED"}=(0,f.se)(),{0:y,1:h}=(0,o.useState)(!1),{0:v,1:x}=(0,o.useState)(!1);let P;const T=d.split("_");var C;(P=P=`${null===T||void 0===T?void 0:T[0]} ${"PERPETUAL"===m?u("inversePerpetual",{defaultValue:"Perpetual"}):(null===T||void 0===T||null===(a=T[1])||void 0===a?void 0:a.substr(2))||""}`,c)&&(P=P=`${"PERPETUAL"===m?u("perpetual",{defaultValue:"Perpetual"}):(null===T||void 0===T||null===(C=T[1])||void 0===C?void 0:C.substr(2))||""}${null===T||void 0===T?void 0:T[0]}`);return k(n().Fragment,null,k(l.Z,{sx:e,className:r},k(s.Z,{title:"CROSSED"===g?u("header-Cross",{defaultValue:"Cross"}):u("headerIsolated",{defaultValue:"Isolated"}),as:"a",onClick:()=>{h(!0)},"data-testid":"Cross",sx:t},"CROSSED"===g?u("header-Cross",{defaultValue:"Cross"}):u("headerIsolated",{defaultValue:"Isolated"})),k(s.Z,{as:"a",onClick:()=>x(!0),"data-testid":"20x",sx:t},`${p}x`)),y&&k(S,{title:`${P} ${u("MarginModeTitle",{defaultValue:"Margin Mode"})}`,visible:!0,onClose:()=>{h(!1)}}),v&&k(b,{visible:!0,onClose:()=>x(!1)}))},T=n().memo(P);var C=n().createElement;const Z={flex:1,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"64px",height:"24px",fontSize:"xs",lineHeight:"24px",padding:0,mr:"5px",borderRadius:"2px",textAlign:"center",cursor:"pointer",display:"inline-block",px:"4px",py:0,bg:"line",":hover":{bg:"bg3",borderColor:"bg3"},a:{color:"t.primary"}},M={ml:"8px",mr:"20px",minWidth:"auto"};function I({sx:e={},labelSx:t={},className:r}){const{isMobile:n}=(0,i.Fs)(),l=(0,o.useMemo)((()=>(0,a.Z)((0,a.Z)({},M),e)),[e]),s=(0,o.useMemo)((()=>(0,a.Z)((0,a.Z)({},Z),t)),[t]);return C(T,{sx:l,labelSx:s,className:r})}},QKUR:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("OLE6"),s=r("APA6"),c=r("9h1+"),u=r("U0yl"),d=r("SJeZ"),m=r("/MJE"),p=o().createElement;const f={pt:["24px","0px"],px:["16px","0px"]},g=()=>{const{getI18n:e}=(0,u.ZK)("trd-futures","trade-ui"),{ref:t}=(0,c.lr)(),r=(0,n.useDispatch)(),{setMessageInfo:i}=(0,c.YT)(),o=(0,c.Pc)(),{value:g}=(0,d.f3)();return p(s.Z,{sx:f},p(l.Z,{refCode:t,afterOpenFuturesAccount:async()=>{i({message:e("openAccout-successOpen",{defaultValue:"open success"}),variant:"success"}),m.Z.updateUserInfo((0,a.Z)((0,a.Z)({},o),{},{isExistFutureAccount:!0})),r.userCenter.updateState({userInfo:(0,a.Z)((0,a.Z)({},o),{},{isExistFutureAccount:!0})}),await r.preference.getPositionMode()},canUseFutureAgentCode:g,expand:!0}))},y=o().memo(g)},hfnl:(e,t,r)=>{"use strict";r.d(t,{Z:()=>N});var a=r("/SIk"),i=r.n(a),o=r("szIg"),n=r("fi7b"),l=r("O94r"),s=r.n(l),c=r("APA6"),u=r("71uP"),d=r("BLcC"),m=r("TKP4"),p=r("w2aK"),f=r("wr3m"),g=r("c4mN"),y=r("Rdst"),b=r("9h1+"),h=r("SJeZ"),v=r("c5N6"),x=r("rdEq"),S=r("R+VW"),k=r("VM/Z"),P=r("uH0D");const T={justifyContent:"space-between",borderTop:"1px solid",borderTopColor:"newLine",mt:"8px",".asset-label":{display:"flex",alignItems:"center",color:"t.primary"}},C={cursor:"pointer"},Z={width:"348px",maxWidth:"348px",m:0,".asset-block":{mb:"24px",".asset-title":{fontSize:"14px",lineHeight:"20px",mb:"8px"},".asset-desc":{fontSize:"12px",lineHeight:"16px",whiteSpace:"pre-line"}}},M={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",".asset-option":{padding:"6px 16px",color:"t.primary","&:hover":{bg:"line"},"&.active":{color:"t.yellow"},fontSize:"14px",lineHeight:"20px"}};var I=i().createElement;const w=i().memo((()=>{const{getI18n:e}=(0,h.yk)(),{t:t}=(0,h.$G)(),r=(0,b.tZ)();return I(i().Fragment,null,I(c.Z,{className:"asset-block"},I(c.Z,{className:"asset-title"},e("singleAsset",{defaultValue:"Single-Asset Mode"})),I(u.Z,{className:"asset-desc"},e("singleAssetDes",{defaultValue:"Supports USD\u24c8-M Futures trading by only using the single margin asset of the symbol. \n PNL of the same margin asset positions can be offset. \n Supports Cross Margin Mode and Isolated Margin Mode."}))),I(c.Z,{className:"asset-block"},I(c.Z,{className:"asset-title"},e("multiAssets",{defaultValue:"Multi-Assets Mode"})),I(u.Z,{className:"asset-desc"},e("multiAssetsDes",{defaultValue:"USD\u24c8-M Futures trading across multiple margin assets. \n PNL can be offset among the different margin asset positions. \n Only supports Cross Margin Mode."}))),I(c.Z,null,I(n.c,{t:t,i18nKey:(0,h.Gv)("assetModeDes"),defaults:"<text>Multi-Assets Mode only applies to USD\u24c8-M Futures. Before activating Multi-Assets Mode, please read the <jump>{{guide}}</jump> in detail to better manage USD\u24c8-M Futures account risk accordingly when using Multi-Assets Mode.</text>",components:{text:I(u.Z,{fontSize:"12px",lineHeight:"16px"}),jump:I(d.Z,{href:(0,P.b)(`/${r}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`),sx:{mt:"0 !important",display:"inline"},target:"_blank"})},values:{guide:e("guide",{defaultValue:"guide"})}})))})),E=(0,a.forwardRef)((({},e)=>{const t=(0,o.useSelector)((e=>e.position.positionMap));return(0,a.useImperativeHandle)(e,(()=>({checkHasIsolated:()=>Object.values(t).some((e=>e.isolated))}))),null})),A=({sx:e={}})=>{var t;const{assetMode:r=!1}=(0,h.F7)(),{getI18n:i}=(0,h.yk)(),n=(0,v.useConfirmStore)((e=>e.setVisible)),l=(0,v.useConfirmStore)((e=>e.setAssetMode)),{enqueueNotification:d}=(0,f.Z)(),b=(0,a.useRef)(null),P=[{label:i("singleAsset",{defaultValue:"Single-Asset Mode"}),value:!1},{label:i("multiAssets",{defaultValue:"Multi-Assets Mode"}),value:!0}],A=(0,o.useDispatch)(),N=(0,a.useCallback)((e=>{var t;return(null===b||void 0===b||null===(t=b.current)||void 0===t?void 0:t.checkHasIsolated())?(n(!0),void l(e)):A.preference.changeAssetMode({joinMargin:e}).then((t=>{const{success:r,code:a}=t;r?d({header:i("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:i("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"}):a===k.gU&&!e&&(0,S.n)()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[A.preference]);return I(m.Z,{__css:T,sx:e},I(m.Z,{alignItems:"center",mt:"6px"},I(u.Z,{color:"t.third"},i("assetMode",{defaultValue:"Asset Mode"})),I(x.m,{tip:I(w,null),hideUnderLine:!0,enablePortal:!0,tipSx:Z,labelSx:C},I(g.Z,{size:16,ml:"6px"}))),I(c.Z,{mt:"6px"},I(p.ZP,{trigger:"hover",enablePortal:!0,overlay:I(c.Z,{sx:M},P.map((e=>{const{label:t,value:a}=e||{};return I("div",{className:s()({"asset-option":!0,active:a===r}),key:t,onClick:()=>N(a)},t)})))},I("div",{className:"asset-label"},null===(t=P.find((e=>e.value===r)))||void 0===t?void 0:t.label,I(y.Z,{ml:"4px",color:"t.third",size:16})))),I(E,{ref:b}))},N=i().memo(A)},"f09/":(e,t,r)=>{"use strict";r.d(t,{Z:()=>he});var a=r("/SIk"),i=r.n(a),o=r("szIg"),n=r("TKP4"),l=r("71uP"),s=r("APA6"),c=r("w2aK"),u=r("BLcC"),d=r("P8Ci"),m=r("Rdst"),p=r("ESdd"),f=r("cm/A"),g=r("fi7b"),y=r("EZOS"),b=r("Ygfp"),h=r.n(b),v=r("jgBC"),x=r("9h1+"),S=r("cIsc"),k=r("uH0D"),P=r("SJeZ"),T=i().createElement;const C={flexDirection:"column","& .content":{mt:["sm","md"]},"& .grid":{display:"grid",gridTemplateColumns:"repeat(3, 33.33%)",gridTemplateRows:"repeat(3, 33.33%)"},"& .rateList":{mb:"sm",maxHeight:["60%","180px"],overflowY:"auto"},"& .row, & .cation":{pb:"xs"},"& .row:last-of-type":{pb:0},"& .cation":{color:"t.third"},"& .row":{color:"t.primary"},"& .updateTime":{pb:"sm",mb:"sm",borderBottom:"1px solid",borderColor:"t.secondary"},"& .info":{color:"t.third",fontSize:0,lineHeight:"16px","& > a":{color:"t.yellow"}},"& .link":{mt:"xs"}},Z=({children:e})=>T(l.Z,{variant:"body2"},e),M=({visible:e,onClose:t})=>{const r=(0,x.tZ)(),{t:i}=(0,P.$G)(),{getI18n:o}=(0,P.yk)(),s=(()=>{const e=(0,P.G8)(),t=(0,P.KQ)();return(0,a.useMemo)((()=>Object.entries(e).filter((([e])=>{var r;return null===(r=t[e])||void 0===r?void 0:r.marginAvailable})).map((([,e])=>e))),[e,t])})();return T(S.Z,{open:e,onCloseIconClick:t,sx:{width:["100%","488px"]}},T(n.Z,{__css:C},T(l.Z,{variant:"title6",color:"t.primary"},o("joinMargin-MultiAssetsExchangeRate",{defaultValue:"Multi-Assets Exchange Rate"})),T("div",{className:"content"},T("div",{className:"grid cation"},T(Z,null,o("joinMargin-Pair",{defaultValue:"Pair"})),T(Z,null,o("joinMargin-AskRate",{defaultValue:"Ask Rate"})),T(Z,null,o("joinMargin-BidRate",{defaultValue:"Bid Rate"}))),T("div",{className:"rateList"},s.map((({symbol:e="",askRate:t=0,bidRate:r=0})=>T("div",{key:e,className:"grid row"},T(Z,null,e.slice(0,-3),"/",e.slice(-3)),T(Z,null,(0,f.GW)(t,4)),T(Z,null,(0,f.GW)(r,4)))))),T("div",{className:"info updateTime"},"\xb7"," ",o("joinMargin-UpdateTime",{defaultValue:"Update Time"}),": ",s[0]?(0,v.vs)(s[0].time||0):""," UTC"),T("div",{className:"info"},o("joinMargin-ExchangeRateTip",{defaultValue:"USD valuation of the Margin assets in the USD\u24c8-M Futures account are calculated according to the real-time exchange rate under Multi-Assets mode, including the available balance for orders and withdrawals."})),T("div",{className:"info link"},T(g.c,{t:i,i18nKey:(0,P.Gv)("joinMargin-MultiAssetsCalcDetails"),components:{jump:T("a",{href:(0,k.b)(`/${r}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`),target:"_blank",rel:"noreferrer"})},defaults:"For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump>.",values:{guideLink:o("joinMargin-guidLink")}})))))},I=i().memo(M);var w=r("5kFy"),E=r("8uyB"),A=r("VM/Z"),N=r("rdEq"),O=r("GpFh"),R=r("Zl10"),L=r.n(R),V=r("EgA9"),F=r("vEQk"),D=r("LBXE"),_=r("kf0l"),B=r("LcTY"),z=r("S24M"),K=r("hfnl"),q=r("z4Ks"),W=r("FOuV"),U=i().createElement;const j=(0,a.forwardRef)(((e,t)=>{let{children:r}=e,a=(0,O.Z)(e,["children"]);return U(l.Z,Object.assign({variant:"labelButton.default",sx:{flex:1,mr:"xs",py:"4px",color:"t.fifth",lineHeight:"16px",textDecoration:"none",":last-of-type":{mr:"0"}},ref:t},a),r)})),$=({balance:e,onChange:t,curAsset:r})=>{const a=Object.values(e);return U(s.Z,{sx:{ml:"auto"}},U(c.ZP,{trigger:"hover",overlay:U(s.Z,{variant:"dropdown",sx:{overflowY:"auto",maxHeight:"193px"}},a.map((e=>{const{asset:r}=e||{asset:""};return U(s.Z,{key:r,sx:{px:"sm",pt:"12px",pb:"6px",bg:"control",cursor:"pointer",":last-of-type":{pt:"6px",pb:"12px"}},onClick:()=>{t(r)}},U(l.Z,{color:"t.primary",key:r,value:r,sx:{":hover":{color:"primary"}}},r))})))},U(n.Z,{as:"span",sx:{fontWeight:"400",color:"t.grey300",borderBottom:"2px solid",cursor:"pointer",borderBottomColor:"transparent",alignItems:"center",":hover":{svg:{transform:"rotate(180deg)"}}}},r,U(V.Z,{color:"#929AA5",size:16}))))},H=i().memo((({getFutI18n:e,curAsset:t,balance:r,setCurAsset:a})=>{const i=(0,o.useSelector)((e=>{var t,r;return(null===e||void 0===e||null===(t=e.setting)||void 0===t||null===(r=t.USDTFutures)||void 0===r?void 0:r.layout)||!1})),s=(0,P.C3)()===A.UW||i===A.UW;return U(n.Z,{as:"span",sx:{justifyContent:"space-between"}},U(l.Z,{sx:{fontSize:"16px",fontWeight:"600",color:"t.primary"},as:"span"},e("assets",{defaultValue:"Assets"})),U($,{curAsset:t,balance:r,onChange:a}),s&&U(F.Z,{sx:{color:"t.yellow200",border:"1px solid",borderColor:"t.yellow200",cursor:"pointer",borderRadius:"2px",fontSize:"16px",ml:"16px"},onClick:()=>{B.T.emit(B.F.OPEN_TRANSFER_MODAL,t)}}))}),(function(e,t){const{curAsset:r,balance:a,setCurAsset:i}=e,{curAsset:o,balance:n,setCurAsset:l}=t,s=Object.keys(a).join(),c=Object.keys(n).join();return r===o&&i===l&&s===c})),G=i().memo((({getFutI18n:e,futUrlConfig:t,locale:r,base:i,curAsset:o})=>{const l=(0,a.useRef)(null);return U(n.Z,{sx:{justifyContent:"space-between",pt:"sm",mt:"14px"}},U(j,{as:"a",onClick:()=>{let e=(0,E.CN)(t.BUYING_URL,{locale:r,crypto:o});e=(0,E.CN)(t.BUYING_URL_ELECTRON,{crypto:o}),window.open(e)}},e("buy-crypto",{defaultValue:"Buy Crypto"})),U(j,{as:"a",ref:l,onClick:()=>B.T.emit(B.F.OPEN_CONVERT_MODAL),"data-testid":"orderform-convert-button"},e("convert",{defaultValue:"Convert"})),U(j,{as:"a",onClick:()=>B.T.emit(B.F.OPEN_TRANSFER_MODAL,o),"data-testid":"orderform-transfer-button"},e("transfer",{defaultValue:"Transfer"})))})),J=i().memo((({marginPrecision:e,marginAsset:t})=>{const r=(0,P.Gb)(t);return U(l.Z,{color:"t.fifth"},(0,f.uf)(r||0,e)," ",t)})),Y=i().memo((({isEmptyBalance:e,loading:t,getFutI18n:r,walletBalance:o,marginPrecision:c,quoteAsset:u,bnbWalletBalance:d,locale:m})=>{const p=(0,a.useMemo)((()=>U(n.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},U(N.m,{tip:r("tradeHistory-positions-walletBalanceTip",{defaultValue:""})},r("tradeHistory-positions-walletBalanceLabel",{defaultValue:"Wallet Balance"})),U(l.Z,{color:"t.fifth"},(0,f.GW)(o||0,c,!0)," ",u))),[r,u,c,o]);return U(i().Fragment,null,!e&&!t&&U(s.Z,{mt:"16px"},p,U(n.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},U(N.m,{tip:r("tradeHistory-positions-unrealizedPnlTip",{defaultValue:""})},r("tradeHistory-positions-unrealizedPNLLabel",{defaultValue:"Unrealized PNL"})),U(J,{marginPrecision:c,marginAsset:u}))),e&&!t&&U(D.Z,{showIcon:!0,mt:"12px",flexDirection:"row",variant:"warning"},r("TransferAssetToTrading",{defaultValue:"Please transfer assets into futures account to start trading."})))})),Q=({mt:e="50px",noButtons:t})=>{var r,i;const{getI18n:n,i18n:{language:l}}=(0,P.yk)(),c=(0,x._n)(),{assetMode:u=!1}=(0,P.F7)(),[,[d]]=(0,x.z4)(),m=(0,o.useDispatch)(),p=(0,x.Oh)(),f=(0,P.KQ)(),g=(0,P.Kc)("loading"),[,[,y]]=(0,x.z4)(),{0:b,1:h}=(0,a.useState)(y),{isMobile:v}=(0,x.Fs)(),S=Object.values(f),k=S.every((({walletBalance:e})=>!e)),T=!u&&S.some((({walletBalance:e})=>e<0)),[C,Z]=L()(S,(({asset:e})=>"BUSD"===e||"USDT"===e)),M=u&&C.some((({walletBalance:e})=>e<0))&&S.every((({walletBalance:e})=>e<=0));return(0,a.useEffect)((()=>{h(y),m.transferAssets.updateState({transferAsset:y})}),[y,m]),v?null:c?U(s.Z,{mt:e,fontSize:"12px"},U(H,{getFutI18n:n,curAsset:b,balance:f,setCurAsset:h}),t||!A.Jg&&U(G,{getFutI18n:n,futUrlConfig:W.x,locale:l,base:d,curAsset:b}),(T||M)&&U(q.Z,null),U(_.Z,{isJoinMargin:u,walletBalanceList:S,autoAssetExchangeInfo:p,onTransfer:()=>B.T.emit(B.F.OPEN_TRANSFER_MODAL,b),onConvert:()=>B.T.emit(B.F.OPEN_CONVERT_MODAL),pageName:"um_trading",sensorsTrack:z.j}),U(Y,{isEmptyBalance:k,loading:g,getFutI18n:n,walletBalance:null===(r=f[b])||void 0===r?void 0:r.walletBalance,marginPrecision:4,quoteAsset:b,bnbWalletBalance:null===(i=f.BNB)||void 0===i?void 0:i.walletBalance,locale:l}),!k&&!g&&U(K.Z,{sx:{flexDirection:"column"}})):null},X=i().memo(Q);var ee=r("5vwO"),te=i().createElement;const re=(0,a.forwardRef)(((e,t)=>{let{children:r}=e,a=(0,O.Z)(e,["children"]);return te(l.Z,Object.assign({variant:"labelButton.default",sx:{flex:1,mr:"xs",py:"4px",color:"t.fifth",lineHeight:"16px",textDecoration:"none",":last-of-type":{mr:"0"}},ref:t},a),r)})),ae=({balance:e,onChange:t,curAsset:r,sx:a={}})=>{const i=Object.values(e);return te(s.Z,{sx:(0,ee.Z)({ml:"auto"},a)},te(c.ZP,{trigger:"hover",overlay:te(s.Z,{variant:"dropdown",sx:{overflowY:"auto",maxHeight:"193px"}},i.map((e=>{const{asset:r}=e||{};return te(s.Z,{key:r,sx:{px:"sm",pt:"12px",pb:"6px",bg:"control",cursor:"pointer",":last-of-type":{pt:"6px",pb:"12px"}},onClick:()=>{t(r)}},te(l.Z,{color:"t.primary",key:r,value:r,sx:{":hover":{color:"primary"}}},r))})))},te(n.Z,{as:"span",sx:{fontWeight:"400",color:"t.grey300",borderBottom:"2px solid",cursor:"pointer",borderBottomColor:"transparent",alignItems:"center",":hover":{svg:{transform:"rotate(180deg)"}}}},r,te(V.Z,{color:"#929AA5",size:16}))))},ie=i().memo((({getFutI18n:e,curAsset:t,balance:r,setCurAsset:a})=>{const i=(0,o.useSelector)((e=>{var t,r;return(null===e||void 0===e||null===(t=e.setting)||void 0===t||null===(r=t.CoinFutures)||void 0===r?void 0:r.layout)||!1})),s=(0,P.C3)()===A.UW||i===A.UW;return te(n.Z,{as:"span",sx:{justifyContent:"space-between"}},te(l.Z,{sx:{fontSize:"16px",fontWeight:"600",color:"t.primary"},as:"span"},e("assets",{defaultValue:"Assets"})),te(ae,{curAsset:t,balance:r,onChange:a}),s&&te(F.Z,{sx:{color:"t.yellow200",border:"1px solid",borderColor:"t.yellow200",cursor:"pointer",borderRadius:"2px",fontSize:"16px",ml:"16px"},onClick:()=>{B.T.emit(B.F.OPEN_TRANSFER_MODAL,t)}}))}),(function(e,t){const{curAsset:r,balance:a,setCurAsset:i}=e,{curAsset:o,balance:n,setCurAsset:l}=t,s=Object.keys(a).join(),c=Object.keys(n).join();return r===o&&i===l&&s===c})),oe=i().memo((({getFutI18n:e,futUrlConfig:t,locale:r,curAsset:i})=>{const o=(0,a.useRef)(null);return te(n.Z,{sx:{justifyContent:"space-between",pt:"sm",mt:"14px"}},te(re,{as:"a",onClick:()=>{let e=(0,E.CN)(t.BUYING_URL,{locale:r,crypto:i});e=(0,E.CN)(t.BUYING_URL_ELECTRON,{crypto:i}),window.open(e)}},e("buy-crypto",{defaultValue:"Buy Crypto"})),te(re,{as:"a",ref:o,onClick:()=>B.T.emit(B.F.OPEN_CONVERT_MODAL),"data-testid":"orderform-convert-button"},e("convert",{defaultValue:"Convert"})),te(re,{as:"a",onClick:()=>B.T.emit(B.F.OPEN_TRANSFER_MODAL,i),"data-testid":"orderform-transfer-button"},e("transfer",{defaultValue:"Transfer"})))})),ne=i().memo((({marginPrecision:e,marginAsset:t})=>{const r=(0,P.w2)(t);return te(l.Z,{color:"t.fifth"},(0,f.uf)(r||0,e)," ",t)})),le=i().memo((({isEmptyBalance:e,loading:t,getFutI18n:r,walletBalance:a,marginPrecision:o,curAsset:c})=>te(i().Fragment,null,!e&&!t&&te(s.Z,{mt:"16px"},te(n.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},te(N.m,{tip:r("tradeHistory-positions-walletBalanceTip",{defaultValue:""})},r("tradeHistory-positions-walletBalanceLabel",{defaultValue:"Wallet Balance"})),te(l.Z,{color:"t.fifth"},(0,f.GW)(a||0,o,!0)," ",c)),te(n.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},te(N.m,{tip:r("tradeHistory-positions-unrealizedPnlTip",{defaultValue:""})},r("tradeHistory-positions-unrealizedPNLLabel",{defaultValue:"Unrealized PNL"})),te(ne,{marginPrecision:o,marginAsset:c}))),e&&!t&&te(D.Z,{showIcon:!0,mt:"12px",flexDirection:"row",variant:"warning"},r("TransferAssetToTrading",{defaultValue:"Please transfer assets into futures account to start trading."}))))),se=({mt:e="50px",noButtons:t})=>{var r;const{getI18n:i,i18n:{language:n}}=(0,P.yk)(),l=(0,x._n)(),[,[c]]=(0,x.z4)(),u=(0,o.useDispatch)(),d=(0,P.KQ)(),m=(0,P.Kc)("loading"),[,[p]]=(0,x.z4)(),{0:f,1:g}=(0,a.useState)(p),{isMobile:y}=(0,x.Fs)(),b=Object.values(d).every((({walletBalance:e})=>!e)),h=Object.values(d).some((({walletBalance:e})=>e<0));return(0,a.useEffect)((()=>{g(p),u.transferAssets.updateState({transferAsset:p})}),[p,u]),y?null:l?te(s.Z,{mt:e,fontSize:"12px"},te(ie,{getFutI18n:i,curAsset:f,balance:d,setCurAsset:g}),t||!A.Jg&&te(oe,{getFutI18n:i,futUrlConfig:W.x,locale:n,base:c,curAsset:f}),h&&te(q.Z,null),te(le,{isEmptyBalance:b,loading:m,getFutI18n:i,walletBalance:null===(r=d[f])||void 0===r?void 0:r.walletBalance,marginPrecision:4,curAsset:f})):null},ce=i().memo(se);var ue=i().createElement;const de=(0,A.nM)(),me=i().memo((({getFutI18n:e,handleShowAssets:t})=>{const{assetMode:r}=(0,P.F7)();return ue(n.Z,{as:"span",sx:{justifyContent:"space-between",alignItems:"center"}},ue(l.Z,{sx:{fontSize:"14px",fontWeight:"600",color:"t.primary",flex:"0 0 auto"},as:"span"},e("tradeHistory-positions-marginRatioLabel",{defaultValue:"Assets"})),!de&&ue(s.Z,{sx:{color:"primary",bg:"dialog.panelBg",fontSize:0,lineHeight:"24px",borderRadius:"40px",px:"8px",cursor:"pointer",ml:"auto",mr:"14px"},onClick:()=>v.TB.emit(v.FP.SHOW_PREFERENCE_PANEL,"am")},r?e("joinMargin-multi-assets",{defaultValue:"Multi-Assets"}):e("joinMargin-single-asset",{defaultValue:"Single-Asset"})),ue(d.Z,{sx:{transform:"rotate(180deg)",cursor:"pointer"},color:"t.grey500",size:20,onClick:t}))})),pe=({marginRatioList:e,onChange:t,marginRatioLabel:r})=>ue(s.Z,null,ue(c.ZP,{trigger:"hover",overlay:e.map((e=>ue(s.Z,{key:e.key,sx:{px:"sm",maxWidth:"150px",bg:"control",color:"t.primary",cursor:"pointer",":hover":{color:"primary"},":last-of-type":{pt:"6px",pb:"12px"},div:{maxWidth:"100%"}},onClick:()=>{t(e.key)}},ue(l.Z,{key:e.key,value:e.key,sx:{display:"inline-block",maxWidth:"80px",color:"t.priamry"}},e.marginRatioLabel))))},ue(n.Z,{as:"span",sx:{width:"auto",maxWidth:"138px",textAlign:"right",fontWeight:"400",color:"t.grey300",cursor:"pointer",alignItems:"center",":hover":{svg:{transform:"rotate(180deg)"}}}},r,ue(m.Z,{color:"t.grey300",size:24})))),fe=i().memo((({isRtl:e,isJoinMargin:t,marginRatioSelector:r,hasOptions:a,getFutI18n:i,riskRatio:c,maintenanceMargin:d,marginBalance:m,marginAsset:y,marginPrecision:b})=>{const h=(0,x.tZ)(),{t:v}=(0,P.$G)(),{visible:S,onOpen:T,onClose:C}=(0,P.yV)(),Z=ue(u.Z,{href:(0,k.b)(`/${h}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`),target:"_blank",variant:"secondaryLink",color:"t.yellow"}),M=ue(l.Z,{variant:"addressLink",as:"span",sx:{color:"t.yellow",cursor:"pointer",fontSize:"12px"},onClick:T}),A=t?i("joinMargin-accountMarginRatioTip",{defaultValue:"Account Margin Ratio = Account Maintenance Margin / Account Equity"}):i("tradeHistory-positions-marginRatioTip",{defaultValue:""}),O=t?i("joinMargin-accountMarginRatioLabel",{defaultValue:"Account Margin Ratio"}):i("tradeHistory-positions-marginRatioLabel",{defaultValue:"Margin Ratio"}),R=t?ue(g.c,{t:v,i18nKey:(0,P.Gv)("joinMargin-accountMaintenanceMarginTipV2"),components:{jump:Z,showRate:M},defaults:"The sum of USD value of all cross positions maintenance margin in the USD\u24c8-M Futures. For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump> and <showRate>{{exchangeRate}}</showRate>.",values:{guideLink:i("joinMargin-guidLink",{defaultValue:"Multi-Assets Mode guide"}),exchangeRate:i("joinMargin-ExchangeRate",{defaultValue:"Real-time Exchange Rate"})}}):i("tradeHistory-positions-maintenanceMarginTip",{defaultValue:"The minimum amount of margin balance required to keep your open positions."}),L=t?i("joinMargin-accountMaintenanceMarginLabel",{defaultValue:"Account Maintenance Margin"}):i("tradeHistory-positions-maintenanceMarginLabel",{defaultValue:"Maintenance Margin"}),V=t?ue(g.c,{t:v,i18nKey:(0,P.Gv)("joinMargin-accountEquityTipV2"),components:{jump:Z,showRate:M},defaults:"The sum of USD value of all margin balance in the USD\u24c8-M Futures. For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump> and <showRate>{{exchangeRate}}</showRate>.",values:{guideLink:i("joinMargin-guidLink",{defaultValue:"Multi-Assets Mode guide"}),exchangeRate:i("joinMargin-ExchangeRate",{defaultValue:"Real-time Exchange Rate"})}}):i("tradeHistory-positions-marginBalanceTip",{defaultValue:""}),F=t?i("joinMargin-accountEquityLabel",{defaultValue:"Account Equity"}):i("tradeHistory-positions-marginBalanceLabel",{defaultValue:"Margin Balance"}),D=(0,o.useSelector)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),_=(0,o.useSelector)((e=>e.loading.effects.preference.getAssetMode)),B=D||_;return ue(s.Z,{mt:"8px",sx:{borderBottom:"1px solid",borderColor:"t.grey700"}},ue(n.Z,{justifyContent:"space-between",alignItems:"center",lineHeight:"21px"},!t&&a?r:ue(N.m,{tip:A},O),ue(n.Z,{justifyContent:"flex-end",alignItems:"center"},ue(w.Z,{riskRatio:c}),ue(l.Z,{fontSize:3,color:"buy",ml:"8px"},(0,E.JX)(B?0:c,2)||"0.00","%"))),ue(n.Z,{sx:{marginTop:"8px",lineHeight:"16px"},justifyContent:"space-between"},ue(N.m,{tip:R},L),ue(n.Z,{flexDirection:e?"row-reverse":null},ue(l.Z,{color:"t.fifth"},(0,f.uf)(B?0:d,b)),"\xa0",ue(l.Z,{color:"t.fifth"},y))),ue(n.Z,{sx:{marginTop:"8px",lineHeight:"16px",paddingBottom:"11px"},justifyContent:"space-between"},ue(n.Z,null,ue(N.m,{tip:V},F),t&&ue(p.Z,{ml:1,size:2,onClick:T,sx:{cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}}})),ue(n.Z,{flexDirection:e?"row-reverse":void 0},ue(l.Z,{color:"t.fifth"},(0,f.GW)(B?0:m,Number(b),!0)),"\xa0",ue(l.Z,{color:"t.fifth"},y))),ue(I,{visible:S,onClose:C}))})),ge=({handleShowAssets:e})=>{var t;const{getI18n:r}=(0,P.yk)(),i=(0,x._n)(),[o]=(0,x.z4)(),{marginAsset:n}=(0,x.j2)(),l=(0,P.KQ)(),c="rtl"===(0,x.gm)(),{0:u,1:d}=(0,a.useState)(""),{positionMode:m=!1}=(0,P.F7)(),p=(0,P.m)(r,m,de),f=(0,y.Z)(p)||[],g=p.find((e=>e.key===u)),{riskRatio:b=0,marginBalance:v=(null===(t=l[n])||void 0===t?void 0:t.walletBalance)||0,maintenanceMargin:S=0,marginAsset:k=n,marginRatioLabel:T}=g||{},C=e=>{let t;p.length>0&&(t=p.find((e=>e.symbols.some((e=>e===o)))),e||t||(t=p[0]||{}),t&&d(t.key))};(0,a.useEffect)((()=>{g||C()}),[p.length]),(0,a.useEffect)((()=>{const e=h()(p,f,"key").find((e=>e.symbols.some((e=>e===o))));e&&d(e.key)}),[p.length]),(0,a.useEffect)((()=>{C(!0)}),[o]);const Z=Boolean(null===p||void 0===p?void 0:p.length);return i?ue("div",null,ue(s.Z,{fontSize:"12px",display:["none","block"]},ue(me,{getFutI18n:r,handleShowAssets:e}),ue(fe,{marginRatioSelector:ue(pe,{marginRatioLabel:T,marginRatioList:p,onChange:d}),hasOptions:Z,isRtl:c,isJoinMargin:!1,getFutI18n:r,riskRatio:b,maintenanceMargin:S,marginBalance:v,marginAsset:k,marginPrecision:4})),ue(de?ce:X,{mt:"12px",noButtons:!0})):null},ye=({handleShowAssets:e})=>{const t=(0,x._n)(),{getI18n:r}=(0,P.yk)(),a="rtl"===(0,x.gm)(),{riskRatio:i=0,marginBalance:o,maintenanceMargin:n}=(0,P.Nx)(de),l=de?4:2;return t?ue("div",null,ue(s.Z,{fontSize:"12px",display:["none","block"]},ue(me,{getFutI18n:r,handleShowAssets:e}),ue(fe,{isRtl:a,isJoinMargin:!0,getFutI18n:r,riskRatio:i,maintenanceMargin:n,marginBalance:o,marginAsset:"USD",marginPrecision:l})),ue(de?ce:X,{mt:"12px",noButtons:!0})):null},be=({handleShowAssets:e})=>{const{assetMode:t}=(0,P.F7)();return ue(t?ye:ge,{handleShowAssets:e})},he=i().memo(be)},"+yB+":(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("5vwO"),i=r("GpFh"),o=r("71uP"),n=r("/SIk"),l=r.n(n)().createElement;const s=e=>{let{children:t,sx:r}=e,n=(0,i.Z)(e,["children","sx"]);return l(o.Z,Object.assign({sx:(0,a.Z)({mr:"xs",py:"4px",flex:"1",fontSize:[0],lineHeight:"16px",color:"t.primary",fontWeight:"500",cursor:"pointer",textAlign:"center",borderRadius:"4px",bg:"orderformBtn.bg",textDecoration:"none",":last-of-type":{mr:"0"},":hover":{bg:"t.secondary",borderColor:"t.secondary"}},r)},n),t)}},z4Ks:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("NAP3"),l=r("71uP"),s=r("VM/Z"),c=r("SJeZ"),u=r("S24M"),d=o().createElement;const m=(0,s.nM)(),p=o().memo((()=>{const{getI18n:e}=(0,c.yk)(),{assetMode:t}=(0,c.F7)(),r=(0,i.useCallback)(((e,t)=>{(0,u.j)(e,(0,a.Z)({module:"asset",df_source:m?"cm":"um",pageName:m?"cm_trading":"um_trading"},t))}),[]),o=(0,i.useCallback)((()=>{r("$WebClick",{$element_id:"negativeBalance_entry"}),n.ee.emit("SHOW_NEG_BALANCE_CLEAR_MODAL",{isJoinMargin:t,isolated:!1,isCM:m,sensorsTrack:r})}),[t,r]);return d(l.Z,{sx:{color:"t.yellow",cursor:"pointer",my:"12px"},onClick:o},e("clear-neg-balance-entry",{defaultValue:"How to Clear Negtive Balance >"}))}))},"5kFy":(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r("/SIk"),i=r.n(a),o=r("APA6"),n=r("8uyB"),l=r("9h1+"),s=i().createElement;const c=({riskRatio:e})=>{const t=(e=>(0,n.JX)(2.7*Number(e)-45,0))(e),r=(0,l.Om)(),{buy:a,sell:i,primary:c}=null===r||void 0===r?void 0:r.colors;return s(o.Z,{sx:{position:"relative"}},s(o.Z,{sx:{position:"relative",width:"24px",height:"24px"}},s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.05044 7.05025C8.31719 5.7835 10.0672 5 12.0002 5C13.9332 5 15.6832 5.7835 16.9499 7.05025L18.3642 5.63604C16.7355 4.00736 14.4855 3 12.0002 3C9.51491 3 7.26491 4.00736 5.63623 5.63604L7.05044 7.05025Z",fill:c}),s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.9497 7.05044C18.2165 8.31719 19 10.0672 19 12.0002C19 13.9332 18.2165 15.6832 16.9497 16.9499L18.364 18.3642C19.9926 16.7355 21 14.4855 21 12.0002C21 9.51491 19.9926 7.26491 18.364 5.63623L16.9497 7.05044Z",fill:i}),s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.05025 16.9496C5.7835 15.6828 5 13.9328 5 11.9998C5 10.0668 5.7835 8.31681 7.05025 7.05006L5.63604 5.63585C4.00736 7.26453 3 9.51453 3 11.9998C3 14.4851 4.00736 16.7351 5.63604 18.3638L7.05025 16.9496Z",fill:a}))),s(o.Z,{style:{transform:`rotate(${t}deg)`},sx:{position:"absolute",left:"0",top:"0",transformOrigin:"center",transition:"transform 1s ease",height:"24px",width:"24px"}},s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 12C15 13.6569 13.6569 15 12 15C10.6938 15 9.58254 14.1652 9.17071 13H3V11H9.17071C9.58254 9.83481 10.6938 9 12 9C13.6569 9 15 10.3431 15 12ZM13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12Z",fill:"#5E6673"}))))},u=i().memo(c)},Q9ZO:(e,t,r)=>{"use strict";let a;r.d(t,{C:()=>a}),function(e){e.Normal="NORMAL",e.Horizontal="HORIZONTAL",e.FullScreen="FULL_SCREEN"}(a||(a={}))},SnVb:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r("cm/A"),i=r("EPGa"),o=r("jgBC");const n=({orderType:e,qty:t=0,triggerPrice:r=0,orderPrice:n=0,contractVal:l,activationPrice:s=0,lastPrice:c=0,markPrice:u=0,isDelivery:d,precision:m=0})=>{let p;switch(e){case i.Jm.STOP_LIMIT:case i.Jm.TAKE_PROFIT_LIMIT:case i.Jm.POST_ONLY:case i.Jm.LIMIT:p=n;break;case i.Jm.MARKET:p=c;break;case i.Jm.STOP_MARKET:case i.Jm.TAKE_PROFIT_MARKET:p=r;break;case i.Jm.TRAILING_STOP_MARKET:p=s||u;break;default:p=n}const f=Number(l);return d?f?(0,a.Jp)(t/f,p).toFixed(0,1):0:(0,o.GW)(t/p,m)}},YkKT:(e,t,r)=>{"use strict";r.d(t,{F:()=>T});var a=r("5vwO"),i=r("zT+5"),o=r("cm/A"),n=r("szIg"),l=r("d2db"),s=r("4m5F"),c=r("EPGa"),u=r("9h1+"),d=r("VM/Z"),m=r("LcTY"),p=r("jgBC"),f=r("De8U");var g=r("wqQ1"),y=r("revF"),b=r("SJeZ"),h=r("FOuV"),v=r("k2tD"),x=r("yxRq"),S=r("NQFm"),k=r("S24M");const P=["90802019","90812019"];function T({afterSubmit:e,overrides:t={}}){const r=(0,n.useDispatch)(),{showBattleDialog:T}=(0,l.P)(),{inBattle:C}=(0,y.M)(),{inBattle:Z}=(0,b.E5)(),{setMessageInfo:M}=(0,u.YT)(),{getI18n:I}=(0,b.yk)(),w=(0,b.G3)(),E=(0,u.c7)(),[A]=(0,b.eY)(),N=(0,n.useSelector)(g.wx)===d.UW,{marginType:O}=(0,b.se)(),R=(0,b.Gf)(),L=(i,n)=>{var l,u,d,g,y,T,C,Z,L,V;const{preference:{orderConfirmation:F,positionMode:D,assetMode:_,enableAdvancedTPSL:B,priceProtection:z},futuresOrderForm:K,userCenter:{loginStatus:{isLoggedIn:q}},products:{currentProduct:{filters:W,equalQtyPrecision:U=2,minQty:j,marginAsset:$,contractVal:H=1,pricePrecision:G},allProducts:J},pageStore:{symbol:[Y,[Q,X]]},markPrice:ee,position:te,leverage:{curLeverage:re},exchangeInfo:{infos:ae},balance:ie,assetIndex:oe}=n;if(!q)return;const ne=t.orderType||K.orderType,le=t.positionDirection||K.positionDirection,se=t.timeInForce||K.timeInForce,ce="boolean"===typeof t.reduceOnly?t.reduceOnly:K.reduceOnly,ue="boolean"===typeof t.isTPSLEnabled?t.isTPSLEnabled:K.isTPSLEnabled,[de,me]=(null===(l=document.querySelector('div[data-testid="max-buy-amount"]'))||void 0===l||null===(u=l.textContent)||void 0===u?void 0:u.split(" "))||[],[pe]=(null===(d=document.querySelector('div[data-testid="max-sell-amount"]'))||void 0===d||null===(g=d.textContent)||void 0===g?void 0:g.split(" "))||[],fe=(null===(y=h.vQ[X])||void 0===y?void 0:y.pricePrecision)||h.vQ.delivery.pricePrecision,ge=(null===(T=W.find(S.$H))||void 0===T?void 0:T.tickSize)||"",ye=(0,v.OR)(ge),be=(0,v.OR)(null===(C=W.find(S.W4))||void 0===C?void 0:C.stepSize),he=(0,v.OR)(null===(Z=W.find(S.vr))||void 0===Z?void 0:Z.stepSize),ve=null===(L=W.find(S.Jv))||void 0===L?void 0:L.notional,{levels:xe}=ae[Y]||{levels:f.zq.map((e=>(0,f.Wv)(e)))},{askPrice:Se,bidPrice:ke}=(0,p.OA)({tickSize:ge,symbol:Y,levels:xe,isDelivery:w}),Pe=Number(E()),Te=(0,p._V)({orderType:ne,equalQtyPrecision:U,unit:A,filters:W}),Ce=(0,p._V)({orderType:ne,equalQtyPrecision:U,unit:w?s.SW.cont:s.AO.coin,filters:W}),Ze=Number(null===(V=ee[Y])||void 0===V?void 0:V.markPrice),{side:Me,buyOrderAmount:Ie,sellOrderAmount:we,unitAmount:Ee,activatePriceWorkingType:Ae}=i,Ne=Me===h.hp.BUY,Oe=Number(i.limitPrice),Re=Ne?Ie:we,Le=Number(i.triggerPrice),Ve=Number(i.activatePrice),Fe=Number(i.priceRate),De=(0,p.JN)({orderType:ne,activatePrice:Ve,stopPrice:Le,limitPrice:Oe,lastTradePrice:Pe,activatePriceWorkingType:Ae,markPrice:Ze}),_e=Ee&&!~Ee.indexOf("%")?Number(Ee):Number((0,p.u2)({unit:A,contractVal:H,price:De,orderAmount:Re,stepSizePrecision:(0,h.Br)(ne)?he:be,tickSizePrecision:ye,equalQtyPrecision:U})),Be=e=>(0,x.w_)({askPrice:Se,bidPrice:ke,orderPrice:Oe,formType:ne,markPrice:Ze,pricePrecision:G,isDelivery:w,type:e}),{buyCost:ze,sellCost:Ke,buyOpenLost:qe,sellOpenLost:We}=(0,p.l3)({positionMode:D,positions:te,symbol:Y,leverage:re,buyOrderAmount:Ie,sellOrderAmount:we,orderType:ne,askPrice:Se,bidPrice:ke,price:Oe,markPrice:Ze,pricePrecision:G,isDelivery:w,contractVal:H}),Ue=(0,p.vY)({symbol:Y,isDelivery:w,leverage:re,marginAsset:$,contractVal:H,positions:(0,b.xm)(te,J),balance:ie.balance,assetIndexes:oe,assetMode:_,marginType:O,brackets:R}),{BuyText:je,SellText:$e}=(0,p.ad)({positionMode:D,positionDirection:le,getFutI18n:I}),{valid:He,message:Ge}=(h.hp.BUY,(0,p.mv)({unit:A,orderAmount:Re,price:De,contractVal:H,unitAmountPrecision:Te,orderAmountPrecision:Ce,base:Q,margin:$,minQty:j,minNotional:ve,getFutI18n:I,isDelivery:w,messageType:"order-form-toast",reduceOnly:ce,positionDirection:le}));if(!He)return void M({message:Ge,variant:"error"});const Je=()=>{let t=ne===c.Jm.POST_ONLY?c.Jm.LIMIT:ne;const n=i.triggerPriceWorkingType;Ne?(n===h.gu.LAST_PRICE&&Le<Pe||n===h.gu.MARK_PRICE&&Le<Ze)&&(t=t===c.Jm.STOP_LIMIT?c.Jm.TAKE_PROFIT_LIMIT:t,t=t===c.Jm.STOP_MARKET?c.Jm.TAKE_PROFIT_MARKET:t):(n===h.gu.LAST_PRICE&&Le>Pe||n===h.gu.MARK_PRICE&&Le>Ze)&&(t=t===c.Jm.STOP_LIMIT?c.Jm.TAKE_PROFIT_LIMIT:t,t=t===c.Jm.STOP_MARKET?c.Jm.TAKE_PROFIT_MARKET:t);const l=(0,p.M6)({formData:(0,a.Z)((0,a.Z)({},i),{},{buyOrderAmount:Number((0,o.Jp)(i.buyOrderAmount).toFixed(Ce,1)),sellOrderAmount:Number((0,o.Jp)(i.sellOrderAmount).toFixed(Ce,1))}),orderType:t,positionDirection:le,timeInForce:ne===c.Jm.POST_ONLY?h.rb.POST_ONLY:se,reduceOnly:ce,enableAdvancedTPSL:B,isTPSLEnabled:ue,priceProtection:z,symbol:Y,positionMode:D});return"subOrderList"in l?r.futuresOrderForm.placeStrategy(l).then((t=>{if(t.success){var r;e&&e();const i=N?{anchorOrigin:{vertical:"top",horizontal:"right"}}:{};M((0,a.Z)({message:I("order-submitted",{defaultValue:""}),variant:"success"},i)),(0,p.kd)({symbol:Y,id:null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.orderId,side:Me})}})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})):(w?(l.quantity*H/re).toFixed(2):(l.quantity*Number(l.price)/re).toFixed(2),`${l.side}`.toLowerCase(),r.futuresOrderForm.placeOrder((0,a.Z)((0,a.Z)({},l),{},{placeType:"order-form"})).then((t=>{if(t.success){var i;e&&e();const r=N?{anchorOrigin:{vertical:"top",horizontal:"right"}}:{};M((0,a.Z)({message:I("order-submitted",{defaultValue:""}),variant:"success"},r)),(0,p.kd)({symbol:Y,id:null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.orderId,side:Me})}const{code:o}=t||{};return-4061===o?r.preference.getPositionMode():P.includes(String(o))&&(0,k.j)("place_order_event",{df_business:w?"delivery":"futures",type:"insufficientMargin",symbol:l.symbol,placeOrderType:l.type,price1:De,df_direction:l.side,df_1:l.quantity,df_2:de,df_3:pe,df_4:me}),t})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})))};(0,p.i)({orderType:ne,orderAmount:Re,price:Oe,priceRate:Fe,stopPrice:Le,hideMask:()=>m.T.emit(m.F.HIDE_MOBILE_MASK),orderConfirmation:F,showConfirm:()=>m.T.emit(m.F.SHOW_ORDER_CONFIRM_PANEL,{orderType:ne,placeOrder:Je,orderForm:{triggerPrice:Le,price:Oe,buyQty:_e,sellQty:_e,side:Me,callbackRate:Fe,activationPrice:Ve,positionSide:(0,p.JO)({side:Me,positionDirection:le,positionMode:D}),buyCost:(0,o.GW)(ze,fe,!0),sellCost:(0,o.GW)(Ke,fe,!0),tickSize:ye,limitStepSize:be,marketStepSize:he,availableBalance:Ue,takeProfitStopPrice:i.takeProfitStopPrice,takeProfitStopPriceWorkingType:i.takeProfitStopPriceWorkingType,stopLossStopPrice:i.stopLossStopPrice,stopLossStopPriceWorkingType:i.stopLossStopPriceWorkingType,strategySide:i.strategySide,oLastPrice:Pe},bCost:ze,sCost:Ke,buyOpenLost:qe,sellOpenLost:We,positionDirection:le,title:"",isDelivery:w,Cont:I("Cont"),contractVal:H,getAssumePrice:Be}),placeOrder:Je})};return e=>{(0,i.F)()&&(C||Z?T(Z?"um":"cm"):r.futuresOrderForm.handleSubmit({formData:e,submitHandler:L}))}}},EUwT:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Yn});var a={};r.r(a),r.d(a,{PNL:()=>Ni,PNLFormat:()=>Wi,ROE:()=>Oi,ROEFormat:()=>Ui,formPositionSize:()=>Bi,initialMargin:()=>Ai,initialMarginFormat:()=>qi,isLiqPriceInValid:()=>zi,isLiqPriceInValidHEDGE:()=>Ki,liquidationPrice:()=>Li,maxOpenCoin:()=>Fi,maxOpenQuantity:()=>Vi,openPriceCoin:()=>Di,openPriceUSDT:()=>_i,targetPrice:()=>Ri});var i=r("/SIk"),o=r.n(i),n=r("9h1+"),l=r("6Afj"),s=r("TKP4"),c=r("APA6"),u=r("szIg"),d=r("EPGa"),m=r("cm/A"),p=r("SJeZ"),f=r("JlsY"),g=r("GpFh"),y=r("S0Ie"),b=r("LcTY"),h=r("VM/Z"),v=o().createElement;const x={justifyContent:"space-between",position:"relative",width:"100%",alignContent:"center",fontSize:1,".balance":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"12px",color:"t.third",".value":{ml:"4px",color:"t.primary"}}},S=e=>{let{balance:t,dispatch:r,tradeType:a,side:o=d.g.BUY,transfer:n=!1,base:l,quote:c,marginAsset:u,isLoggedIn:m,userAssets:f,isDelivery:S=!1}=e,k=(0,g.Z)(e,["balance","dispatch","tradeType","side","transfer","base","quote","marginAsset","isLoggedIn","userAssets","isDelivery"]);const{getI18n:P}=(0,p.yk)(),T=S?l:a===d.xy.FUTURES||o===d.g.BUY?c:l,C=(0,i.useCallback)((()=>{b.T.emit(b.F.OPEN_TRANSFER_MODAL,u)}),[u]);return(0,i.useMemo)((()=>v(s.Z,Object.assign({sx:x},k),v("div",{className:"balance"},P("orderForm-avbl",{defaultValue:"Avbl"}),v("span",{className:"value"},m?t:"-"," ",T)),m&&n&&!h.Jg&&v(y.Z,{"data-testid":"orderform-transfer-button",color:"t.third",cursor:"pointer",fontSize:"16px",mx:"8px",sx:{flexShrink:0,"&:hover":{color:"t.primary"}},onClick:C}))),[k,m,n,C,T,t,P])},k=o().memo(S);var P=o().createElement;const T=({transfer:e=!0})=>{const[,[t,r]]=(0,n.z4)(),a=(0,p.G3)(),i=(0,f.c)(),{marginAsset:o}=(0,n.j2)(),l=(0,n.Li)(),s=(0,u.useDispatch)(),c=(0,n._n)(),g=(0,n.dO)();return P(k,{tradeType:a?d.xy.DELIVERY:d.xy.FUTURES,balance:(0,m.Jp)(g).toFixed(i,1),dispatch:s,transfer:e,base:t,quote:r,isLoggedIn:c,userAssets:l,isDelivery:a,marginAsset:o})};var C=r("a1YN"),Z=r("8uyB"),M=r("w2aK"),I=r("6eV+"),w=o().createElement;const E=(0,i.forwardRef)((({overlay:e},t)=>w(M.ZP,{ref:t,trigger:"hover",display:"inline-flex",flexDirection:"column",justifyContent:"space-between",height:"16px",pl:["0","12px"],color:"t.third",enablePortal:!0,overlay:e,sx:{cursor:"pointer",verticalAlign:"top",":hover":{color:"primary"}}},w(I.Z,{size:"20px"})))),A=o().memo(E);var N=r("71uP"),O=o().createElement;const R=e=>{let{children:t,handle:r}=e,a=(0,g.Z)(e,["children","handle"]);return O(N.Z,Object.assign({className:"item",as:"span",onClick:r},a),t)},L=({getFutI18n:e,orderType:t})=>{switch(t){case d.Jm.LIMIT:return e("orderType-limit-tip",{defaultValue:"A limit order is an order to buy or sell at a specific price or better. Limit orders are not guaranteed to execute."});case d.Jm.MARKET:return e("orderType-market-tip",{defaultValue:"Market order is immediately matched to the best available market price."});case d.Jm.STOP_LIMIT:return e("STOPtip",{defaultValue:"Stop Limit"});case d.Jm.STOP_MARKET:return e("STOP_MARKETtip",{defaultValue:"Stop Market"});case d.Jm.TRAILING_STOP_MARKET:return e("TRAILING_STOP_MARKET_TIP",{});case d.Jm.POST_ONLY:return e("limitType-postOnly-tip",{defaultValue:"limitType-postOnly-tip"});default:return O(o().Fragment,null)}};var V=r("9izf"),F=r("eOkI"),D=r("O94r"),_=r.n(D),B=o().createElement;const z={width:"100%",boxShadow:"none"},K={width:"100%"},q={flex:1,".tab":{borderTop:"2px solid",borderTopColor:"moduleBg",color:"t.third",padding:"8px 0px",backgroundColor:"moduleBg",textAlign:"center",borderBottom:"1px solid",borderBottomColor:"modalBg","&.active":{borderTop:"2px solid",borderTopColor:"primary",borderBottomColor:"transparent",borderRight:"1px solid",borderRightColor:"modalBg",backgroundColor:"popupBg",color:"t.primary","&.close":{borderLeft:"1px solid",borderLeftColor:"modalBg"}}}},W=e=>{const{getI18n:t}=(0,p.yk)(),r=t("Open",{defaultValue:"Open"}),a=t("Close",{defaultValue:"Close"}),[i]=(0,p.hN)(),[o,n]=(0,p.lE)(),l=(e,t,r)=>B("div",{className:_()({active:e,tab:!0,[r]:!0})},t);return i?B(V.Z,Object.assign({variant:"standard",defaultActiveKey:o,controlledKey:o,onChange:n,tabsSx:z,tabSx:q,sx:K},e),B(F.Z,{tab:e=>l(e,r,"open"),tabKey:d.RS.OPEN,"data-testid":"open"}),B(F.Z,{tab:e=>l(e,a,"close"),tabKey:d.RS.CLOSE,"data-testid":"close"})):null};var U=r("Tr4L");const j=e=>{const{t:t,i18n:r}=(0,U.$)(e);return{i18n:r,getI18n:(0,i.useCallback)(((e,r,a=!0)=>{let i;"boolean"===typeof a?i=a?"trd-orderForm":"trd":"string"===typeof a&&(i=a);return t(`${i}-${e}`,r)}),[t])}};var $=r("3szt"),H=r("LHeJ"),G=r("j6Cw"),J=r("jgBC"),Y=r("c5N6"),Q=o().createElement;const X={position:"fixed",width:"100vw",height:"100vh",left:0,right:0,top:0,bottom:0,zIndex:999,mb:"sm"},ee={mb:"md"},te=(0,H.Z)((e=>({visible:!1,setVisible:t=>e((()=>({visible:t}))),assetMode:!1,setAssetMode:t=>e((()=>({assetMode:t})))}))),re=(0,i.forwardRef)(((e,t)=>{const{getI18n:r}=(0,p.yk)(),{0:a,1:n}=(0,i.useState)({defaultActiveKey:"oc"}),{defaultActiveKey:l="oc"}=a,{0:u,1:d}=(0,i.useState)(!1),m=te((e=>e.visible)),f=te((e=>e.setVisible)),g=te((e=>e.setAssetMode)),y=(0,i.useCallback)((()=>{d(!1)}),[d]),b=(0,i.useCallback)((e=>{d(!0),n(e)}),[]);(0,i.useImperativeHandle)(t,(()=>({showPreferencePanel:b}))),(0,i.useEffect)((()=>J.TB.on(J.FP.SHOW_PREFERENCE_PANEL,(e=>{b({defaultActiveKey:e})}))),[b]);const h=(0,p.$J)(),v=new Set,x=!!Object.values(h).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:t}=e;return!v.has(t)&&(v.add(t),!0)}return!1})).length,S=(0,i.useMemo)((()=>({pb:0})),[]),k=(0,i.useMemo)((()=>({hidePreferencePanel:y})),[y]);return(0,i.useMemo)((()=>u||m?Q(o().Fragment,null,Q(G.ZP,null,Q(c.Z,{tx:"preference.dialog",variant:"container",sx:X},Q(s.Z,{alignItems:"center",justifyContent:"space-between",tx:"preference.header",variant:"container"},Q(N.Z,{tx:"preference.header",variant:"title"},r("preference",{defaultValue:"Preference"})),Q(C.Z,{tx:"preference.header",variant:"close",onClick:y})),Q(c.Z,{sx:{px:"sm"}},Q(V.Z,{defaultActiveKey:l,variant:"trade-next",tabSx:S,tabsSx:ee,lazy:!0},Q(F.Z,{tab:()=>Q(N.Z,{variant:"subtitle2"},r("order-confirmation",{defaultValue:"Order Confirmation"})),tabKey:"oc"},Q(Y.OrderConfirmationForm,null)),Q(F.Z,{tab:()=>Q(N.Z,{variant:"subtitle2"},r("position-mode",{defaultValue:"Position Mode"})),tabKey:"pm"},Q(Y.PositionSideForm,null)),Q(F.Z,{tab:()=>Q(N.Z,{variant:"subtitle2"},r("priceProtection",{defaultValue:"Price Protection"})),tabKey:"pp"},Q(Y.PriceProtectionForm,null)),Q(F.Z,{tab:()=>Q(N.Z,{variant:"subtitle2"},r("preferenceNotification",{defaultValue:"Notification"})),tabKey:"pn"},Q(Y.NotificationForm,null)),Q(F.Z,{tab:()=>Q(N.Z,{variant:"subtitle2"},r("assetMode",{defaultValue:"Asset Mode"})),tabKey:"am"},Q(Y.AssetModeForm,Object.assign({setConfirmVisible:f,setAssetMode:g,isolatedPositionFlag:x},k))))))),Q(Y.AssetModeDialog,{confirmVisible:m,setConfirmVisible:f})):null),[f,x,g,m,l,r,y,k,S,u])}));var ae=r("869M"),ie=r("FOuV"),oe=r("xpNn"),ne=o().createElement;const le=e=>{let{children:t}=e,r=(0,g.Z)(e,["children"]);return ne(c.Z,Object.assign({variant:"dropdown",__css:{display:"flex",flexDirection:"column"}},r),t)},se=({locale:e,base:t,quote:r,futUrlConfig:a,isDelivery:i,showPreferencePanel:n})=>{const{getI18n:l}=(0,ae.yk)();return ne(le,null,ne(R,{handle:()=>{let t=(0,Z.CN)(a.BUYING_URL,{locale:e,crypto:r});t=(0,Z.CN)(a.BUYING_URL_ELECTRON,{crypto:r}),window.open(t)}},l("buy-crypto",{defaultValue:"Buy Crypto"})),ne(o().Fragment,null,i?ne(R,{handle:()=>b.T.emit(b.F.OPEN_CONVERT_MODAL)},l("convert",{defaultValue:"Convert"})):ne(R,{handle:()=>{window.location.href=(0,Z.CN)(a.DEPOSIT_URL,{locale:e,coin:r})}},l("deposit",{defaultValue:"Deposit"})),ne(R,{handle:()=>b.T.emit(b.F.OPEN_TRANSFER_MODAL,t)},l("transfer",{defaultValue:"Transfer"})),ne(R,{handle:()=>n("oc")},l("preference",{defaultValue:"Preference"})),ne(R,{handle:()=>(0,oe.O)()},l("trading-rules",{defaultValue:"Trading Rules"}))))},ce=e=>ne(c.Z,{lineHeight:"0"},e.isLoggedIn&&ne(A,{overlay:ne(se,e)}),ne(C.Z,{ml:"sm",color:"t.third",fontSize:"16px",onClick:()=>e.hideMask()})),ue=()=>{const e=(0,p.G3)(),t=(0,n._n)(),{i18n:{language:r}}=j(),[,[a,l]]=(0,n.z4)(),c=(0,i.useRef)(null),{isMobile:u}=(0,n.Fs)(),{showPreferencePanel:d}=(0,p.r8)(),[m]=(0,p.hN)(),f=(0,i.useCallback)((()=>b.T.emit(b.F.HIDE_MOBILE_MASK)),[]),g=(0,i.useMemo)((()=>({alignItems:"center",justifyContent:"space-between",borderBottom:e=>`1px solid ${e.colors.newLine}`,width:"100%",py:m?"0px":"10px",pl:m?"0px":"16px",pr:"16px",bg:m?"moduleBg":"unset"})),[m]);return(0,i.useMemo)((()=>u?ne(o().Fragment,null,ne(s.Z,{sx:g,ref:c},m?ne(W,{width:"248px"}):ne($.Z,{sx:{width:"248px"}}),ne(ce,{base:a,quote:l,locale:r,hideMask:f,isLoggedIn:t,futUrlConfig:ie.x,isDelivery:e,showPreferencePanel:d})),m?ne($.Z,{sx:{mt:"10px",mx:"16px"}}):ne(W,null),ne(re,null)):null),[u,a,l,r,f,t,e,d,m,g])},de=o().memo(ue);var me=r("5vwO"),pe=r("EZOS"),fe=r("NKCw"),ge=r("//nZ"),ye=r.n(ge),be=r("J81Z"),he=r("Uqe+");const ve={callBackTip:"The callback rate is one condition for a trailing stop order, satisfied when the trigger price compared with the highest market price / lowest market price (or mark price) is greater than or equal to the callback rate.",activationPriceTip:"The activation price is one of the trigger conditions of the trailing stop order. If you do not fill in it, it will default to the latest price (marked price). When the market's highest / lowest price reaches or exceeds the activation price after the trailing stop order is submitted, the condition is consideredto be satisfied."};var xe=r("rdEq"),Se=r("YkKT"),ke=r("b2zI"),Pe=r("COFI"),Te=r("4m5F"),Ce=o().createElement;function Ze({value:e,unit:t,filters:r}){const{limitStepSize:a,tickSize:i}=(0,J.k7)({filters:r});let o;return t===Te.AO.usdt&&e/1<i&&(o=i),(t===Te.AO.coin||t===Te.SW.cont)&&e/1<a&&(o=a),t===Te.SW.coin&&e/1<i&&(o=i),o}function Me({orderType:e}){const{setFocus:t,setValue:r,getValues:a}=(0,fe.Gc)(),{filters:o}=(0,n.j2)(),[l]=(0,p.hN)(),[s]=(0,p.eY)(),[,c]=(0,p.lE)(),u=(0,n.c7)(),f=(0,n.PZ)(),g=(0,i.useCallback)((({payload:e,side:t})=>{var a;const{priceLevel:i,valueInput:{type:o="percentage",value:n}}=e,s=Math.abs(Number(i)),{bids:m,asks:p}=f(void 0,s),g=null===(a=(t===d.g.BUY?m:p)[t===d.g.BUY?s-1:0])||void 0===a?void 0:a.price,y=u(),h=g||y;r(ke.T.LIMIT_PRICE,h),r(ke.T.SIDE,t),c(l?d.RS.OPEN:d.RS.BOTH),"percentage"===o?(r(ke.T.UNIT_AMOUNT,`${n}%`),b.T.emit(b.F.SET_SLIDER_AMOUNT,n)):r(ke.T.UNIT_AMOUNT,n),document.querySelectorAll(".order-form-input").forEach((e=>{e.id.includes("limitPrice")&&e.focus()}))}),[u,f,r,l,c]);return(0,i.useEffect)((()=>(0,Pe.GY)((async({name:t,payload:i})=>{switch(t){case Pe.Sn:if(e!==d.Jm.LIMIT&&e!==d.Jm.STOP_LIMIT)return;setTimeout((()=>{g({payload:i,side:d.g.BUY})}),10);break;case Pe.Nn:if(e!==d.Jm.LIMIT&&e!==d.Jm.STOP_LIMIT)return;setTimeout((()=>{g({payload:i,side:d.g.SELL})}),10);break;case Pe.ZA:setTimeout((()=>{const e=a(ke.T.LIMIT_PRICE),{valueInput:{type:t,value:r}}=i;let o;if(e){if("percentage"===t)o=(0,m.Jp)(e,(0,m.PD)(1,r/100));else{if("amount"!==t)throw new Error("Invalid event type. Expected to be percentage or amount");o=(0,m.PD)(e,r)}b.T.emit(b.F.UPDATE_ORDER_PRICE_INPUT,o.toFixed())}else o=u()}),10);break;case Pe.Dc:setTimeout((()=>{const e=a(ke.T.LIMIT_PRICE),{valueInput:{type:t,value:r}}=i;let o;if(e){if("percentage"===t)o=(0,m.Jp)(e,(0,m.h9)(1,r/100));else{if("amount"!==t)throw new Error("Invalid event type. Expected to be percentage or amount");o=(0,m.h9)(e,r)}b.T.emit(b.F.UPDATE_ORDER_PRICE_INPUT,o.toFixed())}else o=u()}),10);break;case Pe.Jt:setTimeout((()=>{const{valueInput:{type:e,value:t}}=i;let n=a(ke.T.UNIT_AMOUNT);if("percentage"===e){let e=0;if(-1!==n.indexOf("%")){const r=n.split("%")[0],a=(0,m.PD)(r,t);e=a.gt(100)?"0":a.toFixed()}r(ke.T.UNIT_AMOUNT,`${e}%`),b.T.emit(b.F.SET_SLIDER_AMOUNT,e)}else{if("amount"!==e)throw new Error("Invalid event type. Expected to be percentage or amount");{(isNaN(n)||"NaN"===n)&&(n="0");const e=Ze({value:t,unit:s,filters:o});let a=(0,m.PD)(n,e||t).toFixed();(Number(a)<0||isNaN(Number(a)))&&(a="0"),r(ke.T.UNIT_AMOUNT,a)}}}),10);break;case Pe.SA:setTimeout((()=>{const{valueInput:{type:e,value:t}}=i;let n=a(ke.T.UNIT_AMOUNT);if("percentage"===e){let e=0;if(-1!==n.indexOf("%")){const r=n.split("%")[0],a=(0,m.h9)(r,t);e=a.lt(0)?"0":a.toFixed()}b.T.emit(b.F.SET_SLIDER_AMOUNT,e),r(ke.T.UNIT_AMOUNT,`${e}%`)}else{if("amount"!==e)throw new Error("Invalid event type. Expected to be percentage or amount");{let e;(isNaN(n)||"NaN"===n)&&(n="0");const a=Ze({value:t,unit:s,filters:o});e=(0,m.h9)(n,a||t).toFixed(),(Number(e)<0||isNaN(Number(e)))&&(e="0"),r(ke.T.UNIT_AMOUNT,e)}}}),10);break;case Pe.aV:setTimeout((()=>{l&&c(d.RS.OPEN)}),10);break;case Pe.hr:setTimeout((()=>{l&&c(d.RS.CLOSE)}),10)}}))),[e,g,l,c,o,r,t,a,s,u]),null}function Ie({orderType:e}){return Ce(Me,{orderType:e})}var we=r("IBbm"),Ee=o().createElement;const Ae=e=>{let{fieldName:t,required:r=!0,error:a}=e,i=(0,g.Z)(e,["fieldName","required","error"]);const{field:{onChange:o},fieldState:{invalid:n}}=(0,fe.bc)({name:t,rules:{required:r}}),l=(0,fe.qo)({name:t});return Ee(we.Q,Object.assign({},i,{value:l,onChange:o,error:a||n,target:t}))};var Ne=r("uB/w"),Oe=r("ZKNs"),Re=o().createElement;const Le=e=>Re(Oe.Z,Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"t.third"},e),Re("path",{xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",d:"M7.91668 3.3335V5.41676H10V7.91676H7.91668V10.0002H5.41668V7.91676H3.33337V5.41676H5.41668V3.3335H7.91668ZM16.6667 12.5002H10V15.0002H16.6667V12.5002ZM15.1262 3.45965L3.45958 15.1263L4.87379 16.5405L16.5405 4.87386L15.1262 3.45965Z",fill:"currentColor"}));var Ve=o().createElement;const Fe={":hover":{color:"t.primary"},cursor:"pointer"};function De({fieldName:e}){const{tickSize:t}=(0,n.j2)(),[r]=(0,p.NU)(),{setValue:a,getValues:o}=(0,fe.Gc)(),l=(0,n.ih)(),s=(0,i.useCallback)((t=>{const r=(Number(o(e))||0)+t;a(e,r<0?"0":(0,m.mD)(r,l))}),[a,o,e,l]);return r?Ve(Ne.Z,{height:"20px",scales:[1,10,50,200],size:t,onSelect:s},Ve(Le,{sx:Fe,"data-testid":"plus-minus-button"})):null}var _e=o().createElement;const Be={color:"t.yellow",cursor:"pointer",maxWidth:"40px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},ze=({onClick:e})=>{const{getI18n:t}=(0,p.yk)();return _e(xe.m,{tip:t("orderForm-lastPriceTip",{defaultValue:"Last price, place a current price order."}),hideUnderLine:!0},_e(N.Z,{sx:Be,onClick:e},t("orderForm-lastPrice",{defaultValue:"Last"})))};var Ke=o().createElement;const qe=({fieldName:e,prefix:t,disabled:r,required:a,getLastTracePrice:o})=>{const{setValue:l}=(0,fe.Gc)(),c=(0,n.ih)(),[,u]=(0,n.z4)(),[,d]=u;(0,i.useEffect)((()=>b.T.on(b.F.UPDATE_ORDER_PRICE_INPUT,(t=>{l(e,t)}))),[e,l]);const m=Ke(s.Z,{flexDirection:"row",alignItems:"center"},Ke(De,{fieldName:e}),Ke(ze,{onClick:()=>{l(e,o())}}),Ke(N.Z,{ml:"8px",color:"t.primary"},d));return Ke(Ae,{fieldName:e,prefix:t,suffix:m,precision:c,maxLength:Te.ze,disabled:r,required:a})};var We=r("zZ5f"),Ue=r("vt3k"),je=o().createElement;const $e=({getI18n:e,registerTestId:t="orderform_register",loginTestId:r="orderform_login"})=>{const{isLoading:a}=(0,n.f0)();return(0,i.useMemo)((()=>a?je(c.Z,{fontSize:"1",sx:{bg:"inputBg"}},je(s.Z,{alignItems:"center",justifyContent:"center",sx:{height:"40px",position:"relative",borderRadius:"4px"}},je(We.Z,{inner:!0,fullScreen:!0,show:!0}))):je(c.Z,{"data-testid":"register-login-buttons"},je(Ue.Yr,null,je(be.Z,{as:"a",width:1,py:"10px",variant:"primary","data-testid":t},e("register"))),je(Ue.TE,null,je(be.Z,{as:"a",width:1,mt:"12px",py:"10px",bg:"line",colorStyle:"secondary","data-testid":r},e("login"))))),[a,e])},He={justifyContent:"space-between",marginTop:"8px",color:"t.third",fontSize:"12px",lineHeight:"16px",letterSpacing:"0.32px",".content":{flex:1,minWidth:0,marginLeft:"2px",color:"t.primary",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",textAlign:"right"}},Ge={justifyContent:"space-between",fontSize:"12px",marginTop:"8px",".left, .right":{display:"flex",flexWrap:"wrap",width:"48.47%",fontSize:"12px",lineHeight:"16px",letterSpacing:"0.32px",color:"t.third"},".left":{justifyContent:"flex-start"},".right":{justifyContent:"flex-end"},".content":{marginLeft:"2px",color:"t.primary"},".truncated":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}};var Je=o().createElement;const Ye=({label:e,content:t,dataTestId:r})=>Je(s.Z,{sx:He},Je("div",null,e),Je("div",{className:"content","data-testid":r},t));var Qe=o().createElement;const Xe=({leftDataTestId:e,rightDataTestId:t,leftLabel:r,rightLabel:a,leftContent:i,rightContent:o})=>Qe(s.Z,{sx:Ge},Qe("div",{className:"left"},Qe("div",{className:"truncated"},r),Qe("div",{className:"content truncated","data-testid":e},i)),Qe("div",{className:"right"},Qe("div",{className:"truncated"},a),Qe("div",{className:"content truncated","data-testid":t},o," ")));var et=o().createElement;const tt={height:1,border:0,my:"16px",bg:"newLine"},rt=()=>et(c.Z,{as:"hr",sx:tt});var at=o().createElement;const it={flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"},ot=({children:e})=>at(s.Z,{sx:it},e);var nt=o().createElement;var lt=o().createElement;var st=o().createElement;var ct=o().createElement;var ut=o().createElement;var dt=o().createElement;var mt=r("a2gA"),pt=o().createElement;const ft={justifyContent:"center",alignItems:"center",width:"40px",height:"40px",marginLeft:"6px",bg:"transInputBG",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"t.third","&:hover":{bg:"line",color:"t.primary"}},gt=({value:e,onClick:t})=>pt(s.Z,{sx:ft,onClick:()=>{t(e)}},e,"%");var yt=o().createElement;const bt={flexDirection:"row",mt:"10px",".callback-rate-input":{mt:0,flex:1},".bn-input-prefix":{flex:"1"},".prefix-tooltip-container":{width:"100%"},".bn-input-suffix":{marginLeft:"0px !important"},".order-form-input":{width:"28px",px:"4px"}},ht=({fieldName:e,required:t})=>{const{setValue:r}=(0,fe.Gc)(),{getI18n:a}=(0,p.yk)(),i=yt(xe.m,{className:"prefix-tooltip-container",tip:a("callbackRateTip",{defaultValue:ve.callBackTip})},yt(mt.u,null,a("callbackRate",{defaultValue:"Callback Rate"}))),o=t=>{r(e,t)};return yt(s.Z,{sx:bt},yt(Ae,{className:"callback-rate-input",fieldName:e,prefix:i,suffix:yt(N.Z,{color:"t.primary"},"%"),precision:1,maxNumberValue:5,maxLength:Te.ze,required:t}),yt(gt,{value:"1",onClick:o}),yt(gt,{value:"2",onClick:o}))},vt=({lastPriceType:e})=>{const[t,r,a,i]=(0,fe.qo)({name:[ke.T.LIMIT_PRICE,ke.T.TRIGGER_PRICE,ke.T.ACTIVATE_PRICE,ke.T.ACTIVATE_PRICE_WORKING_TYPE]}),[o]=(0,p.K5)(),l=o===d.Jm.MARKET,s=o===d.Jm.TRAILING_STOP_MARKET,c="trade"===e,u=(0,n.uH)(l&&c||s&&!a&&i===ie.gu.LAST_PRICE),{bidPrice:m,askPrice:f}=(0,n.y$)(l&&!c),g=(0,n.aJ)(s&&!a&&i===ie.gu.MARK_PRICE);let y;switch(o){case d.Jm.LIMIT:case d.Jm.STOP_LIMIT:case d.Jm.TAKE_PROFIT_LIMIT:case d.Jm.POST_ONLY:y=t;break;case d.Jm.MARKET:switch(e){case"trade":y=u;break;case"bid":y=m;break;case"ask":y=f}break;case d.Jm.STOP_MARKET:case d.Jm.TAKE_PROFIT_MARKET:y=r;break;case d.Jm.TRAILING_STOP_MARKET:y=a||(i===ie.gu.MARK_PRICE?g:u)}return Number(y)||0},xt=({side:e})=>{const t="buy"===e?ke.T.BUY_ORDER_AMOUNT:ke.T.SELL_ORDER_AMOUNT,r=(0,fe.qo)({name:t});return Number(r)};var St=r("d19s"),kt=r("EgA9");const Pt={position:"relative",top:"4px",width:"fit-content",py:"4px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",".option":{padding:"4px 16px",fontSize:"12px",color:"t.primary","&:hover":{bg:"line",cursor:"pointer"},"&.active":{color:"t.yellow"}}},Tt={height:"100%",".label":{display:"flex",alignItems:"center",height:"100%",color:"t.primary",cursor:"pointer","&.disabled":{cursor:"not-allowed"}},".label-text":{maxWidth:"48px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}};var Ct=o().createElement;function Zt({options:e,value:t,handleClick:r}){return Ct(c.Z,{sx:Pt,name:"orderform-select-menu"},e.map((({label:e,value:a})=>Ct("div",{key:String(a),className:_()({active:a===t,option:!0}),onClick:()=>{r(a)}},e))))}function Mt(e){var t;let{name:r,options:a,disabled:i,value:o,onChange:n}=e,l=(0,g.Z)(e,["name","options","disabled","value","onChange"]);const s=(null===(t=a.find((e=>e.value===o)))||void 0===t?void 0:t.label)||"";return Ct(M.ZP,Object.assign({},l,{sx:Tt,trigger:"click",disabled:i,enablePortal:!0,overlay:Zt({options:a,value:o,handleClick:n})}),(({name:e,label:t,disabled:r})=>{const a=e?`${e}-select-button`:"TriggerSelect";return Ct(St.Z,{className:_()({label:!0,disabled:r}),variant:"small","data-testid":a},Ct("div",{className:"label-text"},t),!r&&Ct(kt.Z,{color:"#76808F",size:16}))})({name:r,label:s,disabled:i}))}var It=o().createElement;const wt=()=>{const[,e]=(0,n.z4)(),t=(0,n.Pc)(),{isExistFutureAccount:r}=t,{isLoggedIn:a}=(0,n.f0)(),{setValue:o}=(0,fe.Gc)(),l=(0,u.useDispatch)(),{getI18n:s}=(0,p.yk)(),{baseAsset:c,marginAsset:d}=(0,n.j2)(),[m]=(0,p.eY)(),f=(0,p.G3)(),g=(0,i.useCallback)((async e=>{await l.preference.changeUnit(e),o(ke.T.UNIT_AMOUNT,"")}),[l]),y=a&&r,b=(0,i.useMemo)((()=>f?[{label:s("Cont",{defaultValue:"Cont"}),value:Te.SW.cont},{label:e[0],value:Te.SW.coin}]:[{label:d,value:Te.AO.usdt},{label:c,value:Te.AO.coin}]),[f,s,e,d,c]);return It(Mt,{name:"unit",value:m,options:b,onChange:g,disabled:!y})};var Et=r("NQFm"),At=o().createElement;const Nt=({fieldName:e,prefix:t,required:r})=>{var a;const i=(0,p.G3)(),o=(0,n.XY)(),l=(0,n.XY)(i?Te.SW.cont:Te.AO.coin),{getI18n:s}=(0,p.yk)(),{contractVal:c,marginAsset:u,minQty:d,filters:m}=(0,n.j2)(),f=(null===(a=m.find(Et.Jv))||void 0===a?void 0:a.notional)||"1",[,[g,y]]=(0,n.z4)(),[b]=(0,p.lE)(),[h]=(0,p.KK)(),[v]=(0,p.eY)(),x=v===Te.SW.cont?`1 ${s("Cont",{defaultValue:"Cont"})} = ${c} ${y}`:"",S=(0,fe.qo)({name:e}),k=vt({lastPriceType:"trade"}),P=xt({side:"buy"}),T=Boolean(S),{message:C,valid:Z}=(0,J.mv)({unit:v,orderAmount:P,price:k,contractVal:c,unitAmountPrecision:o,orderAmountPrecision:l,base:g,margin:u,minQty:d,minNotional:f,isDelivery:i,getFutI18n:s,reduceOnly:h,positionDirection:b}),{isSubmitted:M}=(0,fe.cl)(),I=M&&!Z&&T;return At(Ae,{fieldName:e,prefix:t,suffix:At(wt,null),precision:o,maxLength:Te.ze,required:r,placeholder:x,error:I,errorText:I?C:"",infoText:T?C:""})};var Ot=r("eOsi"),Rt=o().createElement;const Lt=e=>{let{fieldName:t}=e,r=(0,g.Z)(e,["fieldName"]);const{setValue:a}=(0,fe.Gc)(),o=(0,fe.qo)({name:t}),n=(0,i.useCallback)((e=>a(t,e)),[a,t]);return Rt(Mt,Object.assign({},r,{name:t,value:o,onChange:n}))};var Vt=o().createElement;const Ft=({priceFieldName:e,workingTypeFieldName:t,prefix:r,required:a,disabled:n,onFocus:l})=>{const s=(0,Ot.i)(),{getI18n:c}=(0,p.yk)(),u=(0,i.useMemo)((()=>[{label:c("advancedStrategy-lastPrice",{defaultValue:"Last"}),value:ie.gu.LAST_PRICE},{label:c("advancedStrategy-markPrice",{defaultValue:"Mark"}),value:ie.gu.MARK_PRICE}]),[c]),d=Vt(o().Fragment,null,Vt(De,{fieldName:e}),Vt(Lt,{fieldName:t,options:u,disabled:n}));return Vt(Ae,{fieldName:e,prefix:r,suffix:d,precision:s,maxLength:Te.ze,required:a,disabled:n,onFocus:l})};var Dt=r("nnm9"),_t=r.n(Dt),Bt=r("usKH"),zt=r("+Ai6"),Kt=r("eXOl"),qt=r("vSWf"),Wt=r("/w94"),Ut=r("eeZR");const jt=(0,i.forwardRef)((({},e)=>{const[t]=(0,p.KK)(),r=vt({lastPriceType:"trade"}),{maxBuyOrderAmount:a,maxSellOrderAmount:o}=(0,Ut.V)({reduceOnly:t,orderPrice:r});return(0,i.useImperativeHandle)(e,(()=>({buyMaxAmount:a,sellMaxAmount:o}))),null})),$t={paddingTop:"8px","> div":{px:["","","0px"]},".bn-slider-container":{"> label.bn-slider-radio-tooltip":{bg:"transparent",color:"t.secondary",fontSize:"14px"},".bn-slider-stepper":{bg:"popupBg"},".bn-slider-progress-bar, .bn-slider-progress-stepper":{bg:"t.secondary"},".bn-slider-radio-button":{borderColor:"t.secondary"},".bn-slider-progress-stepper, .bn-slider-stepper:hover, .bn-slider-radio-button:after":{borderColor:"popupBg"}}};var Ht=o().createElement;const Gt={steppers:[0,25,50,75,100],range:{min:0,max:100},unit:"%"},Jt=({amountFieldName:e,amountFieldValueType:t,showUnitAmount:r})=>{const{getI18n:a}=(0,p.yk)(),o=(0,i.useRef)({buyMaxAmount:0,sellMaxAmount:0}),{setValue:n}=(0,fe.Gc)(),l=(0,zt.m)(),s=(0,fe.qo)({name:e}),u="percentage"===t,d=s.includes("%"),{0:m,1:f}=(0,i.useState)(0),g=(0,pe.Z)(m),[y]=(0,p.lE)(),b=(0,pe.Z)(y),h=vt({lastPriceType:"trade"}),[v]=(0,p.K5)(),{stepSizePrecision:x,tickSizePrecision:S,equalQtyPrecision:k}=(0,qt.q)({orderType:v}),[P]=(0,p.eY)(),{contractVal:T}=(0,Kt.j2)(),C=(0,i.useRef)(_t()),{0:Z,1:M}=(0,i.useState)(""),{0:I,1:w}=(0,i.useState)(""),E=(0,Wt.e)({unit:P,contractVal:T,price:h,orderAmount:0,stepSizePrecision:x,tickSizePrecision:S,equalQtyPrecision:k});(0,i.useEffect)((()=>{C.current=()=>{const e=(0,Wt.e)({unit:P,contractVal:T,price:h,orderAmount:o.current.buyMaxAmount*m/100,stepSizePrecision:x,tickSizePrecision:S,equalQtyPrecision:k}),t=(0,Wt.e)({unit:P,contractVal:T,price:h,orderAmount:o.current.sellMaxAmount*m/100,stepSizePrecision:x,tickSizePrecision:S,equalQtyPrecision:k});M(e),w(t)}}),[T,k,h,m,x,S,P]);const A=(0,i.useCallback)((()=>{f(0),M(""),w("")}),[]);return(0,i.useEffect)((()=>J.TB.on(J.FP.SET_SLIDER_AMOUNT,f)),[]),(0,i.useEffect)((function(){y===b&&m===g||C.current()}),[y,b,m,g]),(0,i.useEffect)((function(){u||A()}),[l,u,A]),(0,i.useEffect)((function(){u&&!d&&A()}),[d,u,A]),(0,i.useEffect)((function(){""===s&&f(0)}),[s,A]),(0,i.useEffect)((function(){u&&n(e,`${m}%`)}),[e,u,m,n]),(0,i.useEffect)((function(){switch(t){case"buyUnitAmount":n(e,Z);break;case"sellUnitAmount":n(e,I)}}),[e,t,Z,m,I,n]),Ht(c.Z,{sx:$t},Ht(jt,{ref:o}),Ht(Bt.Z,Object.assign({},Gt,{progress:m,onChange:f,px:"0px"})),r&&Ht(Xe,{leftLabel:a("Buy",{defaultValue:"Buy"}),rightLabel:a("Sell",{defaultValue:"Sell"}),leftContent:`${Z||E} ${l}`,rightContent:`${I||E} ${l}`}))},Yt=({fieldName:e,unitAmountFieldName:t,side:r})=>{const{setValue:a}=(0,fe.Gc)(),[,[o]]=(0,n.z4)(),l=(0,n.XY)(o),{contractVal:s}=(0,n.j2)(),[c]=(0,p.eY)(),[u]=(0,p.KK)(),d=vt({lastPriceType:"trade"}),{maxBuyOrderAmount:f,maxSellOrderAmount:g}=(0,n.V2)({reduceOnly:u,orderPrice:d}),y=(0,fe.qo)({name:t})||0,b="string"===typeof y&&~(null===y||void 0===y?void 0:y.indexOf("%")),h="buy"===r?f:g,v=Number((0,m.yd)(b?parseFloat(y)/100*h:(({unit:e,contractVal:t,price:r,unitAmount:a})=>{const i=e===Te.SW.coin,o=e===Te.AO.usdt;if(i){const e=Number(t);return r?(0,m.Jp)(a/e,r):0}return o?r?a/r:0:a})({unit:c,contractVal:s,price:d,unitAmount:y}),l,1));return(0,i.useEffect)((()=>{a(e,v)}),[e,v,a]),null};var Qt=r("tS/l"),Xt=r("H3ec"),er=r("fDz0"),tr=o().createElement;const rr={color:"t.primary"},ar=e=>{let{label:t,disabled:r,className:a,tooltipText:i,tooltipLearnMoreLink:o,checked:n,onChange:l}=e,s=(0,g.Z)(e,["label","disabled","className","tooltipText","tooltipLearnMoreLink","checked","onChange"]);const c=e=>{e.preventDefault()},u=tr(N.Z,{fontSize:12,onClick:c},t);return tr(St.Z,{className:a,width:"auto",mt:16},tr(er.Z,Object.assign({},s,{onChange:e=>{l(e.currentTarget.checked)},checked:n,disabled:r})),i?tr(xe.m,{labelSx:rr,tip:tr("span",{onClick:c},i),learnMoreLink:o},u):u)};var ir=r("f+9E"),or=o().createElement;const nr=e=>{let{fieldName:t,value:r,label:a,disabled:i}=e,o=(0,g.Z)(e,["fieldName","value","label","disabled"]);const{setValue:n}=(0,fe.Gc)(),l=(0,fe.qo)({name:t})===r;return or(ir.ZP,Object.assign({},o,{value:r,name:t,label:a,disabled:i,checked:l,onChange:e=>n(t,e)}))};var lr=o().createElement;const sr=({priceFieldName:e,orderTypeFieldName:t,prefix:r,disabled:a,required:n,limitOptionValue:l,marketOptionValue:s})=>{const c=(0,Ot.i)(),{getI18n:u}=(0,p.yk)(),{setValue:d,getValues:m}=(0,fe.Gc)(),f=(0,i.useRef)(m(e)),g=(0,fe.qo)({name:t})===s,y=(0,i.useMemo)((()=>[{label:u("limit",{defaultValue:"Limit"}),value:l},{label:u("market",{defaultValue:"Market"}),value:s}]),[u,l,s]);(0,i.useEffect)((function(){g?(f.current=m(e),d(e,"")):d(e,f.current)}),[m,g,e,d]);const b=lr(o().Fragment,null,!g&&lr(De,{fieldName:e}),lr(Lt,{fieldName:t,options:y,disabled:a}));return lr(Ae,{fieldName:e,prefix:r,suffix:b,precision:c,maxLength:Te.ze,placeholder:g?u("advancedStrategy-marketPrice",{defaultValue:"Market Price"}):"",disabled:g||a,required:n})};var cr=o().createElement;const ur={"> .percent-input":{width:"64px",minWidth:"64px",marginLeft:"6px",".bn-input-prefix":{display:"none"},".bn-input-suffix":{ml:"2px"}}},dr=({type:e,entryPrice:t,strategySideFieldName:r,stopPriceFieldName:a,stopPriceWorkingTypeFieldName:o,disabled:n,required:l})=>{const{getI18n:c}=(0,p.yk)(),{setValue:u}=(0,fe.Gc)(),d=(0,Ot.i)(),{0:f,1:g}=(0,i.useState)(""),y=(0,i.useRef)(null),[b,h]=(0,fe.qo)({name:[r,a]}),v="takeProfit"===e;(0,i.useEffect)((()=>{if(!t||!f||"pnlPercent"!==y.current)return;const e=v?(({strategySide:e,entryPrice:t,pnlPercent:r})=>t*(1+r*e/100))({strategySide:b,entryPrice:t,pnlPercent:Number(f)}):(({strategySide:e,entryPrice:t,pnlPercent:r})=>t*(1-r*e/100))({strategySide:b,entryPrice:t,pnlPercent:Number(f)});u(a,e<0?"0":(0,m.uf)(e,d).replace(/,/g,""))}),[t,v,f,d,u,a,b]),(0,i.useEffect)((()=>{if(!t||!h||"stopPrice"!==y.current)return;const e=v?(({strategySide:e,entryPrice:t,stopPrice:r})=>e*(r-t)*100/t)({strategySide:b,entryPrice:t,stopPrice:h}):(({strategySide:e,entryPrice:t,stopPrice:r})=>e*(r-t)*100*-1/t)({strategySide:b,entryPrice:t,stopPrice:h});g(e<0?"0":(0,m.uf)(e,1))}),[t,v,h,b]);const x=v?c("advancedStrategy-takeProfitStopPrice",{defaultValue:"TP"}):c("advancedStrategy-stopLossStopPrice",{defaultValue:"SP"}),S=v?c("advancedStrategy-gain",{defaultValue:"Gain"}):c("advancedStrategy-loss",{defaultValue:"Loss"});return cr(s.Z,{sx:ur},cr(Ft,{prefix:x,priceFieldName:a,workingTypeFieldName:o,disabled:n,required:l,onFocus:()=>{y.current="stopPrice"}}),cr(we.Q,{className:"percent-input",precision:1,suffix:"%",value:f,onChange:g,onFocus:()=>{y.current="pnlPercent"},placeholder:S,disabled:n,target:v?"gain":"loss"}))};var mr=r("4Dm0"),pr=o().createElement;const fr=({qty:e,contractSize:t,entryPrice:r,stopPrice:a,side:i,precision:o})=>r&&a&&t&&e?(0,m.uf)(t*e*i*(1/r-1/a),o):"-",gr=({qty:e,entryPrice:t,stopPrice:r,side:a,precision:i})=>t&&r&&e?(0,m.uf)(e*a*(r-t),i):"-",yr={width:"100%",mt:"12px",fontSize:"12px",lineHeight:"16px","> .row":{display:"flex",justifyContent:"space-between","> .label":{color:"t.third"},"&.stop-pnl-row":{mt:"6px"}}},br=({takeProfitStopPrice:e,takeProfitPrice:t,takeProfitOrderType:r,stopLossStopPrice:a,stopLossPrice:i,stopLossOrderType:o,entryPrice:l,side:s})=>{const{getI18n:u}=(0,ae.yk)(),{contractVal:m=1,marginAsset:p,pricePrecision:f}=(0,n.j2)(),g=xt({side:"buy"}),y=xt({side:"sell"});let b="-",h="-";return(0,mr.G)()?(b=fr({entryPrice:+l,stopPrice:r===d.Jm.TAKE_PROFIT_LIMIT?+t:+e,side:s,qty:1===s?+g:+y,contractSize:m,precision:f}),h=fr({entryPrice:+l,stopPrice:o===d.Jm.STOP_LIMIT?+i:+a,side:s,qty:1===s?+g:+y,contractSize:m,precision:f})):(b=gr({entryPrice:+l,stopPrice:r===d.Jm.TAKE_PROFIT_LIMIT?+t:+e,side:s,qty:1===s?+g:+y,precision:f}),h=gr({entryPrice:+l,stopPrice:o===d.Jm.STOP_LIMIT?+i:+a,side:s,qty:1===s?+g:+y,precision:f})),pr(c.Z,{sx:yr},pr("div",{className:"row"},pr("div",{className:"label"},u("advancedStrategy-exitPNL")),pr("div",{className:"value"},b," ",p)),pr("div",{className:"row stop-pnl-row"},pr("div",{className:"label"},u("advancedStrategy-stopPNL")),pr("div",{className:"value"},h," ",p)))};var hr=o().createElement;const vr=({strategySideFieldName:e,takeProfitPriceFieldName:t,takeProfitStopPriceFieldName:r,takeProfitStopPriceWorkingTypeFieldName:a,takeProfitOrderTypeFieldName:i,stopLossPriceFieldName:n,stopLossStopPriceFieldName:l,stopLossStopPriceWorkingTypeFieldName:s,stopLossOrderTypeFieldName:c})=>{const{getI18n:u}=(0,p.yk)(),[m]=(0,p.t1)(),{isMobile:f}=(0,Qt.F)(),[g]=(0,p.KK)(),y=g,[b,h,v,x,S,k,P]=(0,fe.qo)({name:[e,t,r,i,n,l,c]}),T=vt({lastPriceType:b===ie.O6.LONG?"ask":"bid"});return m&&!f?hr(o().Fragment,null,hr(dr,{type:"takeProfit",entryPrice:T,strategySideFieldName:e,stopPriceFieldName:r,stopPriceWorkingTypeFieldName:a,disabled:y,required:!1}),hr(sr,{prefix:u("advancedStrategy-takeProfitPrice",{defaultValue:"TP Price"}),priceFieldName:t,orderTypeFieldName:i,limitOptionValue:d.Jm.TAKE_PROFIT_LIMIT,marketOptionValue:d.Jm.TAKE_PROFIT_MARKET,disabled:y,required:!1}),hr(dr,{type:"stopLoss",entryPrice:T,strategySideFieldName:e,stopPriceFieldName:l,stopPriceWorkingTypeFieldName:s,disabled:y,required:!1}),hr(sr,{prefix:u("advancedStrategy-stopLossPrice",{defaultValue:"SL Price"}),priceFieldName:n,orderTypeFieldName:c,limitOptionValue:d.Jm.STOP_LIMIT,marketOptionValue:d.Jm.STOP_MARKET,disabled:y,required:!1}),hr(br,{takeProfitPrice:h,takeProfitStopPrice:v,takeProfitOrderType:x,stopLossPrice:S,stopLossStopPrice:k,stopLossOrderType:P,entryPrice:T,side:b})):hr(o().Fragment,null,hr(Ft,{prefix:u("takeProfit",{defaultValue:"Take Profit"}),priceFieldName:r,workingTypeFieldName:a,required:!1,disabled:y}),hr(Ft,{prefix:u("stopLoss",{defaultValue:"Stop Loss"}),priceFieldName:l,workingTypeFieldName:s,required:!1,disabled:y}))},xr={flexDirection:"row",justifyContent:"space-between",height:"16px",".tpsl-checkbox":{mt:0},".side-radio":{color:"t.primary",".radio-text":{fontSize:"12px",lineHeight:"16px"},"&.short-side-radio":{ml:"16px"}}};var Sr=o().createElement;const kr=({strategySideFieldName:e,takeProfitPriceFieldName:t,takeProfitStopPriceFieldName:r,takeProfitStopPriceWorkingTypeFieldName:a,takeProfitOrderTypeFieldName:o,stopLossPriceFieldName:n,stopLossStopPriceFieldName:l,stopLossStopPriceWorkingTypeFieldName:c,stopLossOrderTypeFieldName:u,showSideRadioButtons:d})=>{const m=(0,Xt.tZ)(),{reset:f,getValues:g}=(0,fe.Gc)(),{getI18n:y}=(0,p.yk)(),[b,v]=(0,p.t1)(),{isMobile:x}=(0,Qt.F)(),[S]=(0,p.KK)(),k=S,P=(0,p.C3)(),[T,C]=(0,p.uD)(),Z=T&&b&&!x,M=(0,i.useCallback)((e=>{C(e),e||f((0,me.Z)((0,me.Z)({},g()),ye()(ke.U,[r,t,n,l])))}),[C,f,g,r,t,n,l]);return(0,i.useEffect)((()=>{P===h.UW&&v(!1)}),[P,v]),Sr("div",null,Sr(s.Z,{sx:xr},Sr(ar,{className:"tpsl-checkbox",tooltipText:y("limitType-strategyOrder-tip",{defaultValue:""}),tooltipLearnMoreLink:(0,J.CN)(h.Wh.TP_SL,{locale:m}),label:y("limitType-strategyOrder",{defaultValue:"TP/SL"}),disabled:k,checked:T,onChange:M}),Z&&d&&Sr(s.Z,{flexDirection:"row"},Sr(nr,{className:"side-radio",fieldName:e,value:ie.O6.LONG,label:Sr("span",{className:"radio-text"},y("advancedStrategy-long",{defaultValue:"Long"})),disabled:k}),Sr(nr,{className:"side-radio short-side-radio",fieldName:e,value:ie.O6.SHORT,label:Sr("span",{className:"radio-text"},y("advancedStrategy-short",{defaultValue:"Short"})),disabled:k}))),T&&Sr(vr,{strategySideFieldName:e,takeProfitPriceFieldName:t,takeProfitStopPriceFieldName:r,takeProfitStopPriceWorkingTypeFieldName:a,takeProfitOrderTypeFieldName:o,stopLossPriceFieldName:n,stopLossStopPriceFieldName:l,stopLossStopPriceWorkingTypeFieldName:c,stopLossOrderTypeFieldName:u}))};var Pr=r("k2tD"),Tr=o().createElement;const Cr=()=>{const e=(0,i.useRef)(document.querySelector('div[name="orderForm"]')),t=(0,n.tZ)(),{getI18n:r}=(0,p.yk)(),a=r("cost",{defaultValue:"Cost"}),o=r("costTip",{defaultValue:"The margin required to execute this order. Reducing a position does not cost margin."});return Tr(xe.m,{tip:o,learnMoreLink:(0,J.CN)(h.Wh.COST,{locale:t}),placement:"bottom",container:e.current},a)};var Zr=o().createElement;const Mr=({side:e,price:t,buyOrderAmount:r,sellOrderAmount:a})=>{const o=(0,i.useMemo)((()=>Zr(Cr,null)),[]),{marginAsset:l}=(0,n.j2)(),{buyOrderCost:s,sellOrderCost:c}=(0,n.E4)({orderPrice:t,buyOrderAmount:r,sellOrderAmount:a});switch(e){case"buy":return Zr(Ye,{label:o,content:`${s} ${l}`});case"sell":return Zr(Ye,{label:o,content:`${c} ${l}`});case"both":return Zr(Xe,{leftLabel:o,rightLabel:o,leftContent:`${s} ${l}`,rightContent:`${c} ${l}`});default:return null}},Ir=({side:e})=>{const t=(0,i.useMemo)((()=>Zr(Cr,null)),[]),{marginAsset:r}=(0,n.j2)(),a=(0,p.G3)()?ie.vQ.delivery.pricePrecision:ie.vQ.USDT.pricePrecision,o=(0,i.useRef)((0,Pr.GW)(0,a,!0)),l=(0,i.useRef)((0,Pr.GW)(0,a,!0));switch(e){case"buy":return Zr(Ye,{label:t,content:`${o.current} ${r}`});case"sell":return Zr(Ye,{label:t,content:`${l.current} ${r}`});case"both":return Zr(Xe,{leftLabel:t,rightLabel:t,leftContent:`${o.current} ${r}`,rightContent:`${l.current} ${r}`});default:return null}},wr=({side:e})=>{const t=vt({lastPriceType:"trade"}),r=xt({side:"buy"}),a=xt({side:"sell"}),[i]=(0,p.hN)(),[n]=(0,p.lE)(),l=!i||n===d.RS.OPEN,s=r>0||a>0;return Zr(o().Fragment,null,l&&s?Zr(Mr,{side:e,price:t,buyOrderAmount:r,sellOrderAmount:a}):Zr(Ir,{side:e}))};var Er=o().createElement;const Ar=({side:e})=>{const{getI18n:t}=(0,p.yk)(),r=t("Max",{defaultValue:"Max"}),a=(0,n.mA)(),[i]=(0,n.z4)(),[o]=(0,p.K5)(),[l]=(0,p.eY)(),{contractVal:s}=(0,n.j2)(),c=vt({lastPriceType:"trade"}),[u]=(0,p.KK)(),{maxBuyOrderAmount:d,maxSellOrderAmount:m}=(0,n.V2)({reduceOnly:u,orderPrice:c}),{stepSizePrecision:f,tickSizePrecision:g,equalQtyPrecision:y}=(0,qt.q)({orderType:o}),b=(0,Wt.e)({unit:l,contractVal:s,price:c,orderAmount:d,stepSizePrecision:f,tickSizePrecision:g,equalQtyPrecision:y}),h=(0,Wt.e)({unit:l,contractVal:s,price:c,orderAmount:m,stepSizePrecision:f,tickSizePrecision:g,equalQtyPrecision:y});switch(e){case"buy":return Er(Ye,{dataTestId:"max-buy-amount",label:r,content:`${b} ${a}`});case"sell":return Er(Ye,{dataTestId:"max-sell-amount",label:r,content:`${h} ${a}`});case"both":return Er(Xe,{leftDataTestId:"max-buy-amount",rightDataTestId:"max-sell-amount",leftLabel:r,rightLabel:r,leftContent:`${b} ${a}`,rightContent:`${h} ${a}`});default:return null}};var Nr=o().createElement;const Or=({side:e})=>Nr(o().Fragment,null,Nr(wr,{side:e}),Nr(Ar,{side:e}));var Rr=o().createElement;const Lr={flexDirection:"row",alignItems:"center",height:"16px",fontSize:"12px",mt:"16px"},Vr={verticalAlign:"50%",marginRight:"8px"},Fr=[ie.rb.GTC,ie.rb.IOC,ie.rb.FOK].map((e=>({label:e,value:e}))),Dr=({text:e})=>(0,i.useMemo)((()=>Rr(N.Z,{p:0,mb:2},e)),[e]),_r=e=>{const{getI18n:t}=(0,p.yk)(),[r,a]=(0,p.LY)();return Rr(s.Z,Object.assign({__css:Lr},e),Rr(xe.m,{sx:Vr,tip:Rr(o().Fragment,null,Rr(Dr,{text:t("timeInForce-title",{defaultValue:"Time in Force"}),key:0}),Rr(Dr,{text:t("timeInForce-GTC",{defaultValue:"GTC: Good Till Cancel"}),key:1}),Rr(Dr,{text:t("timeInForce-IOC",{defaultValue:"IOC: Immediate Or Cancel"}),key:2}),Rr(Dr,{text:t("timeInForce-FOK",{defaultValue:"FOK: Fill Or Kill"}),key:3}))},t("limitType-TIF",{defaultValue:"TIF"})),Rr(Mt,{value:r,onChange:a,options:Fr,"data-testid":"TIFReduxSelector"}))};var Br=o().createElement;const zr=({className:e})=>{const{getI18n:t}=(0,p.yk)(),[r,a]=(0,p.KK)(),[o]=(0,p.hN)(),[,n]=(0,p.uD)();return(0,i.useEffect)((()=>{r&&n(!1)}),[r]),o?null:Br(ar,{className:e,checked:r,onChange:a,tooltipText:t("limitType-reduceOnly-tip",{defaultValue:""}),label:t("limitType-reduceOnly",{defaultValue:"Reduce Only"})})};var Kr=r("bmcq"),qr=o().createElement;const Wr=(0,i.forwardRef)(((e,t)=>{let{fieldName:r,value:a,children:i}=e,o=(0,g.Z)(e,["fieldName","value","children"]);const{setValue:n}=(0,fe.Gc)();return qr(be.Z,Object.assign({sz:"normal",variant:"default",type:"submit",onClick:()=>{n(r,a)},ref:t},o),i)}));var Ur=o().createElement;const jr=({fieldName:e,activatePriceFieldName:t,side:r})=>{const[a]=(0,p.K5)(),[o]=(0,p.lE)(),{BuyText:l,SellText:c}=(0,p.x_)(o),m=(0,u.useSelector)(Kr.X8),f=(0,fe.qo)({name:ke.T.TRIGGER_PRICE_WORKING_TYPE}),g=(0,n.uH)(f===d.HZ.LAST_PRICE),y=(0,n.CE)(),b=f===d.HZ.LAST_PRICE?g:y,h=(0,fe.qo)({name:t}),{buyDisabled:v,sellDisabled:x}=(0,p.nL)({orderType:a,activePrice:h,price:b}),S=(0,i.useRef)(null),k=(0,i.useRef)(null);(0,i.useEffect)((()=>(0,Pe.GY)((({name:e})=>{var t;switch(e){case Pe.oU:v||null===(t=S.current)||void 0===t||t.click();break;case Pe.nW:var r;if(!x)null===(r=k.current)||void 0===r||r.click()}}))),[v,x]);const P=Ur(Wr,{ref:S,fieldName:e,value:ie.hp.BUY,disabled:m||v,colorStyle:"buy",flex:1,width:"100%",mr:"8px",mt:"8px"},l),T=Ur(Wr,{ref:k,fieldName:e,value:ie.hp.SELL,disabled:m||x,colorStyle:"sell",width:"100%",flex:1,mt:"8px"},c);return"buy"===r?P:"sell"===r?T:"both"===r?Ur(s.Z,null,P,T):null};var $r=r("bDLa"),Hr=r("IcOa"),Gr=r("aDrU"),Jr=r("oZC5"),Yr=r("xxGv"),Qr=r("isaE");const Xr={m:"-12px",pb:"12px",bg:"modalBg",fontSize:"12px",borderRadius:"4px",overflow:"hidden",".fee-row":{display:"flex",justifyContent:"space-between",px:"12px","&.taker":{mb:"4px"}},".fee-label":{color:"t.third"},".fee-value":{color:"t.primary"},".vip-level":{color:"t.yellow"},".arrow-icon-container":{ml:"auto",transform:"rotate(-90deg)"}},ea={".tooltip-label":{cursor:"pointer",fontSize:"12px",borderBottom:"1px solid",borderColor:"t.secondary",color:"t.secondary","&:hover":{borderColor:"t.yellow",color:"t.yellow"}}};var ta=o().createElement;const ra=1e6,{FEE_URL:aa}=ie.x,ia=(0,me.Z)((0,me.Z)({},{display:"flex",alignItems:"center",width:"200px",height:"40px",mb:"12px",px:"10px",textDecoration:"none","&.header-link-color":{color:"t.primary","&:hover":{color:"t.primary"}}}),{},{background:e=>`linear-gradient(to right, ${e.colors.line}80, ${e.colors.modalBg})`}),oa=()=>{const{isLight:e}=(0,Yr.Fg)(),{getI18n:t}=(0,p.yk)(),r=(0,Xt.tZ)(),a=(0,p.aq)(),{feeTier:i,makerCommission:o=0,takerCommission:n=0}=a,l=(0,m.Bq)(n,ra,{digit:4}),c=(0,m.Bq)(o,ra,{digit:4});return ta(s.Z,{"data-testid":"freeLevel-content",flexDirection:"column",sx:(0,me.Z)((0,me.Z)({},Xr),!e&&{boxShadow:"elevation2"})},ta(N.Z,{as:"a",className:"header-link-color",target:"_blank",rel:"noreferrer",href:(0,Qr.C)(aa,{locale:r}),sx:ia},ta(Gr.Z,{size:24,color:"t.secondary"}),t("fee-feeTierLabel",{defaultValue:"Fee Tier"}),"\xa0",ta("span",{className:"vip-level"},0===Number(i)?t("fee-regularUser",{defaultValue:"Regular User"}):`VIP ${i}`),ta("span",{className:"arrow-icon-container"},ta(Jr.Z,{size:16,color:"t.third"}))),ta("div",{className:"fee-row taker"},ta("label",{className:"fee-label"},t("fee-takerLabel",{defaultValue:"Taker"}),":"),ta("span",{className:"fee-value"},`${n<0?"-":""}${l}`)),ta("div",{className:"fee-row"},ta("label",{className:"fee-label"},t("fee-makerLabel",{defaultValue:"Maker"}),":"),ta("span",{className:"fee-value"}," ",`${o<0?"-":""}${c}`)))};var na=o().createElement;const la=()=>{const{isIPad:e}=(0,Qt.F)(),{getI18n:t}=(0,p.yk)(),r=(0,p.aq)(),a=(0,Hr._n)(),{feeTier:i="-"}=r;return a&&!h.Jg?na($r.Z,{sx:ea,enablePortal:!e,placement:"bottom",tip:"-"===i?null:na(oa,null),bg:"modalBg"},na("div",{className:"tooltip-label","data-testid":"freeLevel-button"},t("feeLevel",{defaultValue:"Fee level"}))):null};var sa=o().createElement;const ca={[d.Jm.LIMIT]:({price:e,amount:t,amountSlider:r,tpsl:a,reduceOnly:i,tif:n,costAndMax:l,placeOrderButtons:s,divider:c})=>nt(o().Fragment,null,e,t,r,c,a,nt(ot,null,i,n),c,s,l),[d.Jm.MARKET]:({divider:e,amount:t,amountSlider:r,tpsl:a,reduceOnly:i,costAndMax:n,placeOrderButtons:l,showTPSL:s,showReduceOnly:c})=>{const u=s||c;return lt(o().Fragment,null,t,r,u&&e,a,i,u&&e,l,n)},[d.Jm.STOP_LIMIT]:({divider:e,price:t,stopPrice:r,amount:a,amountSlider:i,reduceOnly:n,tif:l,tpsl:s,costAndMax:c,placeOrderButtons:u})=>st(o().Fragment,null,r,t,a,i,e,s,st(ot,null,n,l),e,u,c),[d.Jm.STOP_MARKET]:({divider:e,stopPrice:t,amount:r,amountSlider:a,reduceOnly:i,tpsl:n,costAndMax:l,placeOrderButtons:s,showReduceOnly:c,showTPSL:u})=>{const d=c||u;return ct(o().Fragment,null,t,r,a,d&&e,n,i,d&&e,s,l)},[d.Jm.TRAILING_STOP_MARKET]:({divider:e,callbackRate:t,activationPrice:r,amount:a,amountSlider:i,reduceOnly:n,costAndMax:l,placeOrderButtons:s,showReduceOnly:c})=>ut(o().Fragment,null,t,r,a,i,c&&e,n,c&&e,s,l),[d.Jm.POST_ONLY]:({divider:e,price:t,amount:r,amountSlider:a,reduceOnly:i,tpsl:n,costAndMax:l,placeOrderButtons:s,showTPSL:c,showReduceOnly:u})=>{const d=c||u;return dt(o().Fragment,null,t,r,a,d&&e,n,i,d&&e,s,l)}},ua=e=>{let{side:t,horizontal:r}=e,a=(0,g.Z)(e,["side","horizontal"]);const[l]=(0,p.K5)(),[u]=(0,p.hN)(),[m]=(0,p.lE)(),{symbol:f}=(0,n.j2)(),y=(0,n.c7)(),b=(0,n._n)(),{getI18n:v}=j(),{getI18n:x}=(0,p.yk)(),[S,k]=(0,he.Z)(h._J,ye()(ke.U,[ke.T.TRIGGER_PRICE_WORKING_TYPE,ke.T.TP_STOP_PRICE_WORKING_TYPE,ke.T.TP_ORDER_TYPE,ke.T.SL_STOP_PRICE_WORKING_TYPE,ke.T.SL_ORDER_TYPE])),P=(0,i.useCallback)((()=>(0,me.Z)((0,me.Z)((0,me.Z)({},ke.U),S),{},{[ke.T.LIMIT_PRICE]:y(),[ke.T.STRATEGY_SIDE]:"sell"===t?ie.O6.SHORT:ie.O6.LONG})),[S,y,t]),T=(0,fe.cI)({defaultValues:P()}),{reset:C,handleSubmit:Z,getValues:M}=T,I=(0,i.useCallback)((()=>{const e=M(ke.T.TRIGGER_PRICE_WORKING_TYPE),t=M(ke.T.TP_STOP_PRICE_WORKING_TYPE),r=M(ke.T.TP_ORDER_TYPE),a=M(ke.T.SL_STOP_PRICE_WORKING_TYPE),i=M(ke.T.SL_ORDER_TYPE);return{[ke.T.TRIGGER_PRICE_WORKING_TYPE]:e,[ke.T.TP_STOP_PRICE_WORKING_TYPE]:t,[ke.T.TP_ORDER_TYPE]:r,[ke.T.SL_STOP_PRICE_WORKING_TYPE]:a,[ke.T.SL_ORDER_TYPE]:i}}),[M]),w=(0,Se.F)({afterSubmit:()=>C((0,me.Z)((0,me.Z)({},P()),I()))}),E=(0,pe.Z)(l),A=(0,pe.Z)(f);(0,i.useEffect)((function(){E===l&&A===f||C((0,me.Z)((0,me.Z)({},P()),I()))}),[C,l,E,P,I,A,f]),(0,i.useEffect)((function(){function e(){const e=I();k(e)}return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}),[I,k]);const N=ca[l]||null,O=(0,i.useMemo)((()=>sa(qe,{fieldName:ke.T.LIMIT_PRICE,prefix:x("price",{defaultValue:"Price"}),required:!0,getLastTracePrice:y})),[x,y]),R=(0,i.useMemo)((()=>sa(Ft,{prefix:x("stopPrice",{defaultValue:"Stop Price"}),priceFieldName:ke.T.TRIGGER_PRICE,workingTypeFieldName:ke.T.TRIGGER_PRICE_WORKING_TYPE,required:!0})),[x]),L=(0,i.useMemo)((()=>sa(ht,{fieldName:ke.T.PRICE_RATE,required:!0})),[]),V=(0,i.useMemo)((()=>{const e=sa(xe.m,{className:"prefix-tooltip-container",tip:x("activationPriceTip",{defaultValue:ve.activationPriceTip})},sa(mt.u,null,x("activationPrice",{defaultValue:"Activation Price"})));return sa(c.Z,{sx:{".bn-input-prefix":{flex:"1"},".prefix-tooltip-container":{width:"100%"},".bn-input-suffix":{marginLeft:"0px !important"},".order-form-input":{width:"73px",px:"4px"}}},sa(Ft,{prefix:e,priceFieldName:ke.T.ACTIVATE_PRICE,workingTypeFieldName:ke.T.ACTIVATE_PRICE_WORKING_TYPE,required:!1}))}),[x]),F=(0,i.useMemo)((()=>sa(Nt,{fieldName:ke.T.UNIT_AMOUNT,prefix:x("quantity",{defaultValue:"Size"}),required:!0})),[x]),D=b?sa(Yt,{fieldName:ke.T.BUY_ORDER_AMOUNT,unitAmountFieldName:ke.T.UNIT_AMOUNT,side:"buy"}):null,_=b?sa(Yt,{fieldName:ke.T.SELL_ORDER_AMOUNT,unitAmountFieldName:ke.T.UNIT_AMOUNT,side:"sell"}):null,B=(0,i.useMemo)((()=>sa(Jt,{amountFieldName:ke.T.UNIT_AMOUNT,amountFieldValueType:r?"buy"===t?"buyUnitAmount":"sellUnitAmount":"percentage",showUnitAmount:b&&!r})),[b,t,r]),z=(0,i.useMemo)((()=>b&&m!==d.RS.CLOSE),[b,m]),K=(0,i.useMemo)((()=>z?sa(kr,{showSideRadioButtons:!r,strategySideFieldName:ke.T.STRATEGY_SIDE,takeProfitPriceFieldName:ke.T.TP_LIMIT_PRICE,takeProfitStopPriceFieldName:ke.T.TP_STOP_PRICE,takeProfitStopPriceWorkingTypeFieldName:ke.T.TP_STOP_PRICE_WORKING_TYPE,takeProfitOrderTypeFieldName:ke.T.TP_ORDER_TYPE,stopLossPriceFieldName:ke.T.SL_LIMIT_PRICE,stopLossStopPriceFieldName:ke.T.SL_STOP_PRICE,stopLossStopPriceWorkingTypeFieldName:ke.T.SL_STOP_PRICE_WORKING_TYPE,stopLossOrderTypeFieldName:ke.T.SL_ORDER_TYPE}):null),[z,r]),q=b&&!r&&!u,W=(0,i.useMemo)((()=>q?sa(zr,null):null),[q]),U=(0,i.useMemo)((()=>b&&!r?sa(_r,{mt:z?"16px":"0px"}):null),[b,r,z]),$=(0,i.useMemo)((()=>b?sa(o().Fragment,null,sa(Or,{side:t}),!r&&sa(s.Z,{justifyContent:"flex-end",mt:"12px"},sa(la,null))):null),[b,t,r]),H=(0,i.useMemo)((()=>b?sa(jr,{fieldName:ke.T.SIDE,activatePriceFieldName:ke.T.ACTIVATE_PRICE,side:t}):sa(o().Fragment,null,sa($e,{getI18n:v}),sa(be.Z,{as:"a",width:1,mt:"12px",py:"10px",bg:"line",colorStyle:"secondary",href:h.x.TESTNET_OAUTH_URL},x("ba-futures-mock")))),[b,t,v,x]),G=(0,i.useMemo)((()=>b&&!r?sa(rt,null):null),[b,r]),J=(0,i.useMemo)((()=>sa(Ie,{orderType:l})),[l]);return sa(fe.RV,T,sa("form",Object.assign({autoComplete:"off",onSubmit:Z(w)},a),N&&sa(N,{side:t,horizontal:r,divider:G,price:O,stopPrice:R,callbackRate:L,activationPrice:V,amount:F,amountSlider:B,tpsl:K,reduceOnly:W,tif:U,costAndMax:$,placeOrderButtons:H,showReduceOnly:q,showTPSL:z}),D,_),J)},da=o().memo(ua);var ma=r("YIAr"),pa=r("afeE"),fa=r("PaeF"),ga=r("BLcC"),ya=r("Kiww"),ba=r("rjaD"),ha=r("cIsc"),va=r("n/Wb"),xa=r("IxrC"),Sa=r("f5AK"),ka=r("474N"),Pa=r("7yXh"),Ta=r("D9Cm"),Ca=r("S24M"),Za=r("uH0D"),Ma=o().createElement;const Ia=(e,t)=>{switch(t.type){case"changeResponsibleTradingPeriod":return(0,me.Z)((0,me.Z)({},e),t.payload);case"toggleResponsibleTrade":return(0,me.Z)((0,me.Z)({},e),{},{inCoolingDuration:t.payload});case"reset":return(0,me.Z)({},t.payload);default:return e}},wa=new Date,Ea=wa.setHours(0,0,0,0),Aa={today:{startTime:Ea,endTime:wa.setHours(23,59,59,59)},oneWeek:{startTime:Ea,endTime:Ea+691192e3},oneMonth:{startTime:Ea,endTime:new Date(wa.setMonth(wa.getMonth()+1)).setHours(23,59,59,59)}},Na=(0,i.forwardRef)(((e,t)=>{const r=(0,u.useDispatch)(),{getI18n:a}=(0,p.yk)(),{0:l,1:d}=(0,i.useState)(!1),{0:m,1:f}=(0,i.useState)(!1),{setMessageInfo:g}=(0,n.YT)(),y=(0,fa.p)(),{0:b,1:h}=(0,i.useState)(""),v=(0,n.tZ)(),x=(0,i.useMemo)((()=>y.inCoolingDuration?y:{inCoolingDuration:!1,startTime:0,endTime:0}),[y]),{0:S,1:k}=(0,i.useReducer)(Ia,x),P=(0,i.useCallback)((e=>{k({type:"toggleResponsibleTrade",payload:e.target.checked})}),[]),T=(0,i.useCallback)((()=>{setTimeout((()=>{k({type:"reset",payload:{initialState:x}}),h("")}),0)}),[x]),C=(0,i.useCallback)((({startTime:e,endTime:t})=>{k({type:"changeResponsibleTradingPeriod",payload:{startTime:e,endTime:t}})}),[]),Z=(0,i.useCallback)((()=>{d(!1),T()}),[T]),M=(0,i.useCallback)((()=>{f(!1),T()}),[T]),I=(0,i.useCallback)((()=>{d(!1),f(!0)}),[]),w=(0,i.useCallback)((()=>{r.tradeForbidden.setCoolingPeriodConfig(S).then((e=>{e.success?(g({message:a("coolingSettingSuccess",{defaultValue:"Cooling-off Period setting successfully"}),variant:"success"}),(0,Ca.j)("set_cooling_success")):T()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})),f(!1)}),[T,a,g,r.tradeForbidden,S]);return(0,i.useEffect)((()=>{!S.inCoolingDuration||S.startTime||S.endTime||(C((0,me.Z)({},Aa.today)),h("today"))}),[C,S.inCoolingDuration,S.startTime,S.endTime]),(0,i.useImperativeHandle)(t,(()=>({showResponsibleConfigPanel:()=>{d(!0)}}))),Ma(o().Fragment,null,Ma(ha.Z,{tx:"responsibleTrade",variant:"dialog",open:l,onCloseIconClick:Z,title:a("coolingPeriod",{defaultValue:"Cooling Period"}),"data-testid":"cooling-off-period-panel"},Ma(c.Z,{className:"des"},a("responsibleContent",{defaultValue:"You can voluntarily enter a Cooling-off Period whereby disabling Futures accounts related trading, including Futures, Strategy Trading, Battle and Options. This is an interface level function and not guaranteed to block all trades. You\u2019re not allowed to turn on trading function during Cooling-off Period. You must close all positions and open orders before enabling this setting."}),Ma(ga.Z,{variant:"defaultLink",ml:"8px",fontSize:"14px",href:(0,Za.b)(`/${v}/support/faq/ad7fd07f63a64954a6d6e9257d16adcc`),target:"_blank"},a("learnMore",{defaultValue:"Learn More"}),Ma(ka.Z,{size:14,ml:"2px",verticalAlign:"middle"}))),Ma(s.Z,{className:"label"},Ma(N.Z,{mr:"20px"},a("disableFuturesTrading",{defaultValue:"Disable Futures Trading Function"})),Ma(ya.Z,{"data-testid":"cooling-off-period-switch",size:16,checked:S.inCoolingDuration,disabled:y.inCoolingDuration,onChange:P})),Ma(va.Z,{value:b,fontSize:"14px",disabled:y.inCoolingDuration||!S.inCoolingDuration,hideSearch:!0,placeholder:a("chooseLockoutPeriod",{defaultValue:"Choose a lockout period"}),onChange:e=>{C((0,me.Z)({},Aa[e])),h(e)},renderValue:e=>e&&a(e)},Ma(xa.W,{value:"today"},a("today",{defaultValue:"Today"})),Ma(xa.W,{value:"oneWeek"},a("oneWeek",{defaultValue:"1 Week"})),Ma(xa.W,{value:"oneMonth"},a("oneMonth",{defaultValue:"1 Month"}))),Ma(s.Z,{className:"time-container"},Ma(s.Z,{className:"time"},Ma("span",null,a("startDate",{defaultValue:"Start Date"})),Ma("span",null,S.startTime?(0,Ta.v)(new Date(S.startTime),"yyyy-MM-dd"):"--")),Ma("span",{className:"separate"},"-"),Ma(s.Z,{className:"time"},Ma("span",null,a("endDate",{defaultValue:"End Date"})),Ma("span",null,S.endTime?(0,Ta.v)(new Date(S.endTime),"yyyy-MM-dd"):"--"))),Ma(Sa.y,null,Ma(s.Z,{className:"confirm"},Ma(be.Z,{sz:"normal",variant:"default",onClick:I,"data-testid":"cooling-off-period-confirm-button",disabled:y.inCoolingDuration||!S.inCoolingDuration||!b},a("PreferenceConfirm",{defaultValue:"Confirm"}))))),Ma(ba.Z,{tx:"responsibleTrade",variant:"secondaryConfirm",visible:m},Ma(s.Z,{flexDirection:"column",alignItems:"center"},Ma(Pa.Z,{width:"96px",height:"96px"}),Ma(N.Z,{color:"t.primary",fontSize:"16px"},a("disableWarningDes",{periodOptions:a(b)})),Ma(s.Z,{width:"100%",mt:"24px",justifyContent:"space-between"},Ma(be.Z,{width:"46%",variant:"default",colorStyle:"secondary",sz:"l",onClick:M},a("cancelBtnText")),Ma(be.Z,{width:"46%",sz:"l",onClick:w},a("confirmBtn"))))))}));var Oa=o().createElement;const Ra={maxWidth:"240px",boxSizing:"border-box",mt:"sm",color:"filterDropdown.color",py:2,borderRadius:"4px",boxShadow:"elevation2",width:"auto",p:0,position:"relative",bg:"modalBg",top:"-20px",right:"10px","& .opr":{variant:"filters.button",color:"t.primary",fontSize:1,lineHeight:"16px",py:"12px",px:3,":hover":{bg:"bg3"},".page-link":{color:"t.primary",textDecoration:"none"},justifyContent:"space-between"},"& .line":{borderTop:"1px solid",borderColor:"newLine",my:"8px",mx:"16px"},"& .checkbox":{color:"t.primary",fontSize:"12px",lineHeight:"16px",py:"8px",px:3,justifyContent:"flex-start",alignItems:"flex-start",":last-of-type":{paddingBottom:"16px"}}},La=()=>{const{getI18n:e}=(0,p.yk)(),t=(0,n.tZ)(),r=(0,n._n)(),a=(0,p.BF)(h.UW),l=(0,i.useRef)(null),s=(0,J.CN)(h.O8,{locale:t}),{showPreferencePanel:c}=(0,p.r8)(),{responsiblePanelRef:u,showResponsiblePanel:d}=(0,p.W5)(),[m,f]=(0,p.UI)(),[g,y]=(0,p.t1)(),[b,v]=(0,p.NU)();return Oa(o().Fragment,null,Oa(M.ZP,{overlay:Oa(pa.Z,{sx:Ra,onClick:e=>e.stopPropagation()},Oa("div",{name:"orderform-preference-menu"},r&&Oa("div",{className:"opr",onClick:()=>c("oc")},e("preference",{defaultValue:"Preference"})),r&&Oa("div",{className:"opr",onClick:d},e("coolingPeriod",{defaultValue:"Cooling Period"})),Oa("div",{className:"opr",onClick:()=>(0,oe.O)()},e("trading-rules",{defaultValue:"Trading Rules"})),r&&Oa("div",{className:"opr"},Oa("a",{className:"page-link",href:s,target:"_blank"},e("positionLimitEnarge",{defaultValue:"Position Limit Enarge"}))),Oa("div",{className:"line"}),!a&&Oa(o().Fragment,null,Oa(St.Z,{className:"checkbox"},Oa(er.Z,{onChange:e=>{f(e.target.checked)},checked:m,id:"remember",name:"displayMargin"}),Oa(N.Z,null,e("orderFromPreference-displayMargin",{defaultValue:"Display Margin Mode & Leverage Adjustment Button"}))),Oa(St.Z,{className:"checkbox"},Oa(er.Z,{onChange:e=>{y(e.target.checked)},checked:g,id:"remember",name:"advancedTPSL"}),Oa(N.Z,null,e("orderFromPreference-advancedTPSL",{defaultValue:"Advanced TP/SL"})))),Oa(St.Z,{className:"checkbox"},Oa(er.Z,{onChange:e=>{v(e.target.checked)},checked:b,id:"remember",name:"showPlusMinusButton"}),Oa(N.Z,null,e("orderFromPreference-showPlusMinusButton",{defaultValue:"Show Plus/Minus Buttons"}))))),trigger:"click",enablePortal:!0,placement:"bottom-start"},Oa("div",{ref:l},Oa(I.Z,{"data-testid":"orderform-preference-button",fontSize:"20px",sx:{position:"relative",top:"2px",ml:"4px",color:"icons.close",cursor:"pointer","&:hover path":{fill:"t.third"}}}))),r&&Oa(Na,{ref:u}))};var Va=r("c4mN"),Fa=o().createElement;const Da={":hover":{color:"t.primary"}},_a={ml:"8px",flexShrink:0},Ba=({orderType:e})=>{const{getI18n:t,i18n:{language:r}}=(0,p.yk)(),a=e===d.Jm.TRAILING_STOP_MARKET?(0,J.CN)(h.Wh.TRAILING_STOP_MARKET_ORDER,{locale:r}):(0,J.CN)(h.Wh.ORDER,{locale:r});return Fa(xe.m,{sx:_a,hideUnderLine:!0,learnMoreLink:a,tip:Fa(L,{getFutI18n:t,orderType:e})},Fa(Va.Z,{color:"t.third",size:16,sx:Da}))},za=o().memo(Ba),Ka=[{value:d.Jm.STOP_LIMIT,testId:d.OO.STOP_LIMIT,i18nKey:d.Jm.STOP_LIMIT},{value:d.Jm.STOP_MARKET,testId:d.OO.STOP_MARKET,i18nKey:d.Jm.STOP_MARKET},{value:d.Jm.TRAILING_STOP_MARKET,testId:d.OO.TRAILING_STOP_MARKET,i18nKey:d.Jm.TRAILING_STOP_MARKET},{value:d.Jm.POST_ONLY,testId:d.OO.POST_ONLY,i18nKey:"limitType-postOnly"},{value:d.Jm.TWAP,getTestId:({loginText:e})=>`ordertype_twap_${e}`,i18nKey:d.Jm.TWAP}],qa={width:"100%",boxShadow:"none",overflow:"hidden"},Wa={marginRight:["24px","16px"],".tab":{color:"t.third","&.xs":{fontSize:"xs"},"&:hover":{color:"t.yellow"},"&.active":{color:"t.yellow"}},"&:last-of-type":{marginRight:0,flex:1,minWidth:0,".tab":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},Ua={position:"relative",top:"4px",width:"fit-content",py:"4px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",".option":{padding:"6px 16px",fontSize:"14px",color:"t.primary","&:hover":{bg:"line",cursor:"pointer"},"&.active":{color:"t.yellow"}}};var ja=o().createElement;const $a={cursor:"pointer"},Ha=(e={})=>{const[t,r]=(0,p.K5)(),[a,o]=(0,p.H$)(),{getI18n:l}=(0,p.yk)(),u=(0,p.G3)(),m=(0,n._n)(),f="ph"===(0,n.Jr)(),g=(0,i.useMemo)((()=>u||h.Jg?Ka.filter((e=>e.value!==d.Jm.TWAP)):Ka),[u]),y=(0,i.useMemo)((()=>[d.Jm.LIMIT,d.Jm.MARKET,...g.map((e=>e.value))]),[g]),b=g.find((e=>e.value===a))||g[0];(0,i.useEffect)((function(){y.includes(t)||r(y[0]),y.includes(a)||o(b.value)}),[t,a,b.value]);const v=m?"login":"notLogin",x=(e,t,r)=>ja("div",{className:_()({active:e,tab:!0,xs:f}),"date-testid":r},t),S=(0,i.useMemo)((()=>ja(c.Z,{sx:Ua,name:"ordertabs-menu","data-testid":`ordertype_dropdown_${v}`},g.map((({value:e,i18nKey:a,testId:i,getTestId:n})=>ja("div",{key:e,className:_()({active:t===e,xs:f,option:!0}),"data-testid":n?n({loginText:v}):i,onClick:()=>{r(e),o(e)}},l(a)))))),[l,f,t,r,o,v,g]);return ja(s.Z,Object.assign({alignItems:"center"},e,{className:"order-tabs"}),ja(s.Z,{flexDirection:"row"},ja(V.Z,{variant:"standard",defaultActiveKey:t,controlledKey:t,onChange:r,tabsSx:qa,tabSx:Wa},ja(F.Z,{tab:()=>x(t===d.Jm.LIMIT,l("limit"),"limit"),tabKey:d.Jm.LIMIT}),ja(F.Z,{tab:()=>x(t===d.Jm.MARKET,l("market"),"market"),tabKey:d.Jm.MARKET}),ja(F.Z,{tab:()=>x(t===b.value,l(b.i18nKey),b.getTestId?b.getTestId({loginText:v}):b.testId),tabKey:b.value})),ja(M.ZP,{trigger:"hover",enablePortal:!0,placement:"bottom-end",overlay:S},ja(kt.Z,{color:"t.third",size:16,verticalAlign:"middle","data-testid":"moreStopMode",sx:$a}))),t!==d.Jm.TWAP&&ja(za,{orderType:t}))},Ga=o().memo(Ha);var Ja=o().createElement;const Ya={position:"sticky",top:0,zIndex:1,bg:"popupBg",fontSize:"14px",".flex-row":{display:"flex",flexDirection:"row",alignItems:"center",width:"100%",boxSizing:"border-box","&.position-tab-row":{alignItems:"stretch"},"&.margin-leverage-or-title-row":{pt:"10px",px:"16px"}},".dropdown-wrapper-near-position-tabs":{display:"flex",alignItems:"center",px:"4px",bg:"moduleBg",borderBottom:"1px solid",borderBottomColor:"modalBg"},".dropdown-wrapper-near-margin-leverage":{ml:"16px"},".title":{mr:"auto",color:"t.primary"},".draggable-area":{pb:"20px","& .close-button":{cursor:"pointer",flexShrink:0,color:"icons.close",position:"absolute",right:"0","&:hover":{color:"t.third"}},".divider":{pt:"10px",borderBottom:"1px solid",borderColor:"modalBg"}}},Qa={flex:1,m:0},Xa={pb:"20px",px:"16px",justifyContent:"space-between",fontSize:"14px"},ei=({onRemove:e})=>{const{getI18n:t}=(0,p.yk)(),[r]=(0,p.hN)(),[a]=(0,p.UI)(),i=!r&&!a,n=i||a;return Ja(o().Fragment,null,Ja(c.Z,{sx:Ya},r&&Ja("div",{className:"flex-row position-tab-row"},Ja(W,null),Ja("div",{className:"dropdown-wrapper-near-position-tabs"},Ja(La,null))),Ja("div",{className:"flex-row margin-leverage-or-title-row"},a&&Ja($.Z,{sx:Qa}),i&&Ja("div",{className:"title"},t("placeOrder",{defaultValue:"Place Order"})),!r&&Ja("div",{className:"dropdown-wrapper-near-margin-leverage"},Ja(La,null))),Ja("div",{className:"draggable-area draggableHandle"},n&&Ja("div",{className:"divider"}),e&&Ja(ma.Z,{className:"close-button cancelIcon pro-layout-close-button",onClick:e,size:16}))),Ja(Ga,{sx:Xa}))};var ti=r("JPsv"),ri=o().createElement;const ai=ti.Z,ii=()=>{const e=(0,i.useRef)(),[t,[r,a]]=(0,n.z4)(),o=(0,n.j2)();return(0,i.useEffect)((()=>b.T.on(b.F.SHOW_ORDER_CONFIRM_PANEL,(t=>{var r,a;null===e||void 0===e||null===(r=e.current)||void 0===r||null===(a=r.showOrderConfirmPanel)||void 0===a||a.call(r,t)}))),[]),ri(ai,{symbol:t,base:r,quote:a,ticker:o,ref:e,marginAsset:o.marginAsset})},oi=(0,i.memo)(ii);var ni=r("TWt5"),li=o().createElement;const si=({onClick:e})=>{const{getI18n:t}=j();return li(s.Z,{bg:"moduleBg",display:["flex","none"],p:"sm",flexDirection:"column"},li(s.Z,{justifyContent:"space-between"},li(be.Z,{flex:"1",color:"white",colorStyle:"buy",sx:{height:"40px",borderRadius:"2px"},onClick:()=>e(d.g.BUY),mr:"xs"},t("BUY")),li(be.Z,{flex:"1",color:"white",colorStyle:"sell",sx:{height:"40px",borderRadius:"2px"},onClick:()=>e(d.g.SELL)},t("SELL"))))};var ci=o().createElement;const ui=({children:e})=>{const{0:t,1:r}=(0,i.useState)(!1),a=(0,i.useCallback)((()=>{r(!1)}),[r]),n=(0,i.useCallback)((()=>{r(!0)}),[r]),l=t?"-100%":"0";return(0,i.useEffect)((()=>b.T.on(b.F.HIDE_MOBILE_MASK,a)),[a]),ci(o().Fragment,null,ci(si,{onClick:n}),ci(ni.Z,{visible:t,onClick:a}),ci(c.Z,{sx:{bg:"popupBg",zIndex:[30,0],color:"t.primary",fontSize:[1],position:"relative",userSelect:"none",borderTopLeftRadius:["10px","0"],borderTopRightRadius:["10px","0"],transition:["transform .3s ease-in-out","none"],transform:[`translate3d(0, ${l}, 0)`,"none"]}},e))},di=o().memo(ui);var mi=r("Mt4o"),pi=r("7oEw"),fi=r("R+VW"),gi=r("14FK"),yi=o().createElement;const{Wallet:bi}=gi.Z,hi=({visible:e,onClose:t,curAsset:r})=>{const a=(0,p.G3)(),o=(0,u.useDispatch)(),l=(0,p._$)(),s=(0,i.useCallback)((()=>{o.transferAssets.getUserAssets()}),[o.transferAssets]),{assets:c}=l,d=Object.values((0,n.iB)()),m=(0,i.useMemo)((()=>Object.keys(c).reduce(((e,t)=>{var r,a,i,o;return e[t]={assetName:null===c||void 0===c||null===(r=c[t])||void 0===r?void 0:r.assetName,assetCode:null===c||void 0===c||null===(a=c[t])||void 0===a?void 0:a.asset,assetLogo:null===c||void 0===c||null===(i=c[t])||void 0===i?void 0:i.logoUrl,balance:null===c||void 0===c||null===(o=c[t])||void 0===o?void 0:o.free},e}),{})),[c]),f=(0,i.useMemo)((()=>Object.values(m)),[m]);(0,i.useEffect)((()=>{e&&s()}),[e,s]);const g=a?r||"BTC":"BUSD",y=a?"BTC"===g?"BNB":"BTC":r&&"BUSD"!==r?r:"USDT",b=(0,p.d0)(a),h=(0,i.useCallback)((e=>{const r=d.filter((t=>t.marginAsset===e)),a=r.find((e=>"CURRENT_QUARTER"===e.contractType))||r.find((e=>"PERPETUAL"===e.contractType))||r[0]||{},{symbol:i}=a;i?b({stateSymbol:i}):console.log("target asset no matched exchange symbol"),t()}),[b,d,t]);return yi(gi.Z,{assets:f,defaultToAsset:g,defaultFromAsset:y,afterSubmit:(e,t)=>{const{asset:r,sellAsset:a}=t||{};(0,J.DB)({eventLabelSuffix:`convert_${a}_to_${r}`,elementIdSuffix:"convert_confirm"})},goTrade:h,wallet:a?bi.DELIVERY:bi.FUTURE,visible:e,onClose:t})};var vi=r("51kw");const xi=(0,i.memo)((()=>{const{launchTransfer:e}=(0,vi.i)(),t=(0,mr.G)();return(0,i.useEffect)((function(){return b.T.on(b.F.OPEN_TRANSFER_MODAL,(r=>{e({from:"MAIN",to:t?"DELIVERY":"FUTURE",defaultCoin:r||(t?"BTC":"USDT")})}))}),[t,e]),null}));var Si=o().createElement;const ki=(0,i.memo)((()=>{const{0:e,1:t}=(0,i.useState)(!1),{0:r,1:a}=(0,i.useState)("BTC"),{setMessageInfo:l}=(0,n.YT)(),{getI18n:s}=(0,p.yk)(),{isLoggedIn:c}=(0,n.f0)();(0,i.useEffect)((function(){return b.T.on(b.F.OPEN_CONVERT_MODAL,(e=>{t(!0),a(e)}))}),[]);const u=(0,i.useCallback)(((e,{asset:t})=>{l(e?{message:e.message,variant:"error"}:{header:s("transfer-asset",{defaultValue:""}),message:`${t} ${s("successTransferAsset",{defaultValue:""})}`,variant:"success"})}),[s,l]);return h.sk?null:Si(o().Fragment,null,Si(pi.Z,null),Si(hi,{visible:e,onClose:()=>t(!1),curAsset:r}),c&&Si(mi.Z,{afterTransfer:u,needFuturesJointMargin:!0},Si(xi,null)),Si(fi.Z,null))}));var Pi=r("adpF"),Ti=r("fi7b");const Ci=e=>(0,n.ZK)("trd-calculator",e);var Zi=r("BkSH"),Mi=r("jQmP"),Ii=r("H3aL"),wi=r("QlFx"),Ei=r("74Of");const Ai=({entryPrice:e,quantity:t,leverage:r})=>e*t*(1/r),Ni=({positionDirection:e,exitPrice:t,entryPrice:r,quantity:a})=>(e===Zi.DD.LONG?t-r:r-t)*a,Oi=({PNL:e,entryPrice:t,quantity:r,leverage:a})=>e/Ai({entryPrice:t,quantity:r,leverage:a})*100,Ri=({ROE:e,leverage:t,positionDirection:r,entryPrice:a})=>{let i=e/100/t;return i=r===Zi.DD.LONG?i+1:1-i,a*i},Li=({brackets:e,positions:t,symbol:r,marginType:a,positionMode:i,walletBalance:o,longPosition:n,shortPosition:l,curPosition:s})=>{const c=(null===e||void 0===e?void 0:e[r])||[];let u=0;if(a===Zi.Yl.CROSS){const a=t.filter((e=>!(null!==e&&void 0!==e&&e.isolated))).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==r));u=(0,Ei.zW)(a,e)-(0,Ei.ot)(a)}return i===Zi.Tw.ONEWAY?(0,Ei.W8)(c,o,u,s):(0,Ei.wr)(c,o,u,n,l,s)},Vi=({walletBalance:e,leverage:t,entryPrice:r,bracketNotionalCap:a})=>Math.floor(Math.min(e*t/r,a/r)),Fi=({walletBalance:e,leverage:t,bracketNotionalCap:r})=>(0,Pr.GW)(Math.min(e*t,r)),Di=({positions:e})=>e.reduce(((e,{entryPrice:t,quantity:r})=>e+r*t),0)/e.reduce(((e,{quantity:t})=>e+t),0),_i=({positions:e})=>e.reduce(((e,{quantity:t})=>e+t),0)/e.reduce(((e,{entryPrice:t,quantity:r})=>e+r/t),0),Bi=({quantity:e,entryPrice:t})=>e*t,zi=({walletBalance:e,entryPrice:t,quantity:r,leverage:a})=>e<Math.abs(t)*Math.abs(r)/a,Ki=({walletBalance:e,leverage:t,longPosition:r,shortPosition:a})=>e<Math.abs(r.entryPrice)*Math.abs(r.quantity)/t+Math.abs(a.entryPrice)*Math.abs(a.quantity)/t,qi=e=>(0,wi.uf)(e),Wi=e=>(0,wi.uf)(e),Ui=e=>(0,wi.uf)(e);var ji=r("ca2E");function $i(){const e=(0,p.G3)(),{getI18n:t}=(0,p.yk)(),r=(0,p.QV)(),o=(0,ji.QV)(),{tickSize:l,quantityPrecision:s}=(0,n.j2)()||Zi.oF,c=(0,Mi.p)(l);return(0,i.useMemo)((()=>e?(({isCoinUnit:e,getFuturesI18n:t})=>({helper:(0,me.Z)((0,me.Z)({},Ii),{},{openPrice:e?Ii.openPriceCoin:Ii.openPriceCont}),walletBalancePrecision:4,leveragePositionUnitField:"baseAsset",getUnitChangeQty:({quantity:t,entryPrice:r,contractVal:a})=>e?Math.floor(t*r/a):t,getCoinUnitUnit:()=>t("Cont",{defaultValue:"Cont"}),getQuantityUnit:({product:r})=>e?r.baseAsset:t("Cont",{defaultValue:"Cont"}),getQuantityPrecision:({product:t})=>e?t.equalQtyPrecision:t.quantityPrecision,getNotionalValue:({quantity:t,entryPrice:r,contractVal:a})=>e?t:t*a/r}))({getFuturesI18n:t,isCoinUnit:o.isCoinUnit}):(({isCoinUnit:e,tickSizePrecision:t,quantityPrecision:r})=>({helper:(0,me.Z)((0,me.Z)({},a),{},{openPrice:e?Di:_i}),walletBalancePrecision:2,leveragePositionUnitField:"quoteAsset",getUnitChangeQty:({quantity:t,entryPrice:a})=>e?t:(0,Pr.GW)(t/a,r),getCoinUnitUnit:({product:e})=>e.baseAsset,getQuantityUnit:({product:t})=>e?t.baseAsset:t.marginAsset,getQuantityPrecision:({product:r})=>e?r.quantityPrecision:t,getNotionalValue:({quantity:t,entryPrice:r})=>e?t*r:t}))({isCoinUnit:r.isCoinUnit,tickSizePrecision:c,quantityPrecision:s})),[e,t,o.isCoinUnit,r.isCoinUnit,c,s])}const Hi={form:{container:{p:"16px 12px 16px 12px",flexDirection:"column",justifyContent:"unset",borderTop:"1px solid",borderColor:"calculator.containerBorderColor"},panel:{width:"100%",mr:0},tip:{pt:"15px"}},switch:{item:{bg:"calculator.resultBg",border:"none",color:"calculator.numberColor","&.active":{fontWeight:500,background:"linear-gradient(270deg, #FBDA3C 0%, #EFB80B 100%)",color:"#212833"}}},result:{container:{width:"100%",mt:"12px",bg:"calculator.resultBgMobile",py:"12px"},title:{fontWeight:"normal !important",mb:"12px"},label:{fontSize:"16px",color:"#848E9C"},value:{fontSize:"15px",color:"calculator.numberColor"},tooltipLabel:{fontSize:"16px",color:"#848E9C",borderBottom:"none !important"},description:{position:"relative",fontSize:"12px",color:"#848E9C",lineHeight:"18px",mt:10}},calculateBtn:{height:50,mt:18,fontWeight:"normal !important",background:"linear-gradient(90deg, #FBDA3C 0%, #EFB80B 100%)"},SymbolSelect:{overlayBoxSx:{width:"94vw"}},DropBpx:{sx:{bg:"calculator.dropBoxBg",borderColor:"calculator.dropBoxBg",fontWeight:"normal"}},custom:{TextField:{props:{color:"calculator.inputColor",fontSize:"15px !important",fontWeight:500,pb:"1px"},boxProps:{width:"100%",mt:12,height:44,borderColor:"calculator.inputBorderColorMobile"},prefix:{color:"#848E9C"},suffix:{color:"#848E9C",fontSize:"15px !important"}}}};function Gi(){const{isMobile:e}=(0,n.Fs)();return(0,i.useMemo)((()=>e?Hi:void 0),[e])}const Ji=(0,i.createContext)({currentLeverageBracket:{}});var Yi=o().createElement;const Qi={button:{flex:1,"&:last-child":{ml:"8px"},"&.normal-button":{bg:"inputBg","&:hover:not(:disabled):not(:active):not(.inactive)":{bg:"line"}},"&.long-button":{"&:hover:not(:disabled):not(:active)":{bg:["buy","buyHover"]}},"&.short-button":{"&:hover:not(:disabled):not(:active)":{bg:["sell","sellHover"]}}}},Xi=()=>{const{getI18n:e}=Ci(),t=Gi(),{positionDirection:r,setPositionDirection:a,marginType:o,positionMode:n}=(0,i.useContext)(Ji),l=(0,i.useCallback)((()=>a(Zi.DD.LONG)),[a]),c=(0,i.useCallback)((()=>a(Zi.DD.SHORT)),[a]);return(0,i.useMemo)((()=>{if(o===Zi.Yl.ISOLATED&&n===Zi.Tw.HEDGE)return null;const t=r===Zi.DD.LONG,a=r===Zi.DD.SHORT;return Yi(s.Z,{sx:Qi},Yi(be.Z,{variant:"default",colorStyle:"buy",className:t?"long-button":"normal-button",onClick:l,"data-testid":"LongButton"},e("Long",{defaultValue:"Long"})),Yi(be.Z,{variant:"default",colorStyle:"sell",className:a?"short-button":"normal-button",onClick:c,"data-testid":"ShortButton"},e("Short",{defaultValue:"Short"})))}),[e,o,t,l,c,r,n])};var eo=o().createElement;const to=({onClick:e})=>{const{isCalculateBtnValid:t}=(0,i.useContext)(Ji),{getI18n:r}=Ci(),a=Gi(),o=(0,i.useMemo)((()=>({"&:disabled":{bg:"line",color:"t.third"}})),[]);return(0,i.useMemo)((()=>eo(be.Z,Object.assign({variant:"default",width:1,sz:"l",disabled:!t,onClick:e,sx:o},(0,me.Z)({mt:4},null===a||void 0===a?void 0:a.calculateBtn),{"data-testid":"Calculate"}),r("Calculate",{defaultValue:"Calculate"}))),[o,r,t,a,e])};var ro=r("u8Th"),ao=r("Wx6g"),io=o().createElement;const oo={width:"50%",p:"24px",pt:0,position:"relative",borderLeft:"0.5px solid",borderLeftColor:"line",".title":{mb:"28px",fontStyle:"normal",fontWeight:500,fontSize:"md",lineHeight:"24px",color:"t.primary"},".field":{mt:"12px",display:"flex",fontSize:"14px",justifyContent:"space-between"},".label":{color:"t.third"},".value":{color:"t.primary"},".description":{fontSize:"12px",lineHeight:"16px",color:"t.third",position:[null,"absolute"],bottom:"16px",mr:"16px"}},no=({results:e,sx:t,titleSx:r,itemSx:a}={})=>{const{getI18n:o}=Ci(),n=Gi();return(0,i.useMemo)((()=>io(c.Z,{sx:(0,me.Z)((0,me.Z)((0,me.Z)({},oo),t),null===n||void 0===n?void 0:n.result.container)},io(N.Z,{className:"title",sx:(0,me.Z)((0,me.Z)({},r),null===n||void 0===n?void 0:n.result.title)},o("Result",{defaultValue:"Result"})),io(c.Z,null,io(lo,{items:e,sx:a})))),[o,a,n,e,t,r])};function lo({items:e,sx:t}){const{0:r,1:a}=(0,i.useState)(!1),n=Gi(),{getI18n:l}=(0,p.yk)();return io(o().Fragment,null,io(ba.Z,{tx:"calculator.dialog",variant:"container",visible:Boolean(r),onMaskClick:()=>a(null),sx:{borderRadius:"7px"}},io(s.Z,{flexDirection:"column"},io(N.Z,{sx:{px:"24px",py:"32px",fontSize:"14px",lineHeight:"22px",color:"calculator.numberColor",boxShadow:"0px 2px 8px rgba(11, 14, 17, 0.3)"}},r),io(be.Z,{sx:{height:"54px",borderTop:"1px solid",borderColor:"calculator.resultBg",fontSize:"17px",fontWeight:"normal",bg:"calculator.dialogBg"},onClick:()=>a(null)},l("CalculatorMobile-PNLTooltipConfirm",{defaultValue:"Ok, got it"})))),e.map((({value:e,label:r,asset:i,description:o,labelTooltip:l,testId:c},u)=>{var d,m,p,f;return io(s.Z,Object.assign({className:"field",key:u},c?{"data-testid":c}:{},{sx:t}),!l&&io(N.Z,{className:"label",sx:null===n||void 0===n||null===(d=n.result)||void 0===d?void 0:d.label},r),!!l&&io(ao.Z,null,(({isMobile:e})=>{var t;return e?io(s.Z,{className:"label",sx:null===n||void 0===n||null===(t=n.result)||void 0===t?void 0:t.tooltipLabel,onClick:()=>a(l)},io(N.Z,{mr:"8px"},r),io(ro.Z,{size:18})):io($r.Z,{tip:l},io(N.Z,{className:"label"},r))})),(e||0===e)&&io(N.Z,{className:"label",sx:null===n||void 0===n||null===(m=n.result)||void 0===m?void 0:m.label},io(N.Z,{className:"value",as:"span",sx:null===n||void 0===n||null===(p=n.result)||void 0===p?void 0:p.value},e," ",i)),o&&io(N.Z,{className:"description",sx:null===n||void 0===n||null===(f=n.result)||void 0===f?void 0:f.description},o))})))}var so=o().createElement;const{leverageInfo:{defaultVal:co}}=ie.Fy,uo=({children:e}={})=>{const t=(0,n.z4)()[0],{0:r,1:a}=(0,i.useState)(!1),{0:o,1:l}=(0,i.useState)(t),{0:s,1:c}=(0,i.useState)(Zi.DD.LONG),{0:u,1:d}=(0,i.useState)(Zi.Yl.CROSS),{0:m,1:f}=(0,i.useState)(Zi.Tw.ONEWAY),{0:g,1:y}=(0,i.useState)(!1),b=(0,p.Gf)(),{findLeverageByLevel:h,leverageData:{maxVal:v}}=(0,p.ho)({symbol:o,brackets:b}),{0:x,1:S}=(0,i.useState)(Math.min(v,co)),k=h(x),P=r&&!g;return(0,i.useEffect)((()=>{l(t)}),[t]),(0,i.useEffect)((()=>{S(Math.min(v,co))}),[v,S,o]),so(Ji.Provider,{value:{symbol:o,setSymbol:l,leverage:x,setLeverage:S,isLeverageGreaterThan:g,setIsLeverageGreaterThan:y,currentLeverageBracket:k||{},positionDirection:s,setPositionDirection:c,marginType:u,setMarginType:d,positionMode:m,setPositionMode:f,setIsFormValid:a,isCalculateBtnValid:P}},e)};var mo=o().createElement;const po={pt:"16px",pb:"12px",".slider-tip":{color:"t.third",fontSize:"12px",pt:"16px",".position-cap":{color:"t.primary",mt:"4px"}}};function fo(){var e;const{leverage:t,setLeverage:r,currentLeverageBracket:a,isLeverageGreaterThan:l,symbol:u}=(0,i.useContext)(Ji),{leveragePositionUnitField:d}=$i(),{isMobile:m}=(0,n.Fs)(),f=Gi(),{getI18n:g}=(0,p.yk)(),y=(0,n.iB)(),b=(0,p.Gf)(),h=(y[u]||Zi.oF)[d],{bracketSeq:v,bracketNotionalCap:x}=a,S=v===(null===b||void 0===b||null===(e=b[u])||void 0===e?void 0:e.length),{leverageData:{minVal:k,maxVal:P}}=(0,p.ho)({symbol:u,brackets:b}),T=(0,i.useMemo)((()=>function(e,t){let r=[];if(t<10){r=[];for(let e=1;e<=t;e++)r.push(e)}else{r=[e];for(let e=1;e<=5;e++)r.push(Math.floor(e/5*t))}return r}(k,P)),[P,k]),C=(0,i.useMemo)((()=>({min:k,max:P})),[P,k]),Z=(0,i.useCallback)((e=>r(e)),[r]),M=(0,i.useMemo)((()=>mo(o().Fragment,null,!S&&mo("div",{className:"slider-tip"},g("AvailablePositionsTip",{defaultValue:"Max position at current leverage:"}),mo("div",{className:"position-cap"},(0,wi.kh)(x)," ",h)))),[x,g,S,l,h]),I=(0,i.useMemo)((()=>{var e;return mo(o().Fragment,null," ",!S&&mo(s.Z,{tx:"calculator.form",variant:"tip",justifyContent:"space-between",sx:null===f||void 0===f||null===(e=f.form)||void 0===e?void 0:e.tip,className:l?"active":""},mo(c.Z,{sx:{fontSize:"12px",lineHeight:"16px"}},g("AvailablePositionsTip")),mo(c.Z,null,mo(N.Z,{as:"span",sx:{color:"calculator.numberColor",fontWeight:500}},"\xa0",(0,wi.kh)(x),"\xa0"),mo("span",null,h))))}),[x,g,S,f,h,l]);return m?mo(c.Z,{mb:"8px"},mo(Bt.Z,{progress:t,range:C,onChange:Z,unit:"x",steppers:T,showScales:!0}),I):mo(c.Z,{sx:po},mo(Bt.Z,{progress:t,range:C,onChange:Z,unit:"x",px:"0px",steppers:T,showScales:!0}),M)}var go=o().createElement;const yo=({children:e,sx:t,overrideSx:r})=>{const a=Gi();return go(s.Z,{tx:"calculator.form",variant:"container",sx:(0,me.Z)((0,me.Z)((0,me.Z)({},t),null===a||void 0===a?void 0:a.form.container),r)},e)},bo=({children:e})=>{const t=Gi();return go(c.Z,{tx:"calculator.form",variant:"panel",sx:null===t||void 0===t?void 0:t.form.panel},e)};var ho=r("WZQH");function vo(e,t=2){try{if("number"!==typeof e&&!e)return"-";const r=(e="number"===typeof e?e:+e).toFixed(Math.max(0,~~t)),a=-1!==r.indexOf(".")?/\d(?=(\d{3})+\.)/g:/\d(?=(\d{3})+$)/g;return r.replace(a,"$&,")}catch(r){return Sentry.captureException(r),"-"}}function xo(e){return!Number.isNaN(e)&&!isNaN(e)&&Math.abs(e)!==1/0}var So=o().createElement;function ko({config:e}){const{value:t,max:r,precision:a,onChange:l,placeholder:u,asset:d,errorText:m="",negative:p=!1,testId:f,type:g="number",assetLabel:y=null,onAssetLabelClick:b,boxProps:h,mobileBoxProps:v}=e,x="rtl"===(0,n.gm)(),{isMobile:S}=(0,n.Fs)(),k=Gi(),P=null===k||void 0===k?void 0:k.custom.TextField,T=(0,i.useCallback)((()=>b()),[b]),C=(0,i.useCallback)((e=>{(p||+e>=0)&&+e<=+r&&l(e)}),[r,p,l]),Z=(0,i.useCallback)((e=>function(e,{fn:t,filed:r,places:a,negative:i=!1}){let o=e.target.value;return(i?(n=Number(o),/[^\-?\d|.|,|\u3002]/.test(n)):function(e){return/[^\d|.|,|\u3002]/.test(e)}(Number(o)))?"":(/\u3002|,/.test(o)&&(o=o.replace(/[\u3002|,]/g,".")),/^0\d/.test(o)?o="0":/^\./.test(o)?o=0+o.substring(0,a+1):Number(o)>=0&&-1!==o.indexOf(".")&&o.split(".")[1].length>=a&&(o=o.replace(new RegExp(`^(\\d*\\.\\d{${a}})\\d*`),"$1")),Number.isNaN(Number(o))?"":void(r?t(r,o):t(o)));var n}(e,{fn:C,filed:null,places:a,negative:p})),[C,p,a]),M=(0,i.useCallback)((e=>function(e){return!/\d*\.?\d+$/.test(e.target.value)&&(e.target.value="")}(e)),[]),I=(0,i.useMemo)((()=>u&&So(N.Z,{fontSize:14,color:"t.third",sx:null===P||void 0===P?void 0:P.prefix},u)),[P,u]),w=(0,i.useMemo)((()=>d&&So(s.Z,{justifyContent:"center",alignItems:"center"},y&&So(c.Z,{sx:{fontSize:"12px",color:"t.yellow",mr:"4px",cursor:"pointer",padding:"3px 4px",borderRadius:"4px","&:hover":{bg:"calculator.inputAssetLabelBg"}},onClick:T},y),So(N.Z,{color:"t.primary",fontSize:1,sx:null===P||void 0===P?void 0:P.suffix},d))),[d,y,P,T]),E=(0,i.useMemo)((()=>({sx:S?(0,me.Z)((0,me.Z)({},null===P||void 0===P?void 0:P.boxProps),v):(0,me.Z)({width:"100%",mt:"12px",border:"none",bg:"inputBg",height:"40px",input:{px:"8px"}},h)})),[h,S,v,P]),A=(0,i.useMemo)((()=>(0,me.Z)((0,me.Z)({style:x?{textAlign:"right"}:{}},null===P||void 0===P?void 0:P.props),f?{"data-test-id":f}:{})),[x,P,f]);return(0,i.useMemo)((()=>So(o().Fragment,null,So(ho.Z,Object.assign({type:g,variant:"inline",value:t,onChange:Z,onBlur:M,prefix:I,suffix:w,boxProps:E,placeholder:S?vo(0,a):null},A)),!!m&&So(c.Z,{sx:{fontSize:"12px",color:"t.sell"}},m))),[m,E,I,A,w,S,M,Z,a,g,t])}function Po({inputs:e,boxProps:t}){return So(o().Fragment,null,e.map(((e,r)=>So(ko,{key:r,config:e,boxProps:t}))))}var To=r("Rdst"),Co=o().createElement;function Zo({activeKey:e,data:t=[],onSelectChange:r=(()=>{}),sx:a,overlayBoxSx:o,itemSx:n}={}){const l=Gi(),{0:u,1:d}=(0,i.useState)(!1),m=(0,i.useMemo)((()=>Co(c.Z,{sx:(0,me.Z)({width:"143px",maxHeight:"250px",bg:"calculator.dropBoxBg",borderRadius:"4px",overflow:"auto",mt:"2px",boxShadow:"0px 0px 8px rgba(11, 14, 17, 0.15)"},o)},t.map((({key:e,value:t,disabled:a})=>{const i=a?{}:{color:"t.yellow",bg:"bg3"};return Co(s.Z,{justifyContent:"center",alignItems:"center",sx:(0,me.Z)({height:"35px",color:a?"#5E6673":"t.secondary",fontSize:"14px",cursor:a?"not-allowed":"pointer",bg:"popupBg","&:hover":(0,me.Z)({},i)},n),key:e,onClick:()=>{a||r(e)}},t)})))),[t,n,r,o]),p=(0,i.useMemo)((()=>(0,me.Z)((0,me.Z)({userSelect:"none",width:"100%",color:"t.primary",py:"4px",bg:"inputBg",fontSize:"sm",fontWeight:500,mr:"xs",borderRadius:"4px",cursor:"pointer","&:last-of-type":{mr:0}},null===l||void 0===l?void 0:l.DropBpx.sx),a)),[l,a]);return(0,i.useMemo)((()=>{var r;return Co(M.ZP,{trigger:"click",overlay:m,sx:p,enablePortal:!0,onVisibleChange:d},Co(s.Z,{justifyContent:"center",alignItems:"center"},Co(c.Z,null,null===(r=Object.values(t).find((t=>t.key===e)))||void 0===r?void 0:r.value),Co(To.Z,{color:"#848E9C",sx:{transform:u?"rotate(180deg)":null,transition:"transform 100ms"}})))}),[e,t,p,m,u])}var Mo=o().createElement;function Io({sx:e}={}){const{marginType:t=Zi.Yl.CROSS,setMarginType:r,positionMode:a=Zi.Tw.ONEWAY,setPositionMode:o}=(0,i.useContext)(Ji),{isMobile:l}=(0,n.Fs)(),{getI18n:c}=(0,p.yk)();(0,i.useEffect)((()=>{t===Zi.Yl.ISOLATED&&o(Zi.Tw.ONEWAY)}),[t,a,o]);const u=(0,i.useMemo)((()=>[{key:Zi.Yl.CROSS,value:c("header-Cross",{defaultValue:"Cross"})},{key:Zi.Yl.ISOLATED,value:c("headerIsolated",{defaultValue:"Isolated"})}]),[c]),d=(0,i.useMemo)((()=>[{key:Zi.Tw.ONEWAY,value:c("OneWayPosition",{defaultValue:"One-way Mode"})},{key:Zi.Tw.HEDGE,value:c("TwoWayPosition",{defaultValue:"Hedge Mode"}),disabled:t===Zi.Yl.ISOLATED}]),[c,t]),m=(0,i.useMemo)((()=>({width:l?"45.5vw":"143px"})),[l]),f=(0,i.useMemo)((()=>(0,me.Z)({mb:"ls"},e)),[e]),g=(0,i.useCallback)((e=>r(e)),[r]),y=(0,i.useCallback)((e=>o(e)),[o]);return Mo(s.Z,{sx:f},Mo(Zo,{data:u,activeKey:t,onSelectChange:g,overlayBoxSx:m}),Mo(Zo,{data:d,activeKey:a,onSelectChange:y,overlayBoxSx:m}))}var wo=o().createElement;function Eo(){const{symbol:e,setSymbol:t}=(0,i.useContext)(Ji),r=(0,n.iB)(),a=Gi(),o=(0,p.G3)(),{getI18n:l}=(0,p.yk)(),c=(0,i.useMemo)((()=>Object.values(r).map((({symbol:e})=>({key:e,value:o?(0,wi.lE)(e,l):e})))),[l,o,r]);return wo(s.Z,{sx:{mb:"ls"}},wo(Zo,{data:c,activeKey:e,onSelectChange:e=>t(e),overlayBoxSx:(0,me.Z)({width:"295px",maxHeight:"285px"},null===a||void 0===a?void 0:a.SymbolSelect.overlayBoxSx)}))}var Ao=o().createElement;const No=()=>{const{symbol:e,setIsLeverageGreaterThan:t,currentLeverageBracket:{bracketNotionalCap:r},setIsFormValid:a,positionDirection:o,leverage:l}=(0,i.useContext)(Ji),{getUnitChangeQty:s,getQuantityPrecision:c,getQuantityUnit:u,getNotionalValue:d,helper:m}=$i(),p=(0,n.iB)()[e]||Zi.oF,{quoteAsset:f,marginAsset:g,pricePrecision:y,contractVal:b=100}=p,{getI18n:h}=Ci(),{isMobile:v}=(0,n.Fs)(),{0:x,1:S}=(0,i.useState)(""),{0:k,1:P}=(0,i.useState)(""),{0:T,1:C}=(0,i.useState)(""),{0:Z,1:M}=(0,i.useState)(Zi.uf),{0:I,1:w}=(0,i.useState)(Zi.uf),{0:E,1:A}=(0,i.useState)(Zi.uf),N=(0,i.useCallback)((e=>s({quantity:e,entryPrice:x,contractVal:b})),[s,x,b]),O=(0,i.useMemo)((()=>[{value:x,max:Zi.nU,precision:y,onChange:S,placeholder:h("entryPrice",{defaultValue:"Entry Price"}),asset:f,testId:"EntryPrice"},{value:k,max:Zi.nU,precision:y,onChange:P,placeholder:h("exitPrice",{defaultValue:"Exit Price"}),asset:f,testId:"ExitPrice"},{value:T,max:Zi.nU,precision:c({product:p}),onChange:C,placeholder:h("quantity",{defaultValue:"Quantity"}),asset:u({product:p}),testId:"Quantity"}]),[x,k,h,u,y,p,T,c,f]),R=(0,i.useMemo)((()=>[{value:Z,label:h("initialMargin",{defaultValue:"Initial Margin"}),labelTooltip:h("liqPriceTipText",{defaultValue:"Initial margin may not equal to actual margin required to place an order. Actual margin required = initial margin + open loss, where open loss reflects the additional cost due to the difference between order price and mark price."}),asset:g,testId:"InitialMaginValue"},{key:"PNL",value:I,label:h("PNL",{defaultValue:"PNL"}),asset:g,testId:"PNLValue"},{value:E,label:h("ROE",{defaultValue:"ROE"}),asset:"%",testId:"ROEValue"}]),[Z,h,g,I,E]),L=(0,i.useCallback)((()=>{const e=N(T),t=m.initialMargin({entryPrice:x,quantity:e,leverage:l,contractVal:b}),r=m.PNL({positionDirection:o,quantity:e,entryPrice:x,exitPrice:k,contractVal:b}),a=m.ROE({PNL:r,quantity:e,leverage:l,entryPrice:x,contractVal:b});M(m.initialMarginFormat(t)),w(xo(r)?m.PNLFormat(r):Zi.uf),A(xo(a)?m.ROEFormat(a):Zi.uf)}),[N,T,m,x,l,b,o,k]);return(0,i.useEffect)((()=>{a(!!(x&&k&&T))}),[x,k,T,a]),(0,i.useEffect)((()=>{t(d({quantity:T,entryPrice:x,contractVal:b})>r)}),[r,b,x,d,T,t]),(0,i.useEffect)((()=>{v&&(a(!1),S(""),P(""),C(""),M(Zi.uf),w(Zi.uf),A(Zi.uf))}),[v,a,e]),Ao(yo,null,Ao(bo,null,Ao(Xi,null),Ao(fo,null),Ao(Po,{inputs:O}),v&&Ao(no,{results:R}),Ao(to,{onClick:L})),!v&&Ao(no,{results:R}))};function Oo(e){return Ao(uo,null,Ao(No,e))}var Ro=o().createElement;const Lo=()=>{const{symbol:e,setIsFormValid:t,positionDirection:r,leverage:a}=(0,i.useContext)(Ji),{helper:o}=$i(),l=(0,n.iB)()[e]||Zi.oF,{quoteAsset:s,pricePrecision:c}=l,{0:u,1:d}=(0,i.useState)(""),{0:m,1:f}=(0,i.useState)(""),{0:g,1:y}=(0,i.useState)(Zi.uf),{getI18n:b}=Ci(),{isMobile:h}=(0,n.Fs)(),{getI18n:v}=(0,p.yk)(),x=(0,i.useMemo)((()=>[{value:u,max:Zi.nU,precision:c,onChange:d,placeholder:b("entryPrice",{defaultValue:"Entry Price"}),asset:s,testId:"EntryPrice"},{value:m,max:"1999",precision:2,onChange:f,placeholder:b("ROE",{defaultValue:"ROE"}),asset:"%",errorText:g<0&&v("calculator-reachROETip",{defaultValue:"can't reach the ROE"}),negative:!0,testId:"ROEInput"}]),[u,c,b,s,m,g,v]),S=(0,i.useMemo)((()=>[{value:g<0?Zi.uf:g,label:b("targetPrice",{defaultValue:"Target Price"}),asset:s,testId:"TargetPriceValue"}]),[g,s,b]),k=(0,i.useCallback)((()=>{const e=o.targetPrice({ROE:m,leverage:a,positionDirection:r,entryPrice:u});var t;y((t=e)>0&&xo(t)?vo(e,c):-1/0)}),[o,m,a,r,u,c]);return(0,i.useEffect)((()=>{t(!(!u||!m))}),[u,m,t]),(0,i.useEffect)((()=>{h&&(t(!1),d(""),f(""),y(Zi.uf))}),[h,t,e]),Ro(yo,null,Ro(bo,null,Ro(Xi,null),Ro(fo,null),Ro(Po,{inputs:x}),h&&Ro(no,{results:S}),Ro(to,{onClick:k})),!h&&Ro(no,{results:S}))};function Vo(e){return Ro(uo,null,Ro(Lo,e))}var Fo=o().createElement;const Do=(0,i.forwardRef)(((e,t)=>{const{marginType:r,positionMode:a}=(0,i.useContext)(Ji);return r===Zi.Yl.CROSS&&a===Zi.Tw.HEDGE?Fo(zo,Object.assign({ref:t},e)):Fo(_o,Object.assign({ref:t},e))})),_o=(0,i.forwardRef)((({walletBalance:e,walletBalanceInput:t}={},r)=>{const{symbol:a,setIsLeverageGreaterThan:l,currentLeverageBracket:{bracketNotionalCap:s},isFormValid:c,setIsFormValid:u}=(0,i.useContext)(Ji),{getQuantityPrecision:d,getQuantityUnit:m,getUnitChangeQty:p,getNotionalValue:f}=$i(),{getI18n:g}=Ci(),y=(0,n.iB)()[a]||Zi.oF,{quoteAsset:b,pricePrecision:h,contractVal:v=100}=y,{0:x,1:S}=(0,i.useState)(""),{0:k,1:P}=(0,i.useState)(""),T=(0,i.useCallback)((({quantity:e})=>p({quantity:e,entryPrice:x,contractVal:v})),[v,x,p]);return(0,i.useImperativeHandle)(r,(()=>({getFormData:()=>({entryPrice:+x,quantity:T({quantity:k})})}))),(0,i.useEffect)((()=>{l(f({quantity:k,entryPrice:x,contractVal:v})>s)}),[s,v,x,f,k,l]),(0,i.useEffect)((()=>{const t=!!(x&&e&&k);c!==t&&u(t)}),[x,e,k,u,c]),Fo(o().Fragment,null,Fo(Po,{inputs:[{value:x,max:Zi.nU,precision:h,onChange:S,placeholder:g("entryPrice",{defaultValue:"Entry Price"}),asset:b},{value:k,max:Zi.nU,precision:d({product:y}),onChange:P,placeholder:g("quantity",{defaultValue:"Quantity"}),asset:m({product:y})}]}),Fo(Po,{inputs:t}))})),Bo=({color:e,text:t})=>Fo(s.Z,{alignItems:"center",sx:{fontSize:"14px",color:e,"&::before":{content:'""',display:"inline-block",width:"4px",height:"12px",mr:"8px",bg:e}}},t),zo=(0,i.forwardRef)((({walletBalance:e,walletBalanceInput:t}={},r)=>{const{isFormValid:a,setIsFormValid:l,setIsLeverageGreaterThan:s,currentLeverageBracket:{bracketNotionalCap:u}}=(0,i.useContext)(Ji),{getQuantityPrecision:d,getQuantityUnit:m,getUnitChangeQty:p,getNotionalValue:f}=$i(),{getI18n:g}=Ci(),[y]=(0,n.z4)(),b=(0,n.iB)()[y]||Zi.oF,{quoteAsset:h,pricePrecision:v,contractVal:x=100}=b,{0:S,1:k}=(0,i.useState)(""),{0:P,1:T}=(0,i.useState)(""),{0:C,1:Z}=(0,i.useState)(""),{0:M,1:I}=(0,i.useState)(""),w=(0,i.useCallback)((({quantity:e,entryPrice:t})=>p({quantity:e,entryPrice:t,contractVal:x})),[x,p]);return(0,i.useImperativeHandle)(r,(()=>({getFormData:()=>({[Zi.DD.LONG]:{entryPrice:S,quantity:w({quantity:C,entryPrice:S,contractVal:x})},[Zi.DD.SHORT]:{entryPrice:P,quantity:w({quantity:M,entryPrice:P,contractVal:x})}})}))),(0,i.useEffect)((()=>{const t=!!(S&&P&&C&&M&&e);a!==t&&l(t)}),[e,l,S,P,C,M,a]),(0,i.useEffect)((()=>{s(Math.max(f({quantity:C,entryPrice:S,contractVal:x}),f({quantity:M,entryPrice:P,contractVal:x}))>u)}),[u,x,f,S,C,s,P,M]),Fo(o().Fragment,null,Fo(c.Z,{sx:{mb:"24px"}},Fo(Bo,{color:"buy",text:g("Long",{defaultValue:"Long"})}),Fo(Po,{inputs:[{value:S,max:Zi.nU,precision:v,onChange:k,placeholder:g("entryPrice",{defaultValue:"Entry Price"}),asset:h},{value:C,max:Zi.nU,precision:d({product:b}),onChange:Z,placeholder:g("quantity",{defaultValue:"Quantity"}),asset:m({product:b})}]})),Fo(c.Z,{sx:{mb:"24px"}},Fo(Bo,{color:"sell",text:g("Short",{defaultValue:"Short"})}),Fo(Po,{inputs:[{value:P,max:Zi.nU,precision:v,onChange:T,placeholder:g("entryPrice",{defaultValue:"Entry Price"}),asset:h},{value:M,max:Zi.nU,precision:d({product:b}),onChange:I,placeholder:g("quantity",{defaultValue:"Quantity"}),asset:m({product:b})}]})),Fo(Po,{inputs:t,boxProps:{mt:0}}))}));var Ko=o().createElement;const qo=()=>{var e,t,r,a;const{symbol:o,marginType:l,positionMode:s,positionDirection:c,leverage:u}=(0,i.useContext)(Ji),{helper:d,walletBalancePrecision:m,getUnitChangeQty:f}=$i(),{getI18n:g}=Ci(),y=(0,n._n)(),b=(0,n.iB)(),h=b[o]||Zi.oF,v=(0,p.KQ)(),x=(0,p.$J)()||{},S=(0,p.F)(),k=(0,p.Gf)()||{},{isMobile:P}=(0,n.Fs)(),{getI18n:T}=(0,p.yk)(),C=null===(e=(0,p.CE)()[o])||void 0===e?void 0:e.markPrice,Z=s===Zi.Tw.ONEWAY,{quoteAsset:M,marginAsset:I,pricePrecision:w,contractVal:E=100}=h,A=y?l===Zi.Yl.CROSS?null===v||void 0===v||null===(t=v[I])||void 0===t?void 0:t.crossWalletBalance:(null===(r=x[o])||void 0===r?void 0:r.isolatedWallet)||(null===v||void 0===v||null===(a=v[I])||void 0===a?void 0:a.crossWalletBalance):"",{0:N,1:O}=(0,i.useState)(0===Number(A)?"":(0,Pr.GW)(A,m)),{0:R,1:L}=(0,i.useState)(Zi.uf),{0:V,1:F}=(0,i.useState)(null),D=((0,i.useCallback)((({quantity:e,entryPrice:t})=>f({quantity:e,entryPrice:t,contractVal:E})),[E,f]),(0,i.useCallback)((()=>{L(Zi.uf),F(T("calculator-liqPriceIsVerifyTip",{defaultValue:"Insufficient wallet balance (initial margin) to open a position."}))}),[T])),_=(0,i.useRef)(),B=(0,i.useMemo)((()=>[{value:R,label:g("liqPrice",{defaultValue:"Liquidation Price"}),asset:M,testId:"LiquidationPriceValue"},{description:g("liqPriceTip",{defaultValue:"Liquidation Price Tip"})}]),[R,M,g]),z=(0,i.useMemo)((()=>Z?{}:{mb:0}),[Z]),K=(0,i.useCallback)((()=>{const e=_.current.getFormData(),t=c===Zi.DD.LONG?1:-1,r={symbol:o,brackets:k,positions:S,productMap:b,walletBalance:N,marginType:l,positionMode:s};let a;if(F(null),Z){const{entryPrice:i,quantity:o}=e;a=d.liquidationPrice((0,me.Z)((0,me.Z)({},r),{},{curPosition:{entryPrice:i,positionSize:o*t,contractVal:E}})),d.isLiqPriceInValid({walletBalance:N,entryPrice:i,quantity:o,leverage:u,contractVal:E})?D():L(a<0?Zi.uf:vo(a,w))}else{const{entryPrice:t,quantity:i}=e[Zi.DD.LONG],{entryPrice:o,quantity:n}=e[Zi.DD.SHORT],l={entryPrice:t,positionSize:i,contractVal:E,markPrice:C},s={entryPrice:o,positionSize:n,contractVal:E,markPrice:C};a=d.liquidationPrice((0,me.Z)((0,me.Z)({},r),{},{curPosition:{markPrice:C},longPosition:l,shortPosition:s})),d.isLiqPriceInValidHEDGE({walletBalance:N,leverage:u,longPosition:(0,me.Z)({quantity:l.positionSize},l),shortPosition:(0,me.Z)({quantity:s.positionSize},s),contractVal:E})?D():L(a<0?Zi.uf:vo(a,w))}}),[k,E,d,Z,u,l,C,c,s,w,b,D,o,S,N]);return(0,i.useEffect)((()=>{O((0,Pr.GW)(A,m))}),[A,m,l]),Ko(yo,null,Ko(bo,null,Ko(Io,{sx:z}),Z&&Ko(Xi,null),Ko(fo,null),Ko(Do,{ref:_,walletBalance:N,walletBalanceInput:[{value:N,max:Zi.nU,precision:m,onChange:O,placeholder:g("walletBalance",{defaultValue:"Wallet Balance"}),asset:I,testId:"WalletBalanceInput",errorText:V}]}),P&&Ko(no,{results:B}),Ko(to,{onClick:K})),!P&&Ko(no,{results:B}))};function Wo(e){return Ko(uo,null,Ko(qo,e))}var Uo=r("W4bq"),jo=o().createElement;function $o(e){return jo(uo,null,jo(Ho,e))}function Ho(){var e,t,r;const{symbol:a,setIsFormValid:o,currentLeverageBracket:{bracketNotionalCap:l},leverage:s}=(0,i.useContext)(Ji),{helper:c,walletBalancePrecision:u,getCoinUnitUnit:d}=$i(),{getI18n:m}=Ci(),{getI18n:f}=(0,p.yk)(),{isMobile:g}=(0,n.Fs)(),y=(0,n._n)(),b=(0,n.iB)()[a]||Zi.oF,{quoteAsset:h,pricePrecision:v,marginAsset:x}=b,S=(0,p.KQ)(),k=(null===(e=(0,Uo.Pj)().nextTickers)||void 0===e||null===(t=e.find((e=>e.symbol===a)))||void 0===t?void 0:t.lastPrice)||0,P=y?(0,Pr.GW)(null===S||void 0===S||null===(r=S[x])||void 0===r?void 0:r.crossWalletBalance,u):"",{0:T,1:C}=(0,i.useState)(""),{0:Z,1:M}=(0,i.useState)(0===Number(P)?"":P),{0:I,1:w}=(0,i.useState)(Zi.uf),{0:E,1:A}=(0,i.useState)(Zi.uf),N=(0,i.useMemo)((()=>[{value:T,max:Zi.nU,precision:v,onChange:C,placeholder:m("entryPrice",{defaultValue:"Entry Price"}),asset:h,assetLabel:f("lastPrice",{defaultValue:"Last Price"}),onAssetLabelClick(){var e;C((null===(e=+k)||void 0===e?void 0:e.toFixed(v))||0)}},{value:Z,max:Zi.nU,precision:u,onChange:M,placeholder:m("walletBalance",{defaultValue:"Wallet Balance"}),asset:x}]),[T,f,m,u,k,v,h,Z,x]),O=(0,i.useMemo)((()=>[{value:I,label:`${m("maxOpen",{defaultValue:"Max Open"})} (${d({product:b})})`},{value:E,label:`${m("maxOpen",{defaultValue:"Max Open"})} (${x})`},{description:m("maxopentip",{defaultValue:"Max Open Tip"})}]),[E,m,d,b,I,x]),R=(0,i.useCallback)((()=>{const e=c.maxOpenQuantity({walletBalance:Z,leverage:s,entryPrice:T,contractVal:b.contractVal,bracketNotionalCap:l}),t=c.maxOpenCoin({walletBalance:Z,leverage:s,bracketNotionalCap:l});A(xo(t)?t:Zi.uf),w(xo(e)?e:Zi.uf)}),[c,Z,s,T,b.contractVal,l]);return(0,i.useEffect)((()=>{o(!(!T||!Z))}),[T,o,Z]),(0,i.useEffect)((()=>{w(Zi.uf),A(Zi.uf),C(""),M(P)}),[P,a]),jo(yo,null,jo(bo,null,!g&&jo(Eo,null),jo(Xi,null),jo(fo,null),jo(Po,{inputs:N}),g&&jo(no,{results:O}),jo(to,{onClick:R})),!g&&jo(no,{results:O}))}var Go=r("1mYo"),Jo=r("5jGq"),Yo=o().createElement;function Qo(e){setTimeout((()=>e&&e()),0)}const Xo=()=>({id:Date.now(),entryPrice:"",quantity:""}),en={height:"24px",borderRadius:"1px",width:"160px",mt:0,flex:1,"&.bn-input-status-focus input":{border:"1px solid",borderColor:"primary"},input:{textAlign:"left",height:"40px",borderRadius:"4px",color:"t.primary"}},tn={mt:0,"& input":{textAlign:"left !important",pl:"8px"}},rn=(0,i.forwardRef)(((e,t)=>{const{symbol:r,isFormValid:a,setIsFormValid:l}=(0,i.useContext)(Ji),{getQuantityPrecision:u,getQuantityUnit:d}=$i(),{getI18n:m}=Ci(),p=(0,n.iB)()[r]||Zi.oF,{quoteAsset:f,pricePrecision:g}=p,{isMobile:y}=(0,n.Fs)(),{0:b,1:h}=(0,i.useState)({}),v=e=>{Qo((()=>{delete b[e],h((0,me.Z)({},b))}))},x=(0,i.useCallback)((()=>{Qo((()=>{const e=Xo();b[e.id]=e,h((0,me.Z)({},b))}))}),[b]),S=(0,i.useCallback)(((e,t,r)=>{Qo((()=>{b[e][t]=r,h((0,me.Z)({},b))}))}),[b]);return(0,i.useEffect)((()=>{x()}),[]),(0,i.useEffect)((()=>{const e=Object.values(b),t=!!e.length&&!e.some((({entryPrice:e,quantity:t})=>!e||!t));t!==a&&l(t)}),[a,b,l]),(0,i.useImperativeHandle)(t,(()=>({getPositions:()=>b,resetPositions(){const e=Xo();h({[e.id]:e})}}))),Yo(o().Fragment,null,Yo(s.Z,{sx:{alignItems:"center",justifyContent:"space-between",fontSize:"12px",color:"t.third",mt:y?"24px":"40px",mb:"12px"}},!y&&Yo(c.Z,{width:"80px"},m("open",{defaultValue:"Open"})),Yo(s.Z,{flex:1},Yo(c.Z,{sx:{mr:y?"-16px":"0px",flex:1}},m("entryPrice",{defaultValue:"Entry Price"})," (",f,")"),Yo(c.Z,{sx:{flex:1}},m("quantity",{defaultValue:"Quantity"})," (",d({product:p}),")")),!y&&Yo(c.Z,{width:"40px",textAlign:"right"},m("action",{defaultValue:"Action"}))),Object.values(b).map((({id:e,entryPrice:t,quantity:r},a)=>Yo(s.Z,{alignItems:"center",justifyContent:"space-between",key:e,sx:y?{mb:"12px",bg:"inputBg",px:"8px"}:{height:"40px",bg:"inputBg",px:"8px",mb:"12px",borderRadius:"4px"}},!y&&Yo(c.Z,{fontSize:0,width:"80px",color:"t.primary"},a+1),Yo(s.Z,{justifyContent:"center",alignItems:"center",flex:1},Yo(ko,{config:{value:t,max:Zi.nU,precision:g,onChange:t=>S(e,"entryPrice",t),asset:y?f:null,boxProps:en,mobileBoxProps:tn}}),y&&Yo(c.Z,{sx:{minWidth:"8px"}}),Yo(ko,{config:{value:r,max:Zi.nU,precision:u({product:p}),onChange:t=>S(e,"quantity",t),asset:y?d({product:p}):null,boxProps:en,mobileBoxProps:tn}})),y?Yo(C.Z,{color:"#848E9C",ml:3,onClick:()=>v(e)}):Yo(Jo.Z,{ml:"20px",fontSize:"20px",textAlign:"right",color:"t.third",cursor:"pointer",onClick:()=>v(e)})))),Yo(s.Z,{sx:(0,me.Z)({margin:"0 auto",mt:"17px",color:"t.yellow",cursor:"pointer",alignItems:"center",justifyContent:"center",fontSize:"14px"},y&&{mb:"6px",ml:0,justifyContent:"left"}),onClick:x},Yo(Go.Z,{size:14,color:"t.yellow"})," \xa0",m("addPosition",{defaultValue:"Add Position"})))}));var an=o().createElement;function on(){const{symbol:e}=(0,i.useContext)(Ji),{helper:t}=$i(),{isMobile:r}=(0,n.Fs)(),{getI18n:a}=Ci(),o=(0,n.iB)()[e]||Zi.oF,{quoteAsset:l,pricePrecision:s}=o,{0:c,1:u}=(0,i.useState)(Zi.uf),d=(0,i.useRef)(),m=(0,i.useMemo)((()=>[{value:c,label:`${a("avgPrice",{defaultValue:"Avg Price"})} (${l})`}]),[c,a,l]),p=(0,i.useCallback)((()=>{const e=t.openPrice({positions:Object.values(d.current.getPositions()).map((({entryPrice:e,quantity:t})=>({entryPrice:+e,quantity:+t})))});u(xo(e)?e.toFixed(s):Zi.uf)}),[t,s]);(0,i.useEffect)((()=>{u(Zi.uf),d.current.resetPositions()}),[e]);return an(r?ln:nn,{results:m,positionsRef:d,onCalculator:p})}function nn(e){const{results:t,positionsRef:r,onCalculator:a}=e;return an(yo,{sx:{flexDirection:"column"},overrideSx:{pt:0,pr:0}},an(c.Z,{sx:{maxHeight:"324px",overflow:"auto"}},an(c.Z,{sx:{pr:"32px"}},an(s.Z,{sx:{pt:"24px"}},an(bo,null,an(Eo,null),an(Xi,null)),an(no,{results:t,sx:{py:"0px"},titleSx:{mt:"0px !important",mb:"28px !important"}})),an(rn,{ref:r}))),an(c.Z,{sx:{pr:"32px"}},an(to,{onClick:a})))}function ln(e){const{results:t,positionsRef:r,onCalculator:a}=e;return an(yo,{sx:{flexDirection:"column"}},an(s.Z,null,an(bo,null,an(Xi,null))),an(rn,{ref:r}),an(no,{results:t}),an(to,{onClick:a}))}function sn(e){return an(uo,null,an(on,e))}var cn=o().createElement;const un="PNL",dn="TARGET_PRICE",mn="LIQ",pn="MAX_OPEN",fn="OPEN_PRICE",gn={color:"t.third",fontSize:"16px","&:hover":{color:"t.primary",cursor:"pointer"}},yn={width:["calc(100vw - 32px)","680px","680px"],bg:"modalBg",".close-icon":{color:"t.third",cursor:"pointer",fontSize:"24px",":hover":{color:"t.primary"}},".tabs":{mx:5,width:"auto"}};function bn({title:e,testId:t,active:r}){return cn(c.Z,{tx:"tabs",variant:"trade-next.tab",sx:{padding:"18px 1px 12px 1px",fontSize:"14px",mr:"24px"},className:r?"active":"","data-testid":t},e)}const hn=()=>{const{0:e,1:t}=(0,i.useState)(!1),{0:r,1:a}=(0,i.useState)(un),{getI18n:o}=Ci(),{t:n}=(0,ae.yk)();(0,i.useEffect)((()=>{e||a(un)}),[e]);const l=(0,Xt.tZ)();return(0,i.useMemo)((()=>cn(s.Z,{alignItems:"center","data-testid":"Calculator"},cn(ba.Z,{visible:e,onMaskClick:()=>t(!1),sx:yn,contentClassName:"content"},cn(s.Z,{alignItems:"center",justifyContent:"space-between",p:"20px 32px"},cn(N.Z,{variant:"title6",color:"t.primary"},n("trd-calculator-title",{defaultValue:"Futures Calculator"})),cn(C.Z,{className:"close-icon",onClick:()=>t(!1)})),cn(V.Z,{defaultActiveKey:un,variant:"trade-next",tabsClassName:"tabs",onChange:e=>a(e)},cn(F.Z,{tab:e=>cn(bn,{title:o("PNL",{defaultValue:"PNL"}),testId:"PNL",active:e}),tabKey:un},r===un&&e&&cn(Oo,null)),cn(F.Z,{tab:e=>cn(bn,{title:o("targetPrice",{defaultValue:"Target Price"}),testId:"TargetPrice",active:e}),tabKey:dn},r===dn&&cn(Vo,null)),cn(F.Z,{tab:e=>cn(bn,{title:o("liqPrice",{defaultValue:"Liquidation Price"}),testId:"LiquidationPrice",active:e}),tabKey:mn},r===mn&&e&&cn(Wo,null)),cn(F.Z,{tab:e=>cn(bn,{title:o("maxOpen",{defaultValue:"Max Open"}),active:e}),tabKey:pn},r===pn&&e&&cn($o,null)),cn(F.Z,{tab:e=>cn(bn,{title:o("openPrice",{defaultValue:"Open Price"}),active:e}),tabKey:fn},r===fn&&e&&cn(sn,null))),cn(N.Z,{variant:"caption",color:"t.third",m:"-8px 32px 24px"},cn(Ti.c,{t:n,components:{Link:cn(ga.Z,{target:"_blank",href:(0,J.CN)(h.Wh.CALCULATOR,{locale:l})})},i18nKey:"trd-calculator-tip",defaults:"See what the potential risk and reward will be in monetary terms on any given trade. Use our Futures Calculator to establish your potential profit/loss on a future trade. Read <Link>tips</Link> on how to use."}))),cn(Pi.Z,{sx:gn,onClick:()=>t(!0)}))),[r,o,l,e,n])};var vn=o().createElement;const xn={px:"16px",pb:["80px","0px"],".description":{fontSize:"14px",mb:"40px",lineHeight:"20px",color:"t.secondary"}};function Sn(){const{getI18n:e}=(0,p.yk)(),{getI18n:t}=j(),r=(0,n._n)(),a=(0,Xt.tZ)(),[i]=(0,n.z4)(),o=(0,J.CN)(ie.x.TWAP_LEARN_URL,{locale:a,symbol:i}),l=r?"login":"notLogin";return vn(c.Z,{sx:xn},vn("div",{className:"description"},e("twapEntry-description",{defaultValue:"Time-Weighted Average Price (TWAP) is the average price calculated over a period of time. TWAP trading algorithm aims to execute a trade over a user-specified period of time so that the average execution price is approximately in line with the time-weighted average price of that period."}),vn(Ue.dh,{link:(0,Za.b)(`/${a}/support/faq/80655cc54d8a4b2bb8ea097001844fd1`),fontSize:14,ml:"4px","data-testid":`ordertype_twap_${l}_learnMore`})),r?vn(be.Z,{as:"a",width:1,py:"10px",variant:"primary",target:"__blank",href:o,"data-testid":"ordertype_twap_login_create"},e("create",{defaultValue:"Create"})):vn($e,{getI18n:t,registerTestId:"ordertype_twap_notLogin_register",loginTestId:"ordertype_twap_notLogin_login"}))}var kn=o().createElement;const Pn=({onRemove:e})=>{const{isMobile:t}=(0,n.Fs)(),[r]=(0,p.K5)();return kn(o().Fragment,null,!t&&kn(ei,{onRemove:e}),kn(di,null,t&&kn(o().Fragment,null,kn(de,null),kn(Ga,{my:"16px",px:"16px"})),r===d.Jm.TWAP?kn(Sn,null):kn(o().Fragment,null,kn(s.Z,{px:"16px",justifyContent:"space-between",alignItems:"center"},kn(T,null),kn(hn,null)),kn(c.Z,{px:"16px",pb:"16px"},kn(da,{horizontal:!1,side:"both"})))),kn(oi,null),kn(o().Fragment,null,kn(oe.Z,null),kn(ki,null)))};var Tn=o().createElement;const Cn={bg:"popupBg",fontSize:"14px",".order-tabs-and-margin-type-container":{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",minHeight:"24px",pt:"10px",px:"16px",boxSizing:"border-box","&.hedge-mode":{pt:"0"},".fee-and-preference-container":{display:"flex",alignItems:"center",ml:"16px"}},".positions-tab-container":{display:"flex",flexDirection:"row",justifyContent:"space-between",bg:"moduleBg",".fee-and-preference-container":{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:"1",pr:"16px",borderBottom:"1px solid",borderBottomColor:"modalBg"}},".draggable-area":{pb:"20px"},".divider":{pt:"10px",borderBottom:"1px solid",borderBottomColor:"modalBg"}},Zn={flex:"1",ml:"8px",mr:0},Mn={width:"50%",pl:"16px",mr:0},In=()=>{const[e]=(0,p.hN)(),[t]=(0,p.UI)();return Tn(c.Z,{sx:Cn},e&&Tn(o().Fragment,null,Tn("div",{className:"positions-tab-container"},Tn(W,{flex:1}),Tn("div",{className:"fee-and-preference-container"},Tn(la,null),Tn(La,null))),Tn("div",{className:"draggable-area draggableHandle"})),Tn("div",{className:_()({"order-tabs-and-margin-type-container":!0,"hedge-mode":e})},Tn(Ga,null),t&&Tn($.Z,{sx:e?Mn:Zn}),!e&&Tn("div",{className:"fee-and-preference-container"},Tn(la,null),Tn(La,null))),Tn("div",{className:"draggable-area draggableHandle"},!e&&Tn("div",{className:"divider"})))};var wn=o().createElement;const En={".flex":{display:"flex",alignItems:"center",justifyContent:"space-between"},".form-subheader":{px:"16px"},".form-container":{px:"16px",pb:"16px",".buy-form, .sell-form":{width:"calc(50% - 15px)"}},".flex-row":{display:"flex",flexDirection:"row",alignItems:"center"},".reduce-only-checkbox":{mt:0,mr:"16px"},".tif-selector":{mr:"auto",mt:0},".balance-container":{flex:"1",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden","> div":{justifyContent:"flex-end"}}},An=()=>{const[e]=(0,p.K5)();return wn(c.Z,{sx:En},wn(In,null),wn(di,null,e===d.Jm.TWAP?wn(Sn,null):wn(o().Fragment,null,wn("div",{className:"flex-row form-subheader"},wn(zr,{className:"reduce-only-checkbox"}),wn(_r,{className:"tif-selector"}),wn("div",{className:"balance-container"},wn(T,null)),wn(hn,null)),wn("div",{className:"flex form-container"},wn(da,{horizontal:!0,side:"buy",className:"buy-form"}),wn(da,{horizontal:!0,side:"sell",className:"sell-form"})))),wn(oi,null))};var Nn=r("sIpC"),On=o().createElement;const Rn={color:"t.yellow200",textDecoration:"none",flex:"0 0 auto"},Ln=({sx:e={}})=>{const{getI18n:t}=(0,p.yk)(),[r]=(0,n.z4)(),a=(0,n.tZ)(),o=(0,Z.CN)(ie.x.GRID_TRADING_URL,{locale:a,symbol:r}),l=(0,n._n)(),s=(0,i.useCallback)((e=>{e.preventDefault(),l?window.open(o,"_blank"):(0,Nn.G)(a)}),[l,a,o]);return On(c.Z,{as:"a",target:"_blank",onClick:s,href:(0,Z.CN)(ie.x.GRID_TRADING_URL,{locale:a,symbol:r}),sx:(0,me.Z)((0,me.Z)({},Rn),e)},t("grid-trading",{defaultValue:"Grid Trading"}))};var Vn=r("+yB+"),Fn=o().createElement;const Dn={flex:"none",display:"inline-block",width:"79px",height:"24px",p:0,mr:"5px",bg:"line",borderRadius:"2px",lineHeight:"24px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:"t.primary",fontSize:"12px",textAlign:"center",cursor:"pointer",":hover":{color:"t.yellow200"},"&.disabled":{bg:"bg3",color:"t.disabled",cursor:"not-allowed"}},_n=()=>{const{getI18n:e}=(0,p.yk)(),{marginAsset:t}=(0,n.j2)(),r=(0,n._n)();return Fn(Vn.Z,{as:"a",sx:Dn,className:r?"":"disabled",onClick:()=>{b.T.emit(b.F.OPEN_TRANSFER_MODAL,t)},"data-testid":"orderform-transfer-button"},e("transfer",{defaultValue:"Transfer"}))};var Bn=r("8Eqx"),zn=o().createElement;const Kn={bg:"popupBg",fontSize:"14px",".order-tabs-container":{display:"flex",flexDirection:"row",alignItems:"center",minHeight:"24px",pt:"10px",pl:"16px",boxSizing:"border-box",".order-tabs":{minWidth:"212px"},"&.hedge-mode":{pt:"0"}},".order-tabs-right-container":{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",width:"100%","> a, > div":{mr:"16px"}},".positions-tab-container":{display:"flex",flexDirection:"row",justifyContent:"space-between",bg:"moduleBg",".fee-and-preference-container":{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:"1",pr:"16px",borderBottom:"1px solid",borderBottomColor:"modalBg",".tooltip-label":{mr:"16px"}}},".space":{pb:"20px"},".divider":{pt:"10px",borderBottom:"1px solid",borderBottomColor:"modalBg"}},qn=()=>{const[e]=(0,p.hN)(),t=(0,p.G3)();return zn(c.Z,{sx:Kn},e&&zn(o().Fragment,null,zn("div",{className:"positions-tab-container"},zn(W,{flex:1}),zn("div",{className:"fee-and-preference-container"},zn(la,null),zn(La,null))),zn("div",{className:"space"})),zn("div",{className:_()({"order-tabs-container":!0,"hedge-mode":e})},zn(Ga,null),zn("div",{className:"order-tabs-right-container"},!t&&zn(Ln,{sx:{ml:"16px"}}),zn(Bn.U,{sx:{ml:"16px"}}),!h.Jg&&zn(_n,null),!e&&zn(la,null),!e&&zn("div",null,zn(La,null)))),zn("div",{className:"space"},!e&&zn("div",{className:"divider"})))};var Wn=o().createElement;const Un={".flex":{display:"flex",alignItems:"center",justifyContent:"space-between"},".form-subheader":{px:"16px"},".form-container":{px:"16px",pb:"16px",".buy-form, .sell-form":{width:"calc(50% - 15px)"}},".flex-row":{display:"flex",flexDirection:"row",alignItems:"center"},".reduce-only-checkbox":{mt:0,mr:"16px"},".tif-selector":{mr:"auto",mt:0},".balance-container":{flex:"1",mr:"4px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden","> div":{justifyContent:"flex-end"}}},jn=()=>{const[e]=(0,p.K5)();return Wn(c.Z,{sx:Un},Wn(qn,null),Wn(di,null,e===d.Jm.TWAP?Wn(Sn,null):Wn(o().Fragment,null,Wn("div",{className:"flex-row form-subheader"},Wn(zr,{className:"reduce-only-checkbox"}),Wn(_r,{className:"tif-selector"}),Wn("div",{className:"balance-container"},Wn(T,{transfer:!1})),Wn(hn,null)),Wn("div",{className:"flex form-container"},Wn(da,{horizontal:!0,side:"buy",className:"buy-form"}),Wn(da,{horizontal:!0,side:"sell",className:"sell-form"})))),Wn(oi,null),Wn(o().Fragment,null,Wn(oe.Z,null),Wn(ki,null)))};var $n=r("Q9ZO"),Hn=o().createElement;const Gn=(0,l.ck)("afterLogin",(()=>Promise.all([r.e(3712),r.e(7285)]).then(r.bind(r,"QKUR")))),Jn=({type:e=$n.C.Normal,onRemove:t})=>{const r=(0,n._n)(),a=(0,n.Pc)(),{isExistFutureAccount:i}=a;if(r&&!i)return Hn(Gn,null);switch(e){case $n.C.Normal:return Hn(Pn,{onRemove:t});case $n.C.Horizontal:return Hn(An,null);case $n.C.FullScreen:return Hn(jn,null);default:return null}},Yn=o().memo(Jn)},"4m5F":(e,t,r)=>{"use strict";r.d(t,{SW:()=>a,AO:()=>i,ze:()=>o});const a={cont:"cont",coin:"coin"},i={usdt:"usdtFuturesUSDT",coin:"usdtFuturesCoin"},o=10},"8uyB":(e,t,r)=>{"use strict";r.d(t,{N3:()=>o,JX:()=>n,CN:()=>l,_p:()=>s});var a=r("cm/A");const i=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function o(e){const t=`${e}`.match(i);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function n(e,t){return isNaN(+e)?"":(0,a.PD)(e).toFixed(t,1)}function l(e="",t={}){return Object.keys(t).reduce(((e,r)=>e.replace(new RegExp(`%${r}%`,"g"),t[r])),e)}const s=(e,t,r,a)=>{let i=e.target.value;return Number(i)<0&&(i="0"),o=Number(i),/[^\d|.|,|\u3002|e-]/.test(String(o))?"":(/\u3002|,/.test(i)&&(i=i.replace(/[\u3002|,]/g,".")),/^0\d/.test(i)?i="0":/^\./.test(i)?i=0+i.substring(0,a+1):Number(i)>=0&&-1!==i.indexOf(".")&&i.split(".")[1].length>=a&&(i=i.replace(new RegExp(`^(\\d*\\.\\d{${a}})\\d*`),"$1")),Number.isNaN(Number(i))?"":(r?t(r,i):t(i),i));var o}},EPGa:(e,t,r)=>{"use strict";let a,i,o;r.d(t,{xy:()=>a,g:()=>i,Jm:()=>o,OO:()=>n,HZ:()=>l,PR:()=>s,RS:()=>c}),function(e){e.SPOT="SPOT",e.CROSS="CROSS",e.ISOLATED="ISOLATED",e.FUTURES="FUTURES",e.DELIVERY="DELIVERY"}(a||(a={})),function(e){e.BUY="BUY",e.SELL="SELL"}(i||(i={})),function(e){e.LIMIT="LIMIT",e.MARKET="MARKET",e.STOP_LIMIT="STOP",e.STOP_MARKET="STOP_MARKET",e.TAKE_PROFIT_LIMIT="TAKE_PROFIT",e.TAKE_PROFIT_MARKET="TAKE_PROFIT_MARKET",e.TRAILING_STOP_MARKET="TRAILING_STOP_MARKET",e.POST_ONLY="POST_ONLY",e.LIQUIDATION="LIQUIDATION",e.TWAP="TWAP"}(o||(o={}));const n={STOP_LIMIT:"stopLimit",STOP_MARKET:"stopMarket",TRAILING_STOP_MARKET:"trailingStop",POST_ONLY:"postOnly"},l={LAST_PRICE:"CONTRACT_PRICE",MARK_PRICE:"MARK_PRICE"},s={LONG:"LONG",SHORT:"SHORT",BOTH:"BOTH"};let c;!function(e){e.OPEN="OPEN",e.CLOSE="CLOSE",e.BOTH="BOTH"}(c||(c={}))},JPsv:(e,t,r)=>{"use strict";r.d(t,{Z:()=>K});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("rjaD"),l=r("71uP"),s=r("APA6"),c=r("fDz0"),u=r("TKP4"),d=r("J81Z"),m=r("cm/A"),p=r("szIg"),f=r("EPGa"),g=r("4m5F"),y=r("FOuV"),b=r("COFI"),h=r("bmcq"),v=r("wby9"),x=r("9h1+"),S=r("IOB8"),k=r("8Y2u"),P=r("Q2PN"),T=r("xGav"),C=r("wdcV"),Z=r("cucV"),M=r("yxRq"),I=r("2ynj");const w=({symbol:e,positionSide:t,orderPrice:r,assumePrice:i,triggerPrice:o,activationPrice:n,orderAmount:l,formType:s,side:c,cost:u,openLost:d,reduceOnly:m=!1})=>{l=Number(l);const f=(0,p.useSelector)(S.Y),g=(0,k.$J)(),y=(0,p.useSelector)(P._Y),b=(0,p.useSelector)(T.G),h=(0,x.iB)(),{marginAsset:v="USDT"}=(null===h||void 0===h?void 0:h[e])||{},w=(null===y||void 0===y?void 0:y[v])||{},E=(0,C._g)(e,t),A=g[E]||{},{entryPrice:N,positionSize:O,isolatedWallet:R,bidNotional:L,askNotional:V}=A,F=Math.abs(O),D=Number(O),_=1===c&&D<0||-1===c&&D>0,{takerCommission:B}=(0,I.a)();if(_&&F&&(F===l||F<l&&m))return{liquidationPrice:0,currentPosition:A};const{estIsolatedWallet:z,estCrossWalletBalance:K}=(0,M.VX)({entryPrice:N,positionSize:O,orderPrice:r,assumePrice:i,triggerPrice:o,activationPrice:n,orderAmount:l,formType:s,side:c,isolatedWallet:R,crossWalletBalance:(null===w||void 0===w?void 0:w.crossWalletBalance)||0,cost:u,openLost:d,bidNotional:L,askNotional:V,takerCommission:(B||0)/1e6}),q=(0,a.Z)((0,a.Z)({},A),{},{entryPrice:(0,M.dK)({entryPrice:N,positionSize:O,orderPrice:r,assumePrice:i,triggerPrice:o,activationPrice:n,orderAmount:l,formType:s,side:c}),positionSize:(0,M.iZ)({positionSize:O,orderAmount:l,side:c}),isolatedWallet:z}),W=Object.values((0,a.Z)((0,a.Z)({},g),{},{[E]:(0,a.Z)({},q)})),U=(0,C.nn)({positions:(0,C.J9)(W),marginAsset:v}),j=(0,Z.Zk)(f,[q],(0,a.Z)((0,a.Z)({},y),{[v]:(0,a.Z)((0,a.Z)({},y[v]),{},{crossWalletBalance:K})}),b,e,!0,!1,U),{liquidationPrice:$=0}=(null===j||void 0===j?void 0:j[0])||{};return{liquidationPrice:$,currentPosition:q}};var E=r("rdEq"),A=r("SJeZ"),N=r("SnVb");const O=({orderType:e,equalQtyPrecision:t,marketStepSize:r,limitStepSize:a,tickSize:o=2,unit:n})=>(0,i.useCallback)(((i=!0)=>{let l;return l=(0,y.Br)(e)?r:a,n===g.SW.coin&&(l=t),(void 0===i||i)&&n===g.AO.usdt&&(l=o),l}),[e,n,r,a,t,o]);var R=o().createElement;const L={position:"relative",padding:"20px 24px 24px 24px",width:["calc(100vw - 32px)","384px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{marginBottom:"28px",color:"t.primary"},".field":{fontFamily:"Binance PLEX",display:"flex",justifyContent:"space-between",mt:"12px",letterSpacing:"0.16px",fontSize:"14px",lineHeight:"20px",fontWeight:"normal",minHeight:"20px",".label":{color:"t.third","&.highlight":{color:"t.primary",fontWeight:"medium"}},".value":{color:"t.primary",textAlign:"right","&.buy":{color:"t.buy"},"&.sell":{color:"t.sell"},"&.highlight":{fontWeight:"medium"}}},".top-line":{pt:"4px",mt:"16px",borderTop:"0.5px solid",borderTopColor:"line"},".show-again":{display:"flex",mt:"22px",cursor:"pointer",color:"t.secondary",fontSize:"12px",lineHeight:"16px"}};let V=1;const F=[f.Jm.STOP_LIMIT,f.Jm.STOP_MARKET,f.Jm.TAKE_PROFIT_LIMIT,f.Jm.TAKE_PROFIT_MARKET],D=[f.Jm.MARKET,f.Jm.STOP_MARKET,f.Jm.TAKE_PROFIT_MARKET],_=({label:e,value:t,unit:r,labelClassName:a="",valueClassName:i="",className:o=""})=>R("div",{className:`field ${o}`},R("div",{className:`label ${a}`},e),R("div",{className:`value ${i}`},t," ",r||"")),B={triggerPrice:0,price:0,buyQty:0,sellQty:0,side:f.g.BUY,callbackRate:0,activationPrice:0,oLastPrice:0,positionSide:y.PR.BOTH,buyCost:0,sellCost:0,availableBalance:0,tickSize:0,limitStepSize:0,marketStepSize:0,takeProfitStopPrice:0,stopLossStopPrice:0,takeProfitStopPriceWorkingType:"",stopLossStopPriceWorkingType:"",strategySide:1},z={orderType:f.Jm.LIMIT,placeOrder:()=>{},bCost:0,sCost:0,positionDirection:f.RS.OPEN,isDelivery:!1,Cont:null,buyOpenLost:0,sellOpenLost:0,contractVal:1,getAssumePrice:()=>0,orderForm:B},K=(0,i.forwardRef)((({symbol:e,quote:t,ticker:r,base:S,marginAsset:k},P)=>{var T;const{0:C,1:Z}=(0,i.useState)(!1),{0:M,1:I}=(0,i.useState)(z),B=(0,p.useSelector)(h.Lu),{getI18n:K}=(0,A.yk)(),q=(0,p.useDispatch)(),{unit:W="cont",orderConfirmation:U,positionMode:j,assetMode:$=!1}=(0,A.F7)(),[H]=(0,A.uD)(),{marketTakeBound:G}=(0,x.j2)(),J=100*+G,{orderType:Y=f.Jm.LIMIT,placeOrder:Q,bCost:X=0,sCost:ee=0,positionDirection:te=f.RS.OPEN,isDelivery:re=!1,Cont:ae=null,buyOpenLost:ie=0,sellOpenLost:oe=0,contractVal:ne=0,getAssumePrice:le=(()=>0),orderForm:se}=M,{triggerPrice:ce=0,price:ue=0,buyQty:de=0,sellQty:me=0,side:pe=f.g.BUY,callbackRate:fe,activationPrice:ge=0,positionSide:ye=y.PR.BOTH,buyCost:be,sellCost:he,availableBalance:ve,tickSize:xe,limitStepSize:Se,marketStepSize:ke,takeProfitStopPrice:Pe,stopLossStopPrice:Te,takeProfitStopPriceWorkingType:Ce,stopLossStopPriceWorkingType:Ze,strategySide:Me}=se,Ie=1===Me?f.g.BUY:f.g.SELL,{reduceOnly:we=!1}=B||{},{BuyText:Ee,SellText:Ae}=(0,A.x_)(te),Ne=Number(Pe)||0,Oe=Number(Te)||0,Re=!we&&te!==f.RS.CLOSE&&H&&!(!Ne&&!Oe)&&Ie===pe,Le=Number(null===(T=(0,A.CE)()[e])||void 0===T?void 0:T.markPrice),Ve=pe===f.g.BUY,Fe=Ve?"buy":"sell",De=Ve?"button.buyHover":"button.sellHover",_e=Ve?Ee:Ae,{0:Be,1:ze}=(0,i.useState)(!1),{equalQtyPrecision:Ke=2}=r,qe=xe,We=Ve?de:me,Ue=Ve?be:he,je=Ve?X:ee,$e=K(Ce===f.HZ.LAST_PRICE?"lastPrice":"tradeHistory-positions-markPriceTitle",{defaultValue:"Last Price"}),He=K(Ze===f.HZ.LAST_PRICE?"lastPrice":"tradeHistory-positions-markPriceTitle",{defaultValue:"Last Price"}),Ge=Ve?ie:oe,Je=re?v.C:w,Ye=O({orderType:Y,equalQtyPrecision:Ke,marketStepSize:ke,limitStepSize:Se,tickSize:xe,unit:W})(),Qe=(0,N.Z)({orderType:Y,qty:We,triggerPrice:ce,orderPrice:se.price,contractVal:ne,activationPrice:ge,lastPrice:se.oLastPrice,markPrice:Le,isDelivery:re,precision:Ye}),Xe=W===g.SW.coin||W===g.AO.usdt?Qe:Number(pe===f.g.BUY?de:me||0),{currentPosition:et,liquidationPrice:tt}=Je({symbol:e,positionSide:ye,orderPrice:Number(ue||0),assumePrice:le(pe===f.g.BUY?"bid":"ask")||0,triggerPrice:Number(ce||0),activationPrice:Number(ge||0),orderAmount:Xe,formType:Y,side:pe===f.g.BUY?1:-1,cost:je,openLost:Ge,contractVal:ne,reduceOnly:we}),{liquidationPrice:rt,diff:at}=(({currentPosition:e,liquidationPrice:t,markPrice:r,places:a})=>{const{positionSize:o,entryPrice:n}=e||{};return(0,i.useMemo)((()=>{if(t<=0)return{liquidationPrice:"--",diff:"--"};const e=t-r;return{liquidationPrice:(0,m.uf)(t,a),diff:e}}),[a,o,n,t,r])})({currentPosition:et,liquidationPrice:tt,markPrice:Le,places:qe});let it;const{shortName:ot}=(0,A.oO)();it=re?W===g.SW.coin?S:ae:W===g.AO.coin?S:k,(0,i.useImperativeHandle)(P,(()=>({showOrderConfirmPanel:e=>{I(e),Z(!0)}})));const{marginType:nt}=(0,A.se)(),lt=we||j&&te===f.RS.CLOSE||nt===y.Yl.ISOLATED||Y===f.Jm.TRAILING_STOP_MARKET||je>ve,st=(0,i.useCallback)((async()=>{if(Be){const e=(0,a.Z)((0,a.Z)({},U),{},{[Y.toUpperCase()]:!1});q.preference.changeOrderConfirmation(e)}Q(se),Z(!1)}),[Be,Q,se,U,Y,q]);return(0,i.useEffect)((()=>(0,b.GY)((async({name:e})=>{switch(e){case b.BV:C&&Z(!1),V++;break;case b.DX:C&&st(),V++}}))),[st,V,C]),(0,i.useMemo)((()=>R(n.Z,{visible:C,tx:"orderForm.confirmPanel",variant:"container",sx:L,onMaskClick:()=>{Z(!1)},onPressEnter:()=>{st()},onPressEsc:()=>{Z(!1)}},R(l.Z,{variant:"title6",className:"title"},K("order-confirmation",{defaultValue:"Order Confirmation"})),R(_,{labelClassName:"highlight",label:ot,value:_e,valueClassName:`${Fe} highlight`}),F.includes(Y)&&R(_,{label:K("stopPriceTitle",{defaultValue:"Stop Price"}),value:(0,m.uf)(ce,qe),unit:t}),D.includes(Y)&&R(_,{label:K("priceTitle",{defaultValue:"Price"}),value:K("market",{defaultValue:"Market"})}),!D.includes(Y)&&(Y===f.Jm.TRAILING_STOP_MARKET?R(o().Fragment,null,R(_,{label:K("callbackRate",{defaultValue:"Callback Rate"}),value:(0,m.uf)(fe,1),unit:"%"}),Number(ge)?R(_,{label:K("activationPrice",{defaultValue:"Activation Price"}),value:(0,m.uf)(ge,qe),unit:t}):null):R(_,{label:K("priceTitle",{defaultValue:"Price"}),value:(0,m.uf)(ue,qe),unit:t})),R(_,{label:K("orderQtyTitle",{defaultValue:"Order Qty"}),value:(0,m.Jp)(We).toFixed(Ye,1),unit:it}),te===f.RS.OPEN&&R(_,{label:K("cost",{defaultValue:"Cost"}),value:Ue,unit:k}),!lt&&!$&&R(o().Fragment,null,R(s.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line"},R(_,{label:K("markPrice",{defaultValue:"Mark Price"}),value:(0,m.uf)(Le,qe),unit:t})),R(s.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line"},R(_,{label:R(E.m,{tip:R(l.Z,{as:"div"},K("estLiquidationPriceTip",{defaultValue:""})),placement:"bottom"},K("estLiquidationPrice",{defaultValue:"Est. Liquidation Price"})),value:rt,unit:t})),R(_,{label:R(E.m,{tip:R(l.Z,{as:"div"},K("estLiqMpDifferenceTip",{defaultValue:""})),placement:"bottom"},K("estLiqMpDifference",{defaultValue:"Est. Liquidation Price/Mark Price Difference"})),value:"--"===at?at:`${(0,m.uf)(100*(Le?Number(at)/Le:0),2)}%`,unit:"--"===at?"":`(${(0,m.uf)(at,qe)})`})),Re&&R("div",{className:"top-line"},Ne?R(_,{label:K("takeProfit",{defaultValue:"Take Profit"}),value:`${$e} ${Ve?">=":"<="} ${Ne}`,unit:t}):null,Oe?R(_,{label:K("stopLoss",{defaultValue:"Stop Loss"}),value:`${He} ${Ve?"<=":">="} ${Oe}`,unit:t}):null),Y===f.Jm.MARKET&&!Re&&R(l.Z,{variant:"caption",mt:3,color:"t.sell"},K("orderFailHintV2",{value:J,defaultValue:`Your order will fail should the market price deviate from the marked price by more than ${J}%`})),R("label",{className:"show-again"},R(c.Z,{className:"checkbox",onChange:()=>{ze(!Be)}}),K("dontAskAgain",{defaultValue:"Don\u2019t ask me again"})),R(u.Z,{mt:"24px",width:"100%"},R(d.Z,{colorStyle:"secondary",onClick:()=>{ze(!1),Z(!1)},sx:{width:"164px",letterSpacing:"0.16px",mr:"8px",py:"10px"}},K("cancelBtnText",{defaultValue:"Cancel"})),R(d.Z,{colorStyle:Fe,onClick:st,sx:{width:"164px",letterSpacing:"0.16px",py:"10px"}},_e)))),[$,C,Fe,_e,ot,K,Y,ce,qe,t,fe,ge,ue,We,Ye,it,te,Ue,Re,Ne,$e,He,Ve,Oe,Le,lt,rt,at,Be,st,De,k])}))},c5N6:(e,t,r)=>{"use strict";r.r(t),r.d(t,{useConfirmStore:()=>B,AssetModeDialog:()=>K,default:()=>W,OrderConfirmationForm:()=>$,PositionSideForm:()=>H,PriceProtectionForm:()=>G,NotificationForm:()=>Q,AssetModeFormComponent:()=>X,AssetModeForm:()=>ee,OrderAmendment:()=>te});var a=r("5vwO"),i=r("GpFh"),o=r("/SIk"),n=r.n(o),l=r("7DKi"),s=r("LHeJ"),c=r("szIg"),u=r("fi7b"),d=r("APA6"),m=r("rjaD"),p=r("TKP4"),f=r("71uP"),g=r("Kiww"),y=r("J81Z"),b=r("f+9E"),h=r("BLcC"),v=r("a1YN"),x=r("9izf"),S=r("eOkI"),k=r("wr3m"),P=r("WZQH"),T=r("fYqI"),C=r("fglS"),Z=r("9h1+"),M=r("BSj8"),I=r("6u/I"),w=r("R+VW"),E=r("VM/Z"),A=r("jgBC"),N=r("FOuV"),O=r("k4WF"),R=r("SJeZ"),L=r("uH0D"),V=n().createElement;const F=(0,E.nM)(),D={LIMIT:"limit",MARKET:"market",STOP:"stopLimit",STOP_MARKET:"stopMarket",TRAILING_STOP_MARKET:"trailingStopMarket"},_=[{i18n:"order-confirmation",defaultI18n:"Order Confirmation",key:"oc"},{i18n:"position-mode",defaultI18n:"Position Mode",key:"pm"},{i18n:"priceProtection",defaultI18n:"Price Protection",key:"pp"},{i18n:"preferenceNotification",defaultI18n:"Notification",key:"pn"}];F||_.push({i18n:"assetMode",defaultI18n:"Asset Mode",key:"am"});const B=(0,s.Z)((e=>({visible:!1,setVisible:t=>e((()=>({visible:t}))),assetMode:!1,setAssetMode:t=>e((()=>({assetMode:t})))}))),z=(0,o.forwardRef)(((e,t)=>{const{getI18n:r}=(0,R.yk)(),{0:a,1:i}=(0,o.useState)({defaultActiveKey:"oc"}),{defaultActiveKey:l="oc"}=a,{0:s,1:u}=(0,o.useState)(!1),{0:g,1:y}=(0,o.useState)(l),b=(0,c.useDispatch)(),h=(0,o.useCallback)((()=>{u(!1)}),[u]),k=B((e=>e.visible)),P=B((e=>e.setVisible)),T=B((e=>e.setAssetMode)),C=(0,R.$J)(),{multiAssetMarginEnable:Z=!1}=(0,R.F7)(),M=new Set,I=Object.values(C).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:t}=e;return!M.has(t)&&(M.add(t),!0)}return!1})),w=Boolean(I.length),E=(0,o.useCallback)((e=>{b.preference.getFundingFeeNotify(),b.preference.getStopLimitOrderNotify(),u(!0),i(e)}),[b,u,i]);return(0,o.useImperativeHandle)(t,(()=>({showPreferencePanel:E}))),(0,o.useEffect)((()=>A.TB.on(A.FP.SHOW_PREFERENCE_PANEL,(e=>{E({defaultActiveKey:e})}))),[E]),(0,o.useEffect)((()=>A.TB.on(A.FP.CLOSE_PREFERENCE_PANEL,(()=>{h()}))),[h]),(0,o.useEffect)((()=>{const{defaultActiveKey:e="oc"}=a;y(e)}),[a]),(0,o.useEffect)((()=>{b.preference.getFungFeeRange()}),[b.preference]),(0,o.useMemo)((()=>s||k?V(d.Z,null,V(m.Z,{visible:s,tx:"preference.dialog",variant:"container",onMaskClick:h},V(p.Z,{alignItems:"center",justifyContent:"space-between",tx:"preference.header",variant:"container"},V(f.Z,{tx:"preference.header",variant:"title"},r("preference",{defaultValue:"Preference"})),V(v.Z,{tx:"preference.header",variant:"close",onClick:h})),V(p.Z,{sx:{height:"496px"}},V(x.Z,{size:"large",variant:"vertical",defaultActiveKey:g,controlledKey:g,onChange:e=>y(e)},_.map((({i18n:e,defaultI18n:t,key:a})=>"am"!==a||!F&&Z?V(S.Z,{tab:V(f.Z,{variant:"subtitle2",marginRight:"24px",minWidth:"120px"},r(e,{defaultValue:t})),key:a,tabKey:a}):V(n().Fragment,null)))),V(d.Z,{sx:{borderLeft:"0.5px solid",borderColor:"line"},px:"24px",py:"24px",height:"100%",flex:"1"},V(q,{tabKey:g,hidePreferencePanel:h,setConfirmVisible:P,setAssetMode:T,isolatedPositionFlag:w})))),V(K,{confirmVisible:k,setConfirmVisible:P})):null),[Z,w,T,P,k,s,h,g,r])})),K=({confirmVisible:e,setConfirmVisible:t})=>{const r=(0,c.useDispatch)(),{getI18n:a}=(0,R.yk)(),{t:i}=(0,R.$G)(),n=B((e=>e.assetMode)),{0:l,1:s}=(0,o.useState)(!1),{setMessageInfo:b}=(0,C.Y)(),h=(0,R.$J)(),v=(0,o.useRef)({});Object.values(h).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:t}=e;return!v.current[t]&&(v.current[t]=e,!0)}return!1}));const x=Boolean(Object.values(v.current).filter((e=>e.isolated&&"BOTH"===e.positionSide)).length),S=(0,o.useCallback)((e=>r.preference.changeAssetMode({joinMargin:e})),[r.preference]),k=(0,o.useCallback)(((e,t)=>r.marginType.changeMarginType({marginType:t?N.Yl.CROSSED:N.Yl.ISOLATED,symbol:e})),[r.marginType]);return V(m.Z,{visible:e,tx:"preference.confirmDialog",variant:"container"},V(f.Z,{tx:"preference.confirmDialog",variant:"desc"},V(u.c,{t:i,i18nKey:(0,R.Gv)("isolatedAssetModeDes"),defaults:"Isolated margin positions are not supported under the Multi-Assets Mode. Please adjust all USD\u24c8-M Futures positions to cross margin mode in order to activate Multi-Assets Mode.",components:{text:V(f.Z,null),jump:V(f.Z,{tx:"tradingRules.dialog",variant:"viewMore",sx:{mt:"0 !important",display:"inline"}})},values:{isolatedMode:a("isolatedMode",{defaultValue:"Isolated Mode"}),crossMode:a("crossMode",{defaultValue:"Cross Mode"})}})),V(d.Z,{mb:"24px",overflowY:"auto",maxHeight:"300px",width:"100%",pr:"12px"},Object.values(v.current).map((e=>{const{isolated:t,symbol:r,id:i}=e,o=t?a("headerIsolated",{defaultValue:"Isolated"}):a("Cross",{defaultValue:"Cross"});return V(p.Z,{mb:"8px",key:i,justifyContent:"space-between"},V(p.Z,{mb:0,tx:"preference.confirmDialog",variant:"desc"},r),V(p.Z,null,V(p.Z,{mb:0,mr:"8px",tx:"preference.confirmDialog",variant:"desc",fontSize:"12px"},o),V(g.Z,{sx:{"& div":{backgroundColor:"#FFFFFF"},"& input":{backgroundColor:"#C1C6CD"}},checked:!t,onChange:()=>{l||(s(!0),k(r,t).then((r=>{null!==r&&void 0!==r&&r.marginType&&(e.isolated=!t,b({header:a("changeMarginModeTitle",{defaultValue:"Adjust Margin"}),message:a("changeMarginModeSuccess",{defaultValue:"change margin mode success"}),variant:"success"})),s(!1)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})))},name:i,color:"t.buy",size:16})))})),V(p.Z,{fontSize:"12px",color:"t.sell"},a("switchCrossMode",{defaultValue:"*Please switch all positions to cross mode."}))),V(p.Z,{width:"100%",justifyContent:"space-around"},V(p.Z,{tx:"preference.confirmDialog",variant:"cancelButton"},V(y.Z,{variant:"default",colorStyle:"secondary",height:40,width:"100%",onClick:()=>{t(!1)}},a("cancelBtnText",{defaultValue:"Cancel"}))),V(p.Z,{tx:"preference.confirmDialog",variant:"confirm"},V(y.Z,{height:40,width:"100%",disabled:x,onClick:()=>{l||(s(!0),S(n).then((e=>{const{success:r}=e;r&&b({header:a("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:a("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"}),t(!1),s(!1)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})))}},a("PreferenceConfirm",{defaultValue:"Confirm"})))))},q=e=>{let{tabKey:t}=e,r=(0,i.Z)(e,["tabKey"]);switch(t){case"oc":return V($,null);case"pm":return V(H,null);case"pp":return V(G,null);case"pn":return V(Q,null);case"am":return V(ee,r);case"oa":return V(te,r);default:return null}},W=z,U=()=>{const{getI18n:e}=(0,R.yk)();return e(F?"settingDelivery":"settingPerpetual",{defaultValue:F?"This setting is only apply for Delivery Futures.":"This setting is only apply for Perpetual Futures."})},j=({name:e,label:t,checked:r,onChange:a,children:i=null})=>(0,o.useMemo)((()=>V(p.Z,{tx:"preference.switch",variant:"container"},V(p.Z,{tx:"preference.switch",variant:"header"},V(f.Z,{tx:"preference.switch",variant:"label"},t),V(g.Z,{checked:r,name:e,onChange:a,size:16})),i)),[r,i,t,e,a]),$=()=>{const e=(0,o.useRef)(["LIMIT","MARKET","STOP","STOP_MARKET","TRAILING_STOP_MARKET"]),{orderConfirmation:t}=(0,R.F7)(),{getI18n:r}=(0,R.yk)(),{setMessageInfo:i}=(0,C.Y)(),n=U(),l=(0,c.useDispatch)(),s=(0,o.useCallback)((e=>l.preference.changeOrderConfirmation(e)),[l.preference]),u=(0,o.useCallback)((e=>{s(e).then((e=>{const{success:a}=e;a?i({header:r("changeOrderConfirmation",{defaultValue:"Change Order Confirmation"}),message:r("changeOrderConfirmationSuccess",{defaultValue:"Change Order Confirmation successfully."}),variant:"success"}):s(t)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[s,i,r,t]);return V(d.Z,null,e.current.map((e=>V(j,{key:e,name:e,label:`${r(D[e],{defaultValue:""})}   ${r("Order",{defaultValue:"Order"})}`,checked:t[e]||!1,onChange:r=>{const{target:i}=r;u((0,a.Z)((0,a.Z)({},t),{},{[e]:i.checked}))}}))),V(p.Z,{tx:"preference.content",variant:"header",sx:{lineHeight:["20px","16px"]}},r("order-confirmation-content",{defaultValue:""}),"\xa0",n))},H=()=>{const e=(0,c.useDispatch)(),{positionMode:t=!1}=(0,R.F7)(),{getI18n:r}=(0,R.yk)(),{enqueueNotification:a}=(0,k.Z)(),i=U(),n=(0,o.useCallback)((t=>e.preference.changePositionMode({dualSidePosition:t})),[e.preference]),l=(0,o.useCallback)((e=>{t!==e&&n(e).then((e=>{const{success:t}=e;t&&a({header:r("AdjustPositionMode",{defaultValue:"Adjust Position Mode"}),message:r("AdjustPositionModeSuccess",{defaultValue:"Position mode adjusted successfully."}),variant:"success"})})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[n,a,r,t]);return V(d.Z,null,V(d.Z,{mt:"27px","data-testid":"One-wayMode"},V(b.ZP,{name:"positionSide",value:"false",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!1===t,onCheckedChange:()=>{l(!1)}},V(d.Z,{tx:"preference.switch",variant:"label"},r("OneWayPosition",{defaultValue:"One-way Mode"}))),V(f.Z,{tx:"preference.radio",variant:"desc"},r("OneWayModeDes",{defaultValue:""}))),V(d.Z,{mt:"27px","data-testid":"HedgeMode"},V(b.ZP,{name:"positionSide",value:"true",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!0===t,onCheckedChange:()=>{l(!0)}},V(d.Z,{tx:"preference.switch",variant:"label"},r("TwoWayPosition",{defaultValue:"Hedge Mode"}))),V(f.Z,{tx:"preference.radio",variant:"desc"},r("TwoWayModeDes",{defaultValue:""}))),V(p.Z,{tx:"preference.content",variant:"header"},r("AdjustPositionModeDes",{defaultValue:""}),"\xa0",i))},G=()=>{const e=(0,Z.tZ)(),t=(0,c.useDispatch)(),{getI18n:r}=(0,R.yk)(),{t:a}=(0,R.$G)(),{setMessageInfo:i}=(0,C.Y)(),{priceProtection:n}=(0,R.F7)(),l=U(),s=(0,o.useCallback)((e=>{(0,M.P2)({[F?"deliveryPriceDifferSwitch":"perpetualPriceDifferSwitch"]:e}).then((a=>{const{data:o}=a;o&&(i({header:r("AdjustPriceProtection",{defaultValue:"Adjust Price Protection"}),message:r("AdjustPriceProtectionSuccess",{defaultValue:"Price protection adjusted successfully"}),variant:"success"}),t.preference.updateState({priceProtection:e}))})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[t.preference,r,i]);return V(d.Z,null,V(j,{name:"priceProtection",label:r("priceProtection",{defaultValue:"Price Protection"}),checked:n,onChange:e=>s(e.target.checked)}),V(p.Z,{tx:"preference.content",variant:"header",flexDirection:"column"},V(u.c,{t:a,i18nKey:(0,R.Gv)("priceProtectionDes"),defaults:"<text>After enabling price protection, if the difference between the Last price and Mark price of the contract exceeds the set threshold when the stop loss / take profit orders reach the trigger price, the stop loss / take profit orders will not be triggered. View threshold in <jump>{{tradingRule}}</jump></text>",components:{text:V(f.Z,null),jump:V(h.Z,{href:`/${e}/futures/trading-rules/${F?"quarterly":"perpetual"}`,tx:"tradingRules.dialog",variant:"viewMore",sx:{mt:"0 !important",display:"inline"},target:"_blank"})},values:{tradingRule:r("trading-rules",{defaultValue:"Trading Rules"})}}),V(d.Z,{mt:10},l)))},J={pr:"54px","& .bn-input-tooltip":{minWidth:"238px",height:"32px",lineHeight:"32px",textAlign:"center",bg:"t.grey500",borderRadius:"4px",color:"t.grey0",fontSize:"sm",right:"-45px !important",bottom:"155% !important"},"& .bn-input-tooltip-arrow":{right:"63px !important"},"& .bn-input-tooltip-content":{padding:"7px 8px !important"},"& > div:nth-of-type(2)":{borderColor:"calculator.inputBorderColor"},"& .bn-input-status-error":{borderColor:"#D9304E !important"}},Y=()=>{const{cap:e,floor:t}=(0,R.I3)(),{getI18n:r}=(0,R.yk)(),{setMessageInfo:a}=(0,C.Y)(),{0:i,1:n}=(0,o.useState)(null),[l,s]=(0,R.aT)(),[{isEnableFundingFeeNotify:c,fundingFee:u},m]=(0,R.CJ)(),{0:f,1:g}=(0,o.useState)(u);(0,o.useEffect)((()=>{u!==f&&g(u)}),[u]);const y=(0,o.useCallback)((()=>{a({header:r("AdjustNotification",{defaultValue:"Adjust Notification"}),message:r("AdjustNotificationSuccess",{defaultValue:"Notification adjusted successfully."}),variant:"success"})}),[]),b=(0,o.useCallback)((async e=>{const{target:{checked:t}}=e;try{(await s(t)).success&&y()}catch{}}),[y]),h=(0,o.useCallback)((async e=>{try{n("");(await m({fundingFee:f,isEnable:e})).success&&y()}catch(t){console.log(t)}}),[y,f]),v=(0,o.useCallback)((a=>{g(a),n(a<t||a>e?r("fundingFeeTriggerTips",{min:t,max:e,defaultValue:"Trigger is limited to {{min}}%-{{max}}%."}):null)}),[e,t,r]);return V(d.Z,null,V(j,{name:"priceProtection",label:r("TPSLTrigger",{defaultValue:"TP/SL Trigger"}),checked:l,onChange:b},V(d.Z,{tx:"preference.switch",variant:"desc"},r("TPSLTriggerDesc",{defaultValue:"TPSLTriggerDesc"}))),V(j,{name:"priceProtection",label:r("fundingFeeTrigger",{defaultValue:"Funding Fee Trigger"}),checked:c,onChange:e=>h(e.target.checked)},V(p.Z,{tx:"preference.switch",variant:"desc",alignItems:"center",sx:J},V(d.Z,{tx:"preference.switch",variant:"desc",sx:{pr:0}},r("fundingFeeTriggerDesc",{defaultValue:"You will be notified when funding fee reaches"})),V(P.Z,{boxProps:{width:"80px",minWidth:"80px",height:"24px",ml:"minor",mt:0,mb:0},variant:"inline",type:"number",value:f,onChange:e=>(0,O._p)(e,v,"",4),onBlur:e=>{(0,O.Y5)(e),h(!0)},errorText:i||"",error:!!i,suffix:"%",disabled:!c}))),V(p.Z,{tx:"preference.content",variant:"header",flexDirection:"column"},r("preferenceNotificationDes",{defaultValue:"preferenceNotificationDes"})))},Q=n().memo(Y),X=({setConfirmVisible:e,setAssetMode:t,isolatedPositionFlag:r=!1})=>{const a=(0,c.useDispatch)(),{assetMode:i}=(0,R.F7)(),{hidePreferencePanel:n}=(0,R.r8)(),{getI18n:l}=(0,R.yk)(),{t:s}=(0,R.$G)(),{enqueueNotification:m}=(0,k.Z)(),g=(0,Z.tZ)(),{0:y,1:v}=(0,o.useState)(!1),x=(0,o.useCallback)((e=>a.preference.changeAssetMode({joinMargin:e})),[a.preference]),S=(0,o.useCallback)((a=>{if(!y){if(r)return e(!0),void t(a);v(!0),x(a).then((e=>{const{success:r,code:i}=e;r?m({header:l("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:l("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"}):(t(a),i===E.gU&&(n(),!a&&(0,w.n)())),v(!1)})).catch((e=>{"undefined"!==typeof Sentry&&Sentry.captureException(e),v(!1),t(a)}))}}),[y,r,m,t,e,x,l,i]);return V(d.Z,null,V(d.Z,{mb:"27px"},V(b.ZP,{name:"assetMode",value:"false",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!1===i,onChange:()=>{S(!1)}},V(d.Z,{tx:"preference.switch",variant:"label"},l("singleAsset",{defaultValue:"Single-Asset Mode"}))),V(f.Z,{tx:"preference.radio",variant:"desc"},l("singleAssetDes",{defaultValue:"Supports USD\u24c8-M Futures trading by only using the single margin asset of the symbol. \n PNL of the same margin asset positions can be offset. \n Supports Cross Margin Mode and Isolated Margin Mode."}))),V(d.Z,{mb:"27px"},V(b.ZP,{name:"assetMode",value:"true",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!0===i,onChange:()=>{S(!0)}},V(d.Z,{tx:"preference.switch",variant:"label"},l("multiAssets",{defaultValue:"Multi-Assets Mode"}))),V(f.Z,{tx:"preference.radio",variant:"desc"},l("multiAssetsDes",{defaultValue:"USD\u24c8-M Futures trading across multiple margin assets. \n PNL can be offset among the different margin asset positions. \n Only supports Cross Margin Mode."}))),V(p.Z,{tx:"preference.content",variant:"header",flexDirection:"column"},V(u.c,{t:s,i18nKey:(0,R.Gv)("assetModeDes"),defaults:"<text>Multi-Assets Mode only applies to USD\u24c8-M Futures. Before activating Multi-Assets Mode, please read the <jump>{{guide}}</jump> in detail to better manage USD\u24c8-M Futures account risk accordingly when using Multi-Assets Mode.</text>",components:{text:V(f.Z,{mt:"8px"}),jump:V(h.Z,{href:(0,L.b)(`/${g}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`),tx:"tradingRules.dialog",variant:"viewMore",sx:{mt:"0 !important",display:"inline"},target:"_blank"})},values:{guide:l("guide",{defaultValue:"guide"})}})))},ee=n().memo(X),te=n().memo((({hidePreferencePanel:e})=>{const t=T.k.Store.createStore(I.O7),[,r]=t(T.k.Store.getShowLimitOrder),[,a]=t(T.k.Store.getShowPositionOrder),{getI18n:i}=(0,R.yk)(),[n,s]=(0,l.g)(N.Zv,N.Xd),{0:c,1:u}=(0,o.useState)(!(null===n||void 0===n||!n.kLine)),{0:m,1:f}=(0,o.useState)(!(null===n||void 0===n||!n.needConfirm)),g=(0,o.useCallback)((e=>{u(e.target.checked),r(e.target.checked),a(e.target.checked)}),[r,a]),b=(0,o.useCallback)((e=>f(e.target.checked)),[]);return V(d.Z,null,V(j,{name:"kLineAmendment",label:i("KLineAmendment",{defaultValue:"KLine Amendment"}),checked:c,onChange:g},V(d.Z,{tx:"preference.switch",variant:"desc"},i("KLineAmendmentDesc",{defaultValue:"KLine Amendment Desc"}))),V(j,{name:"amendmentConfirmation",label:i("amendmentConfirmation",{defaultValue:"Amendment Confirmation"}),checked:m,onChange:b},V(d.Z,{tx:"preference.switch",variant:"desc"},i("amendmentConfirmationDesc",{defaultValue:"Amendment Confirmation Desc"}))),V(p.Z,{tx:"preference.confirm",variant:"buttonConfirm"},V(y.Z,{height:40,width:"100%",onClick:()=>{s({kLine:c,needConfirm:m}),e()}},i("PreferenceConfirm",{defaultValue:"Confirm"}))))}))},Wx6g:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r("tS/l");const i=({children:e})=>{const{isMobile:t,isIPad:r}=(0,a.F)();return e&&e({isMobile:t,isIPad:r})}},cEEj:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("APA6"),l=r("sZZk"),s=o().createElement;const c=e=>{let{mediaQuery:t,children:r}=e,o=(0,a.Z)(e,["mediaQuery","children"]);const c=(0,l.useMediaQuery)({query:t||"(max-width: -1)"})||void 0===t;return(0,i.useMemo)((()=>c?s(n.Z,Object.assign({sx:{width:"100%",height:"100%",display:"none",[`@media ${t}`]:{display:"block"}}},o),r):null),[c,r,o,t])},u=e=>{let{children:t,mediaQuery:r,renderInSSR:i}=e,o=(0,a.Z)(e,["children","mediaQuery","renderInSSR"]);return s("div",{suppressHydrationWarning:!0},s(c,Object.assign({mediaQuery:r},o),t))},d=(0,i.memo)(u)},keMM:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r("5vwO"),i=r("/SIk"),o=r("Uqe+"),n=r("lk5g"),l=r("YPGZ"),s=r("F4xq"),c=r("szIg"),u=r("kO20"),d=r("S24M"),m=r("9h1+"),p=r("SJeZ"),f=r("VM/Z"),g=r("jgBC"),y=r("ux7Q"),b=r("IewQ");const h=()=>{const[e]=(0,m.z4)(),[t]=(0,m.uT)(),{isLight:r}=(0,m.Fg)(),h=(0,c.useSelector)((e=>e.setting.color)),v=(0,p.C3)(),[x={}]=(0,o.Z)(f.Ze),{userId:S}=(0,m.Pc)();let{layout:k}=(0,m.lr)();return k=(0,g.XY)([f.UW,f.$f],k,f.$f),(0,i.useEffect)((()=>{try{const e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=u.Responsive.utils.getBreakpointFromWidth(y.j$,e),i=(x[t]||[]).map((e=>e.i)),o=JSON.parse(localStorage.getItem(b.w)||"null"),{sensors:n}=(0,l.Z)({sensorsConfig:{server_url:f.yB,staticHost:f.Xs,batch_send:!0,heatmap:{useCapture:!0,collect_elements:"all",scroll_notice_map:"default",clickmap:"default",track_attr:["data-testid"],custom_property(e){if(e){var t;const r={tag:"futuresng",pageName:"futuresng"},a=null===(t=e.dataset)||void 0===t?void 0:t.testid;return a&&(r.dataTestId=a),r}}},preset_properties:{url:!0},show_log:!1},ableGA:"test"!==f.vt});n.quick("autoTrack",(0,a.Z)((0,a.Z)({},{theme:r?f.rp:f.Py,tag:"futuresng",version:f.lO,chart:i.indexOf("chart")>-1,market:i.indexOf("market")>-1,depth:i.indexOf("verticalDepth")>-1,orderbook:i.indexOf("orderbook")>-1,trades:i.indexOf("trades")>-1,position:i.indexOf("userinfo")>-1,flashOrder:null===o||o,layout:v||k||f.$f,favorite:i.indexOf("favorite")>-1,assets:i.indexOf("assetsCard")>-1,marginRatio:i.indexOf("marginRatio")>-1,placeOrder:i.indexOf("orderForm")>-1,color:h}),f.jX?{channel:f.jX}:{})),(0,d.$0)(n)}catch(e){console.error("senor init error",e)}}),[t,e]),(0,i.useEffect)((()=>{S&&((0,s.Z)(S),(0,n.fs)(S),"undefined"!==typeof window.Sentry&&window.Sentry.setUser({id:S}))}),[S]),null}},"c1R+":(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var a=r("/SIk"),i=r.n(a),o=r("0/eC"),n=r("AOH6"),l=r("S24M"),s=r("SJeZ"),c=r("VM/Z"),u=r("5vwO"),d=r("ko6h"),m=r("APA6"),p=r("rjaD"),f=r("71uP"),g=r("TKP4"),y=r("d19s"),b=r("fDz0"),h=r("rMzp"),v=r("KGuD"),x=r("U0yl"),S=r("N081"),k=r("szIg"),P=r("BQ33"),T=r.n(P),C=r("gqsF"),Z=r("8Zi/"),M=r.n(Z),I=r("zBr4"),w=i().createElement;const E=()=>w(m.Z,{width:"1px",height:16,bg:o.BA[400]}),A=({showResult:e=!1,checkList:t=[],positionInfo:n})=>{const[l,s,c]=t,{getI18n:u,i18n:{language:d}}=(0,x.ZK)("","trade-ui"),{getI18n:p}=(0,x.ZK)("","futures-ui"),y=(0,k.useSelector)(I.vq),{isShort:b,leverage:h,pair:v,changePercent:S,pnlAmount:P,formatedPnl:Z,entryPrice:A,markPrice:N}=n,O=P>=0,R=(0,a.useMemo)((()=>e?O?"win":"loss":"basic"),[e,O]),L=(0,a.useMemo)((()=>`${window.location.origin}/${d}/futures/ref/${y}`),[d,y]);return w(m.Z,{id:"share-position-poster",className:"share-poster",width:580,px:50,py:30,sx:{background:`url(${r("hhOR")(`./${R}.png`).default}), #171B20`,backgroundSize:"cover",canvas:{bg:"t.white",p:"2px"}}},w(g.Z,null,w(C.Z,{src:r("rIPn").Z,height:24})),w(g.Z,{mt:c?29:62,color:"t.white",alignItems:"center",sx:{gap:12}},w(f.Z,{variant:"subtitle2",color:b?"t.sell":"t.buy"},u(b?"trd-Position-psShort":"trd-Position-psLong")),l?w(i().Fragment,null,w(E,null),w(f.Z,{variant:"subtitle2"},h,"X")):null,w(E,null),w(f.Z,{variant:"subtitle2",width:.5},v)),w(g.Z,{color:O?"t.buy":"t.sell",alignItems:"baseline",my:1},w(f.Z,{variant:"headline1"},S),s?w(f.Z,{variant:"headline6",ml:1,width:.5},"(",Z,")"):null),c?w(g.Z,{sx:{gap:3}},w(g.Z,{flexDirection:"column"},w(f.Z,{variant:"subtitle2",color:o.BA[200]},u("trd-Position-entryPrice")),w(f.Z,{variant:"subtitle2",color:o.BA[200],mt:1},u("trd-Position-markPrice"))),w(g.Z,{flexDirection:"column"},w(f.Z,{variant:"subtitle",color:o.er[200],sx:{lineHeight:"20px"}},A),w(f.Z,{variant:"subtitle",color:o.er[200],mt:"6px"},N))):null,w(g.Z,{mt:c?26:40,alignItems:"center"},w(m.Z,{mr:12},w(M(),{value:L,size:64,level:"H"})),w(g.Z,{flexDirection:"column"},w(f.Z,{variant:"caption",color:o.BA[200],sx:{textTransform:"uppercase"}},p("futures-referral-Referral-code")),w(f.Z,{variant:"headline5",color:"t.white"},y))),w(f.Z,{variant:"caption",color:o.BA[200],width:.5,textAlign:"right",sx:{position:"absolute",right:10,mt:1}},`${u("trd-Cut-off-Time")}: ${T()().format("YYYY-MM-DD HH:mm")}`))};var N=i().createElement;const O=[{label:"trd-share-leverage",val:"leverage"},{label:"trd-share-PNL-amount",val:"pnlAmount"},{label:"trd-trades-price",val:"price"}],R=(0,c.nM)(),L=({isRight:e=!1,onClick:t,disabled:r})=>{const a={size:16,color:"t.third"},i=e?{right:-56}:{left:-56};return N(m.Z,{bg:"t.white",sx:(0,u.Z)({position:"absolute",borderRadius:"100%",mt:160,width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:r?"not-allowed":"pointer",opacity:r?.5:1,boxShadow:"0px 7px 14px rgba(0, 0, 0, 0.08), 0px 3px 6px rgba(0, 0, 0, 0.08), inset 0px 0px 1px rgba(94, 102, 115, 0.9)"},i),onClick:()=>!r&&t()},N(e?h.Z:v.Z,a))},V=({onClose:e,positionInfo:t})=>{const{0:r,1:o}=(0,a.useState)(0),{0:n,1:u}=(0,a.useState)(O.map((()=>!0))),h=(0,s.C3)()===c.UW,{getI18n:v}=(0,x.ZK)("","trade-ui"),k=(0,a.useCallback)((()=>{const e=h?R?"cm_full_trading":"um_full_trading":R?"cm_pro_trading":"um_pro_trading",a=0===r?"General":t.pnlAmount>=0?"Winning":"Losing";(0,l.j)("WebClick",{module:"oop",ElementID:"sharePosition_download",ElementContent:O.filter(((e,t)=>n[t])).map((e=>e.val)).join("_"),df_source:R?"cm":"um",pageName:e,title:a});const i=document.getElementById("share-position-poster"),{offsetWidth:o,offsetHeight:s}=i;(0,S.Z)({el:i,android:{width:2*o,height:2*s,style:{transform:"scale(2)",transformOrigin:"top left",width:`${o}px`,height:`${s}px`}},success(e){(0,S.L)(e,`share-poster-${Date.now()}`)}})}),[n,h,r,t.pnlAmount]);return N(p.Z,{visible:!0,sx:{borderRadius:8,".share-poster":{borderRadius:"8px 8px 0 0"}}},!!t.pnlAmount&&N(i().Fragment,null,N(L,{onClick:()=>o(0),disabled:0===r}),N(L,{isRight:!0,onClick:()=>o(1),disabled:1===r})),N(A,{checkList:n,showResult:1===r,positionInfo:t}),N(m.Z,{bg:"modalBg",px:4,pt:4},N(f.Z,{variant:"body2",color:"t.secondary"},v("trd-share-select-display")),N(g.Z,{mt:2,mb:4,sx:{gap:4}},O.map(((e,t)=>N(y.Z,{key:e.val},N(b.Z,{checked:n[t],onChange:e=>{const{checked:r}=e.currentTarget;u((e=>{const a=[...e];return a[t]=r,a}))}}),N(f.Z,{variant:"body2",color:"t.primary"},v(e.label)))))),N(d.Z.ModalFooter,{onOk:k,OkContent:v("trd-footer-download"),CancelContent:v("trd-Position-cancel"),onCancel:e})))};var F=i().createElement;const D=(0,c.nM)(),_=({positionInfo:e})=>{const{0:t,1:r}=(0,a.useState)(!1),u=(0,s.C3)()===c.UW;return F(i().Fragment,null,t&&F(V,{onClose:()=>r(!1),positionInfo:e}),F(n.Z,{color:o.BA[300],sx:{cursor:"pointer"},onClick:()=>{const e=u?D?"cm_full_trading":"um_full_trading":D?"cm_pro_trading":"um_pro_trading";(0,l.j)("WebClick",{module:"oop",ElementID:"sharePosition_entry",df_source:D?"cm":"um",pageName:e}),r(!0)}}))}},COVG:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var a=r("/SIk"),i=r.n(a),o=r("APA6"),n=r("2fVk"),l=r("NcRm"),s=i().createElement;const c={minWidth:"150px",backgroundColor:"rgba(255, 0, 0, .2)","& .sort-item":{boxShadow:"none !important"}},u={color:"t.primary",display:"flex",zIndex:1e4,backgroundColor:"popupBg",justifyContent:"space-between",alignItems:"center",padding:"8px 2px",fontSize:"12px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.3)","&:first-child":{marginTop:"16px"}},d=(0,l.W6)((()=>s(n.Z,{color:"t.third",size:20}))),m=(0,l.W8)((({value:e})=>s(o.Z,{sx:u,className:"sort-item"},e,s(d,null)))),p=(0,l.JN)((({children:e})=>s(o.Z,{sx:c},e))),f=({items:e,onSort:t})=>s(p,{transitionDuration:100,useDragHandle:!0,onSortEnd:({oldIndex:r,newIndex:a},i)=>{i.stopPropagation(),i.preventDefault();const o=e.map((e=>e.value)),[n]=o.splice(r,1);o.splice(a,0,n),t(o)}},e.map(((e,t)=>s(m,{key:e.value,value:e.label,index:t}))))},v2M8:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("/SIk"),i=r.n(a),o=r("TKP4"),n=i().createElement;function l(e){return n(o.Z,Object.assign({__css:{flexDirection:"column",height:"100%",px:"sm"}},e))}},rdEq:(e,t,r)=>{"use strict";r.d(t,{m:()=>g});var a=r("5vwO"),i=r("GpFh"),o=r("/SIk"),n=r.n(o),l=r("APA6"),s=r("71uP"),c=r("bDLa"),u=r("tS/l");const d={display:"flex",alignItems:"center",cursor:"help",color:"t.third",borderBottom:["1px dotted","1px dotted","none"],borderBottomColor:"t.third","&:hover":{color:"t.primary",borderBottomColor:"t.primary"}},m={maxWidth:"296px",margin:"-4px 0",lineHeight:"16px",color:"t.white",whiteSpace:"pre-line"};var p=r("vt3k"),f=n().createElement;const g=n().memo((e=>{let{children:t,tip:r,learnMoreLink:o,placement:g,hideUnderLine:y,sx:b,tipSx:h,labelSx:v,onTipClick:x}=e,S=(0,i.Z)(e,["children","tip","learnMoreLink","placement","hideUnderLine","sx","tipSx","labelSx","onTipClick"]);const{isIPad:k}=(0,u.F)(),P=f(l.Z,Object.assign({sx:(0,a.Z)((0,a.Z)({},m),h)},x&&{onClick:x}),r,o&&f(n().Fragment,null," ",f(p.dh,{link:o})));return f(c.Z,Object.assign({tip:P,delay:500,sx:b,bg:"bg4",placement:g,arrow:!0,enablePortal:!k},S),f(s.Z,{sx:(0,a.Z)((0,a.Z)((0,a.Z)({},d),v),y?{borderBottom:"none"}:{})},t))}))},"R+VW":(e,t,r)=>{"use strict";r.d(t,{n:()=>f,Z:()=>y});var a=r("/SIk"),i=r.n(a),o=r("rjaD"),n=r("71uP"),l=r("J81Z"),s=r("SYRY"),c=r("54Vt"),u=r("LcTY"),d=r("SJeZ"),m=i().createElement;const p={display:"flex",width:360,flexDirection:"column",alignItems:"center","& .close-icon":{position:"absolute",right:"22px",top:"22px",cursor:"pointer"},"& .error-icon":{mt:"plus",mb:"sm"},"& .modal-title":{mb:"xs",color:"t.primary"},"& .modal-content":{maxHeight:"140px",mx:"md",color:"t.third",overflow:"auto","&::-webkit-scrollbar":{width:"3px",height:"3px"},"&::-webkit-scrollbar-thumb":{bg:"line"}},"& .modal-footer":{display:"flex",width:"100%",justifyContent:"space-between",p:"md",boxSizing:"border-box",button:{width:"50%"},".transfer-btn":{borderRadius:"4px"},".convert-btn":{mr:"xs"}}},f=()=>{u.T.emit(u.F.OPEN_SWITCH_SINGLE_MODE_REJECT_MODAL,{visible:!0})},g=()=>{const{getI18n:e}=(0,d.yk)(),{0:t,1:r}=(0,a.useState)(!1),i=(0,a.useCallback)((()=>{r(!1)}),[]),f=(0,a.useCallback)((()=>{u.T.emit(u.F.OPEN_TRANSFER_MODAL),i()}),[i]),g=(0,a.useCallback)((()=>{u.T.emit(u.F.OPEN_CONVERT_MODAL),i()}),[i]);return(0,a.useEffect)((()=>u.T.on(u.F.OPEN_SWITCH_SINGLE_MODE_REJECT_MODAL,(({visible:e})=>{r(e)}))),[]),m(o.Z,{visible:t,onMaskClick:i,sx:p},m(s.Z,{className:"close-icon",onClick:i}),m(c.Z,{className:"error-icon",size:96}),m(n.Z,{variant:"headline6",className:"modal-title"},e("switchSingleAssetModeModalTitle",{defaultValue:"Switch to Single-Asset Mode"})),m(n.Z,{className:"modal-content",variant:"body2"},e("switchSingleAssetModeModalContent",{defaultValue:"To switch to Single-Asset Mode,\n        you need to eliminate the negative balance of BUSD/USDT in your UM wallet.\n        Please transfer BUSD/USDT to your UM account or manually convert other assets to BUSD/USDT.\n        "})),m("div",{className:"modal-footer"},m(l.Z,{sz:"normal",variant:"default",colorStyle:"secondary",className:"convert-btn",onClick:g},e("convert")),m(l.Z,{sz:"normal",variant:"default",colorStyle:"flatprimary",className:"transfer-btn",onClick:f},e("transfer"))))},y=i().memo(g)},MMVH:(e,t,r)=>{"use strict";r.d(t,{p:()=>c});var a=r("GpFh"),i=r("9h1+"),o=r("71uP"),n=r("/SIk"),l=r.n(n);r("DDYV"),l().createElement;r("zZ5f");var s=l().createElement;const c=e=>{let{children:t=null,i18nKey:r="nodata",i18nDefault:n="no data"}=e,l=(0,a.Z)(e,["children","i18nKey","i18nDefault"]);const{getI18n:c}=(0,i.ZK)("trd-common",u);var u;return s(o.Z,Object.assign({variant:"columns.emptyLine",__css:{height:"100%",width:"100%",minHeight:"20px",display:"flex",alignItems:"center",justifyContent:"center"}},l),t||c(r,{defaultValue:n}))}},Qkkg:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("pi/q"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("9h1+"),s=r("ZJL0"),c=o().createElement;const u=({children:e})=>{const t=(0,l.gm)(),{isMobile:r}=(0,l.Fs)(),i=(0,l.Om)(),o=(0,n.useSelector)((e=>e.setting.color));return c(a.Z,r?{theme:(0,s.gh)(!1,o)}:{dir:t,theme:i},e)},d=o().memo(u)},AhZU:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("/SIk"),i=r.n(a),o=r("XdEc"),n=r("SJeZ"),l=i().createElement;function s(){const{getI18n:e}=(0,n.yk)(),t=(0,n.gN)(),r=(0,n.d0)();return l(o.Z,{i18n:e,contractInfo:t,changeSymbol:r,isDeliveryColumn:!1})}},gNzA:(e,t,r)=>{"use strict";r("kXC2"),r("8Kyu");var a=r("/SIk"),i=r.n(a);r("rdEq"),r("+m74"),r("hTQS"),i().createElement;i().createElement;r("SJeZ"),r("AhZU"),r("6cKY"),r("VM/Z"),i().createElement},zgli:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var a=r("5vwO"),i=r("APA6"),o=r("TKP4"),n=r("/SIk"),l=r.n(n),s=r("szIg"),c=r("VM/Z"),u=r("9h1+"),d=r("kXC2"),m=r("y5Ng"),p=r("3szt"),f=r("w2aK"),g=r("6eV+"),y=r("cN65"),b=r("71uP"),h=r("SJeZ"),v=l().createElement;const x={padding:"16px",bg:"popupBg",boxShadow:"elevation2",borderRadius:"4px","& .name":{color:"t.secondary"}},S=({list:e=[],operate:t})=>{const{getI18n:r}=(0,h.yk)();return v(i.Z,{__css:x},v(b.Z,{variant:"captionSub",className:"name"},r("ticker-preference-title",{defaultValue:"Ticker Preference"})),v("div",{className:"list"},v(y.Z,{options:e,getValue:t})))},k=(0,n.memo)(S),P={fundingFee:!0,mark:!0,index:!0,change:!0,mode:!0,high:!0,low:!0,volume:!0,transaction:!0};var T=r("7DKi"),C=l().createElement;const Z=({type:e})=>{const t=function(){const[e,[t,r]]=(0,u.z4)(),{getI18n:a}=(0,u.ZK)("trd-ticker","");return(0,n.useMemo)((()=>[{value:"high",label:a("high",{defaultValue:"24h High"}),defaultChecked:!1},{value:"low",label:a("low",{defaultValue:"24h Low"}),defaultChecked:!1},{value:"volume",label:`${a("volume")}(${t})`,defaultChecked:!1},{value:"transaction",label:`${a("transaction")}(${r})`,defaultChecked:!1}]),[a,t,r])}(),[r,o]=(0,T.g)("TickerPreference",P),l=(0,n.useMemo)((()=>t.length&&t.map((e=>(0,a.Z)((0,a.Z)({},e),{},{defaultChecked:r[e.value]})))),[t,r]);return C(i.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",minWidth:"18px"}},C(f.ZP,{trigger:"click",enablePortal:!0,overlay:C(k,{list:l,operate:e=>{o((0,a.Z)((0,a.Z)({},r),e))}})},C(g.Z,{fontSize:"20px",mt:"5px",sx:{color:"icons.close",cursor:"pointer","&:hover path":{fill:"t.third"}}})))};var M=r("8Kyu"),I=r("AhZU"),w=r("6cKY"),E=l().createElement;const A={flex:1,flexWrap:"nowrap",display:"flex",alignItems:"center",position:"relative"},N=({type:e,layout:t})=>{const{list:r,dataSource:a}=(0,w.L8)({type:e}),i=(0,h.oD)(),o=(0,h.BF)(c.UW),[l]=(0,T.g)("TickerPreference",P),s=(0,n.useMemo)((()=>r.filter((e=>l&&!1!==l[e.key]))),[l,r]),u=(0,n.useMemo)((()=>!!i&&E(I.Z,null)),[i]);return E(d.Ar,{sx:A},E(M.Z,{layout:t,list:s,dataSource:a,isFullScreen:o},u))};var O=l().createElement;const R={ml:"0px",mr:"16px"},L=({type:e,sx:t={},children:r})=>{const{isScreenDesk:n}=(0,u.Fs)(),l=(0,s.useSelector)((e=>e.setting.layout))===c.UW,f=((0,h.BF)(c.UW),l),[g]=(0,h.UI)(),y=f||!g;return c.sk?O(i.Z,{sx:(0,a.Z)({display:"flex",justifyContent:"space-between",cursor:"default"},t),as:"span",className:"ticker-wrap"}):O(i.Z,{sx:(0,a.Z)({display:"flex",justifyContent:"space-between",pr:f?"12px":"16px",ml:f?"16px":"0px"},t),className:"ticker-wrap",suppressHydrationWarning:!0},O(o.Z,{mr:f?"0px":"12px",flex:1},O(i.Z,{sx:{display:"flex"}},O(d.Ar,{sx:{mr:["xs","0"],flex:"none"}},O(i.Z,{sx:{display:"flex",alignItems:"center",flex:1}},r),O(i.Z,null,y&&O(p.Z,{sx:{ml:f||n?"16px":"24px",mr:f?"16px":0}})),O(m.Z,{className:f?"":"draggableHandle",sx:f?R:void 0}))),O(N,{layout:"default",type:e})),O(Z,{type:e}))},V=(0,n.memo)(L)},kXC2:(e,t,r)=>{"use strict";r.d(t,{Ar:()=>n});var a=r("TKP4"),i=r("/SIk"),o=r.n(i)().createElement;const n=(0,i.memo)((e=>o(a.Z,Object.assign({__css:{flexDirection:["column","row"],justifyContent:"space-between",alignItems:["flex-start","center"]}},e))))},"+m74":(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("frZ3"),s=r("71uP"),c=r("jgBC"),u=o().createElement;const d=(0,i.forwardRef)(((e,t)=>{let{timer:r}=e,o=(0,a.Z)(e,["timer"]);const d=(0,n.useDispatch)(),{0:m,1:p}=(0,i.useState)(r),{0:f,1:g}=(0,i.useState)(0),y=f?5e3*f:1e3;(0,l.Z)((()=>{const e=m-1e3;p(e),(!e||e<=0)&&(g(f+1),d.markPrice.queryMarkPrice().then((()=>{r&&(p(r),g(0))})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})))}),y);const b=(0,c.Ej)(m);return u(s.Z,Object.assign({ref:t,__css:{wordBreak:"break-word",whiteSpace:"nowrap",color:"t.primary"}},o),b)}));d.displayName="Counter";const m=(0,i.forwardRef)(((e,t)=>{let{time:r}=e,i=(0,a.Z)(e,["time"]);if(null===r)return null;const o=r-Date.now();return Number.isInteger(o)?u(d,Object.assign({timer:o,ref:t},i)):null}));m.displayName="CountDown";const p=m},tjpQ:(e,t,r)=>{"use strict";r.d(t,{C:()=>u});var a=r("/SIk"),i=r.n(a),o=r("BLcC"),n=r("869M"),l=r("viQn"),s=i().createElement;const c={display:"inline-block",textDecoration:"none",borderBottom:"1px solid",borderColor:"t.third",color:"t.third","&:hover":{borderColor:"t.yellow",color:"t.yellow"}},u=({symbol:e})=>{const{getI18n:t}=(0,n.yk)(),r=(0,l.I)(e);return s(o.Z,{href:r,target:"_blank",sx:c},t("header-index",{defaultValue:"Index"}))}},hTQS:(e,t,r)=>{"use strict";r.d(t,{oB:()=>c,j7:()=>u,U1:()=>d,D9:()=>p});var a=r("/SIk"),i=r.n(a),o=r("TKP4"),n=r("rdEq"),l=r("+m74"),s=i().createElement;const c={".label":{fontSize:"10px",mr:["minor",0],mb:[0,"2px"],color:"t.third",lineHeight:"16px",fontWeight:"normal",textAlign:"left",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",borderBottom:"1px solid transparent"},".price-text":{fontSize:"12px",color:"t.primary"},".emphasize":{color:"t.emphasize"},".flex":{display:"flex"},".countdown":{ml:"8px"}},u=(0,a.memo)((({label:e,price:t,className:r})=>s("div",{className:r},s("div",{className:"label"},e),s("div",{className:"price-text"}," ",t," ")))),d=(0,a.memo)((({time:e,timeTips:t,label:r,price:a,className:i})=>s("div",{className:i},s("div",{className:"label"}," ",r),s("div",{className:"flex"},s("div",{className:"price-text emphasize"},a),s("div",{className:"price-text countdown"},s(n.m,{tip:t},s("div",{className:"flex"},s(l.Z,{time:e})))))))),m={fontSize:"12px",".label":{color:"t.third",mr:"4px"},".price-text":{color:"t.primary"}},p=(0,a.memo)((({label:e,children:t})=>s(o.Z,{sx:m},s("div",{className:"label"}," ",e),s("div",{className:"price-text"},t))))},"8Kyu":(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var a=r("5vwO"),i=r("TKP4"),o=r("ockm"),n=r("TVE9"),l=r("/SIk"),s=r.n(l),c=r("+ByA"),u=r("hTQS"),d=r("HkAn"),m=s().createElement;const p=(0,a.Z)((0,a.Z)({position:"relative"},u.oB),{},{".left-arrow":(0,a.Z)((0,a.Z)({},c.U5),{},{background:e=>`linear-gradient(to right, ${e.colors.moduleBg} 42.24%, transparent 95.69%)`,svg:{"&:hover":{color:"t.third"}}}),".right-arrow":(0,a.Z)((0,a.Z)({},c.eE),{},{background:e=>`linear-gradient(to left, ${e.colors.moduleBg} 42.24%, transparent 95.69%)`,svg:{"&:hover":{color:"t.third"}}}),".default-market-list-container":c.$j,".tablet-market-list-container":c.Wb,".mobile-market-list-container":c.o0,".multiChart-market-list-container":c.dk}),f=({layout:e,list:t,isFullScreen:r,children:a,dataSource:s})=>{const c=(0,l.useRef)(null),{0:f,1:g}=(0,l.useState)(!1),{0:y,1:b}=(0,l.useState)(!1),h=(0,d.zE)((()=>{const{scrollWidth:e=0,clientWidth:t=0,scrollLeft:r=0}=c.current||{};g(e>t+r),b(Boolean(r))}),[g,b,c],1e3);(0,l.useEffect)((function(){h()}),[h]),(0,l.useEffect)((function(){if("ResizeObserver"in window){const e=new ResizeObserver(h);return c.current&&e.observe(c.current),()=>e.disconnect()}return window.addEventListener("resize",h,{capture:!1,passive:!0}),()=>{window.removeEventListener("resize",h)}}),[h,c.current]);const v=(0,l.useCallback)((()=>{var e;"number"===typeof(null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.scrollLeft)&&(c.current.scrollLeft-=100,c.current.scrollLeft<0&&(c.current.scrollLeft=0),h())}),[h]),x=(0,l.useCallback)((()=>{var e;"number"===typeof(null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.scrollLeft)&&(c.current.scrollLeft+=100,h())}),[h]);return m(i.Z,{sx:p},y&&m("div",{onClick:v,className:"left-arrow "+(r?"fullscreen":"")},m(o.Z,{size:20,color:"icons.close"})),m("div",{className:`${e}-market-list-container`,ref:c,onScroll:h},t&&t.map((({label:e,key:t,timeKey:r,render:a,timeTips:i})=>{const o=a?a(s[t],s):s[t],n=s[r];return n?m(u.U1,{label:e,price:o,key:t,time:n,timeTips:i}):m(u.j7,{label:e,price:o,key:t})})),a),f&&m("div",{className:"right-arrow "+(r?"fullscreen":""),onClick:x},m(n.Z,{size:20,color:"icons.close"})))},g=(0,l.memo)(f)},y5Ng:(e,t,r)=>{"use strict";r.d(t,{A:()=>m,Z:()=>f});var a=r("GpFh"),i=r("71uP"),o=r("/SIk"),n=r.n(o),l=r("ji/5"),s=r("nJ+u"),c=r("h0ui"),u=n().createElement;const d={fontSize:["32px","24px"],display:"flex",alignItems:"center",mx:"30px"},m=e=>{let{priceColor:t,price:r}=e,o=(0,a.Z)(e,["priceColor","price"]);return u(n().Fragment,null,r&&u(i.Z,Object.assign({__css:d,color:t},o),r))},p=e=>{const t=(0,c.p)(),r=(0,l.u)(!0),a=(0,s.Z)({lastPrice:r});return u(n().Fragment,null,r&&u(m,Object.assign({priceColor:a,price:t(r)},e)))},f=(0,o.memo)(p)},XdEc:(e,t,r)=>{"use strict";r.d(t,{A:()=>m,Z:()=>f});var a=r("/SIk"),i=r.n(a),o=r("9h1+"),n=r("frZ3"),l=r("jgBC"),s=r("VM/Z"),c=r("hTQS"),u=r("/1uR"),d=i().createElement;const m=({timer:e,i18n:t})=>{const{0:r,1:i}=(0,a.useState)(e);return(0,n.Z)((()=>{i(r-1e3)}),1e3),e<=0||r<0?t("inDelivering",{defaultValue:"in Delivering"}):(0,l.Ej)(r)},p=({i18n:e,contractInfo:t,changeSymbol:r,isDeliveryColumn:i=!0})=>{const[n]=(0,o.z4)(),p=(0,o.iB)(),f=p[n]||{},{deliveryDate:g,contractType:y="",pair:b}=f,{isMobile:h}=(0,o.Fs)();(0,a.useEffect)((()=>{const{symbol:e,contractStatus:a,deliveryDate:o}=t;if(n===e&&"DELIVERED"===(null===a||void 0===a?void 0:a.toUpperCase())){var s,c;const e=Object.values(p).filter(l.gU),t=(null===(s=e.filter((e=>e.pair===b&&e.deliveryDate>o)))||void 0===s?void 0:s[0])||(null===(c=e.filter((e=>e.deliveryDate>o)))||void 0===c?void 0:c[0]);t&&(r({stateSymbol:t.symbol,isDeliveryColumn:i}),window.location.reload())}}),[r,t,i,b,p,n]);const{loading:v,value:x}=(0,u.s)(g),S=e("TimeLeftForDelivery",{defaultValue:"Time left for delivery"}),k=(0,a.useMemo)((()=>v||!x?"00:00:00":x>24?`${Math.ceil(x/24)} ${e("daysLeft",{defaultValue:"days left"})}`:d(m,{timer:3600*x*1e3,i18n:e})),[x,e,v]);return y.toUpperCase()===s.Yp.PERPETUAL?null:h?d(c.D9,{label:S},k):d(c.j7,{label:S,price:k})},f=(0,a.memo)(p)},"+ByA":(e,t,r)=>{"use strict";r.d(t,{$j:()=>a,Wb:()=>i,o0:()=>o,dk:()=>n,U5:()=>l,eE:()=>s});const a={whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden","& >div":{display:"inline-block",paddingRight:"16px"},"&::-webkit-scrollbar":{display:"none",width:"0",height:"0"}},i={whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden","& >div":{display:"inline-block",paddingRight:"10px"},"&::-webkit-scrollbar":{display:"none",width:"0",height:"0"}},o={display:"grid",width:"100%",height:"100%",gridGap:"8px",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"32px 32px 32px",gridTemplateAreas:'"mark index"\n                    "high low"\n                    "volume transaction"'},n={display:"flex",flexWrap:"wrap","&>div":{mr:"8px"}},l={position:"absolute",left:"-1px",height:"100%",cursor:"pointer",width:"58px",display:"flex",alignItems:"center",justifyContent:"flex-start",zIndex:10},s={position:"absolute",cursor:"pointer",width:"58px",right:"-1px",height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end",zIndex:10}},"/1uR":(e,t,r)=>{"use strict";r.d(t,{s:()=>l});var a=r("/SIk"),i=r("GMmk"),o=r("9h1+"),n=r("SJeZ");const l=e=>{const[t]=(0,o.z4)(),r=!(0,n.G3)(),{value:l,loading:s}=(0,i.N)((()=>async function(e){try{const{serverTime:t}=await(0,o.bp)(e);return t}catch(t){return Date.now()}}(r)),[t]);return(0,a.useMemo)((()=>e?{value:(e-l)/1e3/3600,loading:s}:{value:0,loading:!1}),[e,l,s])}},"nJ+u":(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r("/SIk"),i=r("z/Z1");const o=({lastPrice:e})=>{const t=(0,i.Fg)(),r=(0,a.useRef)(0),{current:o}=r;r.current=e;return(0,a.useMemo)((()=>o===e?t.colors.t.primary:o<e?t.colors.t.buy:t.colors.t.sell),[e,o,t.colors.t.buy,t.colors.t.sell,t.colors.t.primary])}},"6cKY":(e,t,r)=>{"use strict";r.d(t,{L8:()=>S});var a=r("VM/Z"),i=r("9h1+"),o=(r("+ByA"),r("nJ+u")),n=r("GA2I"),l=r("tjpQ"),s=r("rdEq"),c=r("TeNm"),u=r("jgBC"),d=r("mE5e"),m=r("z/Z1"),p=r("cm/A"),f=r("/SIk"),g=r.n(f),y=r("ca2E"),b=r("SJeZ"),h=g().createElement;const v=({type:e})=>{var t;const r=(0,n.X)(e),{tickProps:l}=(0,c.k)((0,a.l6)(r)),{lastPrice:s=0,tickSize:u=1e-7,highPrice:d,lowPrice:g,volume:y,quoteVolume:h,diffPrice:v,difference:x,bigThan:S}=l,[k,[P,T]]=(0,i.z4)(),C=(0,m.Fg)(),Z=(0,i.j2)(),M=(0,o.Z)({lastPrice:s}),I=(0,i.U1)(u),{markPrice:w,lastFundingRate:E,nextFundingTime:A}=(0,b.CE)()[k]||{},N=null===(t=(0,b.m8)()[k])||void 0===t?void 0:t.indexPrice,{formatTk:O}=(0,i.mC)(),R=(0,f.useMemo)((()=>(0,p.uf)(s,I)),[s,I]),L=isNaN(x)?"0.00":x;return{symbol:k,volume:y,quoteVolume:h,info:Z,priceColor:M,currentPrice:R,change:(0,f.useMemo)((()=>[(0,p.uf)(v||0,I),`${L}%`].join(" ")),[v,L,I]),changeColor:(0,f.useMemo)((()=>S?C.colors.t.buy:C.colors.t.sell),[S,C.colors.t.buy,C.colors.t.sell]),baseAsset:P,nextFundingTime:A,quoteAsset:T,low:(0,f.useMemo)((()=>(0,p.uf)(g,I)),[g,I]),high:(0,f.useMemo)((()=>(0,p.uf)(d,I)),[d,I]),fundingFee:(0,f.useMemo)((()=>(0,n.Y)(E)),[E]),index:(0,f.useMemo)((()=>O(N)),[O,N]),mark:(0,f.useMemo)((()=>O(w)),[O,w])}},x=()=>{var e;const[t]=(0,i.z4)(),{getI18n:r}=(0,b.yk)(),a=null===(e=(0,b.m8)()[t])||void 0===e?void 0:e.indexPrice,{formatTk:o}=(0,i.mC)(),n=(0,f.useMemo)((()=>o(a)),[o,a]);return h(s.m,{tip:r("header-mark-markPriceTip",{indexPrice:n,defaultValue:"Latest mark price for this contract. To prevent price manipulation, the mark price is used for unrealized PNL and margin calculations, and may differ from the last price. \n Mark Price is calculated based on the index price. The Price Index is a bucket of prices from the major Spot market exchanges, weighted by their relative volume. The latest index price is {{indexPrice}}."}).replaceAll("\\n","\n")},r("header-mark",{defaultValue:"mark"}))},S=({type:e})=>{const{symbol:t,volume:r,quoteVolume:o,info:n,priceColor:c,currentPrice:m,change:g,changeColor:S,baseAsset:k,nextFundingTime:P,quoteAsset:T,low:C,high:Z,fundingFee:M,index:I,mark:w}=v({type:e}),E=(0,b.G3)(),A=(0,b.oD)(),{isCoinUnit:N}=(0,y.QV)(),{getI18n:O,i18n:{language:R}}=(0,b.yk)(),{getI18n:L}=(0,i.ZK)("trd-ticker",""),{quantityPrecision:V,equalQtyPrecision:F,contractVal:D,baseVolume:_}=n,B=(0,f.useMemo)((()=>{const e=N?o||_:r,t=N?F:V;return E?(0,p.uf)(e,t||0):(0,d.kI)(r,{digits:V||2,isUnit:!1})}),[E,V,o,_,r,N,F]),z=(0,f.useMemo)((()=>{const e=Number(D)*Number(r);return E?(0,p.uf)(e):(0,d.kI)(o,{digits:2,isUnit:!1})}),[E,o,D,r]),K=(0,f.useMemo)((()=>[{label:h(x,null),key:"mark"},{label:h(l.C,{symbol:t}),key:"index"},{label:h(s.m,{learnMoreLink:(0,u.CN)(a.Wh.FUNDING,{locale:R}),tip:O("header-mark-fundingTip")},O("header-funding",{defaultValue:"Funding/8h"})),timeKey:"nextFundingTime",timeTips:O("header-mark-countdownTimeTip"),key:"fundingFee"},{label:L("change",{defaultValue:"24h Change"}),key:"change",render:(e,t)=>h("span",{style:{color:t.changeColor}},e)},{label:L("high",{defaultValue:"24h High"}),key:"high"},{label:L("low",{defaultValue:"24h Low"}),key:"low"},{label:`${L("volume")}(${!E||N?k:O("Cont")})`,key:"volume"},{label:`${L("transaction")}(${T})`,key:"transaction"}]),[t,E,N,k,T,O,L,R]);return{list:(0,f.useMemo)((()=>A?K.filter((e=>"fundingFee"!==e.key)):K),[A,K]),dataSource:{symbol:t,volume:B,quoteVolume:o,info:n,priceColor:c,currentPrice:m,change:g,changeColor:S,baseAsset:k,nextFundingTime:P,quoteAsset:T,low:C,high:Z,fundingFee:M,index:I,mark:w,transaction:z}}}},GA2I:(e,t,r)=>{"use strict";r.d(t,{X:()=>i,Y:()=>o});var a=r("cm/A");const i=e=>{let t=!1;return"futures"===e&&(t=!0),t},o=e=>e||0===e?`${(0,a.uf)(100*e,4)}%`:null},UdzU:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var a=r("5vwO"),i=r("wgY5"),o=r.n(i),n=r("/SIk"),l=r.n(n),s=r("TKP4"),c=r("w2aK"),u=r("afeE"),d=r("71uP"),m=r("APA6"),p=r("J81Z"),f=r("j6E6"),g=r("nBPl"),y=r("OhB/"),b=r("dqGA"),h=r("9h1+"),v=r("SJeZ"),x=l().createElement;const S=o()().add(1,"day"),k=o()().subtract(2,"year"),P={alignItems:"center",justifyContent:"center",color:"t.third",cursor:"pointer",fontSize:0,minWidth:"48px",p:"minor",borderRadius:"2px",height:"24px",lineHeight:"24px","&:hover":{color:"t.primary",bg:"bg3"}},T={bg:"line",color:"t.yellow"},C=({withReset:e=!1,type:t,onSearch:r,loadMore:i=(()=>{}),onReset:o=(()=>{}),children:l=null})=>{const C=(0,b.hf)(),{getI18n:Z}=(0,h.ZK)("trd-tableSearch",M);var M;const{getI18n:I}=(0,v.yk)(),{isMobile:w,isIPad:E}=(0,h.Fs)(),{0:A,1:N}=(0,n.useState)((0,y.OQ)(t)),O={"1d":Z("day",{defaultValue:"1 Day"}),"1w":Z("week",{defaultValue:"1 Week"}),"1m":Z("month",{defaultValue:"1 Month"}),"3m":Z("quarter",{defaultValue:"3 Months"})},R=Object.keys(O).map((e=>{const a=e===t,i={onClick:a?()=>!1:()=>{const t=(0,y.OQ)(e);r(t),N(t)},sx:a?T:{},children:O[e]};return x(s.Z,Object.assign({key:e,__css:P},i))})),L=O[t];return x(s.Z,{sx:{alignItems:"center"}},x(c.ZP,{enablePortal:!0,trigger:"click",overlay:x(u.Z,{sx:{bg:"popupBg",p:0,borderRadius:0},"data-testid":"QuickDateFilter"},R),placement:"bottom-start"},!w&&E&&x(s.Z,{__css:(0,a.Z)((0,a.Z)({},P),{},{mr:"minor",color:"t.primary",bg:"bg3"})},x(d.Z,null,L||O["1d"]),x(f.Z,{sx:{transform:"scale(1.8)"},size:12}))),!w&&!E&&x(s.Z,{sx:{alignItems:"center",display:"flex","> div":{mr:"minor"}}},R),x(s.Z,{sx:{alignItems:"center",ml:"sm",".ant-input":{fontSize:0,pb:"minor",color:"t.third",lineHeight:"14px",borderBottom:"1px solid",borderBottomColor:"lines.light"}}},x(m.Z,{fontSize:"12px",color:"t.third",mr:"8px"},I("range-date",{defaultValue:"Date"})),x(g.Z,{locale:null===C||void 0===C?void 0:C.toLowerCase(),variant:"phantom",sz:"tiny",containerSx:{color:"t.primary",minWidth:"auto"},separator:I("range-to",{defaultValue:"to"}),"data-testid":"DateFilter",disabledDate:e=>e>S||e<k,onChange:(e,[t,r])=>{const a=new Date(t).setHours(0,0,0,0),i=new Date(r).setHours(24,0,0,0);N({startTime:a,endTime:i,type:"custom"})}}),x(s.Z,null,l),x(p.Z,{variant:"default",colorStyle:"secondary",sz:"s",ml:["sm","8px","sm"],bg:"line","data-testid":"Search",onClick:()=>{A&&(r((0,a.Z)({},A)),i())}},Z("searchBtn",{defaultValue:"Search"}))),e&&x(p.Z,{variant:"default",colorStyle:"secondary",sz:"s",ml:["sm","8px","sm"],bg:"line",onClick:()=>{N(null),o()}},Z("resetBtn",{defaultValue:"Reset"})))},Z=l().memo(C)},zMc9:(e,t,r)=>{"use strict";r.d(t,{Z:()=>N});var a=r("5vwO"),i=r("BQ33"),o=r.n(i),n=r("/SIk"),l=r.n(n),s=r("O94r"),c=r.n(s),u=r("dqGA"),d=r("vzJZ"),m=r("APA6"),p=r("TKP4"),f=r("w2aK"),g=r("71uP"),y=r("rjaD"),b=r("J81Z"),h=r("nBPl"),v=r("a1YN"),x=r("Rdst"),S=r("4t1s"),k=r("SJeZ"),P=r("9h1+"),T=r("LvN6"),C=l().createElement;const Z={px:"16px",width:"100vw",height:"100vh",borderRadius:"4px 4px 0 0",".header":{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",height:"52px",mb:"20px",".header-title":{fontSize:"20px",lineHeight:"28px",color:"t.primary"}},".column":{mb:"32px"},".column-title":{color:"t.secondary",fontSize:"14px",lineHeight:"20px",mb:"4px"},".range-picker > div":{"> div > div":{p:"14px 12px",fontSize:"14px",bg:"inputBg",color:"t.primary"},"> p":{color:"t.primary"}},".footer":{position:"absolute",bottom:"50px",height:"40px",display:"flex",justifyContent:"space-between",left:"16px",right:"16px",button:{minWidth:"168px"}}},M={bg:"popupBg",px:"16px",fontSize:"16px",lineHeight:"24px",".header":{display:"flex",justifyContent:"space-between",alignItems:"center",height:"52px",color:"t.primary"},".items":{display:"flex",justifyContent:"space-between",alignItems:"center",height:"48px",color:"t.primary","&.active":{color:"t.yellow"}}},I={mb:"32px",".drop-down":{width:"100%",height:"48px",bg:"inputBg",color:"t.primary",alignItems:"center",justifyContent:"space-between",flexDirection:"row",px:"12px",border:"1px solid",borderColor:"line"}},w=({title:e,data:t,visible:r,activeKey:a,setVisible:i,onChange:o})=>C(d.Z,{childProps:{maxHeight:"50vh"},visible:r,direction:"bottom",outerClick:()=>i(!1),maskBg:"rgba(0,0,0,.3)"},C(m.Z,{sx:M},C(p.Z,{justifyContent:"space-between",alignItems:"center"},C("div",{className:"header"},e),C(v.Z,{size:20,onClick:()=>i(!1)})),Object.keys(t).map((e=>C("div",{key:e,className:c()({items:!0,active:e===a}),onClick:()=>o(e)},t[e]))))),E=({title:e,data:t,defaultKey:r,onChange:a})=>{const{0:i,1:o}=(0,n.useState)(!1),{0:l,1:s}=(0,n.useState)(r),c=(0,n.useCallback)((e=>{s(e),a(e)}),[s,onchange]);return C(m.Z,{sx:I},C(f.ZP,{trigger:"click",overlay:C(w,{visible:i,setVisible:o,title:e,data:t,activeKey:l,onChange:c}),enablePortal:!0,onVisibleChange:o,sx:{width:"100%"}},C(p.Z,{className:"drop-down"},C(g.Z,{variant:"subtitle2"},t[l]),C(x.Z,{color:"t.third",size:16,sx:{transformOrigin:"center center",transform:`rotate(${i?"180deg":"0deg"})`,transition:"transform .3s"}}))))},A=[o()().subtract(2,"year").format("YYYY-MM-DD"),o()().format("YYYY-MM-DD")],N=({onSearch:e,isTransaction:t,onTransactionFilterChange:r})=>{const{0:i,1:s}=(0,n.useState)(!1),c=(0,n.useCallback)((()=>s((e=>!e))),[s]),d=(0,u.hf)(),{getI18n:f}=(0,P.ZK)(),{getI18n:g}=(0,k.yk)(),x=(0,n.useRef)({startTime:new Date(o()().subtract(1,t?"day":"week").format("YYYY-MM-DD")).setHours(0,0,0,0),endTime:Date.now()}),M=(0,n.useCallback)((()=>{const{startTime:t,endTime:a,filter:i}=x.current;null===r||void 0===r||r(i),e({type:"custom",startTime:t,endTime:a}),s(!1)}),[e,s]),I=(0,n.useMemo)((()=>[e=>{x.current.startTime=new Date(e).setHours(0,0,0,0)},e=>{x.current.endTime=new Date(e).setHours(24,0,0,0)}]),[]);return C(l().Fragment,null,C(S.Z,{size:20,onClick:c,sx:{position:"absolute",right:"0",top:"15px"}}),i&&C(y.Z,{visible:!0,sx:Z,onMaskClick:()=>s(!1)},C(p.Z,{className:"header"},C("div",{className:"header-title"},g("Filter")),C(v.Z,{size:20,onClick:()=>s(!1)})),C("div",{className:"column"},C("div",{className:"column-title"},g("range-date")),C(m.Z,{className:"range-picker"},C(h.Z,{isResponsive:!0,format:"YYYY-MM-DD",locale:null===d||void 0===d?void 0:d.toLowerCase(),allowClear:!1,separator:"-",mOnChange:I,mValue:[o()(x.current.startTime).format("YYYY-MM-DD"),o()(x.current.endTime).format("YYYY-MM-DD")],mStartDateRange:A,mEndDateRange:A}))),t&&C("div",{className:"column"},C("div",{className:"column-title"},f("trd-openOrder-type")),C(E,{title:f("trd-openOrder-type"),data:T.Wm.reduce(((e,t)=>(0,a.Z)((0,a.Z)({},e),{},{[t]:"ALL"===t?f("trd-tradeTransaction-ALL",{defaultValue:"All"}):f(`trd-tradeTransaction-bt-${t}`,{defaultValue:t})})),{}),defaultKey:x.current.filter||"ALL",onChange:e=>x.current.filter=e})),C(p.Z,{className:"footer"},C(b.Z,{variant:"default",colorStyle:"secondary",onClick:()=>s(!1)},g("cancelBtnText")),C(b.Z,{variant:"primary",onClick:M},f("trd-tableSearch-searchBtn")))))}},ofts:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O,l:()=>A});var a=r("/SIk"),i=r.n(a),o=r("71uP"),n=r("cIsc"),l=r("6exu"),s=r("c3qt"),c=r("LKg9"),u=r("yRKG"),d=r("Uqe+"),m=r("9h1+"),p=r("SJeZ"),f=r("pBBP"),g=r("VM/Z"),y=r("J81Z"),b=r("TKP4"),h=r("xlSM"),v=r("zT+5"),x=r("S24M"),S=i().createElement;const k=({isQuiz:e,openModal:t,closeModal:r,track:i})=>{const{t:n,getI18n:l}=(0,p.yk)();let s=null;const c=(0,a.useCallback)((e=>{r(),(0,v.F)(!0,{type:e,afterClose:t}),i(e===g.g3?"newbieTour_tutorial":"newbieTour_test")}),[r,t,i]),u=(0,a.useCallback)((()=>{r(),i("newbieTour_trading")}),[r,i]),d=(0,a.useCallback)((()=>{c(g.Nz),(0,x.j)("$WebClick",{eventName:"futures_quiz",$element_id:"start_quiz",source:"welcome_tutorial_popup"})}),[c]);return e?s=S(y.Z,{sz:"l",onClick:u},l("StartTrading",{defaultValue:"Start Trading"})):!1===e&&(s=S(y.Z,{sz:"l",onClick:d},l("TakeQuiz",{defaultValue:"Take Quiz"}))),S(b.Z,{className:"modal-footer"},S(b.Z,{className:"tutorial",onClick:()=>c(g.g3)},S(h.Z,null),S(o.Z,{variant:"subtitle2",ml:"6px"},n("futures-quiz-tutorial"))),s)},P=i().memo(k);var T=i().createElement;const C=(e,t,r,a="png")=>`static/images/futures/assets/guide_${t}_${r?"light":"dark"}_${"zh-CN"===e?"cn":"en"}.${a}`,Z=(e,t,r,a="png")=>`static/images/futures/assets/guide-${t}-${r?"light":"dark"}-${"zh-CN"===e?"cn":"en"}.${a}`,M={minWidth:["100%",640,720],maxWidth:["100%",640,720]},I={height:["100%","500px"],py:18,px:24,bg:"modalBg",borderRadius:"6px","& .main-container":{height:["100%","auto"],display:"flex",flexDirection:"column"},"& .content-wrapper":{display:"flex",flex:1,minHeight:0},"& .overflow-container":{display:"flex",flexDirection:"column",flex:1},"& .modal-footer":{justifyContent:"space-between",alignItems:"center","& .tutorial":{alignItems:"center",color:"t.third",cursor:"pointer",":hover":{color:"t.primary"}}}};var w=i().createElement;let E;const A=({title:e="",showFooter:t=!0,afterClose:r=(()=>{})}={})=>{c.Y.emit(g.ik,{visible:!0,title:e,showFooter:t,afterClose:r})},N=()=>{const{i18n:{language:e},getI18n:t}=(0,p.yk)(),{isLight:r}=(0,m.Fg)(),{isLoggedIn:i}=(0,u.f0)(),{isExistFutureAccount:y}=(0,u.Pc)(),{trackWebClick:b}=(0,f.v)(),h=(0,a.useMemo)((()=>((e,t,r)=>[{title:t("TransferMargin",{defaultValue:"Transfer Margin"}),desc:{i18nKey:"TransferMarginDesc",defaultValue:"<transferFundsLink>Transfer Funds</transferFundsLink> to Futures account as margin for your futures trades to begin with. Transfer Funds to Future account as margin for your futures trades to begin with. We support\xa0USD\u24c8-M Futures trading across multiple margin assets",components:{transferFundsLink:T("a",{href:`/${e}/support/faq/360033773532`,target:"_blank",rel:"noreferrer"})},values:{transferFunds:t("TransferFunds",{defaultValue:"Transfer Funds"})}},imgPath:Z(e,"transfermargin",r)},{title:t("LeverageMargin",{defaultValue:"Leverage & Margin"}),desc:{i18nKey:"LeverageMarginDesc",defaultValue:"You can adjust <leverageLink>Leverage</leverageLink> and switch between cross/isolated <marginModeLink>Margin Mode</marginModeLink> for different symbols.",components:{leverageLink:T("a",{href:`/${e}/support/faq/360034946672`,target:"_blank",rel:"noreferrer"}),marginModeLink:T("a",{href:`/${e}/support/faq/360038075852`,target:"_blank",rel:"noreferrer"})}},imgPath:C(e,"leveragemargin",r)},{title:t("position-mode"),desc:{i18nKey:"PositionModeDesc",defaultValue:"Set One-way or Hedge <positionModeLink>Position Mode</positionModeLink> in Preference.",components:{positionModeLink:T("a",{href:`/${e}/support/faq/360041513552`,target:"_blank",rel:"noreferrer"})}},imgPath:C(e,"positionmode",r,"gif")},{title:t("tradeHistory-orderTypeTitle"),desc:{i18nKey:"OrderTypeDesc",defaultValue:"Choose an <orderTypeLink>Order Type</orderTypeLink> that best suits your trading strategy under different situations.",components:{orderTypeLink:T("a",{href:`/${e}/support/faq/360033779452`,target:"_blank",rel:"noreferrer"})}},imgPath:C(e,"ordertype",r)},{title:t("ClosePosition",{defaultValue:"Close position"}),desc:{i18nKey:"ClosePositionDesc",defaultValue:"<closeThePositionLink>Close the Position</closeThePositionLink> based on your exit strategy, or by setting <TPAndSLLink>TP/SL</TPAndSLLink>. Also learn more about <liqLink>Liquidation</liqLink> / <counterpartyLiqLink>Counterparty Liquidation</counterpartyLiqLink>.",components:{closeThePositionLink:T("a",{href:`/${e}/support/articles/360041515312-How-to-Open-or-Close-Position-in-Hedge-Mode`,target:"_blank",rel:"noreferrer"}),TPAndSLLink:T("a",{href:`/${e}/support/faq/e1ee1738141c49718550fa9061be4bf3`,target:"_blank",rel:"noreferrer"}),liqLink:T("a",{href:`/${e}/support/faq/360033525271`,target:"_blank",rel:"noreferrer"}),counterpartyLiqLink:T("a",{href:`/${e}/support/faq/360033525471`,target:"_blank",rel:"noreferrer"})}},imgPath:C(e,"closeposition",r)}])(e,t,r)),[e,t,r]),[v,x]=(0,d.Z)(g.Gs),{0:S,1:k}=(0,a.useState)(),{0:N,1:O}=(0,a.useState)(!1),{0:R,1:L}=(0,a.useState)({title:"",showFooter:!0}),{title:V,showFooter:F}=R,D=!V,_=!1===S,B=(0,a.useCallback)((()=>{O(!1)}),[]),z=(0,a.useCallback)((e=>{D&&b({module:"futures_newbieTour",elementId:e})}),[D,b]),K=(0,a.useCallback)((()=>{B(),"function"===typeof E&&E(),z("newbieTour_close")}),[B,z]),q=(0,a.useCallback)((e=>{b({module:D?"futures_newbieTour":"futures_helpCenter_tradeTour",elementId:`${D?"newbieTour":"tradeTour"}_step${e}`})}),[D,b]);return(0,a.useEffect)((()=>c.Y.on(g.ik,(({visible:e,afterClose:t,title:r,showFooter:a})=>{O(e),r&&L({title:r,showFooter:a}),E=t}))),[]),(0,a.useEffect)((()=>{i&&y&&!1===S&&!v&&(O(!0),x(!0))}),[i,y,S,v,x]),(0,a.useEffect)((()=>{i&&y&&(0,s.o)().then((({data:e})=>{k(e)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[i,y]),(0,f.E)(N,D?"futures_newbieTour":"futures_helpCenter_tradeTour"),w(n.Z,{open:N,onCloseIconClick:K,sx:M,contentSx:I},w("div",{className:"main-container"},w(o.Z,{variant:"headline6",color:"t.primary"},V||t("Welcome",{defaultValue:"Welcome to Binance Futures!"})),_&&w(o.Z,{variant:"body2",color:"t.third",mt:"minor"},t("QuizTip",{defaultValue:"You need to pass the quiz before trading Futures."})),w("div",{className:"content-wrapper"},w("div",{className:"overflow-container"},w(l.Z,{steps:h,staticHost:g.Xs,track:q,sx:{height:_?302:324}}))),F&&w(P,{isQuiz:S,track:z,openModal:A,closeModal:B})))},O=i().memo(N)},CWkv:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("/SIk"),i=r.n(a),o=r("lk5g");const n={};var l=i().createElement;const s=({type:e,condition:t,children:r})=>{const{ref:s}=function(e,t){const r=(0,a.useRef)(null);return(0,a.useEffect)((()=>{const a=r.current;if(n[e]||!a||"undefined"===typeof performance||"undefined"===typeof MutationObserver)return;const i=new MutationObserver(((r,a)=>{const i=t(r,a);!n[e]&&i&&((0,o.gp)({t:e,duration:performance.now()}),a.disconnect(),n[e]=!0)}));return i.observe(a,{attributes:!0,subtree:!0,childList:!0}),()=>null===i||void 0===i?void 0:i.disconnect()}),[r,t,e]),{ref:r}}(e,t);return l(i().Fragment,null,i().Children.map(r,(e=>i().cloneElement(e,{ref:s}))))}},LhSs:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("APA6"),s=r("71uP"),c=r("upEV"),u=r("wr3m"),d=r("ubM9"),m=r("/MJE"),p=r("VM/Z"),f=r("S24M"),g=r("9h1+");const y={display:"flex",position:["absolute","relative","relative"],flex:"0 0 auto",minWidth:"100px",borderLeft:"1px solid",borderColor:"newLine",alignItems:"center",bg:"moduleBg",color:"t.secondary",px:"16px",borderTop:"1px solid",borderTopColor:"primary",cursor:"pointer",">svg":{mx:"5px"},".title":{fontSize:"12px",lineHeight:"16px",p:"0 3px"},":hover":{".title":{color:"primary"},">svg path":{fill:"primary"}}};(0,a.Z)((0,a.Z)({},y),{},{borderTop:"none"});var b=o().createElement;function h(){const{enqueueNotification:e}=(0,u.Z)(),{isMobile:t,isIPad:r}=(0,g.Fs)(),o=(0,n.useDispatch)(),h=(0,g.Pc)(),v=(0,g._n)(),x=(0,g.Fg)().isLight,{getI18n:S}=(0,g.ZK)("","chatroom-mp-ui"),{0:k,1:P}=(0,i.useState)(!1),T=(0,i.useMemo)((()=>!t&&!r),[r,t]),C=(0,i.useCallback)((()=>{T?(P(!k),k||(0,f.j)("PopupView",{title:"chat",eventName:"chatroom_web_pv",useGrafana:!1})):e({message:S("entrance-app-hint"),variant:"error"})}),[e,S,T,k]),Z=(0,i.useCallback)((async()=>{m.Z.updateUserInfo((0,a.Z)((0,a.Z)({},h),{},{isExistFutureAccount:!0})),o.userCenter.updateState({userInfo:(0,a.Z)((0,a.Z)({},h),{},{isExistFutureAccount:!0})}),await o.preference.getPositionMode()}),[o.preference,o.userCenter,h]),M=(0,i.useMemo)((()=>b(l.Z,{sx:y,onClick:C,id:"Chatroom_entrance"},b(c.Z,{size:16,fill:"t.secondary"}),b(s.Z,{className:"title"},S("ChatRoom")))),[S,C]);return b(d.E,{isLoggedIn:v,visible:k,onClose:C,isLightTheme:x,userInfo:h,STATIC_HOST:p.Xs,WS_HOST:p.Vl,onOpenFuturesAccount:Z},M)}const v=o().memo(h)},it8U:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r("/SIk"),i=r.n(a),o=r("MAV6"),n=r("xxGv"),l=r("VM/Z"),s=i().createElement;const c=function({sx:e={},chatroomVisible:t=!1}){const{isLight:r}=(0,n.Fg)(),a=i().useMemo((()=>({STATIC_HOST:l.Xs,API_HOST:l.H,WS_HOST:l.B_,CHAT_WS_HOST:l.Vl,DELIVERY_WS_HOST:l.hX,FUTURES_WS_HOST_GZIP:l.dr,MARGIN_STREAM_HOST:l.yH})),[]);return s(o.y,{ctxValue:a,isLightTheme:r,sx:e,chatroomVisible:t})}},LTcb:(e,t,r)=>{"use strict";r.d(t,{GK:()=>M,ZP:()=>E,Rk:()=>P});var a=r("/SIk"),i=r.n(a),o=r("TKP4"),n=r("71uP"),l=i().createElement;const s={pl:0,px:["0","sm"],py:"8px",width:"100%",alignItems:"center",justifyContent:"space-between","& .left":{textAlign:"left",justifyContent:"flex-start"},"& .right":{textAlign:"right",justifyContent:"flex-end"},"> div":{textAlign:"center",alignItems:"center",justifyContent:"center"}},c=({headers:e})=>l(o.Z,{sx:s},e.map((({text:e,area:t},r)=>l(o.Z,{key:r,className:t,sx:{userSelect:"none",height:"24px",flex:1}},l(n.Z,{title:e,variant:"layouts.ellipsis",sx:{fontSize:0,color:"t.third"}},e))))),u=i().memo(c);var d=r("sZZk"),m=r("UFWJ"),p=r("z+x3"),f=i().createElement;const g=Math.floor((p.FA-44-31)/20),y={cursor:"pointer",fontSize:0,fontWeight:"normal",".trade-list-item":{padding:"0 12px 0 16px","& .left":{textAlign:"left",justifyContent:"flex-start"},"& .right":{textAlign:"right",justifyContent:"flex-end",color:"t.grey300"},"&-buy .price":{color:"buy"},"&-sell .price":{color:"sell"},"& .text":{color:"orderBook.rowColor"},"& .time":{color:"t.grey300"}}},b=({trades:e,loading:t,tradeItem:r,itemHeight:i=18})=>{const o=(0,d.useMediaQuery)({query:p.is}),n=(0,a.useMemo)((()=>o?e.reverse().slice(0,g):e.reverse()),[e,o]);return f(m.a,{sx:y,dataSource:n,loading:t,itemElement:r,itemHeight:i})},h=i().memo(b),v=({price:e})=>{console.info(e)},x=e=>`${e}`,S=(0,a.createContext)({formatTk:x,formatMi:x,onItemClick:v});var k=r("9h1+");const P=()=>(0,k.ZK)("trd-trades");var T=r("D9Cm"),C=i().createElement;const Z=({price:e,buyerIsMaker:t,quantity:r,tradeTime:i,formatPrice:o=!0,formatQty:n=!0,formatDate:l=!0})=>{const{formatMi:s,formatTk:c,onItemClick:u}=(0,a.useContext)(S),d=t?"sell":"buy";return C(m.H,{className:`trade-list-item trade-list-item-${d}`,onClick:()=>{u({price:e,side:d})}},C("div",{className:"price left",style:{flex:1}},o?c(e):e),C("div",{className:"text right",style:{flex:1}},n?s(r):r),C("div",{className:"text right",style:{flex:1}},l?(0,T.v)(new Date(i),"hh:mm:ss"):i))},M=i().memo(Z);var I=i().createElement;const w=({headers:e,trades:t,loading:r,tradeItem:a,itemHeight:o,formatMi:n,formatTk:l,onItemClick:s=v})=>I(i().Fragment,null,I(u,{headers:e}),I(S.Provider,{value:{formatMi:n,formatTk:l,onItemClick:s}},I(h,{trades:t,loading:r,tradeItem:a,itemHeight:o}))),E=i().memo(w)},Dvpw:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("YIAr"),l=o().createElement;const s=e=>{let{onRemove:t}=e,r=(0,a.Z)(e,["onRemove"]);return l(n.Z,Object.assign({onClick:t,className:"trading-page-close-button",size:16,sx:{cursor:"pointer",position:"absolute",color:"icons.close",top:0,right:0,zIndex:1,"&:hover":{color:"t.third"}}},r))}},xpNn:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w,O:()=>M});var a=r("/SIk"),i=r.n(a),o=r("rjaD"),n=r("71uP"),l=r("APA6"),s=r("J81Z"),c=r("a1YN"),u=r("LKg9"),d=r("VM/Z"),m=r("W2gp"),p=r("mE5e"),f=r("9h1+"),g=r("SJeZ"),y=r("GpFh"),b=r("TKP4"),h=r("rdEq"),v=i().createElement;const x=e=>{let{label:t,tip:r,value:a,hasTip:i=!0}=e,o=(0,y.Z)(e,["label","tip","value","hasTip"]);return v(b.Z,Object.assign({className:"rules"},o),i?v(h.m,{tip:r},t):v(n.Z,{className:"label"},t),a)},S=i().memo(x),k={position:"relative",px:"24px",width:["100%","488px"],height:["100%","unset"],bg:"modalBg",borderRadius:"6px",boxShadow:"elevation3",".title":{py:"20px",color:"t.primary"},".content":{pt:"14px",pb:"30px"},".rules":{alignItems:"center",justifyContent:"space-between",fontSize:1,pb:"ls",color:"t.primary"},".label":{color:"t.third"},".viewMore":{fontSize:1,px:"2px",py:"4px"}};var P=r("uH0D"),T=i().createElement;let C;const Z="%",M=({afterClose:e}={})=>{u.Y.emit(d.Dg,{visible:!0,afterClose:e})},I=()=>{const e=(0,f.tZ)(),{getI18n:t}=(0,g.yk)(),r=(0,f.gm)(),i=(0,g.G3)(),{shortName:y}=(0,g.oO)(),{baseAsset:b,quoteAsset:h,filters:v=[],liquidationFee:x=0,contractVal:M=0,triggerProtect:I=0,maxMoveOrderLimit:w=0}=(0,f.j2)()||{},E=(0,m.FB)(v,"filterType"),A=((e,t,r,a)=>{const i=[{labelKey:"minimumTradeAmount",defaultLabel:"Minimum Trade Amount",filterType:"LOT_SIZE",field:"minQty",tipKey:"minimumTradeAmountTip",defaultTip:"The minimum Limit Order amount for the contract.",unit:e},{labelKey:"minPriceMovement",defaultLabel:"Min Price Movement",filterType:"PRICE_FILTER",field:"tickSize",tipKey:"minPriceMovementTip",defaultTip:"The minimum change in the unit price of the contract.",unit:t},{labelKey:"orderPriceCapRatio",defaultLabel:"Order Price Cap Ratio",filterType:"PERCENT_PRICE",field:"multiplierUp",tipKey:"orderPriceCapRatioTip",defaultTip:"The upper limit ratio of the order price to current Mark Price of the contract.",unit:r,shouldFormat:!0},{labelKey:"orderPriceFloorRatio",defaultLabel:"Order Price Floor Ratio",filterType:"PERCENT_PRICE",field:"multiplierDown",tipKey:"orderPriceFloorRatioTip",defaultTip:"The lower limit ratio of the order price to current Mark Price of the contract.",unit:r,shouldFormat:!0},{labelKey:"maximumMarketOrderAmount",defaultLabel:"Maximum Market Order Amount",filterType:"MARKET_LOT_SIZE",field:"maxQty",tipKey:"maximumMarketOrderAmountTip",defaultTip:"The minimum Market Order amount for the contract.",unit:e},{labelKey:"maximumOpenOrderAmount",defaultLabel:"Maximum Open Order Amount",filterType:"MAX_NUM_ORDERS",field:"limit",tipKey:"maximumOpenOrderAmountTip",defaultTip:"The maxium Open Orders for the contract."}];return a||i.push({labelKey:"minNotional",defaultLabel:"Min. Notional Value",filterType:"MIN_NOTIONAL",field:"notional",tipKey:"minNotionalTip",defaultTip:"The minimum notional value for the contract order.",unit:t}),i})(i?t("Cont",{defaultValue:"Cont"}):b,h,Z,i),{0:N,1:O}=(0,a.useState)(!1),R=(0,a.useCallback)((()=>{O(!1),"function"===typeof C&&C()}),[]);return(0,a.useEffect)((()=>u.Y.on(d.Dg,(({visible:e,afterClose:t})=>{O(e),C=t}))),[]),T(o.Z,{visible:N,sx:k},T(n.Z,{variant:"headline6",className:"title"},t("trading-rules",{defaultValue:"Trading Rules"})),T(c.Z,{sx:{position:"absolute",top:"22px",right:"24px",cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},onClick:R}),T(l.Z,{className:"content"},T(S,{hasTip:!1,label:t("symbol",{defaultValue:"Symbol"}),value:y}),A.map((({labelKey:e,defaultLabel:a,filterType:i,field:o,tipKey:n,defaultTip:l,unit:s="",shouldFormat:c=!1})=>{var u;let d=null===E||void 0===E||null===(u=E[i])||void 0===u?void 0:u[o];d=s===Z?100*("multiplierUp"===o?d-1:1-d):d;const m=c?(0,p.uf)(d,0):d,f="rtl"===r?`${s} ${m}`:`${m} ${s}`;return T(S,{key:e,label:t(e,{defaultValue:a}),tip:t(n,{defaultValue:l}),value:f})})),i&&T(S,{label:t("contractSize",{defaultValue:"Contract Multiplier"}),tip:t("contractSizeTip"),value:`${M} ${h}`}),T(S,{label:t("triggerProtect",{defaultValue:"Price Protection Rate"}),tip:t("triggerProtectTip"),value:100*+I+" %"}),T(S,{label:t("liquidationFee",{defaultValue:"Insurance Clearance Fee"}),tip:t("liquidationFeeTip"),value:`${(100*+x).toFixed(2)} %`}),i&&T(S,{label:t("maxAmendAmount",{defaultValue:"Max Amend Amount"}),tip:t("maxAmendAmountTip"),value:(0,p.uf)(w,0)}),T(s.Z,{as:"a",variant:"text",href:(0,P.b)(`/${e}/futures/trading-rules/${i?"quarterly":"perpetual"}`),target:"_blank",className:"viewMore"},t("viewMore",{defaultValue:"View More"}))))},w=i().memo(I)},nS2e:(e,t,r)=>{"use strict";r.d(t,{i:()=>d});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("APA6"),l=r("DCFU"),s=r("zZ5f"),c=r("MMVH"),u=o().createElement;const d=e=>{let{className:t,data:r,renderItem:i,hasMore:d,loadMore:m,loading:p=!1,emptyText:f,onClick:g,sx:y}=e,b=(0,a.Z)(e,["className","data","renderItem","hasMore","loadMore","loading","emptyText","onClick","sx"]);const h=null===r||void 0===r?void 0:r.length;return u(n.Z,Object.assign({className:t,onClick:g,sx:y},b),u(s.Z,{fullScreen:!0,inner:!0,show:p}),h?u(o().Fragment,null,r.map(i),d&&m?u(l.Z,{showMore:m,check:{offset:200},loading:p}):null):u(c.p,null,f||null))}},y6Jw:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("APA6"),l=r("0/eC"),s=o().createElement;const c=l.BA[400],u=({filled:e})=>{const t=e?c:"transparent";return s(n.Z,{__css:{display:"inline-block",width:"4px",height:"14px",mx:"1px",border:`1px solid ${c}`,bg:t}})},d=e=>{let{adl:t=0,dashed:r=!1}=e,i=(0,a.Z)(e,["adl","dashed"]);return s(n.Z,Object.assign({},i,{sx:{borderBottom:r?`1px dashed ${c}`:"none"}}),Array(t).fill(0).map(((e,t)=>s(u,{key:t,filled:!0}))),Array(4-t).fill(0).map(((e,t)=>s(u,{key:t,filled:!1}))))}},bbFg:(e,t,r)=>{"use strict";r.d(t,{a:()=>F,Z:()=>_});var a=r("/SIk"),i=r.n(a),o=r("cm/A"),n=r("TKP4"),l=r("J81Z"),s=r("w2aK"),c=r("wr3m"),u=r("T9G5"),d=r("SeOy"),m=r("9h1+"),p=r("jQmP"),f=r("k4WF"),g=r("SJeZ"),y=r("EPGa"),b=r("shek"),h=r("k/nb"),v=r("Lr13"),x=r("5jGq"),S=r("APA6"),k=r("71uP"),P=r("U0yl"),T=r("ca2E"),C=r("H3aL"),Z=r("GG68"),M=r("uefD"),I=i().createElement;function w({orders:e=[],symbol:t,handleCancel:r}){const i=(0,m.iB)(),{isDelivery:l}=(0,a.useContext)(h.Z),s=i[t]||{},{marginAsset:c,pricePrecision:u,quantityPrecision:d,equalQtyPrecision:p,contractVal:f}=s,{getI18n:y}=(0,g.yk)(),{getI18n:b}=(0,P.ZK)("trd-openOrder",v);var v;const{isCoinUnit:w}=(0,T.QV)(),{getFormatedQuantity:E}=(0,Z.s7)(s);return e.length?I(S.Z,{sx:M.y_},e.map((e=>I(n.Z,{key:e.orderId,className:"order"},I(k.Z,{sx:{mr:"43px",color:"position.limitOrdersColor"}},l?w?(0,C.unitChangeCoinQty)({quantity:e.origQty,contractVal:f,price:e.price,precision:p}):(0,o.uf)(e.origQty,d):E({quantity:e.origQty,price:e.price,qtyPrecision:d}),"\xa0",l?w?c:y("Cont",{defaultValue:"Cont"}):"","\xa0",y("toBeClosedAt",{defaultValue:"to be closed at"}),"\xa0",(0,o.uf)(e.price,u)),I(x.Z,{className:"order-icon",size:20,onClick:()=>{r(e.orderId)}}))))):null}var E=r("IpC4"),A=r("k2tD"),N=r("ebof"),O=r("NQFm"),R=i().createElement;const L=({sideKey:e,qty:t,isDelivery:r,isCoinUnit:a,isUsdtFuturesUSDTUnit:i,positionSize:n,stepSizePrecision:l,tickSizePrecision:s,equalQtyPrecision:c})=>{const{quantityAmount:u}=(0,N.v_)({sideKey:e}),d=Math.abs(Number(u.replace("-",""))),m=Number(t),p=Math.abs(n),f=Math.min(m,p)/p*d;let g=l;return r&&a?g=c:!r&&i&&(g=s),(0,o.yd)(f,g,1)},V=e=>{var t,r;const{symbol:i,initialMarkPrice:x,selectPrice:S,sideKey:k,positionSize:P,positionSide:C}=e,{getI18n:Z}=(0,b.Z)(),{getI18n:I}=(0,g.yk)(),{actionPlaceOrder:N,actionCancelOrder:L,actionOrderConfirmModal:V,isDelivery:_}=(0,a.useContext)(h.Z),B=(0,a.useRef)(null),z=(0,m.iB)()[i]||{},{filters:K=[],baseAsset:q,quoteAsset:W,tickSize:U=.01,limitStepSize:j=.001,quantityPrecision:$,equalQtyPrecision:H}=z,G=K&&(null===(t=K.find(O.W4))||void 0===t?void 0:t.maxQty),J=K&&(null===(r=K.find(O.vr))||void 0===r?void 0:r.maxQty),Y=Math.abs(P).toString(),{enqueueNotification:Q}=(0,c.Z)(),X=(0,p.p)(U),{0:ee,1:te}=(0,a.useState)(Number(x).toFixed(X)),re=0===Number(ee),ae=(0,p.p)(j),{0:ie,1:oe}=(0,a.useState)(Y),{0:ne,1:le}=(0,a.useState)(!1),{orderConfirmation:se}=(0,g.F7)(),{isCoinUnit:ce}=(0,T.QV)(),{isUSDTUnit:ue}=(0,E.Q)(),de=_?0:ae,me=_?I("Cont"):q,pe=(0,A.nH)(de),{preOrders:fe}=(0,m.E)(),ge=fe.filter((e=>e.reduceOnly&&e.type===y.Jm.LIMIT&&e.symbol===i&&e.positionSide===C&&e.side===(P>0?y.g.SELL:y.g.BUY))),ye=ge.length;(0,a.useEffect)((()=>{S&&te(String(S))}),[S]),(0,a.useEffect)((()=>{ne||oe(Y)}),[ne,Y]);const be={sideKey:k,isDelivery:_,isCoinUnit:ce,isUsdtFuturesUSDTUnit:ue,qty:ie,positionSize:P,stepSizePrecision:ae,tickSizePrecision:X,equalQtyPrecision:H},he=(0,a.useCallback)((({orderType:e})=>{var t;const r=Number(ie);if(null===B||void 0===B||!B.current||!r)return;const a=()=>{const t={symbol:i,type:e,side:P>0?y.g.SELL:y.g.BUY,quantity:r,price:ee,positionSide:C};N(t)},o={orderType:e,limitPrice:ee,qty:Number(null===B||void 0===B||null===(t=B.current)||void 0===t?void 0:t.preferredUnitQty),quantity:r};se[e]?V(k,o,a):a()}),[V,N,k,se,C,P,ee,ie,i]);return R(n.Z,{alignItems:"center",width:"100%",sx:{flexGrow:2}},R(l.Z,{variant:"text",sx:{pl:0,pr:"8px",fontSize:"12px"},onClick:()=>{if(J&&Number(ie)>Number(J))return Q({header:Z("maxPromptTitle",{defaultValue:"Quantity Failed"}),message:`${Z("maxMarketQty",{defaultValue:"Maximum Market Order Quantity"})}: ${J} ${me}`,autoHideDuration:1e4}),"";he({orderType:y.Jm.MARKET})}},Z("market",{defaultValue:"Market"})),R(s.ZP,{trigger:"hover",enablePortal:!0,placement:"top",sx:{minWidth:"auto"},overlay:R(w,{orders:ge,symbol:i,handleCancel:e=>(e=>{e&&L(e)})(e)})},R(l.Z,{variant:"text",sx:{px:"8px",fontSize:"12px",borderRadius:"0",borderLeft:"1px solid",borderLeftColor:"newLine"},onClick:()=>re?"":G&&Number(ie)>Number(G)?(Q({header:Z("maxPromptTitle",{defaultValue:"Quantity Failed"}),message:`${Z("maxLimitQty",{defaultValue:"Maximum Limit Order Quantity"})}: ${G} ${me}`,autoHideDuration:1e4}),""):void he({orderType:y.Jm.LIMIT})},`${Z("limit",{defaultValue:"Limit"})}${ye>0?`(${ye})`:""}`)),R(u.Z,{enablePortal:!0,placement:"top",arrow:!0,tip:R("div",null,re?I("invalid-price",{defaultValue:"Invalid Price"}):Z("price",{defaultValue:"Price"}))},R(d.Z,{variant:"filled",boxProps:{sx:M.Do},type:"number",value:ee,step:U,error:re,onChange:e=>(0,f._p)(e,(e=>te(e)),null,X),defaultValue:x})),R(s.ZP,{trigger:"click",enablePortal:!0,placement:"bottom-end",sx:{mx:"4px"},overlay:R(v.Z,{sx:{width:"230px"},onChange:e=>{oe((0,o.yd)(e*Math.abs(P),$,1)),le(!0)}})},R(u.Z,{enablePortal:!0,placement:"top",arrow:!0,tip:R(D,Object.assign({},be,{baseAsset:q,quoteAsset:W}))},R(d.Z,{variant:"filled",boxProps:{sx:M.Do},value:ie,onChange:e=>{(0,f._p)(e,(e=>oe(e)),null,de),le(!0)},defaultValue:Y,step:pe}))),R(F,Object.assign({ref:B},be)))},F=(0,a.forwardRef)((({sideKey:e,isDelivery:t,isCoinUnit:r,isUsdtFuturesUSDTUnit:i,qty:o,positionSize:n,stepSizePrecision:l,tickSizePrecision:s,equalQtyPrecision:c},u)=>{const d=L({sideKey:e,qty:o,isDelivery:t,isCoinUnit:r,isUsdtFuturesUSDTUnit:i,positionSize:n,stepSizePrecision:l,tickSizePrecision:s,equalQtyPrecision:c});return(0,a.useImperativeHandle)(u,(()=>({preferredUnitQty:d}))),null})),D=({qty:e,baseAsset:t,quoteAsset:r,positionSize:a,isUsdtFuturesUSDTUnit:o,isCoinUnit:n,isDelivery:l,sideKey:s,stepSizePrecision:c,tickSizePrecision:u,equalQtyPrecision:d})=>{const{getI18n:m,t:p}=(0,g.yk)(),f=Math.abs(a),y=l?m("Cont",{defaultValue:"Cont"}):t,b=l?t:r,h=e,v=L({sideKey:s,qty:e,isDelivery:l,isCoinUnit:n,isUsdtFuturesUSDTUnit:o,positionSize:a,stepSizePrecision:c,tickSizePrecision:u,equalQtyPrecision:d});return l&&n||!l&&o?R(i().Fragment,null,R("div",null,p("closePosition-qtyTip-positionSize",{defaultValue:"Position Size: {{positionSize}} {{orderUnit}}",positionSize:f,orderUnit:y})),R("div",null,p("closePosition-qtyTip-unitConversion",{defaultValue:"Qty: {{orderQty}} {{orderUnit}} \u2248 {{preferredUnitQty}} {{preferredUnit}}",orderQty:h,orderUnit:y,preferredUnitQty:v,preferredUnit:b}))):R(i().Fragment,null,p("closePosition-qtyTip-unit",{defaultValue:"Qty: {{orderUnit}}",orderUnit:y}))},_=i().memo(V)},"k/nb":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r("/SIk");const i=(0,a.createContext)({actionAdjustMarginModal:e=>{},actionOrderConfirmModal:(e,t,r)=>{},actionTpslModal:e=>{},actionPlaceOrder:e=>{},actionCancelOrder:e=>{},actionTpslConfirmModal:e=>{},changeSymbol:e=>{},isDelivery:!1,headers:[]})},QUrc:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ne});var a=r("zZ5f"),i=r("DCFU"),o=r("TKP4"),n=r("/SIk"),l=r.n(n),s=r("shek"),c=r("+tqa"),u=r("VDPE"),d=l().createElement;const m=()=>{const{getI18n:e}=(0,s.Z)();return d("div",{className:"action-bar"},d(c.Z,null),d(u.vR,{btnText:e("closePosition")||""}))},p=l().memo(m);var f=r("APA6"),g=r("cIsc"),y=r("9izf"),b=r("eOkI"),h=r("EPGa"),v=r("9h1+"),x=r("mE5e"),S=r("cm/A"),k=r("J81Z"),P=r("SJeZ"),T=r("jQmP"),C=r("k/nb"),Z=r("WZQH"),M=r("k4WF"),I=l().createElement;const w=e=>{const{getI18n:t}=(0,s.Z)(),{amount:r,onChange:a,onConfirm:i,baseAsset:n="BTC",positionSize:l,precision:c}=e,u=Math.abs(l),d="number"!==typeof Number(r)||r>u,m=I(o.Z,{sx:{mr:"6px",color:"t.yellow200"}},I(f.Z,null,n));return I(f.Z,null,I(Z.Z,{variant:"outline",type:"number",defaultValue:"",value:r,error:d,onChange:e=>(0,M._p)(e,a,"",c),onKeyDown:e=>(0,M.f5)(e,i),onBlur:e=>(0,M.Y5)(e),placeholder:String(u),prefix:I(f.Z,{sx:{ml:2,color:"t.grey300"}},t("Amount",{defaultValue:"Amount"})),suffix:m,sx:{textAlign:"right"},boxProps:{width:"100%",mt:"8px",borderRadius:"2px"}}))};var E=l().createElement;const A=e=>{const{getI18n:t}=(0,s.Z)(),{isMarket:r,price:a,onChange:i,formattedMarkPrice:n,quoteAsset:l="USDT",precision:c}=e,u=r?"":n,d="number"!==typeof Number(a),m=t("price",{defaultValue:"Price"}),p=E(o.Z,{sx:{mr:1,width:r?"95px":"auto"}},r&&E(o.Z,{flex:1},t("Market",{defaultValue:"Market"})),E(f.Z,null,l));return E(f.Z,null,E(Z.Z,{variant:"outline",labelFixed:!0,disabled:r,error:d,value:a,onChange:e=>(0,M._p)(e,i,"",c),placeholder:u,prefix:E(f.Z,{sx:{ml:2,color:"t.grey300"}},m),suffix:p,sx:{textAlign:"right"},boxProps:{width:"100%",mt:"8px",borderRadius:"2px"}}))};var N=r("ca2E"),O=r("Lr13"),R=r("LwXq"),L=r("bbFg"),V=l().createElement;const F=({sideKey:e,panelType:t,onClose:r})=>{var a;const i=(0,n.useRef)(null),{getI18n:o}=(0,s.Z)(),{getI18n:l}=(0,P.yk)(),{orderConfirmation:c}=(0,P.F7)(),{actionPlaceOrder:u,actionOrderConfirmModal:d,isDelivery:m}=(0,n.useContext)(C.Z),p=(0,P.t2)(e,"symbol"),g=(0,P.t2)(e,"positionSize"),y=(0,P.t2)(e,"positionSide"),b=(0,P.t2)(e,"initialMarkPrice"),Z=(0,P.t2)(e,"entryPrice"),M=(null===(a=(0,v.iB)())||void 0===a?void 0:a[p])||{},{baseAsset:I,quoteAsset:E,contractVal:F,quantityPrecision:D,tickSize:_=.01,limitStepSize:B=.001,equalQtyPrecision:z}=M,K=(0,T.p)(_),{0:q,1:W}=(0,n.useState)(b.toFixed(K)),U=(0,x.uf)(b,K),j=t===h.Jm.MARKET,{0:$,1:H}=(0,n.useState)(Math.abs(g)),G=Math.abs(g),J=$||G,Y=q||b,{marketPNL:Q,limitPNL:X}=(0,R.F)({symbol:p,quantity:J,isBuy:g>0,entryPrice:Z,closedPrice:Y,contractVal:F,isDelivery:m}),ee=j?Q:X,{isCoinUnit:te}=(0,N.QV)(),{isUSDTUnit:re}=(0,P.QV)(),ae={sideKey:e,isDelivery:m,isCoinUnit:te,isUsdtFuturesUSDTUnit:re,qty:String($),positionSize:g,stepSizePrecision:(0,T.p)(B),tickSizePrecision:K,equalQtyPrecision:z},ie=async()=>{var a;r();const o=$;if(!o)return;const n=()=>{const e={symbol:p,type:t,side:g>0?h.g.SELL:h.g.BUY,quantity:o,price:q,positionSide:y};u(e)},l={orderType:t,limitPrice:Y,qty:Number(null===(a=i.current)||void 0===a?void 0:a.preferredUnitQty),quantity:o};c[t]?d(e,l,n):n()};return V(f.Z,{mt:"md"},V(L.a,Object.assign({ref:i},ae)),V(A,{isMarket:j,price:q,formattedMarkPrice:U,quoteAsset:E,onChange:e=>{const t="object"===typeof e?e.target.value:e;W(t)},precision:K}),V(w,{amount:$,positionSize:g,baseAsset:m?l("Cont",{defaultValue:"Cont"}):I,onChange:e=>{const t="object"===typeof e?Number(e.target.value):e;H(t>G?G:t)},onConfirm:ie,precision:D}),V(O.Z,{sx:{bg:"transparent",px:0},percentSx:{height:"32px",mr:"8px"},onChange:e=>{H(Number((0,S.yd)(e*Math.abs(g),D,1)))}}),V(f.Z,{sx:{mt:"plus",mb:"24px",lineHeight:"34px"}},V(f.Z,{color:"t.third",as:"span"},o("estimatedPNL",{defaultValue:"Estimated PNL"}),":"),V(f.Z,{sx:{float:"right"}},isNaN(Number(ee))?"-":(0,x.uf)(ee,m?4:2),"\xa0",E)),V(k.Z,{disabled:!1,sz:"l",width:1,onClick:ie},o("confirm",{defaultValue:"Confirm"})))},D=l().memo(F);var _=l().createElement;const{LIMIT:B,MARKET:z}=h.Jm,K=({active:e,title:t})=>{const r=_(f.Z,{sx:{width:"100%",height:"2px",bg:"primary",position:"absolute",bottom:"-1px"}});return _(f.Z,{sx:{position:"relative",mr:"16px",pt:"2px",pb:"14px",fontSize:"16px",fontWeight:"medium"},color:e?"t.primary":"t.grey300"},t," ",e?r:null)},q=({open:e,curSideKey:t,onClose:r})=>{const{0:a,1:i}=(0,n.useState)(z),{getI18n:o}=(0,s.Z)(),l=(0,n.useCallback)((e=>{i(e)}),[i]);return _(g.Z,{open:e,onCloseIconClick:r,containerSx:{alignItems:"flex-end"},sx:{width:["100%","464px"],height:"auto",position:["relative","absolute"],top:["auto","50%"],transform:["none","translateY(-50%)"]}},_(y.Z,{lazy:!0,defaultActiveKey:a,onChange:l,tabsSx:{borderBottom:"1px solid",borderBottomColor:"lines.primary",overflow:"visible"}},_(b.Z,{tab:e=>_(K,{active:e,title:o("MarketClose",{defaultValue:"Market Close"})}),tabKey:z},_(D,{panelType:z,sideKey:t,onClose:r})),_(b.Z,{tab:e=>_(K,{active:e,title:o("LimitClose",{defaultValue:"Limit Close"})}),tabKey:B},_(D,{panelType:B,sideKey:t,onClose:r}))))},W=l().memo(q);var U=r("jgBC"),j=r("VM/Z"),$=r("71uP"),H=r("Ubub"),G=r("rdEq"),J=r("y6Jw"),Y=r("9am+"),Q=r("ebof"),X=r("Sdhy"),ee=l().createElement;const te=["size","notionalSize","entryPrice","markPrice","liquidationPrice","marginRatio","margin","pnl","tpsl"],re=({children:e})=>ee($.Z,{variant:"caption",color:"t.third"},e),ae=({color:e,children:t})=>ee($.Z,{variant:"captionSub",color:e||"t.primary"},t),ie=({children:e,sx:t})=>ee(o.Z,{className:"row-item",sx:t},e),oe=({sideKey:e,actionPlaceOrderModal:t})=>{const{getI18n:r}=(0,s.Z)(),{color:a,symbolText:i,symbolName:o,leverage:l}=(0,Q.iA)({sideKey:e}),c=(0,P.t2)(e,"positionSize"),u=(0,P.t2)(e,"adl"),d=(0,n.useCallback)((()=>{t(e)}),[t,e]);return ee(ie,{sx:{pb:"10px !important"}},ee("div",{className:`symbol-wrap ${a}`},o?ee("div",{className:"symbolText"},ee("div",{className:"symbol"},o.symbol),ee("div",null,`${o.contractTypeI18n} ${o.deliveryDateFormat}`)):ee("div",{className:"symbolText"},i),ee("div",{className:"leverage"},`${l}x`),ee(J.Z,{adl:u})),0===Number(c)?null:ee($.Z,{className:"close-position",onClick:d},r("closePositionSingle",{defaultValue:"Close Position"})))},ne=({sideKey:e})=>{const{getI18n:t}=(0,s.Z)(),{color:r,formatedQuantityAmount:a,unit:i}=(0,Q.v_)({sideKey:e});return ee(l().Fragment,null,ee(G.m,{tip:t("uSizeDes",{defaultValue:"Trading units using stable coins in USD\u24c8-M Futures such as USDT, open position amounts shown are calculated based on the actual coin quantity. Values change with the last price of the symbol."})},t("size",{defaultValue:"Size"})),ee(ae,{color:r},a," ",i))},le=({sideKey:e})=>{const{getI18n:t}=(0,P.yk)(),{formattedNotionalSize:r,unit:a}=(0,Q.jK)({sideKey:e});return ee(l().Fragment,null,ee(re,null,t("notionalSize",{defaultValue:"Notional Size"})),ee(ae,null,r," ",a))},se=({sideKey:e})=>{const{getI18n:t}=(0,s.Z)(),{useLastPrice:r}=(0,P.F7)(),a=r?"lastPrice":"markPrice",{formatedPnl:i,pnlColor:o,ROEVal:n}=(0,Q.qU)({sideKey:e});return ee(l().Fragment,null,ee(G.m,{tip:t(`unrealizedPnlTip-${a}`)},t("m-unrealizedPnl",{defaultValue:"Unrealized PNL(ROE %)"})),ee(ae,{color:o},`${i}(${n})`))},ce=({sideKey:e})=>{const{getI18n:t}=(0,s.Z)(),{formatedEntryPrice:r}=(0,Q.A4)({sideKey:e});return ee(l().Fragment,null,ee(G.m,{tip:t("entryPriceTip",{defaultValue:"Average executed buy/sell price for your current long/short position."})},t("entryPrice",{defaultValue:"Entry Price"})),ee(ae,null,r))},ue=({sideKey:e})=>{const{getI18n:t,i18n:{language:r}}=(0,s.Z)(),{formatedMarkPrice:a}=(0,Q.PH)({sideKey:e});return ee(l().Fragment,null,ee(G.m,{tip:t("markPriceTip",{defaultValue:"The latest mark price for this contract. This is the price used for PNL and margin calculations, and may differ from the last price for the purposes of avoiding price manipulation."}),learnMoreLink:(0,U.CN)(j.Wh.UM_MARK_PRICE,{locale:r})},t("markPrice",{defaultValue:"Mark Price"})),ee(ae,null,a))},de=({liquidationPrice:e,formatedLiqPrice:t})=>{const{showLiqRefresh:r,handleLiqRefresh:a}=(0,Y.l)(),{getI18n:i,i18n:{language:o}}=(0,s.Z)(),{getI18n:n}=(0,P.yk)();return ee(l().Fragment,null,ee(G.m,{tip:i("liquidationPriceTip",{defaultValue:"If the mark price of the contract reaches below this price (when long) or above this price(when short), your position will be liquidated."}),learnMoreLink:(0,U.CN)(j.Wh.LIQ_PRICE,{locale:o})},i("m-liquidationPrice",{defaultValue:"Liquidation Price"})),ee(ae,{color:"t.emphasize"},r?ee("div",{onClick:a},n("refresh",{defaultValue:"Refresh"})):e>0?t:"-"))},me=({sideKey:e})=>{const{liquidationPrice:t,formatedLiqPrice:r}=(0,Q.Mx)({sideKey:e});return ee(de,{liquidationPrice:t,formatedLiqPrice:r})},pe=({sideKey:e})=>{const{liquidationPrice:t,formatedLiqPrice:r}=(0,X.e)({sideKey:e});return ee(de,{liquidationPrice:t,formatedLiqPrice:r})},fe=({ratioColor:e,riskRatio:t})=>{const{getI18n:r}=(0,s.Z)();return ee(l().Fragment,null,ee(G.m,{tip:r("marginRatioTip",{defaultValue:"The lower the Margin Ratio, the lower your liquidation level will be relative to your position size. Your positions will be liquidated once Margin Ratio reaches 100%."})},r("marginRatio",{defaultValue:"Margin Ratio"})),ee(ae,{color:e},t,"%"))},ge=({sideKey:e})=>{const{ratioColor:t,riskRatio:r}=(0,Q.ek)({sideKey:e});return ee(fe,{ratioColor:t,riskRatio:r})},ye=({sideKey:e})=>{const{ratioColor:t,riskRatio:r}=(0,X.U)({sideKey:e});return ee(fe,{ratioColor:t,riskRatio:r})},be=({sideKey:e})=>{const{getI18n:t}=(0,s.Z)(),{actionAdjustMarginModal:r}=(0,n.useContext)(C.Z),a=(0,P.t2)(e,"positionSize"),i=(0,P.t2)(e,"isolated"),{formatedMargin:c}=(0,Q.Yq)({sideKey:e}),u=i?t("Isolated",{defaultValue:"Isolated"}):t("Cross",{defaultValue:"Cross"}),d=(0,n.useCallback)((()=>{r(e)}),[r,e]);return ee(l().Fragment,null,ee(G.m,{tip:t("marginTip",{defaultValue:"The margin allocated to the current position."})},t("margin",{defaultValue:"Margin"})),ee(o.Z,Object.assign({alignItems:"center"},i&&{onClick:d}),ee($.Z,{variant:"captionSub",color:"t.primary"},`${c} (${u})`),0===Number(a)?null:i?ee(H.Z,{size:16,color:"t.third",ml:"4px"}):null))},he=({sideKey:e})=>{const{getI18n:t}=(0,s.Z)(),{isDelivery:r,actionTpslModal:a}=(0,n.useContext)(C.Z),{formatedTPPrice:i,formatedSLPrice:c}=(0,Q.Mn)({sideKey:e}),u=(0,n.useCallback)((()=>{a(e)}),[a,e]);return r?null:ee(l().Fragment,null,ee(G.m,{tip:t("tpSlTip")},t("tpSl",{defaultValue:"TP/SL"})),ee(o.Z,{display:"inline-flex",alignItems:"center",justifyContent:"flex-end",onClick:u},ee($.Z,{variant:"captionSub",color:"t.primary"},i," / ",c),ee(H.Z,{size:16,color:"t.third",ml:"4px"})))},ve=({sideKey:e,actionPlaceOrderModal:t})=>{const{assetMode:r}=(0,P.F7)(),a=(0,n.useCallback)((t=>{switch(t){case"size":return ee(ne,{sideKey:e});case"notionalSize":return ee(le,{sideKey:e});case"pnl":return ee(se,{sideKey:e});case"tpsl":return ee(he,{sideKey:e});case"entryPrice":return ee(ce,{sideKey:e});case"markPrice":return ee(ue,{sideKey:e});case"liquidationPrice":return ee(r?pe:me,{sideKey:e});case"marginRatio":return ee(r?ye:ge,{sideKey:e});case"margin":return ee(be,{sideKey:e});default:return null}}),[r,e]);return ee("div",{className:"row-wrap"},ee(oe,{sideKey:e,actionPlaceOrderModal:t}),te.map((e=>ee(ie,{key:e},a(e)))))},xe=(0,n.memo)(ve);var Se=r("c1R+"),ke=l().createElement;const Pe=["pnl","tpsl","size","notionalSize","marginRatio","margin","entryPrice","markPrice","liquidationPrice"],Te=({sideKey:e})=>{const{getI18n:t}=(0,s.Z)(),{formatedPnl:r,pnlColor:a,ROEVal:i,unrealizedPnl:o}=(0,Q.qU)({sideKey:e}),n=(0,P.cO)(e),{formatedEntryPrice:l}=(0,Q.A4)({sideKey:e}),{formatedMarkPrice:c}=(0,Q.PH)({sideKey:e}),{symbolName:u,leverage:d}=(0,Q.iA)({sideKey:e});return ke("div",{className:"pnl"},ke("span",null,ke(re,null,t("m-unrealizedPnl",{defaultValue:"Unrealized PNL(ROE %)"})),ke($.Z,{variant:"subtitle1",color:a},`${r}(${i})`)),ke(Se.Z,{positionInfo:{isShort:Number(n.positionSize)<=0,leverage:d,pair:(null===u||void 0===u?void 0:u.fullName)||n.symbol,changePercent:i,pnlAmount:o,formatedPnl:r,entryPrice:l,markPrice:c}}))},Ce=({sideKey:e,actionPlaceOrderModal:t})=>{const{assetMode:r}=(0,P.F7)(),a=(0,n.useCallback)((t=>{switch(t){case"size":return ke(ne,{sideKey:e});case"notionalSize":return ke(le,{sideKey:e});case"pnl":return ke(Te,{sideKey:e});case"tpsl":return ke(he,{sideKey:e});case"entryPrice":return ke(ce,{sideKey:e});case"markPrice":return ke(ue,{sideKey:e});case"liquidationPrice":return ke(r?pe:me,{sideKey:e});case"marginRatio":return ke(r?ye:ge,{sideKey:e});case"margin":return ke(be,{sideKey:e});default:return null}}),[r,e]);return ke("div",{className:"row-wrap"},ke(oe,{sideKey:e,actionPlaceOrderModal:t}),ke("div",{className:"row-grid"},Pe.map((e=>ke("div",{key:e,className:e},a(e))))))},Ze=(0,n.memo)(Ce),Me={position:"relative",flexDirection:"column",flex:"1 0",".action-bar":{display:"flex",justifyContent:"space-between",alignItems:"center",height:32,pt:10,label:{width:"auto"}},".empty":{display:"flex",minHeight:120,alignItems:"center",justifyContent:"center",color:"t.secondary",fontSize:0},".row-wrap":{fontSize:"12px",color:"t.primary",py:15,borderBottom:"1px solid",borderColor:"line","&:last-of-type":{mb:102,borderBottom:"none"},"& .row-item":{justifyContent:"space-between",alignItems:"center",py:"minor"},"& .symbol-wrap":{display:"flex",alignItems:"center",fontSize:0,"&.buy":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"buy"}},"&.sell":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"sell"}},"& .symbolText":{display:"flex",alignItems:"center",mx:"minor"},"& .symbol":{mr:"minor",fontSize:1,fontWeight:"medium"},"& .leverage":{px:"minor",mr:"6px",fontSize:0,color:"t.yellow",bg:"rgba(240, 185, 11, .15)",borderRadius:"2px"}},"& .close-position":{py:"minor",px:"xs",fontSize:0,color:"t.primary",bg:"line",borderRadius:"3px"}}},Ie={position:"relative",flexDirection:"column",height:"100%",".action-bar":{display:"flex",justifyContent:"space-between",alignItems:"center",height:32,pt:0,label:{width:"auto"}},".empty":{display:"flex",minHeight:120,alignItems:"center",justifyContent:"center",color:"t.secondary",fontSize:0},".row-list":{height:"calc(100% - 32px)",overflow:"auto","&::-webkit-scrollbar":{display:"none"},"&::-webkit-scrollbar-thumb":{bg:"transparent"}},".row-wrap":{fontSize:"12px",color:"t.primary",py:"ls",borderBottom:"1px solid",borderColor:"line","&:last-of-type":{mb:15,borderBottom:"none"},".pnl":{display:"flex",alignItems:"center"},".row-grid":{display:"grid",alignItems:"center",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(4, 1fr)",gridGap:"12px 16px",gridTemplateAreas:'"pnl pnl tpsl"\n        "size notionalSize marginRatio"\n        "margin entryPrice markPrice"\n        "liquidationPrice . ."',"& .pnl":{gridArea:"pnl"},"& .tpsl":{gridArea:"tpsl"},"& .tpsl, & .marginRatio, & .markPrice":{textAlign:"right"},"& .right-title":{justifyContent:"flex-end"}},"& .row-item":{justifyContent:"space-between",alignItems:"center"},"& .symbol-wrap":{display:"flex",alignItems:"center",fontSize:0,"&.buy":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"buy"}},"&.sell":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"sell"}},"& .symbolText":{display:"flex",alignItems:"center",mx:"minor"},"& .symbol":{mr:"minor",fontSize:1,fontWeight:"medium"},"& .leverage":{px:"minor",mr:"6px",fontSize:0,color:"t.yellow",bg:"rgba(240, 185, 11, .15)",borderRadius:"2px"}},"& .close-position":{py:"minor",px:"xs",fontSize:0,color:"t.primary",bg:"line",borderRadius:"3px"}}};var we=l().createElement;const Ee=()=>{const{getI18n:e}=(0,s.Z)();return we("div",{className:"empty"},e("nodata",{defaultValue:"You have no position."}))},Ae=({isMobile:e,isEmpty:t,hasMore:r,loadMore:l,loading:s,data:c=[]})=>{const{0:u,1:d}=(0,n.useState)(!1),{0:m,1:f}=(0,n.useState)(""),g=(0,n.useMemo)((()=>c.map((e=>({sideKey:e})))),[c]);(0,n.useEffect)((()=>{r&&l()}),[r,l]);const y=(0,n.useCallback)((()=>{d(!1)}),[]),b=(0,n.useCallback)((e=>{d(!0),f(e)}),[d,f]);return we(o.Z,{sx:e?Me:Ie},we(a.Z,{fullScreen:!0,show:s}),we(p,null),t?we(Ee,null):e?g.map((({sideKey:e})=>we(xe,{key:e,sideKey:e,actionPlaceOrderModal:b}))):we("div",{className:"row-list"},g.map((({sideKey:e})=>we(Ze,{key:e,sideKey:e,actionPlaceOrderModal:b})))),r&&we(i.Z,{showMore:l,check:{offset:200},loading:s}),we(W,{open:u,curSideKey:m,onClose:y}))},Ne=l().memo(Ae)},TigS:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Je});var a=r("UFWJ"),i=r("TKP4"),o=r("/SIk"),n=r.n(o),l=r("h+3y"),s=r("5vwO"),c=r("szIg"),u=r("71uP"),d=r("puTL"),m=r("Uqe+"),p=r("O94r"),f=r.n(p),g=r("NcRm"),y=r("rdEq"),b=r("IDe+"),h=r("n/wh"),v=r("RKxx"),x=n().createElement;const S=({type:e})=>x("default"===e?b.Z:"desc"===e?h.Z:"asc"===e?v.Z:b.Z,{className:"rank-icon",size:10}),k=n().memo(S);var P=r("GpFh"),T=r("2fVk"),C=r("APA6"),Z=r("HkAn"),M=r("jgBC"),I=r("VM/Z"),w=n().createElement;const E={fontSize:0,color:"t.secondary",zIndex:9,whiteSpace:"nowrap",".rank-icon":{width:"10px",ml:"2px",transform:"scale(1.6)"}},A=(0,g.JN)((({style:e,children:t})=>w("div",{className:"position-row header",style:e},t))),N=(0,g.W8)((({value:e,className:t,itemKey:r,rankingType:a,isRankingEnable:i,onRanking:n})=>{const{pageName:l,dfSource:s}=(0,Z.Vn)(),c=(0,o.useCallback)((e=>()=>{let t=I.rV.indexOf(e);t<2?t++:t=0,n({rankingKey:r,rankingType:I.rV[t]}),(0,M.wZ)({module:"oop",elementId:"position_sorting",dfSource:s,pageName:l})}),[s,l,r,n]);return w(C.Z,Object.assign({className:t,sx:E},i&&{onClick:c(a)}),e)})),O=w(T.Z,{className:"drag-icon",size:12}),R=(0,g.W6)((e=>{let{showTip:t=!1,tip:r=""}=e,a=(0,P.Z)(e,["showTip","tip"]);return t?w(y.m,Object.assign({tip:r},a),O):O}));var L=r("nYGy"),V=r("f+9E"),F=r("+dPF"),D=r("shek"),_=n().createElement;const B={flexDirection:"column",padding:"4px",fontSize:"12px",".radio-title":{my:"10px",color:"t.white",opacity:"0.5"},".radio-row":{display:"flex",alignItems:"center"},svg:{color:"t.yellow"},".unchecked svg":{color:"t.white",cursor:"pointer"},".radio-label":{mr:"24px",fontSize:"12px",color:"t.white",cursor:"pointer"}};function z({tipText:e}){const t=(0,c.useDispatch)(),{getI18n:r}=(0,D.Z)(),{useLastPrice:a}=(0,F.F7)(),o=e=>{(0,L.yN)({pnlPriceBasis:e},{}),t.preference.updateState({useLastPrice:"lastPrice"===e})};return _(i.Z,{sx:B},e,_("div",{className:"radio-title"},r("selectPriceBasis",{defaultValue:"Select Price Basis"})),_("div",{className:"radio-row"},["markPrice","lastPrice"].map((e=>{const t=a?"lastPrice"===e:"markPrice"===e;return _(V.ZP,{className:f()({unchecked:!t}),key:e,value:e,checked:t,onChange:o},_("div",{className:"radio-label"},r(e)))}))))}var K=r("VDPE"),q=r("SJeZ"),W=r("9am+");const U={fontSize:0,whiteSpace:"normal",lineHeight:"14px",maxHeight:"28px",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden"},j={maxWidth:"330px"},$={cursor:"pointer"};var H=n().createElement;const G=({headers:e,onSort:t,style:r})=>{const a=(0,c.useDispatch)(),{getI18n:l}=(0,q.yk)(),{pageName:p,dfSource:b}=(0,Z.Vn)(),{showLiqRefresh:h,handleLiqRefresh:v}=(0,W.l)(),x=(0,o.useMemo)((()=>e.filter((({defaultChecked:e,unCheckedComponents:t})=>e||!e&&t))),[e]),S=(0,o.useMemo)((()=>e.filter((({key:e})=>!I.N3.includes(e))).reduce(((e,{key:t})=>(Object.assign(e,{[t]:!1}),e)),{})),[e]),[P,T]=(0,m.Z)(I.Nj,!1),[C,w]=(0,m.Z)(I.nK),[E,O]=(0,m.Z)(I.tC,S),L=(0,c.useSelector)((e=>e.position.rankingInfo)),{rankingKey:V,rankingType:F}=L,D=(0,o.useCallback)((e=>a.position.updateState({rankingInfo:e})),[a.position]),_=(0,o.useCallback)((e=>{const{rankingKey:t,rankingType:r}=e,a=null===E||void 0===E?void 0:E[t];D(e),w(e),!a&&O((0,s.Z)((0,s.Z)((0,s.Z)({},E),V?{[V]:!1}:{}),{},{[t]:!0})),"default"===r&&O((0,s.Z)((0,s.Z)({},E),{},{[t]:!1}))}),[V,w,E,O,D]),B=(0,o.useCallback)((e=>{e.stopPropagation()}),[]),G=(0,o.useCallback)((({name:e,tip:t,title:r,learnMoreLink:a,rankingIcon:o,isRankingEnable:n})=>{const l=(0,s.Z)((0,s.Z)({},U),n?$:{});switch(e){case"pnl":return H(y.m,{onTipClick:B,tip:H(z,{tipText:t}),tipSx:j,labelSx:l},r,o);case"closePosition":return H(K.ZP,{tip:t,title:r});case"liquidationPrice":return t?H(y.m,{onTipClick:B,tip:t,learnMoreLink:a,labelSx:l},H(u.Z,null,r,o),h&&H(d.Z,{ml:"3px",cursor:"pointer",size:12,flexShrink:0,onClick:v})):H(i.Z,{alignItems:"center"},H(u.Z,{sx:l,color:"t.third"},r,o),h&&H(d.Z,{ml:"3px",cursor:"pointer",size:12,flexShrink:0,onClick:v}));default:return t?H(y.m,{onTipClick:B,tip:t,learnMoreLink:a,labelSx:l},r,o):H(i.Z,{alignItems:"center"},H(u.Z,{sx:l,color:"t.third"},r,o))}}),[v,h]);return(0,o.useEffect)((()=>{C&&D(C)}),[C,D]),H(A,{axis:"x",transitionDuration:100,useDragHandle:!0,onSortEnd:({oldIndex:e,newIndex:r})=>{var a;const i=x.map((e=>e.key));if(null===(a=x[r])||void 0===a||!a.sortable)return!1;t((0,g.Rp)(i,e,r)),(0,M.wZ)({module:"oop",elementId:"position_title_order",dfSource:b,pageName:p})},style:r},x.map(((e,t)=>{const{key:r,className:a,title:i,tip:o,sortable:s,learnMoreLink:c,unCheckedComponents:u,defaultChecked:d}=e,m=!d&&u?u.title:i,p=!d&&u?u.tip:o,g=V===r?F:"default",y=!I.N3.includes(r),b=H(n().Fragment,null,G({name:r,tip:p,title:m,learnMoreLink:c,isRankingEnable:y,rankingIcon:y?H(k,{type:g}):null}),s&&H(R,{showTip:!P,onMouseLeave:()=>{!P&&T(!0)},tip:l("dragToMove",{defaultValue:"Drag to Move"})}));return H(N,{key:r,index:t,value:b,className:f()(a,{"header-item":!0,"show-ranking":null===E||void 0===E?void 0:E[r]}),itemKey:r,rankingType:g,isRankingEnable:y,onRanking:_})})))},J=n().memo(G);var Y=r("w2aK"),Q=r("6eV+"),X=r("+tqa"),ee=r("cN65"),te=r("COVG"),re=r("BLcC"),ae=r("Lvqs"),ie=n().createElement;const oe={padding:"16px",bg:"popupBg",boxShadow:"elevation2",borderRadius:"4px",".check-header":{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"14px","& .name":{color:"t.secondary",marginRight:"16px"}},".sort-header":{color:"t.third",display:"flex",justifyContent:"flex-start",alignItems:"center","& .back":{marginLeft:"8px",cursor:"pointer",fontSize:"12px"}}},ne=["notionalSize","adl","tpSl","closePosition"],le=({headers:e=[],onSort:t,onCheck:r})=>{const a=e.map((e=>(0,s.Z)((0,s.Z)({},e),{},{value:e.key,label:e.title}))),i=a.filter((e=>e.sortable&&(e.defaultChecked||e.alwaysShowInColumn))).map((e=>(0,s.Z)((0,s.Z)({},e),{},{label:e.sortingTitle||e.title}))),n=a.filter((e=>e.checkable));n.sort(((e,t)=>ne.indexOf(e.value)-ne.indexOf(t.value)));const{getI18n:l}=(0,q.yk)(),{0:c,1:d}=(0,o.useState)("check"),m=e=>{const a=Object.keys(e)[0],o=e[a];r&&r(n.map((e=>e.value===a?(0,s.Z)((0,s.Z)({},e),{},{defaultChecked:o}):e)).filter((e=>e.defaultChecked)).map((e=>e.value)));let l=i.map((e=>e.value));o?l.push(a):l=l.filter((e=>e!==a)),t&&t(l.concat(a))};return"check"===c?ie(C.Z,{__css:oe,onClick:e=>e.stopPropagation()},ie("div",{className:"check-header"},ie(u.Z,{variant:"captionSub",className:"name"},l("positions-preferenceTitle")),ie("div",{className:"action"},ie(re.Z,{variant:"defaultLink",__css:{cursor:"pointer"},onClick:e=>{e.stopPropagation(),d("sort")}},l("positions-preferenceSort")))),ie("div",{className:"list"},ie(ee.Z,{options:n,getValue:m}))):ie(C.Z,{__css:oe,onClick:e=>e.stopPropagation()},ie("div",{className:"sort-header"},ie(ae.Z,{size:16,onClick:()=>{d("check")}}),ie("div",{className:"back",onClick:()=>{d("check")}},l("positions-preferenceBack"))),ie("div",{className:"list"},ie(te.Z,{items:i,onSort:e=>{t&&t(e)}})))},se=(0,o.memo)(le);var ce=n().createElement;const ue=({headers:e,onCheck:t,onSort:r})=>{const a=(0,q.BF)(I.$f);return ce("div",{className:a?"action-bar":"action-bar fullscreen"},ce(X.Z,null),ce(Y.ZP,{trigger:"click",sx:{marginLeft:16,marginTop:"4px"},overlay:ce(se,{headers:e,onCheck:t,onSort:r}),overlayProps:{marginBottom:"8px"},placement:"top",enablePortal:!0},ce(Q.Z,{mr:"8px",fontSize:"20px",sx:{color:"icons.close",cursor:"pointer","&:hover path":{fill:"t.third"}}})))},de=n().memo(ue);var me=r("TVE9"),pe=r("64LX"),fe=r("NAP3"),ge=r("S24M"),ye=r("BcM3"),be=r("c1R+"),he=r("ebof"),ve=r("Sdhy"),xe=r("y6Jw"),Se=r("bbFg"),ke=r("k/nb"),Pe=n().createElement;const Te=(0,I.nM)(),Ce=({sideKey:e})=>{const{changeSymbol:t}=(0,o.useContext)(ke.Z),r=(0,q.t2)(e,"symbol"),{color:a,symbolText:i,symbolName:n,leverage:l}=(0,he.iA)({sideKey:e});return Pe("div",{className:"symbol",onClick:()=>t({stateSymbol:r})},Pe("div",{className:`bar bar-${a}`}),Pe(ye.O,{symbolName:n,fallbackText:i}),Pe("div",{className:"leverage"},`${l}x`),Pe(me.Z,{size:16,color:"t.yellow",className:"symbolRightArrow"}))},Ze=({columnKey:e,sideKey:t})=>{const{color:r,formatedQuantityAmount:a,unit:i}=(0,he.v_)({sideKey:t,columnKey:e});return Pe("div",{className:`size size-${r}`},`${a} ${i}`)},Me=({columnKey:e,sideKey:t})=>{const{formattedNotionalSize:r,unit:a}=(0,he.jK)({sideKey:t,columnKey:e});return Pe("div",{className:"notionalSize"},`${r} ${a}`)},Ie=({sideKey:e})=>{const{formatedEntryPrice:t}=(0,he.A4)({sideKey:e});return Pe("div",{className:"entryPrice"},t)},we=({sideKey:e})=>{const{formatedMarkPrice:t}=(0,he.PH)({sideKey:e});return Pe("div",{className:"markPrice"},t)},Ee={color:"t.emphasize","&:hover":{color:"t.emphasize"}},Ae=(0,o.memo)((({validLiq:e,formatedLiqPrice:t})=>{const{showLiqRefresh:r,handleLiqRefresh:a}=(0,W.l)(),{getI18n:i}=(0,D.Z)(),{getI18n:o}=(0,q.yk)();return Pe("div",{className:"liquidationPrice"},r?Pe(y.m,{tip:i("liquidationPriceRefreshTip",{defaultValue:""}),labelSx:Ee},Pe("div",{className:"liqRefresh",onClick:a},o("refresh",{defaultValue:"Refresh"}))):e?t:Pe(y.m,{tip:i("liquidationPriceLowRiskTip",{defaultValue:""}),labelSx:Ee},"- -"))})),Ne=({columnKey:e,sideKey:t})=>{const{liquidationPrice:r,formatedLiqPrice:a}=(0,he.Mx)({sideKey:t,columnKey:e});return Pe(Ae,{validLiq:r>0,formatedLiqPrice:a})},Oe=({columnKey:e,sideKey:t})=>{const{liquidationPrice:r,formatedLiqPrice:a}=(0,ve.e)({sideKey:t,columnKey:e});return Pe(Ae,{validLiq:r>0,formatedLiqPrice:a})},Re=({ratioColor:e,riskRatio:t})=>Pe("div",{className:`marginRatio marginRatio-${e}`},t,"%"),Le=({columnKey:e,sideKey:t})=>{const{ratioColor:r,riskRatio:a}=(0,he.ek)({sideKey:t,columnKey:e});return Pe(Re,{ratioColor:r,riskRatio:a})},Ve=({columnKey:e,sideKey:t})=>{const{ratioColor:r,riskRatio:a}=(0,ve.U)({sideKey:t,columnKey:e});return Pe(Re,{ratioColor:r,riskRatio:a})},Fe=({columnKey:e,sideKey:t})=>{const{0:r,1:a}=(0,o.useState)(!1),{assetMode:i}=(0,q.F7)(),{actionAdjustMarginModal:l}=(0,o.useContext)(ke.Z),c=(0,q.t2)(t,"positionSize"),u=(0,q.t2)(t,"isolated"),d=(0,q.t2)(t,"isolatedWallet"),{getI18n:m}=(0,D.Z)(),p=u?m("Isolated",{defaultValue:"Isolated"}):m("Cross",{defaultValue:"Cross"}),{formatedMargin:f}=(0,he.Yq)({sideKey:t,columnKey:e}),g=(0,o.useCallback)(((e,t)=>{(0,ge.j)(e,(0,s.Z)({module:"oop",df_source:Te?"cm":"um",pageName:Te?"cm_trading":"um_trading"},t))}),[]),y=(0,o.useCallback)((()=>{u&&(0===Number(c)&&d<0?(g("$WebClick",{$element_id:"isolated_negative_balance_entry"}),fe.ee.emit("SHOW_NEG_BALANCE_CLEAR_MODAL",{isJoinMargin:i,isolated:u,isCM:Te,sensorsTrack:g})):l(t))}),[l,i,u,d,c,g,t]),b=(0,o.useMemo)((()=>Pe(pe.Z,{size:16,color:r?"t.primary":"t.third"})),[r]);return Pe(n().Fragment,null,u?Pe("div",{className:"margin",style:{minWidth:"auto",cursor:"pointer"},onClick:y,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},Pe("div",{className:"margin-text"},Pe("div",null,f),Pe("div",null,`(${p})`)),Pe("div",{className:"margin-icon-container"},b,d<0&&Pe("div",{className:"red-point"}))):Pe("div",{className:"margin"},Pe("div",{className:"margin-text"},Pe("div",null,f),Pe("div",null,`(${p})`))))},De=({columnKey:e,sideKey:t})=>{const{unrealizedPnl:r,formatedPnl:a,pnlColor:i,ROEVal:o}=(0,he.qU)({sideKey:t,columnKey:e}),n=(0,q.cO)(t),{formatedEntryPrice:l}=(0,he.A4)({sideKey:t}),{formatedMarkPrice:s}=(0,he.PH)({sideKey:t}),{symbolName:c,leverage:u}=(0,he.iA)({sideKey:t}),d=(0,q.t2)(t,"isolatedWallet"),m=Number(n.positionSize),p=d<0&&0===m;return Pe("div",{className:`pnl pnl-${i}`},Pe("span",null,Pe("div",null,a),Pe("div",null,`(${o})`)),!p&&Pe(be.Z,{positionInfo:{isShort:m<=0,leverage:u,pair:(null===c||void 0===c?void 0:c.fullName)||n.symbol,changePercent:o,pnlAmount:r,formatedPnl:a,entryPrice:l,markPrice:s}}))},_e=({sideKey:e})=>{const t=(0,q.t2)(e,"adl");return Pe("div",{className:"adl"},Pe(xe.Z,{adl:t}))},Be=({sideKey:e})=>{const t=(0,q.t2)(e,"symbol"),r=(0,q.t2)(e,"positionSize"),a=(0,q.t2)(e,"initialMarkPrice"),i=(0,q.t2)(e,"selectPrice"),o=(0,q.t2)(e,"positionSide");return Pe("div",{className:"closePosition"},r?Pe(Se.Z,{symbol:t,sideKey:e,initialMarkPrice:a,selectPrice:i,positionSize:r,positionSide:o}):Pe(n().Fragment,null))},ze=({columnKey:e,sideKey:t})=>{const{actionTpslModal:r}=(0,o.useContext)(ke.Z),{formatedTPPrice:a,formatedSLPrice:i}=(0,he.Mn)({sideKey:t,columnKey:e}),n=(0,o.useMemo)((()=>Pe(pe.Z,{size:16,sx:{cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},onClick:()=>r(t)})),[t,r]);return Pe("div",{className:"tpSl"},Pe("div",{className:"tpSl-text"},Pe("div",null,a," /"),Pe("div",null,i)),n)},Ke=({sideKey:e})=>{const{assetMode:t}=(0,q.F7)(),{headers:r}=(0,o.useContext)(ke.Z),a=(0,o.useCallback)((({key:r})=>{switch(r){case"symbol":return Pe(Ce,{key:r,sideKey:e,columnKey:r});case"size":return Pe(Ze,{key:r,sideKey:e,columnKey:r});case"notionalSize":return Pe(Me,{key:r,sideKey:e,columnKey:r});case"entryPrice":return Pe(Ie,{key:r,sideKey:e,columnKey:r});case"markPrice":return Pe(we,{key:r,sideKey:e,columnKey:r});case"liquidationPrice":return Pe(t?Oe:Ne,{key:r,sideKey:e,columnKey:r});case"marginRatio":return Pe(t?Ve:Le,{key:r,sideKey:e,columnKey:r});case"margin":return Pe(Fe,{key:r,sideKey:e,columnKey:r});case"pnl":return Pe(De,{key:r,sideKey:e,columnKey:r});case"adl":return Pe(_e,{key:r,sideKey:e,columnKey:r});case"closePosition":return Pe(Be,{key:r,sideKey:e,columnKey:r});case"tpSl":return Pe(ze,{key:r,sideKey:e,columnKey:r});default:return Pe("div",null)}}),[t,e]);return Pe("div",{className:"position-row body"},r.filter((e=>e.defaultChecked||e.alwaysShowInColumn)).map(a))},qe=(0,o.memo)(Ke);var We=r("uefD"),Ue=r("8LtS"),je=n().createElement;const $e=e=>je(qe,e),He=(e,t)=>t[e].sideKey,Ge=({loading:e,headers:t,onCheckHeader:r,onSortHeader:n,data:s=[]})=>{const c=(0,Ue.jZ)(),u=(0,o.useMemo)((()=>c(s).map((e=>({sideKey:e})))),[s,c]),d=(0,o.useMemo)((()=>{let e=0;return t.filter((e=>e.defaultChecked||!e.defaultChecked&&e.unCheckedComponents)).forEach((({key:t})=>{e+=We.G4[t]||0})),{minWidth:e}}),[t]),{getI18n:m}=(0,q.yk)(),{apiError:p,onRefresh:f}=(0,Ue.Nl)(),g=(0,K.yN)({hideOtherSymbol:!1});return je("div",{id:"position-pc",style:{height:"100%"}},je(i.Z,{sx:We.w_},je(de,{headers:t,onSort:n,onCheck:r}),je(J,{headers:t,onSort:n,style:d}),je(l.v,{apiError:p,confirmTip:m("positionErrorConfirmTip",{defaultValue:"Cancel all open orders and close all positions here."}),onRefresh:f,onConfirm:g},je(a.a,{direction:"xxx",dataSource:u,loading:e,loadWithContent:!0,listSx:d,itemElement:$e,itemKey:He,itemHeight:40}))))},Je=n().memo(Ge)},VDPE:(e,t,r)=>{"use strict";r.d(t,{vR:()=>N,ZP:()=>R,yN:()=>E});var a=r("/SIk"),i=r.n(a),o=r("APA6"),n=r("TKP4"),l=r("J81Z"),s=r("71uP"),c=r("bDLa"),u=r("fi7b"),d=r("7yXh"),m=r("/P9W"),p=r("szIg"),f=r("8RC1"),g=r("rdEq"),y=r("9h1+"),b=r("SJeZ"),h=r("k/nb"),v=r("54Vt"),x=r("GbrZ"),S=r("shek"),k=i().createElement;const P={pt:"xs",flexDirection:"column",alignItems:"center",textAlign:"center","& .title":{mt:"md",color:"t.primary"},"& .fail-info":{pt:"xs",mb:"md",width:"100%",maxHeight:304,overflowY:"auto","& .fail-order":{flexDirection:"column",mb:10},"& .symbol-wrap":{justifyContent:"center",alignItems:"center",mb:"2px","&.buy":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"buy"}},"&.sell":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"sell"}}},"& .symbolText":{display:"flex",alignItems:"center",mx:"minor"},"& .symbol":{mr:"minor"}}},T=({variant:e,className:t,children:r,color:a,whiteSpace:i="pre-wrap"})=>k(s.Z,{variant:e,className:t,color:a,sx:{whiteSpace:i}},r),C=({orders:e,productMap:t,isCoinFutures:r})=>{const{getI18n:a}=(0,S.Z)(),{getI18n:o}=(0,b.yk)();return k(n.Z,{sx:P},k(v.Z,{size:80}),k(s.Z,{variant:"headline6",className:"title"},o("ClosePositionsFailed")),k("div",{className:"fail-info"},Object.values(e).map((({symbol:e,positionSide:l,amount:c,color:u,messages:d},m)=>{let p,f=e;const g=null===t||void 0===t?void 0:t[e],{baseAsset:y=""}=g||{},b=r?o("Cont",{defaultValue:"Cont"})||"Cont":y;return g&&(p=(0,x.H)(g,o)),k(n.Z,{key:m,className:"fail-order"},k(n.Z,{className:`symbol-wrap ${u}`},k("div",{className:"symbolText"},p?k(i().Fragment,null,k(T,{variant:"subtitle1",className:"symbol"},p.symbol),k(T,{variant:"body1"},p.contractTypeI18n," ",p.deliveryDateFormat)):k(T,{variant:"subtitle1"},f)),k(T,{variant:"subtitle1",color:u},"LONG"===l?a("psLong",{defaultValue:"Long"}):a("psShort",{defaultValue:"Short"}))),d.map(((e="")=>k(s.Z,{key:e,variant:"body2",color:"t.primary",mt:"3px"},e.replace(/%unit%/,b)))))}))),k(l.Z,{sz:"large",width:"100%",onClick:()=>f.ZP.close()},o("OK")))},Z=i().memo(C);var M=r("COFI"),I=r("wdcV"),w=i().createElement;const E=({hideOtherSymbol:e=!1})=>{const{isLight:t}=(0,y.Fg)(),r=(0,y.rd)(),i=(0,y.iB)(),[s]=(0,y.z4)(),{isDelivery:c}=(0,a.useContext)(h.Z),{getI18n:u}=(0,S.Z)(),{getI18n:p}=(0,y.ZK)("trd-openOrder"),g=(0,a.useMemo)((()=>e?{symbolList:[s],newOrderRespType:"RESULT"}:{newOrderRespType:"RESULT"}),[e,s]),b=(0,a.useCallback)((()=>{try{(0,m.F)(g).then((e=>{const{success:a,data:{failedOrderRespList:o=[]}}=e||{};if(a&&o.length){const e=(0,I.QN)(o);f.ZP.show({isLight:t,color:r,sx:{minWidth:"360px",maxWidth:"360px"},onPressEnter:b,onPressEsc:()=>f.ZP.close(),children:w(Z,{orders:e,productMap:i,isCoinFutures:c})})}f.ZP.close()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}catch(e){f.ZP.close()}}),[g,t,i,c,r]),v=(0,a.useCallback)((()=>{f.ZP.close()}),[]);return(0,a.useCallback)((a=>{var i;null===a||void 0===a||null===(i=a.stopPropagation)||void 0===i||i.call(a),f.ZP.show({isLight:t,color:r,showCloseIcon:!1,sx:{width:["300px","360px"],height:"auto"},onPressEnter:()=>f.ZP.close(),onPressEsc:()=>f.ZP.close(),children:w(o.Z,null,w(o.Z,{px:1,pt:[0,"16px"],sx:{textAlign:"center"}},w(d.Z,{size:[60,96]}),w("div",null,e?u("closePositionTextPartial",{symbol:s,defaultValue:"Are you sure you want to close all positions of {{symbol}} at market price?"}):u("closePositionText",{defaultValue:"Are you sure you want to close all your positions at market price?"}))),w(n.Z,{mt:"24px"},w(l.Z,{sx:{width:.5,mr:3},sz:"l",flexGrow:1,colorStyle:"secondary",onClick:v},p("dialog-cancel",{defaultValue:"Cancel"})),w(l.Z,{sx:{width:.5},sz:"l",flexGrow:1,onClick:b},p("dialog-confirm",{defaultValue:"Confirm"}))))})}),[p,u,b,e,t,s,r,v])},A=({canPlaceOrder:e,closeTip:t})=>{const{t:r}=(0,b.$G)(),{getI18n:i}=(0,b.yk)(),n=E({hideOtherSymbol:!1}),c=(0,a.useMemo)((()=>({width:"231px",color:"#1E2329",".btn-area":{mt:"4px",display:"flex",justifyContent:"flex-end",alignItems:"center",".text":{fontSize:"14px",fontWeight:500,cursor:"pointer"},".white":{ml:"18px",backgroundImage:"none","&:hover":{backgroundImage:"none"}}}})),[]);return w(o.Z,{sx:c},w("div",{className:"text"},i("service-abnormal",{defaultValue:"The service is currently overloaded or malfunctioning. "})," ","\xa0",e&&w(u.c,{t:r,i18nKey:(0,b.Gv)("abnormal-close-all"),components:{bold:w("span",{style:{fontWeight:"bold"}})},defaults:"<bold>Cancel all open orders</bold> and <bold>close all positions</bold> here."})),e?w("div",{className:"btn-area"},w(s.Z,{className:"text",onClick:t},i("cancelBtnText",{defaultValue:"Cancel"})),w(l.Z,{className:"white",onClick:()=>{n(null),t()}},i("confirmBtn",{defaultValue:"Confirm"}))):w("div",{className:"btn-area"},w(l.Z,{className:"white",onClick:t},i("OK",{defaultValue:"OK"}))))},N=({btnText:e})=>{const t=(0,b.Xb)(),r=E({hideOtherSymbol:t});return(0,a.useEffect)((()=>(0,M.GY)((async({name:e})=>{switch(e){case M.IS:r(null)}}))),[r]),w(l.Z,{onClick:r,variant:"quiet",sz:"s",pl:"0"},e)},O=({tip:e,title:t})=>{const{headers:r}=(0,a.useContext)(h.Z),i=(0,b.C3)(),{0:o,1:n}=(0,a.useState)(document.getElementById("position-pc"));(0,a.useEffect)((()=>{n(null)}),[r]),(0,a.useEffect)((()=>{n(document.getElementById("position-pc"))}),[i,o]);const l=(0,b.Dj)(),u=(null===l||void 0===l?void 0:l.length)||0,d=(0,y.zk)("abnormal"),m=(0,y.zk)("openTip"),f=(0,y.zk)("placeOrder"),v=(0,p.useDispatch)(),x=(0,a.useCallback)((()=>v.serviceStatus.updateStateImmutable({openTip:!1})),[]),{activeTab:S}=(0,y.jV)();return"0"!==S?null:d?w("div",{style:{width:"fit-content",position:"relative"}},w(c.Z,{container:o,open:m,arrow:!0,boundary:document.body,bg:"primary",placement:"top-start",tip:w(A,{canPlaceOrder:f,closeTip:x})},e?w(N,{btnText:t}):w(s.Z,{sx:{fontSize:0,color:"t.secondary"}},t))):e?w(g.m,{tip:e},u?w(N,{btnText:t}):t):w(s.Z,{sx:{fontSize:0,color:"t.secondary"}},t)},R=i().memo(O)},"+tqa":(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r("d19s"),i=r("fDz0"),o=r("71uP"),n=r("/SIk"),l=r.n(n),s=r("szIg"),c=r("9h1+"),u=r("SJeZ"),d=l().createElement;const m=()=>{const{getI18n:e}=(0,u.yk)(),[t]=(0,c.z4)(),r=(0,s.useDispatch)(),l=(0,u.Xb)(),m=(0,n.useRef)(l),p=(0,n.useCallback)((e=>{const{checked:a}=e.currentTarget;r.position.hideOtherSymbol({hideOtherSymbol:a,onlySymbol:t})}),[t,r.position]);return(0,n.useEffect)((()=>{m.current=l}),[l]),(0,n.useEffect)((()=>{m.current&&r.position.hideOtherSymbol({hideOtherSymbol:!0,onlySymbol:t})}),[t]),d(a.Z,{sx:{fontSize:[1,0],color:"t.third",cursor:["auto","auto","pointer"],lineHeight:["unset","24px","24px"]}},d(i.Z,{checked:l,onChange:p}),d(o.Z,{sx:{userSelect:"none"}},e("hideOtherSymbol",{defaultValue:"Hide Other Symbol"})))},p=l().memo(m)},Lr13:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("TKP4"),l=o().createElement;const s=({onClick:e,sx:t,children:r})=>l(n.Z,{justifyContent:"center",alignItems:"center",sx:(0,a.Z)({display:"flex",flex:"1",minWidth:"40px",height:"24px",border:"1px solid",borderColor:"position.percentInputBorderColor",borderRadius:"2px",cursor:"pointer",mr:"4px",color:"t.third",bg:"bg3",textAlign:"center",":hover":{color:["t.yellow","t.yellow","t.primary"],bg:["bg3","bg3","line"],borderColor:"currentColor"},":last-of-type":{mr:0}},t),onClick:e},r),c=({percents:e=[.1,.25,.5,.75,1],onChange:t=(e=>{}),sx:r={},percentSx:i={}})=>l(n.Z,{variant:"dropdown",justifyContent:"space-between",sx:(0,a.Z)({width:"100%",bg:"popupBg",borderRadius:"4px",p:"8px"},r)},e.map((e=>l(s,{key:e,sx:i,onClick:()=>t(e)},100*e,"%"))))},shek:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o,G:()=>n});var a=r("9h1+");const i="trd-Position",o=e=>(0,a.ZK)(i,e),n=e=>`${i}-${e}`},"8LtS":(e,t,r)=>{"use strict";r.d(t,{g4:()=>f,Nl:()=>I,jZ:()=>M});r("LwXq"),r("ebof");var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("Uqe+"),l=r("9h1+"),s=r("jgBC"),c=r("VM/Z"),u=r("+dPF"),d=r("SJeZ"),m=o().createElement;const p=({getFutI18n:e})=>{var t;const[r]=(0,l.z4)(),a=null===(t=(0,d.m8)()[r])||void 0===t?void 0:t.indexPrice,{formatTk:i}=(0,l.mC)();return m(o().Fragment,null,e("markPriceTip",{defaultValue:"Latest mark price for this contract. To prevent price manipulation, the mark price is used for unrealized PNL and margin calculations, and may differ from the last price. \n Mark Price is calculated based on the index price. The Price Index is a bucket of prices from the major Spot market exchanges, weighted by their relative volume. The latest index price is {{indexPrice}}.",indexPrice:i(a)}).replaceAll("\\n","\n"))},f=({getFutI18n:e})=>{const{useLastPrice:t}=(0,u.F7)(),{i18n:{language:r}}=(0,l.ZK)(),o=t?"lastPrice":"markPrice",[d,f]=(0,n.Z)(c.Zt,["closePosition","tpSl"]),[g,y]=(0,n.Z)(c.o5,["symbol","size","entryPrice","markPrice","liquidationPrice","marginRatio","margin","pnl","closePosition","tpSl"]),b=(0,c.nM)();return[(0,i.useMemo)((()=>{const t=[{key:"symbol",className:"symbol",title:e("symbol",{defaultValue:"Symbol"}),checkable:!1,sortable:!1},{key:"size",className:"size",title:e("size",{defaultValue:"Size"}),tip:b?e("cSizeDes",{defaultValue:"Trading units using coins in COIN-M Futures such as BTC, open position amounts shown are calculated based on the actual cont quantity. Values change with the\xa0last price of the symbol."}):e("uSizeDes",{defaultValue:"Trading units using stable coins in USD\u24c8-M Futures such as USDT, open position amounts shown are calculated based on the actual coin quantity. Values change with the last price of the symbol."}),checkable:!1,sortable:!0},{key:"notionalSize",className:"notionalSize",title:e("notionalSize",{defaultValue:"Notional Size"}),checkable:!0,sortable:!0},{key:"entryPrice",className:"entryPrice",title:e("entryPrice",{defaultValue:"Entry Price"}),tip:e("entryPriceTip",{defaultValue:"Average executed buy/sell price for your current long/short position."}),checkable:!1,sortable:!0},{key:"markPrice",className:"markPrice",title:e("markPrice",{defaultValue:"Mark Price"}),tip:m(p,{getFutI18n:e}),checkable:!1,sortable:!0},{key:"liquidationPrice",className:"liquidationPrice",title:e("liquidationPrice",{defaultValue:"Liq.Price"}),tip:e("liquidationPriceTip",{defaultValue:"If the mark price of the contract reaches below this price (when long) or above this price(when short), your position will be liquidated."}),learnMoreLink:(0,s.CN)(c.Wh.LIQ_PRICE,{locale:r}),checkable:!1,sortable:!0},{key:"marginRatio",className:"marginRatio",title:e("marginRatio",{defaultValue:"Margin Ratio"}),tip:e("marginRatioTip",{defaultValue:"The lower the Margin Ratio, the lower your liquidation level will be relative to your position size. Your positions will be liquidated once Margin Ratio reaches 100%."}),checkable:!1,sortable:!0},{key:"margin",className:"margin",title:e("margin",{defaultValue:"Margin"}),tip:e("marginTip",{defaultValue:"The margin allocated to the current position."}),checkable:!1,sortable:!0},{key:"pnl",className:"pnl",title:e("unrealizedPnl",{defaultValue:"PNL(ROE %)"}),tip:e(`unrealizedPnlTip-${o}`),checkable:!1,sortable:!0},{key:"adl",className:"adl",title:e("adl",{defaultValue:"ADL"}),tip:e("adlTip",{defaultValue:"This indicator shows your position in the auto-deleverage queue. If all lights are lit, in the event of a liquidation, your position may be reduced."}),checkable:!0,sortable:!0},{key:"closePosition",className:"closePosition",title:e("closePosition",{defaultValue:"Close All Position"}),tip:e("closePositionTip",{defaultValue:"Closing all positions cancels all open orders under {{futuresType}} and close all positions under {{futuresType}} by market order.",futuresType:b?"COIN-M":"USD\u24c8-M"}),alwaysShowInColumn:!0,unCheckedComponents:{title:e("positions-action",{defaultValue:"Action"}),tip:null},sortingTitle:e("positions-preferenceAction",{defaultValue:"Action (Market/Limit)"}),checkable:!0,sortable:!0},{key:"tpSl",className:"tpSl",title:e("tpSlV2",{defaultValue:"TP/SL for position"}),tip:e("tpSlTip"),checkable:!0,sortable:!0}].map((e=>(0,a.Z)((0,a.Z)({},e),{},{defaultChecked:!e.checkable||(null===d||void 0===d?void 0:d.includes(e.key))||!1})));return t.sort(((e,t)=>g?g.indexOf(e.key)-g.indexOf(t.key):0)),t}),[e,b,r,o,d,g]),{onCheckHeader:f,onSortHeader:y}]};var g=r("GpFh"),y=r("szIg"),b=r("LaZo"),h=r("dMPp"),v=r("8lq6"),x=r("M3F1");const S=(e,t)=>e.localeCompare(t),k=(0,b.Z)(S),P=(e,t)=>+e-+t,T=(0,b.Z)(P),C=["size","notionalSize","liquidationPrice","marginRatio","margin","pnl"],Z=(e,t)=>null===t||void 0===t?void 0:t[e],M=()=>{const e=(0,l.iB)(),t=(0,y.useSelector)((e=>e.position.positionMap)),r=(0,x.ZP)(x.ME),{rankingKey:o,rankingType:n}=(0,y.useSelector)((e=>e.position.rankingInfo)),s=(0,i.useCallback)(((e,a,i=!1)=>{var o;return null===(o=Z(e,i?r:t))||void 0===o?void 0:o[a]}),[r,t]),u=(0,i.useCallback)((r=>{const{symbol:i=""}=Z(r,t)||{},o=null===e||void 0===e?void 0:e[i],{pair:n="",baseAsset:l="",quoteAsset:s=""}=o,c=(0,g.Z)(o,["pair","baseAsset","quoteAsset"]);return(0,a.Z)({symbolName:n||`${l}${s}`},c)}),[t,e]);return(0,i.useMemo)((()=>{const e=[],t=C.includes(o);return("entryPrice"===o||"markPrice"===o||t)&&("asc"===n?e.push(((e,r)=>T(s(e,o,t),s(r,o,t)))):"desc"===n&&e.push(((e,r)=>P(s(e,o,t),s(r,o,t))))),"symbol"===o&&"default"!==n&&("asc"===n?e.push(((e,t)=>k(u(e).symbolName,u(t).symbolName))):"desc"===n&&e.push(((e,t)=>S(u(e).symbolName,u(t).symbolName))),e.push(((e,t)=>{const{symbolName:r,contractType:a}=u(e),{symbolName:i,contractType:o}=u(t);return r!==i?0:P((0,h.Z)(a,c.IR),(0,h.Z)(o,c.IR))})),e.push(((e,t)=>P((0,h.Z)("positionSide",s(e,o)),(0,h.Z)("positionSide",s(t,o)))))),(0,v.Z)(e)}),[o,n,s,u])},I=()=>{const[e]=(0,l.z4)(),t=(0,y.useSelector)((e=>e.loading.effects.position.queryPosition)),r=(0,y.useSelector)((e=>e.position.apiError)),a=(0,y.useDispatch)(),o=(0,i.useCallback)((()=>{t||a.position.queryPosition({symbol:e})}),[t,a.position]);return(0,i.useMemo)((()=>({loading:t,apiError:r,onRefresh:o})),[t,r,o])}},M3F1:(e,t,r)=>{"use strict";r.d(t,{ME:()=>i,hZ:()=>o,ZP:()=>n});var a=r("7uiG");const i=e=>e.posCalcData,o=e=>e.setPosCalcData,n=a.Gt},ebof:(e,t,r)=>{"use strict";r.d(t,{A4:()=>_,Mx:()=>Q,Yq:()=>ee,PH:()=>B,jK:()=>Y,qU:()=>te,ek:()=>X,v_:()=>J,iA:()=>D,Mn:()=>K});var a=r("VM/Z"),i=r("5vwO"),o=r("szIg"),n=r("GbrZ"),l=r("cm/A"),s=r("9h1+"),c=r("EPGa"),u=r("SJeZ"),d=r("T282");const{calculation:{abacus:{future:{model:m,calculateUmLiquidationPriceForSingleAssetMode:p},model:f,base:g}}}=d.com,{KotlinArrayList:y}=g,b=m.FutureBalance,h=m.FutureBracket,v=m.RiskBracket,x=f.FuturePosition;var S=r("tN1Z"),k=r("nFk2");const P=(0,S._)((e=>Object.values(e).map((e=>{const{asset:t,marginAvailable:r,initialMargin:a,maintenanceMargin:i,marginBalance:o,unrealizedProfit:n,walletBalance:l,crossWalletBalance:s}=e;return new b(t,Boolean(r),String(a),String(i),String(o),String(n),String(l),String(s))}))));var T=r("4c8F");const C=(0,S._)((e=>{const t=[];return Object.entries(e).forEach((([e,r])=>{if("boolean"===typeof r)return;const a=r.map((e=>new v(e.bracketMaintenanceMarginRate,e.bracketNotionalCap,e.bracketNotionalFloor,e.bracketSeq,e.cumFastMaintenanceAmount,e.maxOpenPosLeverage,e.minOpenPosLeverage))),i=new h(e,a);t.push(i)})),t}));var Z=r("eXOl"),M=r("wdcV");function I(e,t){const{askNotional:r,bidNotional:a,collateral:i=(null===t||void 0===t?void 0:t.marginAsset)||"",cumRealized:o,entryPrice:n,id:l,leverage:s,notionalValue:c,positionSize:u,symbol:d,markPrice:m,unrealizedProfit:p,isolated:f,isolatedWallet:g,adl:y,positionSide:b}=e;return new x(String(r),String(a),i,String(o),String(n),l,s,String(c),String(u),d,String(m),String(p),f,String(g),y,b)}const w=(0,S._)(((e,t)=>(0,M.J9)(e).map((e=>I(e,t[e.symbol])))));var E=r("M3F1"),A=r("FOuV"),N=r("IpC4"),O=r("GG68"),R=r("JlsY"),L=r("74Of");const{leverageInfo:V}=A.Fy,F={long:"buy",short:"sell"},D=({sideKey:e})=>{const t=(0,u.t2)(e,"symbol"),r=(0,u.t2)(e,"isolated"),a=(0,u.t2)(e,"isolatedWallet"),i=(0,u.t2)(e,"positionSize"),o=0===Number(i)&&r&&Number(a)<0,l=Number(i)>0?"long":"short",c=o?"liq":F[l],{leverageList:d={}}=(0,u.rf)()||{},m=d[t]||V.defaultVal,p=(0,s.iB)()[t],{getI18n:f}=(0,u.yk)();let g,y=t;return p&&(g=(0,n.H)(p,f),y=g.fullName),{color:c,symbolText:y,symbolName:g,leverage:m}},_=({sideKey:e})=>{const t=(0,u.t2)(e,"symbol"),r=(0,u.t2)(e,"entryPrice"),a=(0,s.iB)()[t]||{},{pricePrecision:i}=a;return{formatedEntryPrice:(0,l.uf)(r,i)}},B=({sideKey:e})=>{const t=(0,u.t2)(e,"symbol"),r=(0,u.t2)(e,"markPrice"),a=(0,s.iB)()[t]||{},{pricePrecision:i}=a;return{formatedMarkPrice:(0,l.uf)(r,i)}},z=({sideKey:e,columnKey:t=""})=>{const r=function(){const e=(0,k.s)();return P(e)}(),a=function(){const e=(0,T.G)();return C(e)}(),i=(()=>{const e=(0,o.useSelector)((e=>e.position.positionMap)),t=(0,Z.Vh)();return w(e,t)})(),n=(e=>{const t=(0,o.useSelector)((e=>e.position.positionMap))[e],r=(0,Z.Vh)();return t?I(t,r[t.symbol]):null})(e),c=(0,u.t2)(e,"symbol"),d=(0,E.ZP)(E.hZ),m=(0,s.iB)()[c]||{},{pricePrecision:f}=m;let g=0;const y=(0,o.useSelector)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),b=(0,o.useSelector)((e=>e.loading.effects.preference.getAssetMode));y||b||!n||(g=((...e)=>{let t=0;try{t=p(...e)}catch(r){console.log(r)}return t})(n,i,r,a));const h=g>0?(0,l.uf)(g,f):"-";return t&&d(e,t,g),{liquidationPrice:g,formatedLiqPrice:h}},K=({sideKey:e})=>{var t,r;const a=(0,u.t2)(e,"symbol"),i=(0,u.t2)(e,"positionSize"),o=(0,u.t2)(e,"positionSide"),n=(0,s.iB)()[a]||{},{pricePrecision:d}=n,{preOrders:m}=(0,s.E)(),p=Number(i),f={};m.forEach((e=>{const t=!0===e.closePosition,r=a===e.symbol,i=o===e.positionSide,n=p<0&&"BUY"===e.side||p>0&&"SELL"===e.side;t&&r&&i&&n&&(e.type===c.Jm.TAKE_PROFIT_MARKET&&(f.tp=e),e.type===c.Jm.STOP_MARKET&&(f.sl=e))}));const g=null!==f&&void 0!==f&&null!==(t=f.tp)&&void 0!==t&&t.stopPrice?(0,l.uf)(f.tp.stopPrice,d):"--",y=null!==f&&void 0!==f&&null!==(r=f.sl)&&void 0!==r&&r.stopPrice?(0,l.uf)(f.sl.stopPrice,d):"--";return{strategyOrders:f,formatedTPPrice:g,formatedSLPrice:y}};var q=r("Tfqf"),W=r("H3aL"),U=r("DCTW");const{leverageInfo:j}=A.Fy,$={long:"buy",short:"sell"},H=()=>{const e=(0,u.F)(),t=(0,s.iB)()||{};return e.map((e=>{var r;return(0,i.Z)((0,i.Z)({},e),{},{contractVal:null===(r=t[e.symbol])||void 0===r?void 0:r.contractVal})}))},G=(0,a.nM)(),J=e=>G?(({sideKey:e,columnKey:t=""})=>{const{getI18n:r}=(0,u.yk)(),a=(0,u.t2)(e,"symbol"),i=(0,u.t2)(e,"isolated"),o=(0,u.t2)(e,"isolatedWallet"),n=(0,u.t2)(e,"positionSize"),c=(0,u.cO)(e)||{},{lastPrice:d}=(0,u.zZ)({symbol:null===c||void 0===c?void 0:c.symbol}),m=(0,E.ZP)(E.hZ),p=Number(n),f=p>0?"long":"short",g=0===p&&i&&Number(o)<0?"liq":$[f],y=(0,s.iB)()[a]||{},{quantityPrecision:b,marginAsset:h="",equalQtyPrecision:v,contractVal:x=100}=y,{isCoinUnit:S}=(0,q.Q)(),k=p>0?"":"-",P=S?(0,W.unitChangeCoinQty)({quantity:Math.abs(p),contractVal:x,price:d,precision:v,format:!1}):p.toFixed(b),T=S?`${k}${P}`:(0,l.uf)(p,b),C=S?h:r("Cont",{defaultValue:"Cont"});return t&&m(e,t,Math.abs(S?Number(P):p)),{color:g,quantityAmount:P,formatedQuantityAmount:T,unit:C}})(e):(({sideKey:e,columnKey:t=""})=>{const r=(0,u.t2)(e,"symbol"),a=(0,u.t2)(e,"isolated"),i=(0,u.t2)(e,"isolatedWallet"),o=(0,u.t2)(e,"positionSize"),n=(0,u.cO)(e)||{},{lastPrice:c}=(0,u.zZ)({symbol:null===n||void 0===n?void 0:n.symbol}),d=(0,E.ZP)(E.hZ),m=Number(o),p=m>0?"long":"short",f=0===m&&a&&Number(i)<0?"liq":F[p],g=(0,s.iB)()[r]||{},{baseAsset:y="",pricePrecision:b=2,quantityPrecision:h=8,marginAsset:v=""}=g,{isCoinUnit:x}=(0,N.Q)(),S=m>0?"":"-",k=x?m.toFixed(h):(0,O.WA)({quantity:Math.abs(m),price:c,precision:b,format:!1}),P=x?(0,l.uf)(m,h):`${S}${k}`,T=x?y:v;return t&&d(e,t,Math.abs(x?m:Number(k))),{color:f,quantityAmount:k,formatedQuantityAmount:P,unit:T}})(e),Y=e=>G?(({sideKey:e,columnKey:t=""})=>{const r=(0,u.t2)(e,"symbol"),a=(0,u.t2)(e,"positionSize"),i=(0,E.ZP)(E.hZ),o=(0,s.iB)()[r]||{},{contractVal:n}=o,c=Math.abs(a)*Number(n),d=n?(0,l.uf)(c,2):"-";return t&&i(e,t,c),{notionalSize:c,formattedNotionalSize:d,unit:"USD"}})(e):(({sideKey:e,columnKey:t=""})=>{const r=(0,u.t2)(e,"symbol"),a=(0,u.t2)(e,"positionSize"),i=(0,u.t2)(e,"markPrice"),o=(0,E.ZP)(E.hZ),n=(0,s.iB)()[r]||{},{quoteAsset:c=""}=n,d=Math.abs(a)*i,m=(0,l.uf)(d,2);return t&&o(e,t,d),{notionalSize:d,formattedNotionalSize:m,unit:c}})(e),Q=e=>G?(({sideKey:e,columnKey:t=""})=>{const r=(0,u.KQ)(),a=(0,u.Gf)(),o=H(),n=(0,u.cO)(e)||{},c=(0,E.ZP)(E.hZ),{symbol:d,isolated:m,isolatedWallet:p=0,positionSide:f}=n,g=(0,s.iB)()[d]||{},{marginAsset:y,pricePrecision:b,contractVal:h}=g,v=(0,i.Z)((0,i.Z)({},n),{},{contractVal:h}),x=r[y]||{},{crossWalletBalance:S=0}=x,k=(null===a||void 0===a?void 0:a[d])||[],P=!m&&f&&"BOTH"!==f,T=m?p:S;let C=0;if(!m){const e=o.filter((e=>e.marginAsset===y)).filter((e=>!(null!==e&&void 0!==e&&e.isolated))).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==d));C=(0,U.zW)(e,a)-(0,U.ot)(e)}let Z,M,I=0;if(P){const e=o.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===d&&"BOTH"!==r&&r!==f}))[0]||{positionSize:0,entryPrice:0};Z="LONG"===f?v:e,M="SHORT"===f?v:e}I=P&&Z.positionSize&&M.positionSize?(0,U.ST)(k,T,C,Z,M,v):(0,U.W8)(k,T,C,v),I=I<0?0:I;const w=I>0?(0,l.uf)(I,b):"-";return t&&c(e,t,I),{liquidationPrice:I,formatedLiqPrice:w}})(e):z(e),X=e=>G?(({sideKey:e,columnKey:t=""})=>{const r=(0,u.KQ)(),a=(0,u.Gf)(),o=H(),n=(0,u.cO)(e)||{},{symbol:l,isolated:c}=n,d=(0,s.iB)()[l]||{},m=(0,E.ZP)(E.hZ),{marginAsset:p,contractVal:f}=d;let g;if(c){const{isolatedWallet:e=0,symbol:t}=n,r=(null===a||void 0===a?void 0:a[t])||[],o=(0,U.SH)(r,(0,i.Z)((0,i.Z)({},n),{},{contractVal:f})),l=(0,U.nn)((0,i.Z)((0,i.Z)({},n),{},{contractVal:f}));g=(0,U.Vo)(o,e,l)}else{const e=r[p]||{},{crossWalletBalance:t=0}=e,i=o.filter((e=>e.marginAsset===p)).filter((e=>!(null!==e&&void 0!==e&&e.isolated))),n=(0,U.zW)(i,a),l=(0,U.ot)(i);g=(0,U.Vo)(n,t,l)}const y=Number(g)>80?"negative":"";return t&&m(e,t,Number(g)),{ratioColor:y,riskRatio:g}})(e):(({sideKey:e,columnKey:t=""})=>{const r=(0,u.KQ)(),a=(0,u.Gf)(),i=(0,u.F)(),n=(0,u.cO)(e)||{},{symbol:l,isolated:c}=n,d=(0,s.iB)()[l]||{},m=(0,E.ZP)(E.hZ),{marginAsset:p}=d;let f;if(c){const{isolatedWallet:e=0,symbol:t}=n,r=(null===a||void 0===a?void 0:a[t])||[],i=(0,L.SH)(r,n),o=(0,L.nn)(n);f=(0,L.Vo)(i,e,o)}else{const e=r[p]||{},{crossWalletBalance:t=0}=e,o=i.filter((e=>e.marginAsset===p)).filter((e=>!(null!==e&&void 0!==e&&e.isolated))),n=(0,L.zW)(o,a),l=(0,L.ot)(o);f=(0,L.Vo)(n,t,l)}const g=(0,o.useSelector)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),y=(0,o.useSelector)((e=>e.loading.effects.preference.getAssetMode));(g||y)&&(f="0.00");const b=Number(f)>80?"negative":"";return t&&m(e,t,Number(f)),{ratioColor:b,riskRatio:f}})(e),ee=e=>G?(({sideKey:e,columnKey:t=""})=>{const r=(0,R.c)(),a=(0,u.cO)(e)||{},i=(0,E.ZP)(E.hZ),{symbol:o,isolated:n,isolatedWallet:c=0,positionSize:d,markPrice:m}=a,{leverageList:p={}}=(0,u.rf)()||{},f=p[o]||j.defaultVal,g=(0,s.iB)()[o]||{},{marginAsset:y="",contractVal:b=100}=g,h=(0,U.fS)({positionSize:d,markPrice:m,contractVal:b})*(0,U.yh)(f),v=n?c:h,x=`${(0,l.GW)(v,r,!0)} ${y}`;return t&&i(e,t,v),{margin:v,formatedMargin:x}})(e):(({sideKey:e,columnKey:t=""})=>{const r=(0,R.c)(),a=(0,u.cO)(e)||{},i=(0,E.ZP)(E.hZ),{symbol:o,isolated:n,isolatedWallet:c=0}=a,{leverageList:d={}}=(0,u.rf)()||{},m=d[o]||V.defaultVal,p=(0,s.iB)()[o]||{},{marginAsset:f=""}=p,g=(0,L.fS)(a)*(0,L.yh)(m),y=n?c:g,b=`${(0,l.uf)(y,r)} ${f}`;return t&&i(e,t,y),{margin:y,formatedMargin:b}})(e),te=e=>G?(({sideKey:e,columnKey:t=""})=>{const{useLastPrice:r}=(0,u.F7)(),a=(0,R.c)(),o=(0,u.cO)(e)||{},n=(0,E.ZP)(E.hZ),{symbol:c,positionSize:d,markPrice:m}=o,{leverageList:p={}}=(0,u.rf)()||{},f=p[c]||j.defaultVal,{lastPrice:g}=(0,u.zZ)({symbol:c}),y=(0,s.iB)()[c]||{},{marginAsset:b="",contractVal:h=100}=y,v=(0,U.fS)({positionSize:d,markPrice:m,contractVal:h})*(0,U.yh)(f),x=(0,U.nn)((0,i.Z)((0,i.Z)({},o),{},{contractVal:h,lastPrice:g}),r),S=0===Number(x)?"":Number(x)>0?"buy":"sell",k=0===Number(x)?"":Number(x)>0?"+":"",P=`${k}${(0,l.GW)(x,a,!0)} ${b} `,T=100*(x/v||0),C=`${k}${T.toFixed(2)}%`;return t&&n(e,t,T),{unrealizedPnl:x,formatedPnl:P,pnlColor:S,ROEVal:C}})(e):(({sideKey:e,columnKey:t=""})=>{const{useLastPrice:r}=(0,u.F7)(),a=(0,R.c)(),o=(0,u.cO)(e)||{},n=(0,E.ZP)(E.hZ),{leverageList:c={}}=(0,u.rf)()||{},d=c[null===o||void 0===o?void 0:o.symbol]||V.defaultVal,{lastPrice:m}=(0,u.zZ)({symbol:null===o||void 0===o?void 0:o.symbol}),p=(0,s.iB)()[null===o||void 0===o?void 0:o.symbol]||{},{marginAsset:f=""}=p,g=(0,L.fS)(o)*(0,L.yh)(d),y=(0,L.nn)((0,i.Z)((0,i.Z)({},o),{},{lastPrice:m}),r),b=0===Number(y)?"":Number(y)>0?"buy":"sell",h=Number(y)>0?"+":"",v=`${h}${(0,l.GW)(y,a,!0)} ${f}`,x=100*(y/g||0),S=`${h}${x.toFixed(2)}%`;return t&&n(e,t,x),{unrealizedPnl:y,formatedPnl:v,pnlColor:b,ROEVal:S}})(e)},LwXq:(e,t,r)=>{"use strict";r.d(t,{F:()=>n});var a=r("/SIk"),i=r("SJeZ"),o=r("lbaD");function n({symbol:e,quantity:t,isBuy:r,entryPrice:n=0,closedPrice:l=0,contractVal:s=100,isDelivery:c}){const u=(0,i.Wr)({symbol:e,isDelivery:c}),{askPrice:d=0,bidPrice:m=0}=u;return(0,a.useMemo)((()=>(0,o.k)({quantity:t,isBuy:r,entryPrice:n,closedPrice:l,contractVal:s,isDelivery:c,askPrice:d,bidPrice:m})),[d,m,l,s,n,r,c,t])}},Sdhy:(e,t,r)=>{"use strict";r.d(t,{e:()=>u,U:()=>d});var a=r("cm/A"),i=r("9h1+"),o=r("wdcV"),n=r("SJeZ"),l=r("M3F1"),s=r("74Of"),c=r("H8fa");const u=({sideKey:e,columnKey:t=""})=>{const r=(0,n.KQ)(),u=(0,n.Gf)(),d=(0,n.F)(),m=(0,n.cO)(e)||{},p=(0,l.ZP)(l.hZ),{symbol:f,positionSide:g}=m,y=(0,i.iB)()[f]||{},{marginAsset:b,pricePrecision:h}=y,v=r[b]||{},{crossWalletBalance:x=0}=v,S=(null===u||void 0===u?void 0:u[f])||[],{assetsRateEquity:k,assetsMM:P}=(0,n.Nx)(),T=(0,n.G8)(),C=T[b]||{},Z=((0,o.L6)(d)[b]||[]).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==f)),M=(0,s.zW)(Z,u),I=(0,s.ot)(Z);let w=0;Object.entries(k).forEach((([e,t])=>{e!==b&&(w+=t)})),Object.entries(P).forEach((([e,t])=>{const r=T[e]||{},{askRate:a=0}=r;w-=e!==b?t*a:M*a}));let E=0;if(g&&"BOTH"!==g){const e=d.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===f&&"BOTH"!==r&&r!==g}))[0]||{positionSize:0,entryPrice:0},t="LONG"===g?m:e,r="SHORT"===g?m:e;E=(0,c._O)({accEquityAndMMs:w,assetIndex:C,bracket:S,crossWalletBalance:x,smdsUPNL:I,longPosition:t,shortPosition:r,curPosition:m})}else E=(0,c.Dj)({accEquityAndMMs:w,assetIndex:C,bracket:S,crossWalletBalance:x,smdsUPNL:I,curPosition:m});const A=E>0?(0,a.uf)(E,h):"-";return t&&p(e,t,E),{liquidationPrice:E,formatedLiqPrice:A}},d=({sideKey:e,columnKey:t=""})=>{const r=(0,l.ZP)(l.hZ),{riskRatio:a}=(0,n.Nx)(),i=Number(a)>80?"negative":"";return t&&r(e,t,Number(a)),{ratioColor:i,riskRatio:a}}},"9am+":(e,t,r)=>{"use strict";r.d(t,{l:()=>s});var a=r("/SIk"),i=r("szIg"),o=r("SJeZ"),n=r("VM/Z"),l=r("IOB8");const s=()=>{const{0:e,1:t}=(0,a.useState)(!1),r=(0,i.useDispatch)(),s=(0,n.nM)(),{isError:c}=(0,i.useSelector)(l.Y),u=(0,o.Kc)("isError"),d=c||u,m=(0,a.useCallback)((async()=>{if(!e){t(!0);try{await r.balance.getBalance(s),await r.bracket.getBrackets()}catch(a){t(!1)}t(!1)}}),[r.balance,r.bracket,s,e]);return(0,a.useMemo)((()=>({showLiqRefresh:d,handleLiqRefresh:m})),[m,d])}},HIvd:(e,t,r)=>{"use strict";r.d(t,{Z:()=>nt});var a=r("5vwO"),i=r("/SIk"),o=r.n(i),n=r("szIg"),l=r("uZih"),s=r.n(l),c=r("m92i"),u=r("tSjq"),d=r("f36X"),m=r("TKP4"),p=r("9h1+"),f=r("6Afj"),g=r("VM/Z"),y=r("ckLu"),b=r("EPGa"),h=r("Wx6g"),v=r("FOuV"),x=r("SJeZ"),S=r("Z62D"),k=r("lbaD"),P=r("k/nb"),T=r("B+lg"),C=o().createElement;const Z=({visible:e,position:t,onClose:r})=>{const{sideKey:o,closeParams:l={},onConfirm:s}=t,{getI18n:c}=(0,x.yk)(),{orderConfirmation:u}=(0,x.F7)(),d=(0,n.useDispatch)(),m=(0,x.t2)(o,"symbol"),f=(0,x.t2)(o,"positionSize"),g=(0,x.t2)(o,"entryPrice"),{orderType:y,limitPrice:h,qty:v,quantity:Z}=l,M=(0,p.iB)()[m]||{},{isDelivery:I}=(0,i.useContext)(P.Z),w=f>0?"SELL":"BUY",E="BUY"===w?"buy":"sell",A=c(f>0?"CloseLong":"CloseShort"),N=y===b.Jm.MARKET,{contractVal:O}=M,{0:R,1:L}=(0,i.useState)(0);(0,i.useEffect)((()=>{if(e){(I?S.u:S.x)(m).then(((e={})=>{const{marketPNL:t,limitPNL:r}=(0,k.k)((0,a.Z)((0,a.Z)({},e),{},{quantity:Z,isBuy:f>0,entryPrice:g,closedPrice:h,contractVal:O,isDelivery:I}));L(N?t:r)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}}),[O,g,I,N,h,f,Z,m,e]);const V=(0,i.useCallback)((()=>{const e=(0,a.Z)((0,a.Z)({},u),{},{[y.toUpperCase()]:!1});d.preference.changeOrderConfirmation(e)}),[d.preference,u,y]);return C(T.Z,{symbol:m,title:A,color:E,isMarket:N,limitPrice:h,qty:v,isClose:!0,epnl:R,onClose:r,onConfirm:s,closeTip:V,orderSide:w})},M=o().memo(Z);var I=r("rjaD"),w=r("71uP"),E=r("J81Z"),A=r("a1YN"),N=r("wr3m"),O=r("Dq7L"),R=r("shek"),L=r("JlsY"),V=r("APA6"),F=r("n/Wb"),D=r("IxrC"),_=r("SeOy"),B=r("k4WF"),z=r("k2tD"),K=o().createElement;const q=({type:e,setType:t,maxAppend:r,maxRemovable:a,amount:o,setAmount:n,onConfirm:l,marginAsset:s})=>{const{getI18n:c}=(0,R.Z)(),{getI18n:u}=(0,x.yk)(),d=(0,L.c)(),m=(0,z.nH)(d),p="ADD"===e?u("maxAddable",{defaultValue:"Max addable"}):u("maxRemovable",{defaultValue:"Max removable"}),f="ADD"===e?r:a,g=`${c("amount",{defaultValue:"Amount"})}(${s})`,y=K(V.Z,{as:"span"},p,K(w.Z,{as:"span",color:"t.primary"},"\xa0",(0,z.GW)(f,d,!0),"\xa0",s)),b=(0,z.GW)(f,d,!1),h=Number(o)>Number(b),v=(0,i.useMemo)((()=>[{value:"ADD",text:u("add",{defaultValue:"Add"})},{value:"REMOVE",text:u("remove",{defaultValue:"Remove"})}]),[u]),S=K(V.Z,{sx:{position:"relative"}},K(V.Z,{bg:"line",width:"1px",height:"24px",sx:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"}}),K(V.Z,{width:"120px"},K(F.Z,{hideSearch:!0,variant:"clear",size:"lg",value:e,renderValue:e=>{const t=v.find((t=>t.value===e));if(t)return K(w.Z,{as:"span"},t.text)},onChange:e=>t(e)},v.map(((e,t)=>K(D.W,{key:t,value:e.value},e.text)))))),k=K(E.Z,{variant:"quiet",onClick:()=>n(b)},c("Max",{defaultValue:"Max"}));return K(_.Z,{variant:"filled",type:"number",label:g,extraInfo:y,prefix:S,suffix:k,step:m,value:o,error:h,onChange:e=>(0,B._p)(e,n,"",d),onKeyDown:e=>(0,B.f5)(e,l),onBlur:e=>(0,B.Y5)(e)})};var W=r("BLcC"),U=r("zKvp"),j=r("fi7b"),$=r("QlFx"),H=r("rdEq"),G=o().createElement;const J=({label:e="",labelSuffix:t="",value:r="",unit:a="",labelClassName:i="",valueClassName:o="",className:n=""})=>G("div",{className:`field ${n}`},G("div",{className:`label ${i}`},e,t),G("div",{className:`value ${o}`},r," ",a)),Y=({children:e})=>G(V.Z,{sx:{width:"282px",fontSize:"12px",lineHeight:"16px",fontFamily:"BinancePlex"}},e),Q=({panelType:e,data:t})=>{const r=(0,p.tZ)(),{t:a}=(0,x.$G)(),{getI18n:i}=(0,x.yk)(),{symbol:o,isolatedWallet:n,maxAppend:l,maxRemovable:s,liquidationPrice:c,quoteAsset:u,marginAsset:d="USDT",pricePrecision:m}=t,f=(0,L.c)(),g=G(W.Z,{sx:{color:"t.yellow"},href:`/${r}/support/faq/360038447311`,target:"_blank"});return"ADD"===e?(()=>{const e=`${i("currentlyMarginFor",{defaultValue:"Currently Margin for"})} ${(0,$.lE)(o,i)}`,t=(0,z.GW)(n,f,!0),r=i("maxAddable",{defaultValue:"Max addable"}),s=`${(0,z.GW)(l,f,!0)}`,p=G(H.m,{tip:G(Y,null,G(j.c,{t:a,i18nKey:(0,x.Gv)("maxAddableTip"),components:{jump:g},defaults:"Isolated position max addable amount is different from the available for order amount. More details are available on the <jump>Isolated transferrable margin calculations</jump>."})),hideUnderLine:!0,sx:{verticalAlign:"middle"},delay:1e3,placement:"top",arrow:!0},G(U.Z,{ml:"4px",size:16})),y=i("liqPriceAfterAdujst",{defaultValue:"Liq. Price after increase"}),b=c?(0,z.GW)(c,m,!0):"-";return G(V.Z,{mt:"md"},G(J,{label:e,value:t,unit:d}),G(J,{label:r,labelSuffix:p,value:s,unit:d}),G(J,{label:y,value:b,unit:u}))})():(()=>{const e=i("assignedMargin",{defaultValue:"Currently Assigned Margin"}),t=(0,z.GW)(n,f,!0),r=i("maxRemovable",{defaultValue:"Max removable"}),o=(0,z.GW)(s,f,!0),l=G(H.m,{tip:G(Y,null,G(j.c,{t:a,i18nKey:(0,x.Gv)("maxRemovableTip"),components:{jump:g},defaults:"Unrealized profit cannot be transferred from the isolated position. More details are available on <jump>Isolated transferrable margin calculations</jump>."})),hideUnderLine:!0,sx:{verticalAlign:"middle"},delay:1e3,placement:"top",arrow:!0},G(U.Z,{ml:"4px",size:16})),p=i("liqPriceAfterReduction",{defaultValue:"Liquidation Price after reduction"}),y=c?(0,z.GW)(c,m,!0):"-";return G(V.Z,{mt:"md"},G(J,{label:e,value:t,unit:d}),G(J,{label:r,labelSuffix:l,value:o,unit:d}),G(J,{label:p,value:y,unit:u}))})()},X=o().memo(Q);var ee=o().createElement;const te={position:"relative",padding:"0px 24px 24px 24px",width:["calc(100vw - 32px)","384px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{fontSize:"20px",height:"64px",py:"20px",color:"t.primary"},".field":{fontFamily:"Binance PLEX",display:"flex",justifyContent:"space-between",mt:"12px",letterSpacing:"0.16px",fontSize:"14px",lineHeight:"20px",fontWeight:"normal",minHeight:"20px",".label":{color:"t.third",flex:"auto"},".value":{color:"t.primary",textAlign:"right",flex:"none"}}},re={ADD:1,REMOVE:2},ae=({visible:e,position:t,onClose:r})=>{var o;const{enqueueNotification:n}=(0,N.Z)(),{sideKey:l}=t,{getI18n:s}=(0,R.Z)(),{getI18n:c}=(0,x.yk)(),u=(0,x.G3)(),{0:d,1:m}=(0,i.useState)("ADD"),{0:f,1:g}=(0,i.useState)(""),y="ADD"===d?Number(f):-Number(f),b=(0,x.t2)(l,"symbol"),h=(0,x.t2)(l,"positionSide"),v=(null===(o=(0,p.iB)())||void 0===o?void 0:o[b])||{},{marginAsset:S="",contractVal:k=100}=v,P=(0,i.useMemo)((()=>u?{symbol:b,marginAsset:S,contractVal:k,positionSide:h}:{symbol:b,marginAsset:S,positionSide:h}),[u,b,S,k,h]);(0,i.useEffect)((()=>{l||g("")}),[l]);const T=(0,x.Qd)((0,a.Z)((0,a.Z)({},P),{},{delta:y})),C=async()=>{if(!f)return;const e={type:re[d],symbol:b,amount:f,positionSide:h};(0,O.c)(e,{}).then((e=>{const{success:t}=e;t&&n({message:c("changeMarginSuccess",{defaultValue:"Position margin adjustment failed"}),variant:"success"})})).catch((()=>{})).finally((()=>r())).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))};return ee(I.Z,{visible:!!l&&e,sx:te,onMaskClick:()=>r()},ee(w.Z,{variant:"title6",className:"title"},s("adjust-margin",{defaultValue:"Adjust Margin"})),ee(A.Z,{color:"t.third",sx:{position:"absolute",top:"20px",right:"24px",cursor:"pointer"},onClick:r}),ee(q,{type:d,setType:m,maxAppend:T.maxAppend,maxRemovable:T.maxRemovable,amount:f,setAmount:g,onConfirm:C,marginAsset:S}),ee(X,{panelType:d,data:T}),ee(E.Z,{sz:"l",mt:"24px",width:1,onClick:C},c("confirmBtn",{defaultValue:"Confirm"})))},ie=o().memo(ae);var oe=r("MwrP"),ne=r.n(oe),le=r("NQFm"),se=r("xpNn"),ce=r("ebof"),ue=o().createElement;const de=({label:e,children:t})=>ue(m.Z,{sx:{justifyContent:"space-between",fontSize:"14px",lineHeight:"16px",height:"24px",alignItems:"center"}},ue(w.Z,{color:"t.third"},e),ue(m.Z,null,t)),me=o().memo(de);var pe=o().createElement;const fe=({sideKey:e})=>{const{getI18n:t}=(0,R.Z)(),{symbolText:r,leverage:a}=(0,ce.iA)({sideKey:e}),i=(0,x.t2)(e,"positionSize"),o=(0,x.t2)(e,"positionSide"),n=i>0?"buy":"sell";let l="";return"LONG"===o?l=t("psLong",{defaultValue:"Long"}):"SHORT"===o&&(l=t("psShort",{defaultValue:"Short"})),pe(me,{label:t("symbol",{defaultValue:"Symbol"})},pe(w.Z,{color:n},r," ",l," ",a,"x"))},ge=o().memo(fe);var ye=o().createElement;const be=({sideKey:e,quoteAsset:t})=>{const{getI18n:r}=(0,R.Z)(),{formatedEntryPrice:a}=(0,ce.A4)({sideKey:e});return ye(me,{label:r("entryPrice",{defaultValue:"Entry Price"})},ye(w.Z,{sx:{color:"t.primary"}},a," ",t))},he=o().memo(be);var ve=o().createElement;const xe=({sideKey:e,quoteAsset:t})=>{const{getI18n:r}=(0,R.Z)(),{formatedMarkPrice:a}=(0,ce.PH)({sideKey:e});return ve(me,{label:r("markPrice",{defaultValue:"Mark Price"})},ve(w.Z,{sx:{color:"t.primary"}},a," ",t))},Se=o().memo(xe);var ke=r("w2aK"),Pe=r("O94r"),Te=r.n(Pe),Ce=r("c4mN"),Ze=r("Rdst"),Me=r("cm/A"),Ie=r("8uyB"),we=r("jQmP"),Ee=r("7Q68");var Ae=o().createElement;const{LAST_PRICE:Ne}=v.gu,{TAKE_PROFIT_MARKET:Oe,STOP_MARKET:Re}=b.Jm,Le=o().memo((({i18nType:e,stopIndex:t})=>{const{getI18n:r}=(0,x.yk)();return Ae(m.Z,{alignItems:"center",color:"t.third",pl:"8px"},e,"QUOTE"!==t&&Ae(H.m,{tip:r("roe-stop-tip")},Ae(Ce.Z,{size:16,ml:"4px"})))})),Ve={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",".filter-option":{padding:"10px 16px",color:"t.primary","&:hover":{bg:"line"},"&.active":{color:"t.yellow"},fontSize:"14px"}},Fe=o().memo((({quoteAsset:e,stopIndex:t,changeStopIndex:r})=>{var a;const{getI18n:i}=(0,x.yk)(),o=[{label:e,value:"QUOTE"},{label:`%${i("calculate-ROE")}`,value:"ROE"}];return Ae(ke.ZP,{trigger:"hover",overlay:Ae(V.Z,{sx:Ve},o.map((({label:e,value:a})=>Ae("div",{className:Te()({"filter-option":!0,active:a===t}),key:a,onClick:()=>{a!==t&&r(a)}},e))))},Ae(m.Z,{alignItems:"center",color:"t.third"},null===(a=o.find((e=>e.value===t)))||void 0===a?void 0:a.label,Ae(Ze.Z,{ml:"4px",color:"t.third",size:16})))})),De=({sideKey:e,order:t,type:r,cancelOrder:a,price:o,changePrice:n,workingType:l,changeWorkingType:s})=>{var c;const{getI18n:u}=(0,R.Z)(),{getI18n:d}=(0,x.yk)(),f=(0,L.c)(),g=(0,x.t2)(e,"symbol"),y=Number((0,x.t2)(e,"positionSize")),b=(0,x.NJ)(g),h=y>0?1:-1,v=(0,x.t2)(e,"entryPrice"),S=(null===(c=(0,p.iB)())||void 0===c?void 0:c[g])||{},{quoteAsset:k,marginAsset:T="",tickSize:C,pricePrecision:Z,contractVal:M=100}=S,I=t?t.workingType:l,E=t?t.stopPrice:o,{isDelivery:A}=(0,i.useContext)(P.Z),N=(0,we.p)(C),O=C,F=(0,Me.uf)(E,Z),D=u(I===Ne?"lastPrice":"markPrice"),B=Ae(j.c,{i18nKey:(0,R.G)("takeProfitNodeTip"),defaults:"When <text>{{workingType}}</text> reaches <text>{{stopPrice}}</text>, it will trigger Take Profit Market order to close this position. Estimated PNL will be",values:{workingType:D,stopPrice:F},components:{text:Ae(w.Z,{as:"span",color:"t.primary"})}}),z=Ae(j.c,{i18nKey:(0,R.G)("stopLossNodeTip"),defaults:"When <text>{{workingType}}</text> reaches <text>{{stopPrice}}</text>, it will trigger Stop Market order to close this position. Estimated PNL will be",values:{workingType:D,stopPrice:F},components:{text:Ae(w.Z,{as:"span",color:"t.primary"})}}),K=u("takeProfit"===r?"takeProfit":"stopLoss"),q="takeProfit"===r?B:z,W=t&&(y>0&&t.type===Oe||y<0&&t.type===Re)?">=":"<=";let U="\u2014\u2014",$="takeProfit"===r?"buy":"sell",H="";if(""!==E){const e=(({stopPrice:e,entryPrice:t,positionSize:r,contractVal:a,isDelivery:i})=>i?r*a*(1/t-1/e):r*(e-t))({stopPrice:Number(E),entryPrice:v,positionSize:y,contractVal:M,isDelivery:A});Number.isFinite(e)&&(U=(0,Me.uf)(e,f)),$=e>0?"buy":"sell",H=e>0?"buy":e<0?"sell":""}const{0:G,1:J}=(0,i.useState)("QUOTE"),{0:Y,1:Q}=(0,i.useState)(""),X=(0,i.useCallback)((e=>{J(e),Q(""),n("")}),[]),ee="QUOTE"===G?o:Y,te=(0,i.useCallback)((e=>/[^\d|.|,|\u3002|e]/.test(e.key)&&e.preventDefault()),[]),re=(0,i.useCallback)((e=>{if("QUOTE"===G)(0,Ie._p)(e,n,"",N);else{const t=(0,Me.GW)(Math.abs(e.target.value),2),a="takeProfit"===r?Number(t):-Number(t),i=(({roe:e,entryPrice:t,side:r,leverage:a,isDelivery:i})=>i?t*e/100/(r*a)+t:t*r*a/(r*a-e/100))({roe:a,entryPrice:v,side:h,leverage:b,isDelivery:A});Q(a?String(a):""),n(i.toFixed(N))}}),[G,n,N,r,v,h,b,A]),ae=(0,i.useCallback)((()=>!!t&&a(t,r)),[a,t,r]),ie="ROE"===G&&(({type:e,side:t,roe:r,leverage:a,isDelivery:i})=>!i&&"takeProfit"===e&&1===t&&r/100>=a||!i&&"takeProfit"!==e&&-1===t&&r/100<=-a||!!(i&&"takeProfit"===e&&-1===t&&r/100>=a)||!!(i&&"takeProfit"!==e&&1===t&&r/100<=-a))({type:r,side:h,roe:Number(Y),leverage:b,isDelivery:A}),oe="takeProfit"===r?d("less-than-reo",{defaultValue:"The ROE% must be less than {{leveragedRoe}}%",leveragedRoe:100*b}):d("greater-than-reo",{defaultValue:"The ROE% must be greater than {{leveragedRoe}}%",leveragedRoe:-100*b});return Ae(V.Z,{py:"16px"},ne()(t)?Ae(m.Z,null,Ae(_.Z,{type:"number",step:"QUOTE"===G?O:.01,variant:"filled",textAlign:"right",prefix:Ae(Le,{i18nType:K,stopIndex:G}),placeholder:Number(0).toFixed(Z),suffix:Ae(Fe,{stopIndex:G,changeStopIndex:X,quoteAsset:k}),value:ee,error:ie,onKeyPress:te,onChange:re,size:"md",boxProps:{sx:{flex:"auto",input:{pr:0}}}}),Ae(Ee.Z,{workingType:l,changeWorkingType:s})):Ae(me,{label:K},Ae(m.Z,{justifyContent:"end"},Ae(w.Z,{color:"t.primary"},`${D} ${W} ${F} ${k}`),Ae(w.Z,{sx:{ml:"sm",cursor:"pointer",color:"t.yellow200","&:hover":{color:"t.yellow300"}},onClick:ae},u("cancel")))),ie?Ae(V.Z,{sx:{mt:"xs",color:"sell",minHeight:"40px"}},oe):Ae(V.Z,{sx:{mt:"xs",width:"100%",fontSize:"12px",lineHeight:"20px",color:"t.third"}},q,Ae(w.Z,{as:"span",color:H}," ",U," ",T)))},_e=o().memo(De);var Be=o().createElement;const{MARK_PRICE:ze}=v.gu,{TAKE_PROFIT_MARKET:Ke,STOP_MARKET:qe}=b.Jm,We={position:"relative",padding:"20px 24px 24px 24px",width:["100%","464px"],height:["100%","auto"],maxHeight:["100%","600px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{fontSize:["16px","20px"],pb:"16px",color:"t.primary"},".info-block":{mt:"8px",".tpsl-max-qty-tip":{color:"t.primary",lineHeight:"20px",fontSize:"14px",".learn-more":{cursor:"pointer"}},".line":{height:"1px",bg:"line"}},".tpsl-tip":{color:"t.secondary",mt:"xs",fontSize:"12px"},".footer":{mt:"24px",display:"flex",position:["absolute","static"],bottom:["24px",null],width:["calc(100% - 48px)","100%"]}},Ue=({visible:e,position:t,onClose:r})=>{var a;const{sideKey:n=""}=t,l=(0,x.G3)(),{actionTpslConfirmModal:s}=(0,i.useContext)(P.Z),m=(0,x.t2)(n,"symbol"),f=(0,x.t2)(n,"positionSize"),g=(0,x.t2)(n,"positionSide"),h=(0,p.iB)()[m]||{},{quoteAsset:v,filters:S}=h,k=null===(a=S.find(le.vr))||void 0===a?void 0:a.maxQty,{strategyOrders:T}=(0,ce.Mn)({sideKey:n}),[C]=(0,x.kN)(),{0:Z,1:M}=(0,i.useState)(T.tp),{0:N,1:O}=(0,i.useState)(T.sl),{0:L,1:V}=(0,i.useState)(""),{0:F,1:D}=(0,i.useState)(ze),{0:_,1:B}=(0,i.useState)(""),{0:z,1:K}=(0,i.useState)(ze);(0,i.useEffect)((()=>{e&&(M(T.tp),O(T.sl),V(""),D(ze),B(""),K(ze))}),[e]);const{getI18n:q,i18n:{language:W}}=(0,R.Z)(),{getI18n:U}=(0,x.yk)(),{setMessageInfo:j}=(0,p.YT)(),{delOpenOrders:$}=(0,d.W)(),H=(0,i.useCallback)((async(e,t)=>{const{success:r,data:a,message:i}=await $(e);r&&null!==a&&void 0!==a&&a.orderId&&("takeProfit"===t&&M(void 0),"stopLoss"===t&&O(void 0)),r&&j({message:i||"success",variant:"success"})}),[$,j]),G=(0,i.useCallback)((async(e,t)=>{const r={symbol:m,side:f>0?"SELL":"BUY",positionSide:g,type:t,timeInForce:"GTE_GTC",quantity:0,stopPrice:e.stopPrice,workingType:e.workingType,closePosition:!0,placeType:"position"},a=Date.now(),{success:i,message:o,data:n}=await(0,u.cG)(r,{language:W});if(i)(0,y.jl)(l,null===n||void 0===n?void 0:n.clientOrderId,a),(0,y.MO)(l,null===n||void 0===n?void 0:n.clientOrderId);else{const e=(0,c.Z)();(0,y.jl)(l,e,a),(0,y.fS)(l,e)}i&&j({message:o||"success",variant:"success"})}),[l,m,W,f,g,j]),J=(0,i.useCallback)((()=>{const e=()=>{const e=ne()(Z)&&L&&F,t=ne()(N)&&_&&z,a=[];e&&a.push(G({stopPrice:L,workingType:F},Ke)),t&&a.push(G({stopPrice:_,workingType:z},qe)),Promise.all(a).finally(r)};C[b.Jm.STOP_MARKET]&&(L||_)?s({tpStopPrice:L,tpWorkingType:F,slStopPrice:_,slWorkingType:z,placeOrder:e}):e()}),[r,G,N,_,z,Z,L,F,C]);return Be(I.Z,{visible:!!n&&e,sx:We,onMaskClick:()=>r()},Be(w.Z,{variant:"headline6",className:"title"},q("tpSl",{defaultValue:"TP/SL for entire position"})),Be(A.Z,{sx:{position:"absolute",top:"22px",right:"24px",cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},onClick:r}),Be("div",{className:"info-block"},Math.abs(f)>Number(k)?Be("div",{className:"tpsl-max-qty-tip"},U("tpslMaxQty-tip",{defaultValue:"Due to the position size exceeds the maximum limit of market order, the Position Take-profit and Stop-loss will not be executed. Please use Limit order or TP/SL limit order."}),Be(w.Z,{variant:"addressLink",color:"t.yellow",mt:"5px",className:"learn-more",onClick:()=>(0,se.O)()},U("tpslMaxQty-learnMore",{defaultValue:"Learn more trading rules"}))):Be(o().Fragment,null,Be(ge,{sideKey:n}),Be(he,{sideKey:n,quoteAsset:v}),Be(Se,{sideKey:n,quoteAsset:v})),Be(_e,{sideKey:n,order:Z,cancelOrder:H,type:"takeProfit",price:L,changePrice:V,workingType:F,changeWorkingType:D}),Be("div",{className:"line"}),Be(_e,{sideKey:n,order:N,cancelOrder:H,type:"stopLoss",price:_,changePrice:B,workingType:z,changeWorkingType:K})),Be("div",{className:"tpsl-tip"},"\xb7 ",q("tpSlTip")),Be("div",{className:"footer"},Be(E.Z,{flex:"auto",onClick:J,height:"40px"},q("confirm",{defaultValue:"Confirm"}))))},je=o().memo(Ue);var $e=r("fDz0"),He=r("vzJZ"),Ge=r("BcM3"),Je=o().createElement;const Ye={position:"relative",padding:"20px 24px 24px 24px",width:["100%","384px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{marginBottom:"28px",color:"t.primary"},".field":{fontFamily:"Binance PLEX",display:"flex",justifyContent:"space-between",mt:"12px",letterSpacing:"0.16px",fontSize:"14px",lineHeight:"20px",fontWeight:"normal",minHeight:"20px",".label":{color:"t.third"},".value":{color:"t.primary",textAlign:"right"}},".symbol-value":{flexDirection:"row",".extra":{ml:"4px"}},".hint-block":{color:"t.secondary",mt:"16px",py:"16px",fontSize:"12px",lineHeight:"16px",borderTop:"0.5px solid",borderTopColor:"line",".show-again-hint":{display:"flex",mt:"16px",cursor:"pointer"}},".footer":{display:"flex",".cancel":{flex:1,letterSpacing:"0.16px",mr:"8px",py:"10px"},".confirm":{flex:1,width:"164px",letterSpacing:"0.16px",py:"10px"}}},Qe=({label:e,value:t})=>Je("div",{className:"field"},Je("div",{className:"label"},e),Je("div",{className:"value"},t)),Xe=({sideKey:e,tpStopPrice:t,slStopPrice:r,tpWorkingType:a,slWorkingType:n,placeOrder:l,onClose:s,afterConfirm:c,visible:u})=>{const{0:d,1:m}=(0,i.useState)(!1),{isMobile:f}=(0,p.Fs)(),g=(0,x.IV)(),{getI18n:y}=(0,x.yk)(),h=y("tradeHistory-positions-markPriceTitle"),S=y("lastPrice"),k=a===v.gu.LAST_PRICE?S:h,P=n===v.gu.LAST_PRICE?S:h,T=(0,x.t2)(e,"symbol"),C=(0,x.t2)(e,"positionSize"),Z=(0,p.iB)()[T]||{},M=C>0,{quoteAsset:A}=Z,N=`${k} ${M?">=":"<="} ${t} ${A}`,O=`${P} ${M?"<=":">="} ${r} ${A}`,{symbolText:R,symbolName:L}=(0,ce.iA)({sideKey:e}),F=(0,i.useCallback)((async()=>{d&&g({[b.Jm.STOP_MARKET]:!1}),l(),c(),s()}),[d,l,g,c]),D=Je(o().Fragment,null,Je(w.Z,{variant:"title6",className:"title"},y("confirm-position-tpsl",{defaultValue:"Confirm Position TP/SL"})),Je(Qe,{label:y("symbol",{defaultValue:"Symbol"}),value:Je(Ge.O,{className:"symbol-value",symbolName:L,fallbackText:R})}),t&&Je(Qe,{label:y("takeProfit",{defaultValue:"Take Profit"}),value:N}),r&&Je(Qe,{label:y("stopLoss",{defaultValue:"Stop Loss"}),value:O}),Je("div",{className:"hint-block"},"\xb7 ",y("tpsl-confirm-hint",{defaultValue:"The order will be rejected if the amount of position exceeds the limit of the Max Market Order Qty."}),Je("label",{className:"show-again-hint"},Je($e.Z,{onChange:()=>{m(!d)}}),y("dontAskAgain",{defaultValue:"Don\u2019t ask me again"}))),Je("div",{className:"footer"},Je(E.Z,{colorStyle:"secondary",onClick:()=>{m(!1),s()},className:"cancel"},y("cancelBtnText",{defaultValue:"Cancel"})),Je(E.Z,{colorStyle:"primary",className:"confirm",onClick:F},y("confirmBtn"))));return f?Je(He.Z,{direction:"bottom",visible:u,outerClick:s,maskBg:"dialog.mask"},Je(V.Z,{sx:Ye},D)):Je(I.Z,{visible:u,sx:Ye,onMaskClick:s},D)};var et=r("8LtS"),tt=o().createElement;const rt=(0,f.ck)("mobile",(()=>Promise.all([r.e(6374),r.e(3712),r.e(162)]).then(r.bind(r,"QUrc")))),at=(0,f.ck)("pc",(()=>Promise.all([r.e(6374),r.e(3712),r.e(5773)]).then(r.bind(r,"TigS")))),it=(0,g.nM)(),ot=()=>{const e=(0,n.useSelector)((e=>e.loading.effects.position.queryPosition)),{getI18n:t,i18n:r}=(0,R.Z)(),l=(0,n.useDispatch)(),{getI18n:f}=(0,x.yk)(),[S,{onCheckHeader:k,onSortHeader:T}]=(0,et.g4)({getFutI18n:f}),{preOrders:C=[]}=(0,p.E)(),{delOpenOrders:Z}=(0,d.W)(),{assetMode:I}=(0,x.F7)(),w=(0,x.Dj)(),{setMessageInfo:E}=(0,p.YT)(),[A]=(0,p.z4)(),{0:N,1:O}=(0,i.useState)(""),{0:L,1:V}=(0,i.useState)(!1),{0:F,1:D}=(0,i.useState)({}),{0:_,1:B}=(0,i.useState)({tpWorkingType:v.gu.MARK_PRICE,tpStopPrice:"",slWorkingType:v.gu.MARK_PRICE,slStopPrice:"",placeOrder:()=>{}}),{curLeverage:z}=(0,x.rf)(),{language:K="en"}=r,q=(0,x.d0)(it),W=!e&&0===w.length;(0,i.useEffect)((()=>{if(I&&!it)return l.assetIndex.getAssetIndex(),(0,g.l6)(!0).getAssetIndexAllStream().subscribe((e=>{l.assetIndex.mergeState(e)}))}),[l.assetIndex,I]);const U=(0,i.useCallback)((()=>{O(""),D({})}),[O,D]),j=(0,i.useCallback)((e=>{O("ADJUST_MARGIN"),D({sideKey:e})}),[O,D]),$=(0,i.useCallback)((e=>{O("TP_SL"),D({sideKey:e})}),[O,D]),H=(0,i.useCallback)(((e,t,r)=>{O("ORDER_CONFIRM"),D({sideKey:e,closeParams:t,onConfirm:r})}),[O,D]),G=(0,i.useCallback)((e=>{V(!0),B(e)}),[O,B]),J=(0,x.h5)(),Y=(0,i.useCallback)((e=>{const{price:t,positionSide:r,type:i,quantity:o,symbol:n}=e,l=i===b.Jm.MARKET;if(!l&&!t)return Promise.resolve();const{valid:d,message:m}=J(o,{reduceOnly:!0,price:t,symbol:n,messageType:"position-toast"});if(!d)return void E({message:m,variant:"error"});const p={leverage:z,timeInForce:v.rb.GTC,reduceOnly:!0};let g=(0,a.Z)((0,a.Z)({},e),p);s()(g,"buyQty","sellQty"),l&&(g.newOrderRespType="RESULT",g=s()(g,"price","timeInForce")),"LONG"!==r&&"SHORT"!==r||(g=s()(g,"reduceOnly"));const h=Date.now();return(0,u.cG)((0,a.Z)((0,a.Z)({},g),{},{placeType:"position"}),{language:K}).then((e=>{const{success:t,message:r,data:a}=e||{};if(t&&!r)(0,y.jl)(it,null===a||void 0===a?void 0:a.clientOrderId,h),(0,y.MO)(it,null===a||void 0===a?void 0:a.clientOrderId),E({message:f("order-submitted",{defaultValue:""}),variant:"success"});else{const e=(0,c.Z)();(0,y.jl)(it,e,h),(0,y.fS)(it,e)}return Promise.resolve(a)})).catch((e=>{"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[z,K,E,f,J]),Q=(0,i.useCallback)((e=>{const t=C.filter((t=>(null===t||void 0===t?void 0:t.orderId)===e));return 1===t.length?Z(t[0]):Promise.resolve()}),[Z,C]),X=(0,i.useMemo)((()=>({actionAdjustMarginModal:j,actionTpslModal:$,actionOrderConfirmModal:H,actionCancelOrder:Q,actionPlaceOrder:Y,actionTpslConfirmModal:G,changeSymbol:q,isDelivery:it,headers:S})),[j,$,H,Q,Y,G,q,S]);return tt(P.Z.Provider,{value:X},tt(m.Z,{sx:{flexDirection:"column",height:"100%",pb:[0,0,"xs"],px:"sm"}},tt(h.Z,null,(({isMobile:t,isIPad:r})=>tt(o().Fragment,null,r?tt(rt,{isMobile:t,isEmpty:W,loading:e,data:w}):tt(at,{headers:S,onCheckHeader:k,onSortHeader:T,data:w,loading:e}),"ADJUST_MARGIN"===N&&tt(ie,{visible:!0,position:F,onClose:U}),"ORDER_CONFIRM"===N&&tt(M,{visible:!0,position:F,onClose:U}),"TP_SL"===N&&tt(je,{visible:!0,position:F,onClose:U}),tt(Xe,Object.assign({visible:L,sideKey:null===F||void 0===F?void 0:F.sideKey},_,{onClose:()=>V(!1),afterConfirm:U})))))))},nt=o().memo(ot)},uefD:(e,t,r)=>{"use strict";r.d(t,{G4:()=>i,w_:()=>n,y_:()=>l,Do:()=>s});var a=r("5vwO");const i={symbol:130,size:90,notionalSize:110,entryPrice:100,markPrice:100,liquidationPrice:90,marginRatio:110,margin:90,pnl:145,adl:75,closePosition:235,tpSl:130},o=e=>({width:`${e}px`,flex:`1 0 ${e}px`}),n={flexDirection:"column",height:"100%",flex:"1 0",overflowX:"auto",overflowY:"hidden",".action-bar":{display:"flex",alignItems:"center",justifyContent:"flex-end",position:"absolute",top:0,right:"16px",zIndex:"999",height:"40px","&.fullscreen":{right:"12px"}},".position-row":{my:0,py:0,display:"flex",alignItems:"center",flex:"none",color:"t.secondary",fontSize:[0],cursor:"auto",width:"100%",height:"40px",boxSizing:"border-box",borderBottom:"1px solid",borderBottomColor:"newLine","&.header":{height:"32px"},"& .header-item":{display:"flex",alignItems:"center","& .drag-icon":{display:"none",ml:"4px",color:"t.third",cursor:"move","&:hover":{color:"t.primary"}},"& .rank-icon":{display:"none",ml:"2px",transform:"scale(1.6)",pointerEvents:"none",flex:"none"},"&:hover .drag-icon, &:hover .rank-icon":{display:"inline"},"&.show-ranking .rank-icon":{display:"inline"}},"&.body":{":hover":{backgroundColor:"bg3",".symbol":{color:"t.yellow",".symbolRightArrow":{display:"block"}}},".symbol":{display:"flex",alignItems:"center",cursor:"pointer",".symbolRightArrow":{display:"none"},".bar":{width:4,height:"39px",mr:"4px","&-buy":{bg:"buy"},"&-sell":{bg:"sell"},"&-liq":{bg:"t.secondary"}},".leverage":{color:"t.yellow",bg:"tagBg",fontSize:"12px",ml:"4px",borderRadius:"2px",px:"minor"}},".size":{"&-buy":{color:"t.buy"},"&-sell":{color:"t.sell"},"&-liq":{color:"t.secondary"}},".liquidationPrice":{color:"t.emphasize",".liqRefresh":{cursor:"pointer"}},".marginRatio":{"&-negative ":{color:"negative"}},".margin":{display:"flex",alignItems:"center","&-text":{whiteSpace:"nowrap",mr:"4px"},"&-icon-container":{position:"relative",".red-point":{width:"6px",height:"6px",bg:"sell",borderRadius:"50%",top:"-3px",right:"-3px",position:"absolute"}}},".pnl":{display:"flex",alignItems:"center","&-buy ":{color:"t.buy"},"&-sell ":{color:"t.sell"}},".tpSl":{display:"flex",alignItems:"center","&-text":{mr:"4px"}}},".symbol":(0,a.Z)({},o(i.symbol)),".size":(0,a.Z)({},o(i.size)),".notionalSize":(0,a.Z)({},o(i.notionalSize)),".entryPrice":(0,a.Z)({},o(i.entryPrice)),".markPrice":(0,a.Z)({},o(i.markPrice)),".liquidationPrice":(0,a.Z)({},o(i.liquidationPrice)),".marginRatio":(0,a.Z)({},o(i.marginRatio)),".margin":(0,a.Z)({},o(i.margin)),".pnl":(0,a.Z)({},o(i.pnl)),".adl":(0,a.Z)({},o(i.adl)),".closePosition":(0,a.Z)({},o(i.closePosition)),".tpSl":(0,a.Z)({},o(i.tpSl))}},l={minWidth:"228px",bg:"popupBg",borderRadius:"4px",px:"16px",py:"4px",maxHeight:"138px",overflow:"auto",boxShadow:"0px 0px 10px rgba(0,0,0,0.3)",".order":{color:"t.primary",fontSize:"12px",lineHeight:"16px",height:"32px",borderBottom:"solid 1px",borderColor:"line",justifyContent:"space-between",alignItems:"center","&:last-of-type":{border:"none"},".order-icon":{cursor:"pointer",color:"t.third","&:hover path":{fill:"t.primary"}}},".cancel":{color:"t.yellow200",cursor:"pointer",":hover":{color:"t.yellow300"}}},s={height:"24px",mt:0,input:{p:"4px",fontSize:"12px"}}},"h+3y":(e,t,r)=>{"use strict";r.d(t,{v:()=>m});var a=r("/SIk"),i=r.n(a),o=r("9h1+"),n=r("SJeZ"),l=r("7yXh"),s=r("TKP4"),c=r("J81Z"),u=i().createElement;const d={margin:"28px auto 0",flexDirection:"column",alignItems:"center",".tip":{fontSize:"14px",lineHeight:"20px",color:"t.primary"}},m=({apiError:e=!1,confirmTip:t="",onRefresh:r=(()=>{}),onConfirm:a=(()=>{}),children:i})=>{const m=(0,o.zk)("abnormal"),{getI18n:p}=(0,n.yk)();return m||!e?i:u(s.Z,{sx:d},u(l.Z,{size:48}),u("div",{className:"tip"},p("apiErrorRefreshTip",{defaultValue:"Data lost due to service malfunction, please refresh the page."}),u(c.Z,{variant:"quiet",onClick:r},p("refresh",{defaultValue:"Refresh"}))),u("div",{className:"tip"},t,u(c.Z,{variant:"quiet",onClick:a},p("confirmBtn",{defaultValue:"Confirm"}))))}},gDJg:(e,t,r)=>{"use strict";r.d(t,{G:()=>l});var a=r("/SIk"),i=r.n(a),o=r("7yXh"),n=i().createElement;const l=i().memo((()=>n("div",{style:{width:0,height:0,overflow:"hidden"}},n(o.Z,null))))},"B+lg":(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var a=r("rjaD"),i=r("71uP"),o=r("fDz0"),n=r("TKP4"),l=r("J81Z"),s=r("/SIk"),c=r.n(s),u=r("GbrZ"),d=r("cm/A"),m=r("9h1+"),p=r("jQmP"),f=r("4m5F"),g=r("SJeZ"),y=r("VM/Z"),b=r("FOuV"),h=c().createElement;const v={position:"relative",padding:"20px 24px 24px 24px",width:["calc(100vw - 32px)","384px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{marginBottom:"28px",color:"t.primary"},".field":{display:"flex",justifyContent:"space-between",mt:"12px",letterSpacing:"0.16px",fontSize:"14px",lineHeight:"20px",fontWeight:"normal",minHeight:"20px",".label":{color:"t.third","&.highlight":{color:"t.primary",fontWeight:"medium"}},".value":{color:"t.primary",textAlign:"right","&.buy":{color:"t.buy"},"&.sell":{color:"t.sell"},"&.highlight":{fontWeight:"medium"}}},".top-line":{pt:"4px",mt:"16px",borderTop:"0.5px solid",borderTopColor:"line"},".show-again":{display:"flex",mt:"22px",cursor:"pointer",color:"t.secondary",fontSize:"12px",lineHeight:"16px"}},x=({labelExtra:e="",label:t="",value:r="",unit:a="",labelClassName:i="",valueClassName:o="",className:n=""})=>h("div",{className:`field ${n}`},h("div",{className:`label ${i}`},t,e),h("div",{className:`value ${o}`},r," ",a||"")),S=(0,y.nM)(),k=({symbol:e,title:t,color:r,orderSide:c,amendedField:y,isMarket:k,limitPrice:P,qty:T,isClose:C,epnl:Z,onClose:M,onConfirm:I=(()=>{}),closeTip:w})=>{const{getI18n:E}=(0,g.yk)(),A=(0,m.iB)()[e]||{},{shortName:N}=(0,u.H)(A,E),{baseAsset:O,quoteAsset:R,marginAsset:L,quantityPrecision:V,pricePrecision:F,equalQtyPrecision:D=2,tickSize:_,marketTakeBound:B}=A,z=(0,p.p)(Number(_)),K=100*+B,{unit:q}=(0,g.F7)(),W=q===f.SW.coin,U=q===f.AO.usdt;let j,$=V;S?W?(j=O,$=D):j=E("Cont"):U?(j=L,$=z):j=O;const{0:H,1:G}=(0,s.useState)(!1),J=(0,s.useCallback)((async()=>{H&&w(),I(),M()}),[H,w,I,M]),Y=`(${E("amended",{defaultValue:"Amended"})})`;return h(a.Z,{visible:!0,onMaskClick:()=>M(),sx:v},h(i.Z,{variant:"title6",className:"title"},E("order-confirmation",{defaultValue:"Order Confirmation"})),h(x,{labelClassName:"highlight",label:N,value:t,valueClassName:r}),h(x,k?{label:E("priceTitle",{defaultValue:"Price"}),value:E("market",{defaultValue:"Market"})}:{label:E("priceTitle",{defaultValue:"Price"}),labelExtra:y===b.y3.PRICE||y===b.y3.BOTH?Y:"",value:(0,d.uf)(P,z),unit:R}),h(x,{label:E("orderQtyTitle",{defaultValue:"Order Qty"}),labelExtra:y===b.y3.QUANTITY||y===b.y3.BOTH?Y:"",value:(0,d.uf)(T,$),unit:j}),C&&h(x,{label:E("estimatedPNL",{defaultValue:"Estimated PNL"}),className:"top-line",value:(0,d.uf)(Z,F),unit:L}),k&&h(i.Z,{variant:"caption",mt:3,color:"t.sell"},E("orderFailHintV2",{value:K,defaultValue:`Your order will fail should the market price deviate from the marked price by more than ${K}%`})),h("label",{className:"show-again"},h(o.Z,{defaultChecked:H,onChange:()=>{G(!H)}}),E("dontAskAgain",{defaultValue:"Don\u2019t ask me again"})),h(n.Z,{mt:"19px",width:"100%"},h(l.Z,{colorStyle:"secondary",onClick:()=>M(),sx:{width:"164px",letterSpacing:"0.16px",mr:"8px",py:"10px"}},E("cancelBtnText",{defaultValue:"Cancel"})),h(l.Z,{colorStyle:r,onClick:J,sx:{width:"164px",letterSpacing:"0.16px",py:"10px"}},t)))},P=c().memo(k)},BcM3:(e,t,r)=>{"use strict";r.d(t,{O:()=>c});var a=r("GpFh"),i=r("/SIk"),o=r.n(i),n=r("APA6"),l=o().createElement;const s={display:"flex",flexDirection:"column",".pair":{fontWeight:"semibold"},".extra":{fontWeight:"normal"}},c=e=>{let{symbolName:t,fallbackText:r=""}=e,i=(0,a.Z)(e,["symbolName","fallbackText"]);return l(n.Z,Object.assign({__css:s},i),t?l(o().Fragment,null,l("div",{className:"pair"},t.symbol),l("div",{className:"extra"},`${t.contractTypeI18n} ${t.deliveryDateFormat}`)," "):r)}},C28W:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("c4mN"),i=r("/SIk"),o=r.n(i),n=r("EPGa"),l=r("rdEq"),s=r("SJeZ"),c=o().createElement;const u=({type:e,workingType:t,activatePrice:r,priceRate:i})=>{const{getI18n:o,i18n:{language:u}}=(0,s.yk)();if(e!==n.Jm.TRAILING_STOP_MARKET)return null;const d=o("trailing-stop-market-tip",{defaultValue:"Activation Price: {{activatePrice}}, Trigger Type: {{workingType}}, Callback Rate: {{priceRate}}%. ",activatePrice:Number(r)?Number(r):o("advancedStrategy-marketPrice"),workingType:t===n.HZ.LAST_PRICE?o("lastPrice"):o("tradeHistory-positions-markPriceTitle"),priceRate:i});return c(l.m,{hideUnderLine:!0,sx:{flex:"none"},learnMoreLink:`/${u}/support/faq/360042299292`,tip:d},c(a.Z,{size:16}))},d=o().memo(u)},HkAn:(e,t,r)=>{"use strict";r.d(t,{Xw:()=>s,Vr:()=>y,r5:()=>h,TG:()=>c,mz:()=>I,Vn:()=>T,aD:()=>k,zE:()=>p,iP:()=>v.i});r("TeNm");var a=r("szIg"),i=r("ZJL0"),o=r("VM/Z"),n=r("9h1+");function l(){const e=(0,a.useSelector)((e=>e.setting.color));return{[o.Pe]:[i.Wb,i.$_],[o.Qq]:[i.ZF,i.JR],[o.qo]:[i.fh,i.Xk]}[e]}function s(){const{isLight:e}=(0,n.Fg)(),[t,r]=l();return e?t:r}function c(){const[{kline:e},{kline:t}]=l();return[e,t]}var u=r("Bcqe"),d=r.n(u),m=r("/SIk");const p=(e,...t)=>{const r=(0,m.useRef)(((...e)=>{}));return r.current=e,(0,m.useCallback)(d()((function(...e){return r.current.apply(this,e)}),...t),[])};var f=r("wr3m"),g=r("LcTY");const y=()=>{const{enqueueNotification:e}=(0,f.Z)();(0,m.useEffect)((()=>g.T.on(g.F.NOTIFICATION,e)))};var b=r("X2Pf");function h(){const e=(0,n.tZ)();(0,m.useEffect)((()=>{(0,b.Wg)(e)}),[e])}var v=r("shUZ"),x=r("lk5g");const S="reConnected";function k(){(0,m.useEffect)((()=>((0,o.nM)()?(0,o.RU)():(0,o.BN)()).getSocketEventsStream().subscribe((({event:e,data:t})=>{e===S&&(0,x.gp)({t:"WS_attemptReconnect",attempts:t})}))),[])}r("qEuu");var P=r("SJeZ");const T=()=>{const e=(0,o.nM)()?"cm":"um";return{dfSource:e,pageName:`${e}_${(0,P.C3)()===o.UW?"full":"pro"}_trading`}};r("l4n0");var C=r("S24M");const Z=(0,o.nM)(),M={PERPETUAL:"perp",CURRENT_QUARTER:"qtr"},I=()=>{const e=Z?"cm":"um",{contractType:t="PERPETUAL",marginAsset:r="USDT"}=(0,n.j2)()||{},a=M[t],i="BUSD"===r?"_busd":"";(0,m.useEffect)((()=>{(0,C.j)("$pageview",{pageName:`${e}_trading_${a}${i}`})}),[a,e,i])}},TeNm:(e,t,r)=>{"use strict";r.d(t,{k:()=>m});var a=r("5vwO"),i=r("GpFh"),o=r("/SIk"),n=r("N8YU"),l=r("C4wm"),s=r("cm/A"),c=r("9h1+"),u=r("jQmP"),d=r("VM/Z");const m=(e=(0,d.l6)(!1),t,r,m)=>{const[p,f]=(0,c.z4)(),g=t||p,y=r||f,{loading:b,product:h}=(0,c.mC)(m),{tickers:v}=(0,n.s)(e),{low:x,close:S,high:k,open:P,quoteVolume:T,tickSize:C,volume:Z}=h,M=(0,o.useMemo)((()=>(0,u.p)(C)),[C]),I=v[g]||{},{lowPrice:w=x,lastPrice:E=S,highPrice:A=k,openPrice:N=P,volume:O=Z,quoteVolume:R=T}=I,L=(0,i.Z)(I,["lowPrice","lastPrice","highPrice","openPrice","volume","quoteVolume"]),{trades:V}=(0,l.y)({symbol:g,stream:e,limit:1}),{price:F=E}=V[0]||{},D=+F-+N,_=[D>0?"+":"",(N?D/+N*100:0).toFixed(2)].join("");return{loading:b,tickProps:(0,a.Z)((0,a.Z)({lowPrice:w,lastPrice:F,showPrice:(0,s.uf)(F,M),tk:M,highPrice:A,openPrice:N,quoteVolume:R,volume:O},L),{},{diffPrice:D,difference:_,tickSize:C,symbols:y,bigThan:(B=F,z=N,+B>=+z)})};var B,z}},shUZ:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});var a=r("/SIk");const i=()=>{const e=!0;function t(){return{width:window.innerWidth,height:window.innerHeight}}const{0:r,1:i}=(0,a.useState)(t);return(0,a.useEffect)((()=>{function e(){i(t())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[t,e]),r}},"7uiG":(e,t,r)=>{"use strict";r.d(t,{Nu:()=>y,Qy:()=>g,zz:()=>p,PH:()=>d,Lb:()=>m,kH:()=>f,Gt:()=>h,xG:()=>u});var a=r("LHeJ"),i=r("fYqI"),o=r("5vwO"),n=r("jgBC");new Set;const l={setItem(e,t,r){const a="object"===typeof t?JSON.stringify(t):t;if("function"!==typeof r)return new Promise(((t,r)=>{try{window.localStorage.setItem(e,a),t()}catch(i){r(i)}}));try{window.localStorage.setItem(e,a),r(null)}catch(i){r(i)}},getItem(e,t){if("function"!==typeof t)return new Promise((t=>{t((0,n.As)(window.localStorage.getItem(e)))}));t(null,(0,n.As)(window.localStorage.getItem(e)))},removeItem(e,t){if("function"!==typeof t)return new Promise((t=>{window.localStorage.removeItem(e),t()}));window.localStorage.removeItem(e),t(null)},clear(e){if("function"!==typeof e)return new Promise((e=>{window.localStorage.clear(),e()}));window.localStorage.clear(),e(null)},create(){return Object.create(this)}};function s(e){const t=new Map;return function(r,...a){if(t.has(r))return t.get(r);const i=e(r,...a);return t.set(r,i),i}}function c({stateKey:e,storageKey:t=e,defaultValue:r,validator:i,storage:s}){const c="undefined"!==typeof(u=s)?u:l.create();var u;return(0,a.Z)((d=(t,a)=>({[e]:r,[`set${(0,n.kC)(e)}`]:r=>t({[e]:r}),[`toggle${(0,n.kC)(e)}`]:()=>t({[e]:!a()[e]})}),(a,l,s)=>{const u=d((r=>{a(r);const i=l()[e];c.setItem(t,i)}),l,s);let m={};return c.getItem(t,((t,a)=>{let o;o="function"===typeof i?i(a)?a:r:null!==a&&void 0!==a?a:r,m={[e]:o}})),(0,o.Z)((0,o.Z)((0,o.Z)({},u),m),{},{[`clear${(0,n.kC)(e)}`](){c.removeItem(t),a(u)}})}));var d}const u=(0,a.Z)((e=>({disableMouse:!1,setDisableMouse:t=>e({disableMouse:t})})));const d=s((function(e){return c({stateKey:"miniMultiChartType",storageKey:`${e}-chart-miniMultiChartType`,defaultValue:i.k.Store.ChartMode.Single})})),m=s((function(e){return c({stateKey:"miniMultiChartWindows",storageKey:`${e}-chart-miniMultiChartWindows`,defaultValue:["","","",""]})})),p=s((function(e){return c({stateKey:"lastSelectedMiniMultiChartWindow",storageKey:`${e}-chart-lastSelectedMiniMultiChartWindow`,defaultValue:0})})),f=s((function(e){return c({stateKey:"priceType",storageKey:`${e}-chart-priceType`,defaultValue:i.k.Store.PriceType.Last})})),g=s((function(e){return c({stateKey:"interval",storageKey:`${e}-chart-interval`,defaultValue:i.k.Store.DisplayIntervals["1d"]})})),y=s((function(e){return c({stateKey:"chartType",storageKey:`${e}-chart-type`,defaultValue:i.k.Store.OriginalChartStyle.CandleBar})}));var b=r("rfrl");const h=(0,a.Z)((e=>({posCalcData:{},setPosCalcData:(t,r,a)=>e((0,b.ZP)((e=>{if(e.posCalcData[t]||(e.posCalcData[t]={}),t&&r){e.posCalcData[t][r]!==a&&(e.posCalcData[t][r]=a)}})))})))},"d/ge":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});const a=r.p+"static/media/basic.d60eae70.png"},rIPn:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});const a=r.p+"static/media/logo-en.35f45b25.svg"},JPJJ:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});const a=r.p+"static/media/loss.c828dc1f.png"},ZSN8:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});const a=r.p+"static/media/win.7dae4d1a.png"}}]);